/*
 * Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.
 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c=function(){},d=a("jquery"),e=function(a,b){this.type="WebSocket",this.url=a,this.publisher=b};e.prototype={is:function(a){function b(a){if(!(d instanceof WebSocket))return"closed"===a;switch(a){case"connecting":return d.readyState===d.CONNECTING;case"open":return d.readyState===d.OPEN;case"closing":return d.readyState===d.CLOSING;case"closed":return d.readyState===d.CLOSED;default:return!1}}function c(){if(!(d instanceof WebSocket))return"closed";switch(d.readyState){case d.CLOSING:return"closing";case d.CLOSED:return"closed";case d.OPEN:return"open";case d.CONNECTING:return"connecting";default:throw new Error("Unexpected socket readyState")}}var d=this.socket;return"string"==typeof a?b(a):c()},connect:function(a,b){function c(a,b){var d=e.onOpen;"string"==typeof a&&(e.url=a),"string"!=typeof e.url?f.reject({message:"Invalid url"}):(e.socket=new WebSocket(e.url),e.publish(b),e.onOpen=function(){e.onOpen=d,f.resolve(),e.onOpen.apply(e,arguments)},e.socket.onerror=function(){f.reject.apply(c,arguments)})}var e=this,f=d.Deferred();return this.is("closed")?c(a,b):this.close().done(function(){c(a,b)}).fail(function(){f.reject.apply(c,arguments)}),f.promise()},close:function(){var a,b,c=this.socket,e=d.Deferred();if(c instanceof WebSocket)switch(b=c.onclose,c.onclose=function(){"function"==typeof b&&b.apply(this,arguments),e.resolve.apply(e,arguments)},a=c.onerror,c.onerror=function(){"function"==typeof a&&a.apply(this,arguments),e.reject.apply(e,arguments)},this.is()){case"closing":break;case"closed":e.resolve();break;case"open":case"connecting":c.close()}else e.resolve();return e.promise()},publish:function(a){var b,c=this;"undefined"!=typeof a&&(this.publisher=a),b=this.publisher,this.socket.onopen=function(){var a=Array.prototype.slice.call(arguments,0);c.onOpen&&c.onOpen.apply(c,a),a.unshift("stream:open"),b&&b.trigger.apply(b,a)},this.socket.onclose=function(){var a=Array.prototype.slice.call(arguments,0);c.onClose&&c.onClose.apply(c,a),a.unshift("stream:close"),b&&b.trigger.apply(b,a)},this.socket.onmessage=function(a){var d=Array.prototype.slice.call(arguments,0),e=JSON.parse(a.data),f=e.status||"message";c.onMessage&&c.onMessage.apply(c,d),f=e.error?"error":e.status?e.status:"message",d.unshift("stream:"+f),b&&b.trigger.apply(b,d)}},send:function(){function a(){d.socket.send.apply(d.socket,c)}var b,c=arguments,d=this,e=this.is();switch(e){case"open":a();break;case"closed":this.connect().done(function(){a()});break;case"connecting":b=this.onOpen,this.onOpen=function(){b.apply(d,arguments),a()}}},onOpen:c,onClose:c,onMessage:c,destroy:function(){this.socket.close()}},b.exports=function(){function a(a,c){return b instanceof e?(a&&a!==b.url&&b.close().then(function(){b.connect(a)}),c&&c!==b.publisher&&b.publish(c)):b=new e(a,c),b}var b;return{getStream:a}}()},{jquery:103}],2:[function(a,b){var c=a("./MVC"),d=a("jquery"),e=c.Collection,f=a("../../utilities/transducers/append"),g=a("../../utilities/transducers/transduce");b.exports=e.extend({initialize:function(a,b){b=b||{},this.apiKey=null,this.remote=null,this.secure=null,"undefined"!=typeof b.apiKey&&(this.apiKey=b.apiKey,delete b.apiKey),"undefined"!=typeof b.remote&&(this.remote=b.remote,delete b.remote,"undefined"!=typeof b.secure?(this.secure=b.secure,delete b.secure):this.secure=!1),e.prototype.initialize.apply(this,arguments)},add:function(){return e.prototype.add.apply(this,arguments),this},fetchModels:function(a){var b=d.Deferred(),c=0,e=0,f=this.length,g=[],h=this;return this.each(function(d){d.fetch(a).done(function(a){c++,g.push(a),b.notify(d,a),g.length===f&&0===e&&b.resolve(h,g)}).fail(function(a){e++,g.push(a),b.notify(d,a),g.length==f&&e>0&&b.reject(h,g)})}),b},saveModels:function(){var a=d.Deferred(),b=0,c=0,e=[],f=this;return this.each(function(d){d.save().done(function(g){b++,e.push(g),a.notify(d,g),e.length===f.length&&0===c&&a.resolve(f,e)}).fail(function(b){c++,e.push(b),a.notify(d,b),e.length==f.length&&c>0&&a.reject(f,e)})}),a},setIdOrder:function(a){var b=this.comparator;this.comparator=function(b){var c=b.cid;return a.indexOf(c)},this.sort(),this.comparator=b},hasNewModels:function(){var a=!1;return this.each(function(b){b.isNew()&&(a=!0)}),a},isBootstrapped:function(a){return this._bootstrapped="boolean"==typeof a?a:this._bootstrapped||!1,this._bootstrapped},bootstrap:function(a){var b=d.Deferred(),c=this;return this.isBootstrapped()?b.resolve(this.toJSON()):this.fetch(a).done(function(a){c._bootstrapped=!0,b.resolve(a)}).fail(b.reject).progress(b.notify),b.promise()},search:function(a,b){b=b||{};var c=[],d="g"+(b.caseSensitive?"":"i"),e=b.words?new RegExp("(\\W|^)"+b.needle+"(\\W|$)",d):b.regExp?new RegExp(b.needle,d):new RegExp(b.needle,d);return c="undefined"!=typeof b.needle&&""!==b.needle?this.filter(function(b){return!!b.get(a).match(e)}):this.models},fetch:function(){var a=this;return this.trigger("request:collection",this),e.prototype.fetch.apply(this,arguments).done(function(b,c,d){a.trigger("sync:collection",a,d)})},transduce:function(a){var b=this.models;return g(a,f,b)}})},{"../../utilities/transducers/append":147,"../../utilities/transducers/transduce":152,"./MVC":3,jquery:103}],3:[function(a,b){var c=a("underscore"),d=a("jquery"),e=a("backbone"),f=e.sync,g=d(document);e.$=d,e.ajaxSettings={STATUS:{OK:200,UNAUTHORIZED:401,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500},setup:function(){return d.ajaxSetup.apply(e.$,arguments)},start:function(){return g.ajaxStart.apply(g,arguments)},send:function(){return g.ajaxSend.apply(g,arguments)},success:function(){return g.ajaxSuccess.apply(g,arguments)},error:function(){return g.ajaxError.apply(g,arguments)},stop:function(){return g.ajaxStop.apply(g,arguments)}},e.sync=function(a,b,e){"use strict";var g=c.result(b,"url"),h=b.remote,i=b.secure,j=b.apiKey;return"object"!=typeof e&&(e={}),e.crossDomain||(e.crossDomain=!0),e.xhrFields||(e.xhrFields={withCredentials:!1}),h&&(e.url=[i?"https://":"http://",h+"/",g].join("")),j&&(e.data=d.extend({},e.data,{key:j})),f(a,b,e)},b.exports=e},{backbone:454,jquery:103,underscore:458}],4:[function(a,b){"use strict";var c=a("./MVC"),d=a("jquery"),e=c.Model;b.exports=e.extend({initialize:function(a,b){b=b||{},this.secure=this.collection?this.collection.secure:null,this.remote=this.collection?this.collection.remote:null,this.apiKey=this.collection?this.collection.apiKey:null,"undefined"!=typeof b.apiKey&&(this.apiKey=b.apiKey,delete b.apiKey),"undefined"!=typeof b.remote&&(this.remote=b.remote,delete b.remote,"undefined"!=typeof b.secure?(this.secure=b.secure,delete b.secure):this.secure=!1),e.prototype.initialize.apply(this,arguments)},isBootstrapped:function(a){return this._bootstrapped="boolean"==typeof a?a:this._bootstrapped||!1,this._bootstrapped},bootstrap:function(a){var b=d.Deferred(),c=this;return this.isBootstrapped()?(b.resolve(this.toJSON()),a&&a.success&&a.success(this.toJSON())):this.fetch().done(function(d){c._bootstrapped=!0,b.resolve(d),a&&a.success&&a.success(d)}).fail(b.reject).progress(b.notify),b.promise()},matchesSearch:function(a,b){b=b||{};var c="g"+(b.caseSensitive?"":"i"),d=b.words?new RegExp("(\\W|^)"+b.needle+"(\\W|$)",c):b.regExp?new RegExp(b.needle,c):new RegExp(b.needle,c);return"undefined"!=typeof b.needle&&""!==b.needle?!!this.get(a).match(d):!0}})},{"./MVC":3,jquery:103}],5:[function(a,b){"use strict";var c=a("underscore"),d=a("./MVC.js"),e=a("jquery"),f=a("backbone"),g=d.View;b.exports=g.extend({defaults:{},initialize:function(a){this.childViews=[],this.options=e.extend({},this.defaults,a)},setElement:function(a,b){return this.$el&&this.undelegateEvents(),this.$el=a instanceof f.$?a:f.$(a),this.$el.length>1&&(this.$el=this.$el.filter(function(a,b){return void 0!==b.innerHTML})),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},$wrapElement:function(a){var b=e(a);return b.length>1&&(b=b.filter(function(a,b){return void 0!==b.innerHTML})),b},_removeChildViews:function(){c.each(this.childViews,function(a){a&&a.remove()}),this.childViews=[]},popChildView:function(a){var b=this.childViews,c=b.indexOf(a);return-1!==c?b.splice(c,1):null},empty:function(){return this._removeChildViews(),this.$el.children().remove(),this},remove:function(){this._removeChildViews(),g.prototype.remove.call(this,arguments)},delegateEvents:function(){g.prototype.delegateEvents.apply(this,arguments),c.each(this.childViews,function(a){a&&a.delegateEvents&&a.delegateEvents()})}})},{"./MVC.js":3,backbone:454,jquery:103,underscore:458}],6:[function(a,b){b.exports=a("./MVC"),b.exports.Model=a("./Model"),b.exports.View=a("./View"),b.exports.Collection=a("./Collection")},{"./Collection":2,"./MVC":3,"./Model":4,"./View":5}],7:[function(a,b){"use strict";b.exports={TIME_WINDOW_SCALE:{HOUR:"HOUR",ROLLING_HOUR:"ROLLING_HOUR",DAY:"DAY",WEEK:"WEEK",MONTH:"MONTH",QUARTER:"QUARTER",YEAR:"YEAR",CUSTOM:"CUSTOM",ALL:"ALL"},VARIABLE_TYPES:[{type:"string",label:"String"},{type:"text",label:"Text"},{type:"integer",label:"Integer"},{type:"float",label:"Float"},{type:"bool",label:"Bool"},{type:"attribute",label:"Attribute"},{type:"color",label:"Color"},{type:"multilist",label:"Multi Value List"},{type:"singlelist",label:"Single Value List"},{type:"group",label:"Group"},{type:"multi-group",label:"Multi Group"},{type:"metric",label:"Metric"},{type:"multi-metric",label:"Multi-Metric"}],METRIC_TYPES:[{type:"general",label:"General"},{type:"color",label:"Color"}],GROUP_TYPES:[{type:"attribute",label:"Attribute"},{type:"time",label:"Time"}],TIME_SCALES:[{type:"MINUTE",label:"Minute"},{type:"HOUR",label:"Hour"},{type:"DAY",label:"Day"},{type:"WEEK",label:"Week"},{type:"MONTH",label:"Month"},{type:"YEAR",label:"Year"}]}},{}],8:[function(a,b){!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var c=a("./MVC"),d=a("./DataStreamProvider");b.exports={MVC:c,DataStreamProvider:d,ajaxSettings:c.ajaxSettings}},{"./DataStreamProvider":1,"./MVC":6}],9:[function(a,b){!function(){"use strict";function c(a,b){var c={};c[a]=b,f.ajaxSettings.setup({headers:c})}function d(a){f.ajaxSettings.error(function(b,c,d){var e=c.status,f=a[e];"function"==typeof f&&f(b,c,d)})}var e=a("jquery"),f=(a("underscore"),a("./Core")),g=f.DataStreamProvider,h=a("./components/ReconnectionService"),i=f.MVC,j=i.Events,k=a("./components/settings"),l=a("./utilities"),m=a("./controls"),n=a("./models/CurrentUser"),o=a("./collections/Sources"),p=a("./collections/Dashboards"),q=a("./models/Dashboard"),r=(a("./collections/SourceVisualizations"),a("./collections/Connections")),s=a("./views/MainView/index.js"),t=a("./views/MainMenu/index.js"),u=a("./views/Home/index.js"),v=a("./views/Dashboard/index.js"),w=a("./views/DashboardEditor/index.js"),x=i.Router.extend({defaults:{},routes:{"details/:sourceId":"sourceVisualizations","":"home",":sourceId-:visId":"visualization",":bookmarkId":"dashboard",demo:"demo"},initialize:function(a){var b=this;if(a=a||{},a.csrfHeaderName&&a.csrfToken&&c(a.csrfHeaderName,a.csrfToken),a.xWwwAuthHeaderName&&a.xWwwAuth&&c(a.xWwwAuthHeaderName,a.xWwwAuth),d({401:function(){b.login()}}),this.version=a.version,delete a.version,!(a.root instanceof HTMLElement))throw new Error("options.root must be an HTMLElement");this.main=new s,this.main.$el.appendTo(a.root),this.actionList=new m.RadialMenu({root:a.root}),m.setRoot(this.main.$section),"boolean"==typeof a.screenshotsEnabled?k.set("screenshotsEnabled",a.screenshotsEnabled):k.set("screenshotsEnabled",!1),k.set(a.systemVariables),k.set("branding",a.branding),this.dataStream=g.getStream(l.parseUrlParams().host,j),this.reconnectionService=new h(this.dataStream),this.user=new n(a.user),this.user.preferences.set(a.userPreferences),k.set("user",this.user.toJSON()),k.set("permissions",this.user.permissions),this.dashboards=new p(a.dashboards),this.connections=new r(a.connections),this.sources=new o(a.sources,{connections:this.connections}),this.mainMenu=new t({user:this.user,dashboards:this.dashboards,sources:this.sources,mainView$El:this.main.$el,version:this.version}),this.main.switchHeader(this.mainMenu),this._updateTitle(),this.listenTo(j,"bookmark:add",function(a){b.navigate(a.id)}),this.listenTo(j,"actionList:open",this._showActionList),this.listenTo(j,"actionList:close",this._hideActionList),this.listenTo(this.actionList,"open",this._onActionListOpen),this.listenTo(this.actionList,"close",this._onActionListClose),i.history.start()},_updateTitle:function(){k.branding&&e("head title").text(k.branding.title)},_showActionList:function(a){var b=this,c=a.at,d=a.actions;-1!==navigator.appVersion.indexOf("MSIE 10.")&&null===b.actionList.gestureTimeOut?(setTimeout(function(){b.actionList.close()},100),setTimeout(function(){b.actionList.reset(d)},200),setTimeout(function(){b.actionList.render(c)},300),setTimeout(function(){b.actionList.gestureTimeOut=null},600)):b.actionList.close().reset(d).render(c)},_hideActionList:function(){var a=this;setTimeout(function(){a.actionList.close()},1)},_onActionListOpen:function(){j.trigger("actionList:opened")},_onActionListClose:function(){j.trigger("actionList:closed")},login:function(){window.location="login"},demo:function(){function a(a,b){var c=a.filter(function(a){return a.name===b})[0];return c=c?c:a[0]}var b=new o,c=null,d=null,e=null;b.bootstrap().done(function(b){d=a(b,"Real Time Sales"),c=d.visualizations,c.bootstrap().done(function(b){e=a(b,"Bar Chart");var c="#"+d.id+"-"+e.visId;window.location.hash===c?window.location.reload():window.location="visualization"+c})})},sourceVisualizations:function(a){var b=this;this.sources.bootstrap().done(function(){if("bookmarks"===a)b.showAllVisForSource("bookmarks");else{var c=b.sources.findWhere({id:a});b.showAllVisForSource(c)}}).fail(function(){throw new Error("Cannot load sources.")})},showAllVisForSource:function(a){this.home(a)},visualization:function(a,b){e("#visLoading")&&e("#visLoading").show();var c=this,d=new v({sources:this.sources,bookmarks:this.favorites,user:this.user,main:c.main});this.main.switchSection(d),d.addVisualization(b,a).then(function(){c.dashboards.add(d.model),c.dashboards.trigger("dashboard:view",d)},function(){})},dashboard:function(a){function b(a){w.prototype.skipComponentsForSaving(a)}if("demo"===a)return void this.demo();if(e("#visLoading")&&e("#visLoading").show(),a.length>0&&0===a.lastIndexOf("?clientVersion",0))return void this.navigate("",{trigger:!0});var c=new q({id:a}),d=this;c.fetch().done(function(){b(c);var a=new v({model:c,sources:d.sources,bookmarks:d.favorites,user:d.user,main:d.main});d.main.switchSection(a),d.dashboards.trigger("dashboard:view",a)}).fail(function(){var a=new m.Notification({type:"error"});a.render("Failed to load bookmark"),d.navigate(""),d.home()})},home:function(a){var b=l.getURLParameter("visId"),c=l.getURLParameter("sourceId"),d=null;b&&c?this.navigate(c+"-"+b,{trigger:!0}):(d=new u({sourceCollection:this.sources,connections:this.connections,bookmarks:this.favorites,quickstartShow:!a,version:this.version}),this.main.switchSection(d),a&&"bookmarks"!==a?d.selectSourceViewAll(a):a?d.selectSourceViewAll():d.goHome())}});window.Zoomdata=x,window.Zoomdata.MVC=i,b.exports=x}()},{"./Core":8,"./collections/Connections":12,"./collections/Dashboards":13,"./collections/SourceVisualizations":28,"./collections/Sources":30,"./components/ReconnectionService":46,"./components/settings":55,"./controls":66,"./models/CurrentUser":113,"./models/Dashboard":114,"./utilities":144,"./views/Dashboard/index.js":196,"./views/DashboardEditor/index.js":204,"./views/Home/index.js":264,"./views/MainMenu/index.js":278,"./views/MainView/index.js":281,jquery:103,underscore:458}],10:[function(a,b){var c=a("../controls"),d=a("../views/ModalWarning/index.js"),e={OAUTH_SERVICE:"oauth",USERS_SERVICE:"service/users",ACCOUNT_SERVICE:"service/accounts",SOURCE_SERVICE:"service/sources",BOOKMARKS_SERVICE:"service/bookmarks",GROUPS_SERVICE:"service/groups",FIELDS_SERVICE:"service/sources/fields",VISUALIZATION_SERVICE:"service/visualizations",CONNECTION_SERVICE:"service/connections",SPARK_SERVICE:"service/sparkit",LDAP_SERVICE:"service/security/ldap/",SAML_SERVICE:"service/security/saml/",SYSTEM_VARIABLES_SERVICE:"service/system/variables",CUSTOM_VISUALIZATION_SERVICE:"service/visualizations?buildIn=false",BUILTIN_VISUALIZATION_SERVICE:"service/visualizations?buildIn=true",VIS_THUMBNAIL_SAVE_URL_PREFIX:"service/visualizations/",VIS_THUMBNAIL_SAVE_URL_SUFFIX:"/thumbnail/",ATTRIBUTE_TYPE:"ATTRIBUTE",MONEY_TYPE:"MONEY",NUMBER_TYPE:"NUMBER",INTEGER_TYPE:"INTEGER",TIME_TYPE:"TIME",TEXT_TYPE:"TEXT",NULL_TYPE:"NULL",AVG_FUNC:"AVG",SUM_FUNC:"SUM",MAX_FUNC:"MAX",MIN_FUNC:"MIN",LAST_VALUE_FUNC:"LAST_VALUE",DISTINCT_COUNT:"DISTINCT_COUNT",SYSTEM_TIMESTAMP_FILED_ID:"_ts",BUBBLES:"BUBBLES",VERTICAL_BARS:"VERTICAL_BARS",HORIZONTAL_BARS:"HORIZONTAL_BARS",ZOOMABLE_MAP:"ZOOMABLE_MAP",WORLD_MAP:"WORLD_MAP",MAP:"MAP",WORD_CLOUD:"WORD_CLOUD",PIE:"PIE",DONUT:"DONUT",PIVOT_TABLE:"PIVOT_TABLE",TRENDS:"TRENDS",TREE_MAP:"TREE_MAP",HEAT_MAP:"HEAT_MAP",SIDE_BY_SIDE_BARS:"SIDE_BY_SIDE_BARS",MULTI_LINE:"MULTI_LINE",MULTI_METRIC_TREND:"MULTI_METRIC_TREND",FINGERPAINT:"FINGERPAINT",STACKED_BARS:"STACKED_BARS",HORIZONTAL_STACKED_BARS:"HORIZONTAL_STACKED_BARS",HORIZONTAL_100_STACKED_BARS:"HORIZONTAL_100_STACKED_BARS",TEXT_SEARCH:"TEXT_SEARCH",ROLE_CREATE_SOURCES:"ROLE_CREATE_SOURCES",ROLE_MANAGE_ALL_SOURCES:"ROLE_MANAGE_ALL_SOURCES",ROLE_VIEW_ALL_SOURCES:"ROLE_VIEW_ALL_SOURCES",ROLE_MANAGE_SOME_SOURCES:"ROLE_MANAGE_SOME_SOURCES",ROLE_SAVE_DASHBOARDS:"ROLE_SAVE_DASHBOARDS",ROLE_SHARE_DASHBOARDS:"ROLE_SHARE_DASHBOARDS",ROLE_SAVE_FILTERS:"ROLE_SAVE_FILTERS"};e.SOURCE_FEATURES={LV_METRIC:"LV_METRIC"},e.objectFieldTypes=[e.ATTRIBUTE_TYPE,e.MONEY_TYPE,e.NUMBER_TYPE,e.INTEGER_TYPE,e.TIME_TYPE,e.TEXT_TYPE,e.NULL_TYPE],e.objectFieldTypesWoTime=[e.ATTRIBUTE_TYPE,e.MONEY_TYPE,e.NUMBER_TYPE,e.INTEGER_TYPE,e.TEXT_TYPE],e.numericFieldTypes=[e.MONEY_TYPE,e.NUMBER_TYPE,e.INTEGER_TYPE],e.metricFunctions=[e.SUM_FUNC,e.AVG_FUNC,e.MAX_FUNC,e.MIN_FUNC,e.LAST_VALUE_FUNC],e.accessDeniedTemplate='<label style="color: #939393">You do not have rights for this details.</label>',e.showErrorWithMessage=function(a,b){var d=new c.Notification({type:"error",status:b});d.render(a)},e.showDemoUserPermission=function(a){a=a||{};var b='This demo has been set to read-only mode. Download your own <a href="http://www.zoomdata.com/download" target="_blank">Zoomdata from our website</a> to edit your own sources.',c=a.description||b,e=a.callback||$.noop,f=new d({title:"No permissions",description:c,handlers:[{label:"Ok",callback:e}]});f.showup()},b.exports=e},{"../controls":66,"../views/ModalWarning/index.js":298}],11:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("./../../utilities"),a("../../Core/MVC/Collection")),e=a("../../models/ComponentSource");b.exports=d.extend({model:e,initialize:function(a,b){return b=b||{},b.visId&&(this.setVisId(b.visId),delete b.visId),b.name&&(this.setVisName(b.name),delete b.name),d.prototype.initialize.apply(this,arguments),this},getComponentsNamespace:function(){return this.getVisName().replace(/[^\w]/g,"_")},load:function(a){a=a||{};var b=c.Deferred(),d=this.models.length,e=0,f=a.namespace||this.getComponentsNamespace();return f=f||this.getComponentsNamespace(),this.each(function(a){a.load(f).then(function(){e++,e==d&&b.resolve()},b.reject)}),b.promise()},execute:function(){this.each(function(){})},url:function(){if(this.visId)return"service/visualizations/"+this.visId+"/source/";throw new Error("Visualization id for the component is not defined")},setVisName:function(a){this.name=a},getVisName:function(){return this.name},setVisId:function(a){this.visId=a}})}()},{"../../Core/MVC/Collection":2,"../../models/ComponentSource":111,"./../../utilities":144,jquery:103}],12:[function(a,b){!function(){"use strict";var c="service/connections",d=a("../../Core/MVC/Collection"),e=a("../../models/Connection");b.exports=d.extend({model:e,url:c})}()},{"../../Core/MVC/Collection":2,"../../models/Connection":112}],13:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC/Collection"),f=a("../../models/Dashboard"),g=["id","name","description","icon","lastModified","viewsCount","shared","rememberTime","layout"].join(","),h=e.extend({url:"service/bookmarks",model:f,initialize:function(a,b){return b||(b={}),this.lightweight=!1,"boolean"==typeof b.lightweight&&(this.lightweight=b.lightweight,delete b.lightweight),b&&b.source&&!b.vis?this.url+="/source/"+b.source+"?fields="+g:b&&b.vis&&!b.source?this.url+="/vis/"+b.vis+"?fields="+g:b&&b.vis&&b.source&&(this.url+="/source/"+b.source+"/vis/"+b.vis+"?fields="+g),b.layout&&(this.url+=",layout"),b.visualizations&&(this.url+=",visualizations"),e.prototype.initialize.apply(this,arguments)},fetch:function(a){var b=d.clone(a)||{};return("boolean"==typeof b.lightweight?b.lightweight:this.lightweight)&&(b.data=c.extend({},b.data,{fields:g})),e.prototype.fetch.call(this,b)}});b.exports=h}()},{"../../Core/MVC/Collection":2,"../../models/Dashboard":114,jquery:103,underscore:458}],14:[function(a,b){!function(){"use strict";var c=a("../../models/Error"),d=a("../../Core/MVC/Collection"),e=d.extend({model:c});b.exports=e}()},{"../../Core/MVC/Collection":2,"../../models/Error":115}],15:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC/Collection"),d=a("../../models/FilterSet"),e=c.extend({model:d,initialize:function(a,b){return b=b||{},this.sourceId=b.sourceId,this.url="service/filter-sets?sourceId="+this.sourceId,c.prototype.initialize.apply(this,arguments),this}});b.exports=e}()},{"../../Core/MVC/Collection":2,"../../models/FilterSet":118}],16:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("../../models/Filter"),e=a("../../Core/MVC/Collection"),f=a("moment"),g="YYYY-MM-DD HH:mm:ss",h=a("../../utilities");b.exports=e.extend({model:d,initialize:function(a,b){this.options=$.extend({},b,this.options),e.prototype.initialize.apply(this,arguments)},toRequest:function(){var a=this,b=this.options.fields||[];return this.map(function(d){var e=d.get("path"),f=d.get("value"),g=c.findWhere(b,{name:e}),h=null;return g&&"TIME"===g.type&&(f=f instanceof Array?f.map(a.getFormatedTimeValue):a.getFormatedTimeValue(f)),h={path:e,value:f,operation:d.get("operation")}})},getFormatedTimeValue:function(a){var b="";return b=f.utc(Number.isNaN(a)?h.noUTCString(a):isNaN(new Date(a))?h.noUTCString(a):a),b.format(g)}})}()},{"../../Core/MVC/Collection":2,"../../models/Filter":117,"../../utilities":144,moment:457,underscore:458}],17:[function(a,b){b.exports=a("./Filters")},{"./Filters":16}],18:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC/Model"),d=a("../../Core/MVC/Collection"),e=c.extend({defaults:{func:"MVEL",type:"FORMULA",visible:!0},idAttribute:"name"});b.exports=d.extend({model:e,initialize:function(a,b){return b=b||{},b.sourceId&&(this.sourceId=b.sourceId,delete b.sourceId),d.prototype.initialize.apply(this,arguments),this},setSource:function(a){return this.sourceId=a,this},url:function(){if(this.sourceId)return"service/sources/"+this.sourceId+"/formulas/";throw new Error("sourceId must be defined")}})}()},{"../../Core/MVC/Collection":2,"../../Core/MVC/Model":4}],19:[function(a,b){b.exports=a("./Formulas.js")},{"./Formulas.js":18}],20:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("backbone"),e=a("./../../models/Zoomdata.Models.js").Datum,f=d.Collection.extend({model:e,metric:null,initialize:function(a,b){c.bindAll(this,"setSortOrder"),this.metric=b.metric},setSortOrder:function(a){this.comparator="valueAscending"===a?function(a){return this.metric.raw(a.attributes)}:"valueDescending"===a?function(a){return-this.metric.raw(a.attributes)}:"alphabetical"===a?function(a){return a.get("group")}:"reverseAlphabetical"===a?function(a,b){return a.get("group")>b.get("group")?-1:a.get("group")<b.get("group")?1:0}:"date"===a?function(a){return+a.get("group")}:null,this.comparator&&this.sort()}});b.exports=f}()},{"./../../models/Zoomdata.Models.js":139,backbone:454,underscore:458}],21:[function(a,b){b.exports=a("./Graph.js")},{"./Graph.js":20}],22:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC/Collection"),f=a("../../models/GroupBy");b.exports=e.extend({model:f,initialize:function(a,b){return b=b||{},e.prototype.initialize.apply(this,arguments),this.options=c.extend({},this.defaults,b),this.options.definition?(this.definition=d.extend({},this.options.definition),this.definition.config=this.definition.config?JSON.parse(this.definition.config):{},delete this.options.definition):this.definition={},b.silent=!1,this.on("add",this.initGroupByLabel,this),this},getName:function(){var a=this.definition.config,b=a&&a.groupNames?a.groupNames[0]:this.definition.name;return b},initGroupByLabel:function(a){var b=this.definition.config,c=b&&b.groupNames?b.groupNames.slice(0):[this.definition.name],d=this.models.indexOf(a);c&&"string"==typeof c[d]&&(a.label=c[d])},getAttribute:function(){var a=this.at(0),b="";return a&&(b=a.getAttribute()),b},getAttributes:function(){return this.pluck("name")},setAttribute:function(a,b){var c=this.at(0);return c&&c.setAttribute(a,b),this},setAttributes:function(a,b){var c=this;return Array.isArray(a)?(a.forEach(function(a,b){c.at(b)&&c.at(b).setAttribute(a,{silent:!0})}),b&&b.silent||this.trigger("change",this)):this.setAttribute(a,b),this},getLimit:function(){var a=this.at(0);return a.getLimit()},setLimit:function(a,b){var c=this.at(0);return c&&c.setLimit(a,b),this}})}()},{"../../Core/MVC/Collection":2,"../../models/GroupBy":119,jquery:103,underscore:458}],23:[function(a,b){b.exports=a("./GroupBys.js")},{"./GroupBys.js":22}],24:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("./../../utilities"),a("../../models/LibrarySource")),e=a("./../ComponentSources");b.exports=e.extend({model:d,load:function(){var a=c.Deferred();return console.log("Loading libraries:",this.pluck("id")),this.loadAll(this.models).done(function(){a.resolve()}).fail(function(){a.reject()}),a},loadAll:function(a){function b(c){c.load().then(function(){e++;var c=e;e===f?d.resolve():b(a[c])},d.reject)}var d=c.Deferred(),e=0,f=a.length;return b(a[e]),d},url:function(){return"service/visualizations/libs/"}})}()},{"../../models/LibrarySource":120,"./../../utilities":144,"./../ComponentSources":11,jquery:103}],25:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("../../Core/MVC/Collection"),e=a("../../models/Metric");b.exports=d.extend({model:e,initialize:function(a){return a=a||{},d.prototype.initialize.apply(this,arguments),this.options=c.extend({},this.defaults,a),this}})}()},{"../../Core/MVC/Collection":2,"../../models/Metric":122,jquery:103}],26:[function(a,b){!function(){"use strict";function c(a){var b="boolean"==typeof a.get("visible")?a.get("visible"):!0;return new g({name:a.get("name"),label:a.get("label"),type:"FORMULA",func:"mvel",visible:b})}var d=a("jquery"),e=a("underscore"),f=a("../../Core/MVC/Collection"),g=a("../../models/ObjectField"),h=a("./../Formulas"),i=["ATTRIBUTE","TEXT","NUMBER","MONEY","INTEGER","COUNT OF","FORMULA"],j=f.extend({model:g,volumeField:new g({label:"Volume",name:"count",type:"NUMBER",visible:!0}),noneField:new g({label:"None",name:"none",type:"NONE",visible:!0}),defaults:{},initialize:function(a,b){var c;b=b||{},b.sourceId&&(this.sourceId=b.sourceId,delete b.sourceId),b.source&&(this.source=b.source,delete b.source),f.prototype.initialize.apply(this,arguments),c=this.where({type:"FORMULA"}),this.formulas=new h(c,{secure:this.secure,remote:this.remote,apiKey:this.apiKey,sourceId:this.sourceId}),this.listenTo(this.formulas,"add",this._onFormulaAdd),this.listenTo(this.formulas,"remove",this._onFormulaRemove),this.listenTo(this.formulas,"change",this._onFormulaChange),this.listenTo(this.formulas,"reset",this._onFormulasReset),this.listenTo(this.formulas,"sync",this._syncFormulas)},constructor:function(){f.prototype.constructor.apply(this,arguments),this._ensureVolumeField(),this._ensureNoneField(),this.on("all",this._ensureVolumeField),this.on("all",this._ensureNoneField)},_syncFormulas:function(){var a=this.formulas,b=a.map(c),d=this.where({type:"FORMULA"}),f=e.filter(d,function(a){var c=e.find(b,function(b){return b.id!==a.id});return"undefined"==typeof c});this.set(b,{remove:!1}),this.remove(f)},_onFormulaAdd:function(a){var b=c(a);this.add(b,{merge:!0})},_onFormulaRemove:function(a){var b=c(a);this.remove(b,{merge:!0})},_onFormulaChange:function(a){var b=c(a),d=this.get(b.id);d&&d.set(b.toJSON())},_onFormulasReset:function(a){var b=a.map(c);this.add(b)},_ensureVolumeField:function(a){var b=this.volumeField,c=this.get(b.id);c||this.add(b,a)},_ensureNoneField:function(a){var b=this.noneField,c=this.get(b.id);c||this.add(b,a)},setSource:function(a){var b=a.get("id");return this.source=a,this.sourceId=b,this.formulas.setSource(b),this},url:function(){if(this.sourceId)return"service/sources/"+this.sourceId+"/attributes/";throw new Error("sourceId must be defined")},hasLastValue:function(){return this.source?this.source.hasLastValue():null},fetch:function(a){function b(){h++,2==h&&(g._ensureVolumeField(),g._syncFormulas(),i.resolve(g.toJSON()))}function c(a){e.each(a,function(a){if(a.distinctCount){var b={name:a.name,label:a.label,type:"COUNT OF",func:"distinct_count",visible:!0};g.add(b)}})}a=a||{},a.reset=!0;var g=this,h=0,i=d.Deferred(),j=this.formulas.fetch(),k=f.prototype.fetch.call(this,a);return k.done(function(a){c(a),b()}).fail(i.reject),j.done(b).fail(i.reject),i.promise()},comparator:function(a){return i.indexOf(a.get("type"))}});b.exports=j}()},{"../../Core/MVC/Collection":2,"../../models/ObjectField":124,"./../Formulas":19,jquery:103,underscore:458}],27:[function(a,b){b.exports=a("./ObjectFields.js")},{"./ObjectFields.js":26}],28:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC/Collection"),d=a("../../models/SourceVisualization");b.exports=c.extend({defaults:{},initialize:function(a,b){return b=b||{},b.sourceId&&(this.sourceId=b.sourceId,delete b.sourceId),c.prototype.initialize.apply(this,arguments),this},setSource:function(a){return this.sourceId=a,this},model:d,url:function(){if(this.sourceId)return"service/sources/"+this.sourceId+"/visualizations";throw new Error("sourceId must be defined")}})}()},{"../../Core/MVC/Collection":2,"../../models/SourceVisualization":130}],29:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC/Collection"),f=a("../../models/Source"),g=a("../Connections"),h=["name","description","type","subStorageType","streamType","lastModified","viewsCount","storageConfiguration","showTimeLine","enabled"].join(","),i=e.extend({url:"service/sources",model:f,initialize:function(a,b){return b=b||{},"boolean"==typeof b.lightweight&&(this.lightweight=b.lightweight,delete b.lightweight),b.connections?(this.connections=b.connections,delete b.connections):this.connections=new g,this.listenTo(this,"sync",this.addConnectionToSources),e.prototype.initialize.apply(this,arguments)},filterByVisualizations:function(a){var b=[];return this.each(function(c){c.visualizations.where(a).length&&b.push(c)
}),b},filterDisabled:function(){return this.remove(this.filter(function(a){return!a.get("enabled")})),this},fetch:function(a){var b=d.clone(a)||{};return("boolean"==typeof b.lightweight?b.lightweight:this.lightweight)&&(b.data=c.extend({},b.data,{fields:h})),e.prototype.fetch.call(this,b)},addConnectionToSources:function(){var a=this.connections.groupBy(function(a){return a.get("id")});this.models.forEach(function(b){var c=b.get("storageConfiguration");if(c){var d=a[c.connectionId];c&&d&&(b.connection=d[0])}})}});b.exports=i}()},{"../../Core/MVC/Collection":2,"../../models/Source":129,"../Connections":12,jquery:103,underscore:458}],30:[function(a,b){b.exports=a("./Sources.js")},{"./Sources.js":29}],31:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC/Collection"),d=a("../../models/UserPreference"),e=a("jquery"),f=c.extend({model:d,url:"service/user/preferences",initialize:function(a,b){b=b||{},b.userId&&(this.setUserId(b.userId),delete b.userId),b.accountId&&(this.setAccountId(b.accountId),delete b.accountId),c.prototype.initialize.apply(this,arguments)},setUserId:function(a){this.userId=a,this.each(function(b){b.setUserId(a)})},setAccountId:function(a){this.accountId=a,this.each(function(b){b.setAccountId(a)})},fetch:function(a){var b={};return a=a||{},"undefined"!=typeof this.accountId&&(b.accountId=this.accountId),"undefined"!=typeof this.userId&&(b.userId=this.userId),"undefined"==typeof a.remove&&(a.remove=!1),a.data=e.extend({},b,a.data),c.prototype.fetch.call(this,a)}});b.exports=f}()},{"../../Core/MVC/Collection":2,"../../models/UserPreference":135,jquery:103}],32:[function(a,b){b.exports=a("./UserPreferences")},{"./UserPreferences":31}],33:[function(a,b){!function(){"use strict";var c=a("../../models/VisualizationConfig"),d=a("./../SourceVisualizations"),e=d.extend({model:c});b.exports=e}()},{"../../models/VisualizationConfig":138,"./../SourceVisualizations":28}],34:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("../../Core/MVC");b.exports=c.clone(d.Events)}()},{"../../Core/MVC":6,underscore:458}],35:[function(a,b){var c=a("underscore"),d=function(){var a=this,b={show:[],hide:[],select:[],deselect:[],remove:[],apply:[],error:[]},d={};c.each(b,function(e,f){d[f]=function(a){return b[f].push(a),d},a[f]=function(a){c.each(b[f],function(b){b(a)})}}),this.result=function(){return d}};b.exports={Picker:function(){return new d}}},{underscore:458}],36:[function(a,b){!function(){function c(a,b,c){var d="function"==typeof c.data,h=!!c.actions,k=!!c.events,l=!!c.tooltip,m=c.interactive,n=!!c.draggable,o=!!c.droppable;if(j.bindAll(this,"_onInteractionStart","_onInteraction","_onInteractionEnd","_getData","_getTooltipColor"),"undefined"!=typeof i(b).data("interactiveElement")&&null!==i(b).data("interactiveElement")){var p="An element already is an instance of interactiveElement";throw new Error(p)}this._manager=a,this.element=b,this.$el=i(this.element),this.gestureTimeOut=null,this._createDroppable=f,this._destroyDroppable=g,this.options={},this.options.interactions=i.extend({},this.defaults.interactions,c.interactions),this.data=d?c.data:null,h&&(this.options.actions=c.actions),k&&(this.options.interactions.action=c.events),l&&(this.tooltip=c.tooltip,this.ownTooltip=c.actionListTooltip,this.tooltipOriginalConfig=c.tooltip.originalConfig||null,this._createTooltip=e,o||this._createTooltip()),this.droppable=o?this._createDroppable(c.droppable,this.options.interactions.action):null,this.draggable=n?this._createDraggable(c.draggable):null,this._allowed=[],this._prevented=[],m&&(this._allow(this.options.interactions.start),this._allow(this.options.interactions.action),this._allow(this.options.interactions.end)),this.$el.data("interactiveElement",this)}function d(){return!1}function e(){function a(a,b){d.showTooltip(a,b)}function b(a,b){d.tooltip&&d.moveTooltip(a,b)}function c(){d.hideTooltip()}var d=this;this.tooltip&&(this.$el.off("mousemove",b),this.$el.off("mouseenter",a),this.$el.off("mouseleave",c),this.$el.on("mousemove",b),this.$el.on("mouseenter",a),this.$el.on("mouseleave",c))}function f(a,b){var c=this,e=this._manager,f=this.options.droppable=i.extend({},this.defaults.droppable,a);this.$el.off("mouseenter"),this.$el.off("mouseup"),this.$el.off("mouseleave"),this.tooltip&&(this.$el.off("mousemove"),this.$el.on("mousemove",function(a,b){c.tooltip&&c.moveTooltip(a,b)})),this.$el.on("mouseenter",function(b,d){var g=e.getElementInAction("drag");if(c.showTooltip(b,d),g&&f.scope&&f.scope==g.options.draggable.scope){var h=this.getAttribute("data-zd-interactive-type");"attribute"===h||"metric"===h?i(this).addClass("over"):i(this).css({opacity:.7}),"function"==typeof a.over&&a.over.apply(this,g.$el.data(f.scope))}}),this.$el.on("mouseup",function(g){var h=e.getElementInAction("drag");if(h&&f.scope&&f.scope==h.options.draggable.scope){var j=this.getAttribute("data-zd-interactive-type");"attribute"===j||"metric"===j?i(this).removeClass("over"):i(this).css({opacity:1}),h.$el.draggable("option","revert",d);var k=h.$el.data(f.scope);if(-1!==b.indexOf("drop")){var l={left:g.pageX||g.originalEvent.pageX,top:g.pageY||g.originalEvent.pageY};setTimeout(function(){c.showActionsList(l,k)},10)}else"function"==typeof a.drop&&a.drop.apply(this,[k])}}),this.$el.on("mouseleave",function(){var b=e.getElementInAction("drag");if(c.hideTooltip(),b&&f.scope&&f.scope==b.options.draggable.scope){var d=this.getAttribute("data-zd-interactive-type");"attribute"===d||"metric"===d?i(this).removeClass("over"):i(this).css({opacity:1}),"function"==typeof a.out&&a.out.apply(this,b.$el.data(f.scope))}})}function g(){}function h(){var a;return a=-1!==navigator.appVersion.indexOf("MSIE 10.")?k.detectTouchDevice()?"MSPointerDown click":"click":k.detectTouchDevice()?"touchend":"click"}var i=a("jquery"),j=a("underscore"),k=a("../../../utilities/index"),l=a("../../../Core/MVC/main"),m=l.Events;c.prototype={defaults:{interactions:{start:"mousedown",action:h(),end:"mouseup"},draggable:{containment:"body",appendTo:"body",helper:"clone",revert:"invalid",addClasses:!1,dragClass:"zd-interactive-draggable",cursor:"pointer",cursorAt:{left:25,top:25},zIndex:2e3,scope:"default"},droppable:{addClasses:!1,tolerance:"pointer",activeClass:"zd-interactive-droppable-accepts",scope:"default"}},get:function(){var a={};if(0===arguments.length)a=this.options;else if(1===arguments.length)a=this.options[arguments[0]]||null;else for(var b=0;b<arguments.length;b++)a[arguments[b]]=this.options[arguments[b]]||null;return a},set:function(a){this.data=a.data||this.data,a.tooltip&&a.tooltip.originalConfig&&(this.tooltipOriginalConfig=a.tooltip.originalConfig)},_getData:function(){return this.data},_getTooltipColor:function(){return this.tooltipOriginalConfig&&this.tooltipOriginalConfig.color?this.tooltipOriginalConfig.color:!1},showTooltip:function(a){return this.tooltip?(this.tooltip.show({event:a,getter:this._getData,color:this._getTooltipColor}),this.ownTooltip&&!this.ownTooltip.hidden&&this.ownTooltip.tid===this.tooltip.tid?void this.hideTooltip():void 0):void 0},moveTooltip:function(a){return this.tooltip?this.ownTooltip&&!this.ownTooltip.hidden&&this.ownTooltip.tid===this.tooltip.tid?void this.hideTooltip():void this.tooltip.move({at:{top:a.clientY,left:a.clientX},event:a}):void 0},hideTooltip:function(){return this.tooltip&&this.tooltip.hide(),this},showActionsList:function(a,b){a=a||{};var c=this,d=b?c.options.dropActions:c.options.actions;return a.left="number"!=typeof a.left?this.$el.offset().left+this.$el.width()/2:a.left,a.top="number"!=typeof a.top?this.$el.offset().top+this.$el.height()/2:a.top,null===this.gestureTimeOut&&(m.trigger("actionList:open",{at:a,actions:d}),this._createOwnTooltip({at:a})),this},_createOwnTooltip:function(a){var b=this;this.hideTooltip(),this.ownTooltip.show({at:a.at,getter:this._getData,color:this._getTooltipColor}),this.ownTooltip.snap(),m.on("actionList:closed",function(){b._destroyOwnTooltip()})},_destroyOwnTooltip:function(){this.ownTooltip.unsnap(),m.off("actionList:closed")},isSVG:function(){return!("svg"!==this.element.tagName.toLowerCase()&&!this.element.ownerSVGElement)},_notify:function(a,b){this._manager._notify(a,this,b)},_createDroppable:f,_destroyDroppable:g,_createDraggable:function(a){var b=this,c=this.options.draggable=i.extend({},this.defaults.draggable,a);return c.start=function(d,e){var f=e.helper;b._dragHelper=f,b._notify("drag:start"),f.css("pointer-events","none"),f.hasClass(c.dragClass)||f.addClass(c.dragClass),"function"==typeof a.start&&a.start.apply(this,arguments)},c.drag=function(){"function"==typeof a.drag&&a.drag.apply(this,arguments)},c.stop=function(d,e){var f=e.helper;b._notify("drag:stop"),b.$el.draggable("option","revert",c.revert),f.css("pointer-events","all"),f.hasClass(c.dragClass)&&f.removeClass(c.dragClass),"function"==typeof a.stop&&a.stop.apply(this,arguments)},this.$el.on("touchend",function(a){var b=document.elementFromPoint(a.originalEvent.changedTouches[0].pageX,a.originalEvent.changedTouches[0].pageY);i(b).trigger("mouseup")}),this.$el.draggable(c),this.$el.data("draggable")},_destroyDraggable:function(){this.draggable&&this.draggable.destroy(),this._dragHelper instanceof i&&this._dragHelper.remove()},_isAllowed:function(a){return-1!==this._allowed.indexOf(a)},_allow:function(a){function b(){f.$el.on(e.start,f._onInteractionStart)}function c(){f.$el.on(e.action,f._onInteraction)}function d(){f.$el.on(e.end,f._onInteractionEnd)}var e=this.options.interactions,f=this;if(!this._isAllowed(a))switch(this._allowed.push(a),a){case e.start:b();break;case e.action:c();break;case e.end:d()}},_restrict:function(a){function b(){f.$el.off(e.start,f._onInteractionStart)}function c(){f.$el.off(e.action,f._onInteraction)}function d(){f.$el.off(e.end,f._onInteractionEnd)}var e=this.options.interactions,f=this;if(this._isAllowed(a))switch(this._allowed.splice(this._allowed.indexOf(a),1),a){case e.start:b();break;case e.action:c();break;case e.end:d()}},_isPrevented:function(a){return-1!==this._prevented.indexOf(a)},_prevent:function(a){var b=this.options.interactions;if(!this._isPrevented(a))switch(this._prevented.push(a),a){case b.start:this.$el.on(b.start,d);break;case b.action:this.$el.on(b.action,d);break;case b.end:this.$el.on(b.end,d)}},_onInteractionStart:function(){return this._notify("interaction:start"),null},_onInteraction:function(a){if(i(a.target).hasClass("prevent-click-element")||i(a.target).closest(".prevent-click").get(0))return null;var b=this.options,c=null;if(c=a.originalEvent&&a.originalEvent.changedTouches?a.originalEvent.changedTouches[0]:a,this._notify("interaction"),b.actions&&b.actions.length){if(1!==b.actions.length)return this.showActionsList({left:c.pageX||c.originalEvent.pageX,top:c.pageY||c.originalEvent.pageY}),!1;b.actions[0].action(i(c.target),c)}return null},_onInteractionEnd:function(){return this._notify("interaction:stop"),null},destroy:function(){var a=this.options.interactions;this._destroyDroppable(),this._destroyDraggable(),this._restrict(a.action),this._restrict(a.start),this._restrict(a.end),this.$el.data("interactiveElement",null)}},b.exports=c}()},{"../../../Core/MVC/main":6,"../../../utilities/index":144,jquery:103,underscore:458}],37:[function(a,b){b.exports=a("./InteractiveElementsController")},{"./InteractiveElementsController":36}],38:[function(a,b){!function(){function c(a){this.configure(a),this.elements=[],this._interactions={}}var d=a("jquery"),e=a("underscore"),f=a("../../../Core/MVC/main"),g=e.clone(f.Events),h=a("../Controller");c.prototype=e.extend({defaults:{},configure:function(a){"use strict";a||(a={}),a.actionList&&(this.actionList=a.actionList,delete a.actionList),this.options=d.extend({},this.defaults,a)},register:function(a,b){function c(a,b){b.actionList=d.actionList,d.registered(a)?d.updateElement(a,b):(d._addToRegistry(a,b),f.push(a))}var d=this,f=[];return a instanceof Array?e.each(a,function(a){c(a,b)}):c(a,b),f},release:function(a,b){function c(a){var b=d.getInteractiveElementFor(a);b&&(d._removeFromRegistry(b),f.push(a))}var d=this,f=[];return a instanceof Array?e.each(a,function(a){c(a,b)}):c(a,b),f},getInteractiveElementFor:function(a){return e.find(this.elements,function(b){return b.element==a})},registered:function(a){return!!this.getInteractiveElementFor(a)},updateElement:function(a,b){var c=this.getInteractiveElementFor(a);c&&c.set(b)},inProgress:function(a){return!!this._interactions[a]},getElementInAction:function(a){var b;return b=this.inProgress(a)?this._interactions[a]:null},_notify:function(a,b,c){c||(c={});var d=a.split(":")[0],e=a.split(":")[1]||"action";switch(e){case"start":this.inProgress(d)&&this._stop(d,c),this._start(d,b,c);break;case"stop":this._stop(d,c);break;case"action":this._trigger(d,b,c)}},_start:function(a,b){this._interactions[a]=b},_stop:function(a){delete this._interactions[a]},_trigger:function(a,b,c){var d=!!c.silent;d||this.trigger(a,b)},_removeFromRegistry:function(a){var b=this;e.each(e.keys(this._interactions),function(c){a==b.getElementInAction(c)&&b._stop(c)}),a.destroy(),this.elements.splice(this.elements.indexOf(a),1)},_addToRegistry:function(a,b){var c=new h(this,a,b);this.elements.push(c)},destroy:function(){for(;this.elements.length>0;)this._removeFromRegistry(this.elements[0])}},g),b.exports=c}()},{"../../../Core/MVC/main":6,"../Controller":37,jquery:103,underscore:458}],39:[function(a,b){b.exports=a("./InteractiveElementsManager")},{"./InteractiveElementsManager":38}],40:[function(a,b){var c,d=a("./Manager");b.exports=function(a){"use strict";return c instanceof d?c.configure(a):c=new d(a),c}},{"./Manager":39}],41:[function(a,b){!function(){"use strict";function c(a){var b=a.getter(),c=a.state,d=c.groupBy.getAttributes(),e=[],g=null,h=(d[0],c.options.fields),j="IN",k=b.attr||d[0];if(k){var l=i.findWhere(h,{name:k}),m=[b.group];if(l&&"TIME"===l.type){var n=b.group,o=f.time.millisecondsIn[c.get("timeTrendStep").toLowerCase()];j="BETWEEN",m=[n,n+o]}g={editable:!0,operation:j,label:l.label,path:k,value:m},e.push(g)}return c.groupBy.length>1&&(e.push({editable:!0,operation:"IN",path:d[1],value:[b.group]}),e.push({editable:!0,operation:"IN",path:d[0],value:[b.key]})),e}function d(a){var b="";return b=a.map(function(a){return a.value.join()}).join()}var e=a("../../Core/MVC"),f=a("../../utilities"),g=f.time.getEndTimeWithinStep,h=a("../../controls"),i=a("underscore"),j=a("jquery"),k=a("../../models/Metric"),l=f.MetricFormatter,m=a("./../../views/SmallObjectFieldItem"),n=a("./../../views/GroupedListView"),o=a("./../../views/MetricPalette"),p=a("./../../views/TimeScaleControl"),q=a("./../../views/DataItem"),r=a("./../../views/DataDetails"),s=e.Events;b.exports=function(){this.assemblyInteractiveElementActions=function(a){function b(){var b=O.items.reverse()||[];b.forEach(function(a){var b='No function assigned to custom action "';b+=a+'"',O[a]?u(O,a):X[a]?X[a]():console.warn()});var c={searchDetails:"search",search:"search",timeScale:"timeScale",attribute:"objectField",metric:"metric",groupBy1:"objectField",groupBy2:"objectField",radius:"metric"},d=["objectFieldAcceptor","pivotLabel"],e=a.droppable===!0,f="function"==typeof N;e&&f&&(c[M]?H(c[M]):i.contains(d,M)?I():H("objectField"))}function t(){if("function"==typeof N)switch(M){case"searchDetails":F(),H("search");break;case"search":F(),x(),y(),z(),H("search");break;case"timeScale":B(),H("timeScale");break;case"attribute":A(),H("objectField");break;case"metric":C(),H("metric");break;case"groupBy1":A(),H("objectField");break;case"groupBy2":A(),H("objectField");break;case"radius":D(),H("metric");break;case"objectFieldAcceptor":I();break;case"pivotLabel":break;default:R&&!S&&w(),v(),x(),y(),z();var a=W.indexOf("Exclude")<0;!S&&a&&G(),E(),H("objectField")}}function u(a,b){U.push({name:b,group:N(),label:b,action:a[b].bind(L)})}function v(){U.push({name:"details",group:N(),label:"Details",action:function(b,c){function d(){K.on("thread:message",f),K.on("thread:timeline",i);var a="";B||(a="zd-infopopup-hide-details");var b=new h.InfoPopup({customClass:a}),d=null;B&&(d=[{label:"Details",type:"success",callback:function(){b.hide(),e()}}]),b.setActions(d).render(A.render().$el,J.state.isTimeTrends()?x:(m.key?m.key+", ":"")+(m.filters?"":m.group)).position({of:c,my:"left top-30",at:"center center",collision:"flipfit flipfit"}),b.onHide=function(){K.off("thread:message",f),K.off("thread:timeline",i),A.remove()}}function e(){var a=new h.DetailsPopup({modal:!0,wide:!0}),b=p?n[1]:n[0];a.onHide=function(){B.remove()};var c=J.state.isTimeTrends();a.render(B.render().$el,c?x:b?s.findWhere({name:b}).get("label")+": "+m.group:"").position({of:j(".zd-main-section"),my:"center top",at:"center top",collision:"flip flip"})}function f(a){A.update(a)}function i(){A.render()}var k=J.state,m=N(),n=J.state.groupBy.getAttributes(),o=n[0],p=n.length>1,s=(J.state.get("volume"),J.fields),t=J.state.time.get("fromTime"),u=J.state.time.get("time"),v=k.get("timeTrendStep"),w=J.source.get("type"),x="";if(J.state.isTimeTrends()){var y=J._controller.fields.findWhere({name:o}).get("timestampGranularity"),z="DAY"===y;t=m.group,u=g(m.group,v,z),x=new l(v,y).format(m.group)}var A=new q({state:J.state,fields:s,data:m}),B=null;a.hideDetails||(B=new r({state:J.state,fields:s,data:m,sourceType:w,fromTime:t,toTime:u})),d()}})}function w(){U.push({name:"trend",group:N(),label:"Trend",disabled:function(){var a=J.config.attributes.source.date;return void 0===a},action:function(){var a=function(a){function b(){J.setVisualization(a);var b,c=J.state,d=c.filters;e.map(function(a){if(b=d.findWhere({path:a.path})){var e=b.hasAttribute(a.value[0]);e?b.set(a,{silent:!0}):b.operation===a.operation?b.addAttribute(a.value[0],{silent:!0}):c.addFilter(a,{silent:!0})}else c.addFilter(a,{silent:!0})})}var c=N(),d=J.state.groupBy.getAttributes(),e=[],f=null;c.filters?c.filters.forEach(function(a){f={editable:!0,operation:"IN",path:a.path,value:[a.value]},e.push(f)}):J.state.groupBy.length>1?(e.push({editable:!0,operation:"IN",path:d[0],value:[c.key]}),e.push({editable:!0,operation:"IN",path:d[1],value:[c.group]})):d[0]&&(f={editable:!0,operation:"IN",path:d[0],value:[c.group]},e.push(f)),a.bootstrap().done(function(){b()}).fail(function(){var a=new h.Notification({type:"error"}),b="Couldn't configureTime Trends visualization.";a.render(b)})},b=Q.visualizations;Q.visualizations.bootstrap().done(function(){if(J._controller.trends){var c=(b.toJSON(),J._controller.trends());c&&a(b.findWhere({visId:c.visId}))}else a(b.findWhere({type:"TRENDS"}))})}})}function x(){U.push({name:"filter_all",group:N(),disabled:function(){return J.config.collection.length<=1},label:"Filter <br> all",action:function(){var a=N(),b=J.state,e=J.config.get("source").sourceId,f=[],g=null;f=c({getter:N,state:J.state}),a.filters&&a.filters.map(function(a){g={editable:!0,operation:"IN",path:a.path,value:[a.value]},f.push(g)});var h=b.get("timestampField"),i=b.get("timeTrendStep"),j=d(f);J._filteredAll=j,s.trigger("visualization:filterAll",e,J.UUID,f,{timestampField:h,timeTrendStep:i})}})}function y(){U.push({name:"un_filter_all",group:N(),disabled:function(){var a=N(),b=null,e=c({getter:N,state:J.state});a.filters&&a.filters.map(function(a){b={editable:!0,operation:"IN",path:a.path,value:[a.value]},e.push(b)});var f=d(e),g=J._filteredAll===f,h=J.config.collection.length<=1;return h||!g},label:"Un<br>Filter <br> all",action:function(){var a=N(),b=J.config.get("source").sourceId,d=[],e=null;d=c({getter:N,state:J.state}),a.filters&&a.filters.map(function(a){e={editable:!0,operation:"IN",path:a.path,value:[a.value]},d.push(e)}),J._filteredAll=null,s.trigger("visualization:unfilterAll",b,J.UUID,d)}})}function z(){U.push({name:"filter",group:N(),label:"Filter",action:function(a,b){var d,e,f=N(),g=J.config.get("source").sourceId,h=J.state,i=h.groupBy.getAttributes(),j=[],k=null,m=(J.fields,h.get("timeTrendStep"));j=c({getter:N,state:J.state}),f.filters&&f.filters.map(function(a){k={editable:!0,operation:"IN",path:a.path,value:[a.value]},j.push(k)}),h.isTimeTrends()&&(d=J.fields.findWhere({name:i[0]}).get("timestampGranularity"),e=new l(m,d).format(f.group));var n=h.get("timestampField"),m=h.get("timeTrendStep");s.trigger("visualization:filter",g,J.UUID,j,b,{timestampField:n,timeTrendStep:m,trendsLabel:e})}})}function A(){U.push({name:"attribute",group:N(),label:"Attribute",action:function(a){var b=N(),c=J.state;if(J.state.isTimeTrends()){var d=J.state.get("timeTrendStep"),e=new Date(b.group),g=new Date(f.time.getEndTimeWithinStep(e,d,null,!0)),i=f.time.getRoundedDateRange(e,g),j=c.config.get("source").dataResolution,k=j&&d===j,l="MINUTE"===d;if(k||l)return;return J.state.time.set({time:g.getTime()},{silent:!0}),J.state.set({timeTrendStep:i.step,limit:i.amount+1},{silent:!0}),void J.state.trigger("change")}var o=new h.PalettePopup({customClass:"attributePalette",pointerWidth:14}),p=function(a){var c=!!a.get("visible"),d="ATTRIBUTE"===a.get("type"),e=["SIDE_BY_SIDE_BARS","HORIZONTAL_SIDE_BY_SIDE_BARS","STACKED_BARS","VERTICAL_100PCT_STACKED_BARS","VERTICAL_STACKED_BARS"],f=J.config.get("type"),g=J._controller;if(a.get("label")===b?a.set({selected:!0},{silent:!0}):a.set({selected:!1},{silent:!0}),-1!==e.indexOf(f)){var h="";L.hasClass("groupBy1")?h=g.variables["Second Group By"]:L.hasClass("groupBy2")&&(h=g.variables["First Group By"]),a.get("name")===h?a.set({disabled:!0},{silent:!0}):a.set({disabled:!1},{silent:!0})}return c&&d},q=new n({className:"nav nav-tabs nav-stacked",ItemView:m,collection:J.fields,groupBy:"type",filter:p,comparator:function(a){return a.get("label")}});o.render(q.render().$el),o.position({of:a,my:"left+20 top-30",at:"right center",collision:"flipfit flipfit"});var r=function(a){if(!a.get("disabled")){var b=J.config.get("type"),d=J.config.get("templateType"),e=["SIDE_BY_SIDE_BARS","STACKED_BARS"],f=-1!==e.indexOf(b),g=-1!==e.indexOf(d);f||g?(L.hasClass("groupBy1")&&c.groupBy.at(0).setAttribute(a.get("name")),L.hasClass("groupBy2")&&c.groupBy.at(1).setAttribute(a.get("name"))):c.groupBy.setAttribute(a.get("name")),o.remove(),q.remove()}};J.listenToOnce(q,"select",r)}})}function B(){U.push({name:"timeScale",group:N(),label:"Time Scale",action:function(a){function b(a){var b=this._controller.state,e=f.time.getRoundedDateRange,g=[{name:"MINUTE",title:"Minutes",limit:60,time:60},{name:"HOUR",title:"Hours",limit:24,time:3600},{name:"DAY",title:"Days",limit:7,time:86400},{name:"WEEK",title:"Weeks",limit:5,time:604800},{name:"MONTH",title:"Months",limit:12,time:2678400},{name:"YEAR",title:"Years",limit:4,time:31536e3}],h=g.filter(function(b){return a.toUpperCase()===b.name})[0],i=b.get("timeTrendStep"),j=b.get("limit"),k=new Date(b.time.get("min")),l=new Date(b.time.get("max")),m={MINUTE:e(k,l,"MINUTE"),HOUR:e(k,l,"HOUR"),DAY:e(k,l,"DAY"),WEEK:e(k,l,"WEEK"),MONTH:e(k,l,"MONTH"),YEAR:e(k,l,"YEAR")},n=m[h.name].amount,o=n+1;h.limit=f.time.recalculateLimit(i,j,h.name),h.limit=h.limit>o?o:h.limit,this._controller.state.set({timeTrendStep:h.name,limit:h.limit},{silent:!0}),this._controller.state.trigger("change"),c.remove(),d.remove()}var c=(N(),new h.PalettePopup({customClass:"timeScalePaletteContainer",pointerWidth:14})),d=new p({className:"timeScalePalette",currentItem:N()});c.render(d.render().$el),c.position({of:a,my:"left+20 top-30",at:"right center",collision:"flipfit flipfit"}),J.listenToOnce(d,"select",b)}})}function C(){U.push({name:"metric",group:N().label,label:"Metric",action:function(a,b){var c=(N(),new h.PalettePopup({autohide:!1,customClass:"metricPalette",pointerWidth:14})),d=J.visualizationController.fields,e=new o({collection:d,currentItem:j.extend({},J.field.toJSON(),J.metric.toJSON())});J.childViews.push(c),J.childViews.push(e),c.render(e.render().$el,J.options.popoverTitle).position({of:b,my:"left+5 center",at:"center center",collision:"flipfit flipfit"}),c.onHide=function(){var a=J.childViews;e.trigger("hide"),J.childViews.splice(a.indexOf(c),1),J.childViews.splice(a.indexOf(e),1)},J.listenTo(e,"select:metric",function(a){J.state.metrics.at(0).set(a)})}})}function D(){U.push({name:"radius",group:N().label,label:"Radius",action:function(a,b){var c=N(),d=new h.PalettePopup({customClass:"metricPalette",pointerWidth:14}),e=new o({collection:J.fields,currentItem:c});d.render(e.render().$el),d.position({of:b,my:"left top-30",at:"center center",collision:"flipfit flipfit"}),d.onHide=function(){e.trigger("hide")},J.listenTo(e,"select:metric",function(a){var b=a.name+":"+a.func;J.state.config.get("source").variables["_metric-radius"]=b,J.state.trigger("change")})}})}function E(){U.push({name:"zoom",group:N(),label:"Zoom",disabled:function(){var a=!1;if(J.state.isTimeTrends()){var b=J.state,c=b.groupBy.getAttribute(),d=J.source.objectFields,e=d.findWhere({name:c}),g=e.get("timestampGranularity"),h=b.get("timeTrendStep"),i=f.time.getLowerStep(h),j=f.time.getMaxStep(g,i);a=j!==i}return a},action:function(a,b){function c(a){if(j)d(a);else{k.map(function(a){J.state.addFilter(a,{silent:!0,trigger:!1})});var b=J.state,c=b.config,e=c.get("type"),f=c.get("source"),g=f.variables,h=a.get("name");"PIVOT_TABLE"===e?(g["Column Attributes"]=[],g["Row Attributes"]=[h]):J.state.groupBy.setAttribute(a.get("name"))}o.remove(),q.remove(),s.trigger("zoomItem:select"),J.state.trigger("zoomItem:select")}function d(a){var b=J.state.groupBy.getAttributes(),c=[{editable:!0,operation:"IN",path:b[1],value:[e.group]},{editable:!0,operation:"IN",path:b[0],value:[e.key]}];i.each(c,function(a){J.state.filters.add(a,{silent:!0})}),J.state.groupBy.setAttribute(a.get("name"))}var e=N(),f=J.state.groupBy.getAttributes(),g=f[0],j=f.length>1,k=[],l=null;if(J.state.isTimeTrends())return void s.trigger("TimeTrendsZoom",e.group);g&&(l={editable:!0,operation:"IN",path:g,value:[e.group]},k.push(l)),e.filters&&e.filters.map(function(a){l={editable:!0,operation:"IN",path:a.path,value:[a.value]},k.push(l)});var o=new h.PalettePopup({customClass:"attributePalette"}),p=function(a){var b=!!a.get("visible"),c="ATTRIBUTE"===a.get("type"),d=!1;return k.forEach(function(b){var c=a.get("name");(c===b.path||-1!==f.indexOf(c))&&(d=!0)}),b&&c&&!d},q=new n({className:"nav nav-tabs nav-stacked",ItemView:m,itemOption:{checkbox:!1},collection:J.fields,selectable:"radio",disabled:function(a){if(J.metrics){var b=J.metrics.Metrics;if(b)for(var c in b){var d=J.metrics.Metrics[c].metric.name,e=a.get("name");if(e===d)return!0}else for(var f in J.metrics){var g=!J.metrics[f].metric;if(!g){var h=J.metrics[f].metric.name,e=a.get("name");if(e===h)return!0}}}return!1},groupBy:"type",filter:p,comparator:function(a){return a.get("label")}});o.render(q.render().$el,"Zoom Into"),o.position({of:b,my:"left+20 top-30",at:"center center",collision:"flipfit flipfit"}),J.listenToOnce(q,"select",c)}})}function F(){U.push({name:"search_details",group:N(),label:"Details",action:function(a,b){function c(){var a=new h.InfoPopup({customClass:"searchResultsDetails"}),c=null,f=J.fields,g={};f.each(function(a){g[a.get("name")]=a.get("label")});var j=e.View.extend({itemTemplate:"<tr><td><%= name %></td><td><%= value %></td></tr>",tagName:"table",initialize:function(a){e.View.prototype.initialize.call(this,a),i.bindAll(this,"render"),this.data=a.data||{},this.query=a.query||""},pregQuote:function(a){return(a+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")},highlightMatchedWords:function(a){var b=a,c=this.query&&""!==this.query,d='<span class="selected-result">$1</span>',e=typeof b;return"string"===e&&c&&(b=a.replace(new RegExp("("+this.pregQuote(this.query).replace(" ","|")+")","gi"),d)),b},render:function(){var a="";for(var b in this.data)if(this.data.hasOwnProperty(b)){var c=g[b],d=this.highlightMatchedWords(this.data[b]);a+=i.template(this.itemTemplate,{name:c,value:d})}return this.$el.html(a),this}}),k=new j({data:d.metadata,query:d.query});a.setActions(c).render(k.render().$el,"Search Result Detail").position({of:b,my:"left top-30",at:"center center",collision:"flipfit flipfit"}),a.onHide=function(){k.remove()}}var d=N();c()}})}function G(){U.push({name:"exclude",group:N(),label:"remove-exclude",type:"icon",action:function(){var a=N(),b=J.state.groupBy.getAttributes(),c=Array.isArray(b)?b[0]:b,d=a.group,e=[],f=null;2===J.state.groupBy.length&&(d=a.key&&!Array.isArray(a.group)?a.group:a.group[1],c=b[1]),2===J.state.groupBy.length&&(d=a.key&&!Array.isArray(a.group)?a.group:a.group[1],c=b[1]),c&&(f={editable:!0,operation:"NOTIN",path:c,value:[d]},e.push(f)),a.filters&&a.filters.map(function(a){f={editable:!0,operation:"NOTIN",path:a.path,value:[a.value]},e.push(f)}),e.map(function(a){var b=J.state.filters.findWhere({path:a.path,operation:"NOTIN"});if(b){var c=b.get("value");if(-1!==c.indexOf(a.value[0]))return;a.value=c.concat([a.value[0]])}}),J.state.addFilters(e)}})}function H(a){V={scope:a,over:function(){},drop:function(a){var b=j(L),c=b.attr("data-zd-interactive-type"),d=N(),e="ATTRIBUTE"===a.get("type");if(c)switch(c){case"group":case"multi-group":case"attribute":e&&null!==J.fields.findWhere({name:a.get("name")})&&J.state.groupBy.setAttribute(a.get("name"));break;case"metric":var g=f.isNumericAttributeType,h=g(a.get("type"));if(h&&null!==J.fields.findWhere({name:a.get("name")})){var i=a.get("func"),l=new k({name:a.get("name"),func:i?i.toLowerCase():"avg",type:a.get("type"),label:a.get("label")});J.state.set("volume",l)}}else if("ATTRIBUTE"===a.get("type")&&null!==J.fields.findWhere({name:a.get("name")})){if("TRENDS"===J.config.get("type"))return void s.trigger("TimeTrendsZoomIn",d.group);var m=J.state.groupBy.getAttribute(),n={editable:!0,operation:"IN",path:m,value:[d.group]};J.state.addFilter(n,{silent:!0}),J.state.groupBy.setAttribute(a.get("name"))}},out:function(){}}}function I(){V={scope:"objectField",over:function(){},drop:function(b){a.droppable.drop(b)},out:function(){}}}var J=this,K=this.thread,L=a.input||this.element,M=a.role,N=a.getter,O=a.menuConfig,P=this.config.get("source"),Q=this.source,R="undefined"!==P.date,S=this.state.isTimeTrends(),T=[],U=[],V=a.droppable||null,W=a.hiddenActions||[],X={Filter:z,"Filter All":x,"Unfilter All":y,Info:v,Zoom:E,Trend:w,Exclude:G};return this._filteredAll=this._filteredAll||null,O?b():t(),{actions:U,dropActions:T,droppable:V}},this.registerInteractiveElements=function(a,b,c){"object"==typeof b?c=b:j(a).attr("data-zd-interactive-type",b);var d,e,f=this,g=c.data,h=c.menu,i=c.droppable,k=c.interactive,l=this.isRemote?null:c.tooltip||null,m=c.actionListTooltip||null,n=c.events?c.events.join(" "):null;e=this.assemblyInteractiveElementActions({input:a,getter:g,role:b,menuConfig:h,droppable:i,interactive:k}),d=f.elementsManager.register(a,{events:n,actions:e.actions,dropActions:e.dropActions,droppable:e.droppable,data:g,interactive:k,tooltip:l,actionListTooltip:m}),this.interactiveElements=this.interactiveElements.concat(d)},this.releaseInteractiveElement=function(a,b){var c,d=this;return this.isRemote?null:(c=this.elementsManager.release(a,b),void c.forEach(function(a){var b=d.interactiveElements,c=b.indexOf(a);-1!==c&&b.splice(c,1)}))},this.releaseAllInteractiveElements=function(){var a=this;this.releaseInteractiveElement(this.interactiveElements),setTimeout(function(){a.tooltip&&a.tooltip.hide(),a.actionListTooltip&&a.actionListTooltip.hide()},10)}}}()},{"../../Core/MVC":6,"../../controls":66,"../../models/Metric":122,"../../utilities":144,"./../../views/DataDetails":210,"./../../views/DataItem":220,"./../../views/GroupedListView":258,"./../../views/MetricPalette":291,"./../../views/SmallObjectFieldItem":344,"./../../views/TimeScaleControl":368,jquery:103,underscore:458}],42:[function(a,b){b.exports=a("./InteractiveElementsMethods")},{"./InteractiveElementsMethods":41}],43:[function(a,b){!function(){"use strict";function c(a,b,c){this.noData=!0,this.multiMetric=!!c,this.domainValue=[],this.objectFields=[],this.setAccessTo(a,b),this.setColorRangeType("gradient")}var d=a("underscore"),e=a("colorbrewer"),f=a("d3"),g=a("../../utilities/MetricFormatter");b.exports=c;var h=c.prototype;h.setAccessTo=function(a,b){return this.metric=a,this.metric.colors=this.metric.colors||this.metric.savedColors,this.objectField=b,this._updateFormatter(),this
},h._setObjectFields=function(a){return this.objectFields=a,this},h._updateDomain=function(a,b){var c,d,e,g,h,i=this,j=b;if(this.noData=0===a.length,this.multiMetric)this.domainValue=this.objectFields.map(function(a){return a.get("label")})||[],this.domainName=this.objectFields.map(function(a){return a.get("name")})||[];else{if(c=f.extent(a,function(a){return i.raw(a)}),e=(c[1]-c[0])/j,"gradient"!==this.colorRangeType&&(j+=1),0===e)return void(this.domainValue=c.slice(0));if(this.domainValue=this.domainValue||[],this.noData)this.domainValue=[0,0];else if(4===this.domainValue.length&&"gradient"!==this.colorRangeType)g=this.domainValue[1],h=this.domainValue[2],(isNaN(g)||g<c[0])&&(g=c[0]),(isNaN(h)||h>c[1])&&(h=c[1]),g>h&&(g=h),this.domainValue[0]=c[0],this.domainValue[1]=g,this.domainValue[2]=h,this.domainValue[3]=c[1];else{d=c[0],this.domainValue=[];do this.domainValue.push(d),d+=e;while(this.domainValue.length<j);this.domainValue[this.domainValue.length-1]=c[1]}}},h._updateFormatter=function(){this._formatter=new g(this.objectField.type)},h.isCount=function(){return"count"===this.metric.name},h.isNone=function(){return"none"===this.metric.name},h.raw=function(a,b){b=b||{};var c,d,e,f=this.isCount(),g=this.isNone();return g?0:(c=this.metric.name,d=f?null:this.metric.func,f&&a.hasOwnProperty("current")&&a.current.hasOwnProperty("count")?a.current.count:a.hasOwnProperty("current")&&a.current.hasOwnProperty("metrics")&&a.current.metrics.hasOwnProperty(c)&&a.current.metrics[c].hasOwnProperty(d)?e=b.historical&&a.historical?a.historical.metrics?a.historical.metrics[c][d]:null:a.current.metrics?a.current.metrics[c][d]:null:null)},h.formatted=function(a,b,c){c=c||{};var d=isNaN(a)?this.raw(a,c):a,e=this.objectField.type,f=this.metric.func;return"count"===e||"distinct_count"===f?d:this._formatter.format(d,b)},h.colorRange=function(){var a,b,c=this,e="range"===this.metric.legendType,f=[];if("none"===this.metric.name)b=this.metric.colors&&this.metric.colors[0]?this.metric.colors[0]:this._getColor(0),f=[b,b];else if(this.multiMetric)!this.multiMetricColors&&this.domainName&&(this.domainName.forEach(function(a,b){var d;e&&(d=c._getDomainColor(a)),d=d?d.color:c._getColor(b),f.push(d)}),this.multiMetricColors=f),f=this.multiMetricColors||[];else{if(this.metric.colors=this.metric.colors||[],this.metric.colorsData=this.metric.colorsData||[],!this.metric.colors.length)for(;this.metric.colors.length<this.metric.colorNumb;)a=this.metric.colors.length,b=this._getColor(a),this.metric.colors.push(b);var g=this.metric.colorsData;if(!g.length)for(;g.length<this.metric.colorNumb;)a=g.length,b=this._getColor(a),this.metric.colorsData.push({name:"Color "+(a+1),color:b});f=this.metric.colors}return d.clone(f)},h.get=function(a){return this.objectField[a]},h.minimum=function(){return this.domainValue?this.domainValue[0]:0},h._getDomainColor=function(a){return this.metric.colorsData=this.metric.colorsData||[],this.metric.colorsData.filter(function(b){return b.name===a})[0]},h.setColors=function(a){var b=this;this.multiMetric?(a=a.splice(0,this.domainName.length),this.domainName.forEach(function(c,d){var e;e=b._getDomainColor(c),e?e.color=a[d]:b.metric.colorsData.push({name:c,color:a[d],label:b.domainValue[d]})}),this.metric.colors=a,this.multiMetricColors=a):this.metric.colors=a},h._getColor=function(a){var b,c=e[this.metric.colorSet],d=this.metric.colorNumb,f="#f03b20";return this.domainValue&&(d=this.domainValue.length),3>d&&(d=3),d>9&&(d=9),b=c[d][a%d]||f},h.maximum=function(){return this.domainValue?this.domainValue[this.domainValue.length-1]:0},h.domain=function(){return d.clone(this.domainValue)},h.setColorRangeType=function(a){this.colorRangeType=a},h.getColorKeyLabel=function(){return this.get("label")},h.isMetric=function(){return!0},h.isNoData=function(){return this.noData}}()},{"../../utilities/MetricFormatter":140,colorbrewer:89,d3:90,underscore:458}],44:[function(a,b){b.exports=a("./MetricAccessor")},{"./MetricAccessor":43}],45:[function(a,b){"use strict";function c(a,b){var c=this.defaults;if(b=b||{},d.bindAll(this,"_onConnectionLost","_onConnectionOpened"),!a)throw new Error("dataStream must be defined");if(!a.publisher)throw new Error("dataStream must be published");this._isAliveUrl=b.isAliveUrl||c.isAliveUrl,this.minTimeout=b.minTimeout||c.minTimeout,this.maxTimeout=b.maxTimeout||c.maxTimeout,this.dataStream=a,this.publisher=a.publisher,this.notification=new g({type:"error",delay:null}),this.attempts=0,this.interval=null,this.publisher.on("stream:close",this._onConnectionLost)}var d=a("underscore"),e=a("jquery"),f=a("../../controls"),g=f.Notification,h=d.template("Connection lost. Retrying in <%=remaining%> seconds..."),i=d.template("Connecting...")(),j=d.template("Validating Session")();c.prototype={defaults:{isAliveUrl:"service/user",minTimeout:10,maxTimeout:30},reconnect:function(){function a(){return g.render(j),e.sessionIsAlive()}function b(){return g.render(i),f.connect()}function c(){e._onConnectionLost()}function d(){e._onConnectionOpened()}var e=this,f=this.dataStream,g=this.notification;return a().then(b).then(d).fail(c)},sessionIsAlive:function(){var a=this._isAliveUrl;return e.get(a)},_onConnectionLost:function(){var a=this,b=this.attempts,c=0===b?this.minTimeout:this.maxTimeout,d=this.notification,e=this.dataStream.is();"open"!==e&&(d.setType("error").render(h({remaining:c})),clearInterval(this.interval),this.interval=setInterval(function(){d.render(h({remaining:c})),c--,0>=c&&(a.attempts++,clearInterval(a.interval),a.reconnect())},1e3))},_onConnectionOpened:function(){var a=this.dataStream.is(),b=this.notification;"open"===a&&this.attempts>0&&(this.attempts=0,b.setType("success").render("Connected"),setTimeout(function(){b.hide()},3e3))}},b.exports=c},{"../../controls":66,jquery:103,underscore:458}],46:[function(a,b){b.exports=a("./ReconnectionService")},{"./ReconnectionService":45}],47:[function(a,b){!function(){function c(a){if(a||(a={}),"undefined"==typeof d)throw new Error("HTML to canvas converter missing");this.converter=d}var d=a("html2canvas"),e=a("jquery"),f=a("jspdf"),g=a("../../utilities");c.prototype={shoot:function(a){return this.getScreenshot(a,"image/png")},shootPDF:function(a){var b=e.Deferred();return this.getScreenshot(a,"image/jpeg").done(function(a,c){document.body.appendChild(a),a.onload=function(){var d={w:a.clientWidth,h:a.clientHeight,k:a.clientWidth/a.clientHeight};document.body.removeChild(a);var e,g,h,i={w:286,h:205,k:286/205};d.k>1?(e="l",d.k>i.k?(g=i.w,h=i.h*i.k/d.k):(g=i.w*d.k/i.k,h=i.h)):(e="p",d.k>1/i.k?(g=i.h,h=i.w/i.k/d.k):(g=i.h*d.k*i.k,h=i.w));var j=new f(e);j.addImage(c,"JPEG",0,0,g,h),b.resolve(j)}}),b.promise()},getScreenshot:function(a,b){var c=this,d=e.Deferred();return a instanceof jQuery||(a=e(a)),this.prepareContents(a).done(function(){c.createImageFrom(a,b).done(function(a,b){c.restoreContents(),d.resolve(a,b)})}),d.promise()},prepareContents:function(a){var b=this,c=e.Deferred(),d=0,f=a.find("svg");return this.replaced=[],f.length?f.each(function(a,e){var g=b.replaceWithImg(e);g.then(function(){d++,d==f.length?c.resolve():null})}):c.resolve(),c.promise()},replaceWithImg:function(a){var b=e.Deferred(),c=this,d=e(a);return g.getImgFromSvg(a).done(function(e){d.before(e).detach(),c.replaced.push(a),e.id="replacingSVG-"+(c.replaced.length-1),b.resolve(e)}),b.promise()},createImageFrom:function(a,b){var c=e.Deferred();return this.converter(a[0],{background:"#e6e6e6",useCORS:!0,logging:!0,proxy:"canvas/html2canvasProxy",onrendered:function(a){var d=new Image,e=a.toDataURL(b,1);d.src=e,c.resolve(d,e)}}),c.promise()},restoreSVG:function(a){var b=e(a),c=this.replaced.length-1,d=e("#replacingSVG-"+c);d.after(b).remove(),this.replaced.splice(c,1)},restoreContents:function(){for(;this.replaced.length>0;)this.restoreSVG(this.replaced[this.replaced.length-1])}},b.exports=c}()},{"../../utilities":144,html2canvas:94,jquery:103,jspdf:104}],48:[function(a,b){b.exports=a("./Screenshotter")},{"./Screenshotter":47}],49:[function(a,b){!function(){function c(a){if(a=a||{},this.options=d.extend({},this.defaults,a),!this.options.controller)throw new Error("Controller must be defined");this.controller=this.options.controller,delete this.options.controller,this.history=[],this.addToHistory(this.controller.state,this.controller.config)}var d=a("jquery"),e=a("underscore"),f=a("../../Core/MVC"),g=e.clone(f.Events),h=a("../../collections/GroupBys"),i=["TRENDS","MULTI_METRIC_TREND"],j="PIVOT_TABLE",k="ZOOMABLE_MAP";c.prototype=e.extend({defaults:{},merge:function(a){var b=this.controller.config,c=(this.controller.state,a.oldConfig),d=a.oldState,e=a.oldTime;return this.addToHistory(d,c),this.mergeTime(d,c),this.mergeFilters(d,c),this.isType(b,j)?(this.mergeToPivot(d,c),this):this.isType(c,j)?(this.mergeFromPivot(d,c),this):(this.mergeMetrics(d,c),this.isType(b,k)||this.mergeGroupBy(d,c,null,e),this)},mergeFilters:function(a){var b=this.controller,c=(this.controller.config,this.controller.state),d=a.filters,e=c.get("timestampField"),f=d.findWhere({path:e});return a.filters.length>0&&(f&&c._hasPlayerOption()&&(d.remove(f,{silent:!0}),b.eventDispatcher.trigger("filter:unsupported",f)),c.filters.set(d.toJSON(),{silent:!0})),this},mergeToPivot:function(a,b){var c,d,f,g=this.controller.config,h=this.controller.state,j="Columns"===g.attributes.source.variables["Metric Direction"],k={};j?(c="Column Attributes",d="Row Attributes"):(c="Row Attributes",d="Column Attributes"),f=a.metrics.toJSON().filter(function(a){var b=a.name,c=null===a.func?"":a.func,d=b+c,e=!1;return("none"===b||a.colors)&&(e=!0),k[d]===!0&&(e=!0),e?!1:(k[d]=!0,!0)}).map(function(a,b){return{name:a.name,func:a.func,label:"Metrics",id:"Metrics-"+b}}),h.metrics.reset(f,{silent:!0});var l=this.getOriginalType(b);return e.contains(i,l)||0===a.groupBy.length?this:(a.groupBy.length>0&&(g.attributes.source.variables[d]=[a.groupBy.getAttribute()],g.attributes.source.variables[c]=a.groupBy.getAttributes().slice(1)),this)},mergeFromPivot:function(a,b){var c,d,e,f,g="Columns"===b.attributes.source.variables["Metric Direction"],i=this.controller._controller.scope.visualization,j={attribute:{asc:"alphabetical",desc:"reverseAlphabetical"},metric:{asc:"valueAscending",desc:"valueDescending"}};if(g?(c="Column Attributes",d="Row Attributes"):(c="Row Attributes",d="Column Attributes"),this.mergeMetrics(a,b),""!==b.attributes.source.variables[d])var k=new h(b.attributes.source.variables[d].concat(b.attributes.source.variables[c]).map(function(a){return{name:a}}));if(this.mergeGroupBy(a,b,k),i._ROWS_SORT.length?e=i._ROWS_SORT[0]:i._COLS_SORT.length&&(e=i._COLS_SORT[0]),e){var l=this.controller.state.groupBy,m=this.controller.state.metrics;l.findWhere({name:e.name})?f=j.attribute[e.dir]:m.findWhere({name:e.name})&&(f=j.metric[e.dir]),f&&this.controller.state.set({clientSort:f},{silent:!0})}},mergeTime:function(a,b){var c=this.controller.config,d=this.controller.state,f=this.getOriginalType(b),g=this.getOriginalType(c);if(f!==g&&(e.contains(i,g)||e.contains(i,f)))return this;if(d.time&&a.time){var h=d.time.get("timeWindow"),j=a.time.get("timeWindow");h===j&&d.time.set(a.time.toJSON(),{silent:!0})}return d.set("timeWindowScale",a.get("timeWindowScale"),{silent:!0}),this},mergeGroupBy:function(a,b,c,d){var f=this.controller.config,g=this.controller.state;c&&(a.groupBy=c);var h=a.groupBy.models,j=g.groupBy.models,k=a.groupBy.toJSON(),l=g.groupBy.toJSON(),m=this.getOriginalType(b),n=this.getOriginalType(f),o=e.contains(i,m),p=e.contains(i,n);if(m!==n&&(p||o)){var q=a.get("timestampField"),r=a.get("timeTrendStep"),s={timestampField:q};return r&&p&&(s.timeTrendStep=r),g.set(s,{silent:!0}),o&&p&&(g.time.set({time:d.time},{silent:!0}),g.groupBy.setLimit(a.groupBy.getLimit(),{silent:!0})),this}if(l.length>k.length){var t=a.groupBy.getAttributes(),u=g.groupBy.getAttributes(),v=(l.slice(k.length),u.slice(k.length)),w=e.difference(u,t);k.forEach(function(a,b){var c=j[b];c.setAttribute(a.name,{silent:!0}),c.setSort(a.sort,{silent:!0})});var x=0;e.intersection(v,t).length>0&&v.forEach(function(a,b){var c=b+k.length;if(e.contains(t,a)){var d=j[c],f=e.findWhere(l,{name:w[x]});f&&(d.setAttribute(f.name,{silent:!0}),d.setSort(f.sort,{silent:!0})),x++}})}else j.forEach(function(a,b){var c=h[b];if(c){var d=c.toJSON();a.setAttribute(d.name,{silent:!0}),a.setSort(d.sort,{silent:!0})}});return this},mergeMetrics:function(a){function b(a,b){var c=[];return c=b?a.metrics.models.filter(function(a){return a.get("label")!==b.name}):a.metrics.models}function c(a,b){var c=null;return b&&(c=a.metrics.findWhere({label:b.name})),c}function d(a){return e.findWhere(a.config.attributes.variables,{metricType:"color"})}function f(a){return e.findWhere(a.config.attributes.variables,{type:"multi-metric"})}{var g,h=this.controller.state;this.controller.config}if(0!==h.metrics.length&&0!==a.metrics.length){{var i=d(h),j=d(a),k=b(h,i),l=b(a,j),m=f(h);f(a)}if(m){var n=k[0].get("label"),o=l.map(function(a){var b=a.get("func");return"last_value"===b&&(h.isMultiGroups()||h.isMultiMetric()&&h.metrics.length>1)&&(b="sum"),{label:n,name:a.get("name"),func:b}});i&&(g=c(h,i),o.push(g.toJSON())),h.metrics.set(o,{silent:!0})}else k.forEach(function(a,b){var c,d,e=l[b];e&&(c=e.get("name"),d="count"===c?null:e.get("func"),"last_value"===d&&(h.isMultiGroups()||h.isMultiMetric())&&(d="sum"),a.set({name:c,func:d},{silent:!0}))});if(i&&j){var p=h.metrics.findWhere({id:i.name}),q=a.metrics.findWhere({id:j.name}),r=q.get("name"),s="count"===r?null:q.get("func"),t=q.get("colorSet")||p.get("colorSet");p.set({name:r,func:s},{silent:!0}),i.type===j.type&&(i.colorSet=t,p.set({colorSet:t},{silent:!0}))}return this}},addToHistory:function(a,b){return this.history.push({state:a,config:b}),this},getPrev:function(){var a=this.history.pop();return a},getOriginalType:function(a){var b=a.get("type");return b="CUSTOM"===b?a.get("templateType"):b},isType:function(a,b){var c=Array.isArray(b)?b:[b],d=!1,f=this.getOriginalType(a);return e.contains(c,f)&&(d=!0),d}},g),b.exports=c}()},{"../../Core/MVC":6,"../../collections/GroupBys":23,jquery:103,underscore:458}],50:[function(a,b){b.exports=a("./StateInheritanceManager")},{"./StateInheritanceManager":49}],51:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("jquery"),e=a("../../Core/MVC"),f=e.Events,g=a("../../utilities"),h=a("./../../models/Zoomdata.Models.js"),i=b.exports=function(a){if(a=a||{},c.bindAll(this,"_onStreamOpen","_onStreamError","_onViewport","_onMessage","_onTimeLine","_onStartFromTimeDone","_onStartVisDone","_onNoDataFound","_onDirtyData","_onNotDirtyData"),!a.dataStream)throw new Error("options.dataStream must be defined");this.dataStream=a.dataStream,this.tuneTo(a),this._progress=0,this.status("idle"),this.onStreamError=d.noop,this.onMessage=d.noop,this.onTimeLine=d.noop,this.onStartFromTimeDone=d.noop,this.onStartVisDone=d.noop,this.onStopVisDone=d.noop,this.onNoDataFound=d.noop,this.onPauseDone=d.noop,this.onSpeedUpdatedDone=d.noop,this.onDirtyData=d.noop,this.onNotDirtyData=d.noop,this.onPagination=d.noop,this.onPivotPaging=d.noop,this.onViewport=d.noop,this.onExeption=d.noop,this.listenTo(f,"stream:open",this._onStreamOpen),this.listenTo(f,"stream:error",this._onStreamError),this.listenTo(f,"stream:message",this._onMessage),this.listenTo(f,"stream:TIME_LINE",this._onTimeLine),this.listenTo(f,"stream:START_FROM_TIME_DONE",this._onStartFromTimeDone),this.listenTo(f,"stream:START_VIS_DONE",this._onStartVisDone),this.listenTo(f,"stream:STOP_VIS_DONE",this._onStopVisDone),this.listenTo(f,"stream:NO_DATA_FOUND",this._onNoDataFound),this.listenTo(f,"stream:PAUSE_DONE",this._onPauseDone),this.listenTo(f,"stream:UPDATE_SPEED_DONE",this._onSpeedUpdatedDone),this.listenTo(f,"stream:DIRTY_DATA",this._onDirtyData),this.listenTo(f,"stream:NOT_DIRTY_DATA",this._onNotDirtyData),this.listenTo(f,"stream:PAGINATION",this._onPagination),this.listenTo(f,"stream:PAGING",this._onPivotPaging),this.listenTo(f,"stream:VIEWPORT",this._onViewport),this.listenTo(f,"stream:EXCEPTION",this._onExeption)};c.extend(i.prototype,e.Events,{tuneTo:function(a){if(this.stopListening(this.time),a.state)this.state=a.state,this.time=this.state.time;else{if(!a.config)throw new Error("state or config must be defined");this.state=new h({streamSourceId:a.config.source.sourceId},{config:new e.Model(a.config)}),this.time=this.state.time}this.state.config.options={},this.listenTo(this.time,"change:time",this._onTimeChange),this.listenTo(this.time,"change:speed",this._onSpeedChange),this.listenTo(this.time,"change:paused",this._onPausedChange)},resetProgress:function(){this.progress(0)},progress:function(a){function b(a){return d._progress=a,d}function c(){return d._progress}var d=this;return"undefined"==typeof a?c():b(a)},destroy:function(){this.stop(),this.stopListening()},setUUID:function(){return this.UUID=g.generateUUID(),this.UUID},getUUID:function(){return this.UUID},status:function(a){return"string"==typeof a?(this._status=a,this.trigger("status:change",a,this),this):this._status},start:function(){var a="idle"===this.status(),b=this.state.toRequest(),c=JSON.stringify({type:"START_VIS",cid:this.UUID,request:b});a||this.stop(),console.log("Thread: start ",JSON.parse(c)),this.dataStream.send(c),this.resetProgress(),this.status("starting"),this.trigger("thread:start",JSON.parse(c)),f.trigger("thread:start",JSON.parse(c))},stop:function(){var a="idle"===this.status(),b="stopping"===this.status(),c=JSON.stringify({type:"STOP_VIS",cid:this.UUID});a||b||(this.dataStream.send(c),this.resetProgress(),this.trigger("thread:stop",JSON.parse(c)),console.log("Thread: stop",JSON.parse(c)),this.status("stopping"))},pause:function(){var a=JSON.stringify({type:"PAUSE",cid:this.UUID});this.dataStream.send(a),console.log("Thread: pause",JSON.parse(a)),this.status("pausing"),this.switchOffLiveMode()},unpause:function(){var a=JSON.stringify({type:"UNPAUSE",cid:this.UUID});this.dataStream.send(a),console.log("Thread: unpause",JSON.parse(a)),this.status("unpausing")},request_data:function(a){a=a||{records:1e3};var b=JSON.stringify({type:"REQUEST_DATA",cid:this.UUID,request:a});this.dataStream.send(b),console.log("Thread: request_data",JSON.parse(b))},togglePause:function(){var a=this.time.get("paused");a?this.unpause():this.pause()},switchOffLiveMode:function(){this.time.get("live")&&(this.time.set("live",!1),f.trigger("live:mode",{on:!1}))},switchOnLiveMode:function(){this.time.get("live")||(this.time.set("live",!0),f.trigger("live:mode",{on:!0,label:"LIVE"}))},startFromTime:function(a){var b,c,d=(new Date).getTime(),e=this.time;a>d&&this.config&&"LIVE"===this.config.get("source").startFrom&&(a=null),b={speed:e.get("speed"),time:a,pauseAfterRead:e.get("paused")},c={type:"START_FROM_TIME",cid:this.UUID,request:b},console.log("Thread: startFromTime",c),this.dataStream.send(JSON.stringify(c)),this.resetProgress(),this.trigger("thread:time",c),f.trigger("thread:time",c)},startFromTimeTo:function(a){var b,c=(new Date).getTime(),d=this.time,e=d.get("time");a>c&&(a=null),b={speed:d.get("speed"),timeWindow:a,pauseAfterRead:d.get("paused")},e&&null!==e&&(b.time=e);var f={type:"START_FROM_TIME",cid:this.UUID,request:b};this.dataStream.send(JSON.stringify(f)),this.resetProgress()},updateSpeed:function(a){var b=JSON.stringify({type:"UPDATE_SPEED",cid:this.UUID,request:{speed:a||this.time.get("speed")}});this.waitForUpdateSpeedDone=!0,this.dataStream.send(b),console.log("Thread: updateSpeed",b)},_onStreamOpen:function(){var a=this.status(),b="idle"!==a,c="starting"!==a;b&&c&&(console.log("Thread: reconnected"),this.start())},_onTimeChange:function(a,b){this.startFromTime(b)},_onSpeedChange:function(a,b){this.updateSpeed(b)},_onPausedChange:function(a,b){b?this.pause():this.unpause()},_onStreamError:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.status("error"),"function"==typeof this.onStreamError&&this.onStreamError(b.data),this.trigger("thread:error",a))},_onDirtyData:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.status("dirtydata"),"function"==typeof this.onDirtyData&&this.onDirtyData(b.data),"number"==typeof b.progress?this.progress(b.progress):this.resetProgress(),this.trigger("thread:dirtyData",b))},_onNotDirtyData:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.status("notdirtydata"),"function"==typeof this.onNotDirtyData&&this.onNotDirtyData(b.data),this.progress(100),this.trigger("thread:notDirtyData",b))},_onMessage:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.status("progress"),"function"==typeof this.onMessage&&this.onMessage(b.data),this.trigger("thread:message",b.data))},_onTimeLine:function(a){var b=JSON.parse(a.data);if(b.cid===this.UUID&&!this.waitForUpdateSpeedDone){if("HISTORICAL"===b.source)return void this.time.set({historicalFrom:b.fromTime,historicalTo:b.toTime});this.stopListening(this.time,"change:time",this._onTimeChange);var c={fromTime:b.fromTime,time:b.toTime,min:b.minTime&&"-1"!==b.minTime?b.minTime:void 0,max:b.maxTime&&"-1"!==b.maxTime?b.maxTime:void 0,live:b.live,speed:b.speed};this.time.set(c),this.listenTo(this.time,"change:time",this._onTimeChange),this.status("progress"),"function"==typeof this.onTimeLine&&this.onTimeLine(b.data),this.trigger("thread:timeline",b.data)}},_onStartFromTimeDone:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.status("progress"),"function"==typeof this.onStartFromTimeDone&&this.onStartFromTimeDone(b.data),this.trigger("thread:startFromTimeDone",b.data))},_onStartVisDone:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.status("started"),"function"==typeof this.onStartVisDone&&this.onStartVisDone(b.data),this.trigger("thread:startVisDone",b.data),f.trigger("thread:startVisDone",b))},_onStopVisDone:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&("function"==typeof this.onStopVisDone&&this.onStopVisDone(b.data),this.trigger("thread:stopVisDone",b.data),this.status("idle"))},_onNoDataFound:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.status("nodata"),"function"==typeof this.onNoDataFound&&this.onNoDataFound(b.data),this.trigger("thread:noData",b.data))},_onPauseDone:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.time.set("paused",!0),"function"==typeof this.onPauseDone&&this.onPauseDone(b),this.trigger("thread:pauseDone",b),f.trigger("thread:pauseDone",b),this.status("paused"))},_onSpeedUpdatedDone:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&("function"==typeof this.onSpeedUpdatedDone&&this.onSpeedUpdatedDone(b.data),this.waitForUpdateSpeedDone=!1,this.trigger("thread:updateSpeedDone",b.data),f.trigger("thread:updateSpeedDone",b.data))},_onPagination:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.state.set("nextPageAvailable",b.nextPageAvailable,{silent:!0}),this.state.set("pages",b.pages,{silent:!0}),this.state.set("precise",b.precise,{silent:!0}),this.state.trigger("pages"),"function"==typeof this.onPagination&&this.onPagination(b),this.trigger("thread:pagination",b))},_onPivotPaging:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.state.pagesCount=b.pagesCount,this.state.precise=b.precise,this.state.set("pageIndex",b.pageIndex,{silent:!0}),"function"==typeof this.onPivotPaging&&this.onPivotPaging(b),this.trigger("thread:pivotPaging",b))},_onViewport:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&("function"==typeof this.onViewport&&this.onViewport(b),this.trigger("thread:viewport",b))},_onExeption:function(a){var b=JSON.parse(a.data);this.trigger("thread:exeption",b)}})}()},{"../../Core/MVC":6,"../../utilities":144,"./../../models/Zoomdata.Models.js":139,jquery:103,underscore:458}],52:[function(a,b){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=e.View,g=a("colorbrewer"),h=a("../../utilities"),i=a("./../../models/Zoomdata.Models.js"),j=i.State,k=i.Datum,l=a("./../DashboardEvents"),m=a("../../collections/ComponentSources"),n=a("../../collections/LibrariesSources"),o=a("../../models/SourceVisualization"),p=a("../../collections/Graph"),q=e.Events,r=a("./../Thread"),s=a("./../InteractiveElementsMethods"),t=a("./../MetricAccessor"),u=a("./../StateInheritanceManager"),v=a("./../InteractiveElements")(),w=a("./../DeferredPick"),x=a("../../controls").VisualizationTooltip,y=a("../../views/ColorKey"),z=a("../../views/ModalWarning"),A="$Source";b.exports=f.extend({defaults:{},remove:function(){this.stopVisualization(),this.removeVisualization(),this.thread.destroy(),this.worker&&this.worker.terminate(),f.prototype.remove.apply(this,arguments)},initialize:function(a,b,c){if(this.dfd=null,this.axisLabels=[],this.metrics={},this.progress=0,this.setClearData(),"undefined"==typeof b)throw new Error("dataStream must be defined");if(this.elementsManager=v,this.interactiveElements=[],"object"!=typeof a.config)throw new Error("config must be defined");if(this.config=a.config,delete a.config,"object"!=typeof a.source)throw new Error("source must be defined");this.source=a.source,delete a.source,this.interactiveMode=!!a.interactiveMode,delete a.interactiveMode,this.isRemote="object"==typeof a.host,this.worker=window.Worker&&this.isRemote===!1?new Worker("/zoomdata/js/components/ProcessSocketDataWorker/index.js"):null,this._assemblyMethods(),f.prototype.initialize.apply(this,arguments),this.state=new i.State({streamSourceId:this.config.get("source").sourceId},{config:this.config,objectFields:this.source.objectFields}),this.state.interactiveMode=this.interactiveMode,this.eventDispatcher=l,this.thread=new r({state:this.state,dataStream:b}),this.fields=this.source.objectFields,this.formulas=this.source.formulaList,this._configureMetricAccessors(),this.time=this.state.time,this.$el.attr("data-visid",this.config.get("visId")).removeAttr("id"),this.components=new m(this.config.get("components"),{visId:this.config.get("visId"),name:this.config.get("name"),remote:this.isRemote&&this.options.host.remote,secure:this.isRemote&&this.options.host.secure,apiKey:this.isRemote&&this.options.host.apiKey}),this.libraries=new n(this.config.get("libs"),{remote:this.isRemote&&this.options.host.remote,secure:this.isRemote&&this.options.host.secure,apiKey:this.isRemote&&this.options.host.apiKey}),this.inheritanceManager=new u({controller:this}),this.actionList=c,this.tooltip=this.isRemote?null:new x({controller:this}),this.actionListTooltip=new x({controller:this})},_configureMetricAccessors:function(){var a,b,e,f=this,g=f.config.get("variables"),h=[],i=this.metrics={},j=this.fields;c(g).each(function(d,g){if("metric"===g.type||"multi-metric"===g.type)switch("multi-metric"===g.type&&(i[g.name]=[]),g.metricType){case"color":a=g,f.autoShowColorLegend=g.autoShowColorLegend,g.colorLegendPosition&&(f.colorLegendPosition=JSON.parse(g.colorLegendPosition)),"string"==typeof g.colors&&(g.colors=JSON.parse(g.colors)),g.savedColors&&"string"==typeof g.savedColors&&(g.savedColors=JSON.parse(g.savedColors)),g.colors&&g.colors.length&&(e=g.colors.length),e=e||g.colorNumb||0,g.colors&&c.each(g.colors,function(b,c){h.push(a.savedColors&&"string"==typeof a.savedColors[b]?a.savedColors[b]:c.color||c)});break;case"general":b=g}}),this.state.divergingColorRange="gradient",this.state.metrics.each(function(c){var k,l=c.get("name"),m=c.get("label"),n=d.where(g,{name:m})[0],o=n?n.type:"metric",p=c.isNone()?j.noneField:c.isCount()?j.volumeField:j.findWhere({name:l})||f.formulas.findWhere({name:l});"multi-metric"===o?i[m]instanceof Array?i[m].push(new t(c.toJSON(),p.toJSON(),!0)):i[m]=[new t(c.toJSON(),p.toJSON(),!0)]:i[m]=new t(c.toJSON(),p.toJSON()),a&&m===a.name?(f.state.colorDataObj&&f.state.colorDataObj.get("label")===m||(f.state.colorDataObj=c),f.state.colorNumb=e,k=f.metrics[a.name][0]||f.metrics[a.name],k.metric.colors&&"string"!=typeof k.metric.colors?f.state.legendType=k.metric.legendType:(f.state.legendType=a.legendType||"range",f.state.divergingColorRange=a.divergingColorRange||"gradient",k.setColorRangeType(f.state.divergingColorRange),k.metric.colors=h.length?h:"string"==typeof k.metric.colors?JSON.parse(k.metric.colors):[],k.domainValue=a.domain),f.metrics[a.name][0]&&(f.state.divergingColorRange=null,k.objectFields=[],f.source.objectFields.forEach(function(b){var c=b.get("type");("FORMULA"===c||-1!==a.attributeType.indexOf(c)||b.get("distinctCount"))&&k.objectFields.push(b),k.objectFields.length>k.metric.colors.length&&k.metric.colors.push("#b2df8a")}),k.metric.colors.splice(k.objectFields.length,k.metric.colors.length),k.metric.colors.length&&(f.state.colorNumb=k.metric.colors.length)),k.metric.colorsData=a.colors||a.savedColors,f.colorKey&&(f.colorKey.multiMetric="multi-metric"===o),f._initColors(k.metric)):b&&m===b.name&&(f.state.generalMetric=c)}),this._controller&&(this._controller.metrics=this.metrics)},_onGroupByChange:function(){this.clearVisualization(),this.restartVisualization()},_initColors:function(a){var b,c=a.colors.length||a.colorNumb;"range"!==a.legendType&&a.colorSet&&(2>c&&(c=2),2===c?(b=g[a.colorSet][3],b=[b[0],b[2]]):b=g[a.colorSet][c],a.colors=b)},_onMetricChange:function(a){function b(a,b){var c=d.find(a,function(a){var c=a.metric.name==("undefined"!=typeof b.changed.name?b.previous("name"):b.get("name"))&&a.metric.func==("undefined"!=typeof b.changed.func?b.previous("func"):b.get("func"));return c});c.setAccessTo(b.toJSON(),g.toJSON())}var c=a.get("label"),e=a.get("name"),f=this.metrics[c],g=a.isNone()?this.fields.noneField:a.isCount()?this.fields.volumeField:this.fields.findWhere({name:e})||this.formulas.findWhere({name:e});delete f.domainValue,f instanceof Array?b(f,a):f.setAccessTo(a.toJSON(),g.toJSON()),this.restartVisualization()},_onMetricReset:function(){this.restartVisualization()},_onMetricAdd:function(a){var b=a.get("label"),c=a.get("name"),d=this.metrics[b],e=a.isCount()?this.fields.volumeField:this.fields.findWhere({name:c});d instanceof Array||(d=[].concat(d)),d.push(new t(a.toJSON(),e.toJSON())),this.restartVisualization()},_onMetricRemove:function(a){var b=a.get("label"),c=a.get("func"),e=a.get("name"),f=this.metrics[b]instanceof Array?this.metrics[b]:[].concat(this.metrics[b]),g=d.find(f,function(a){return a.metric.name==e&&a.metric.func==c});g&&f.splice(f.indexOf(g),1),this.restartVisualization()},_onMessage:function(a){"function"==typeof this._controller.processData?this._controller.processData(a,this.thread.progress()):this.processSocketData(a)},_onNoDataFound:function(){this.clearVisualization(),this._controller.onNoDataFound()},_onStartFromTimeDone:function(){this.setClearData()},_assemblyMethods:function(){d.extend(this,new s)},_createAxisLabel:function(a){var b=this,d=this.state.groupBy,e=this.state.config.get("variables"),f=e.filter(function(b){return b.name===a.picks})[0];a.disabledAxis=!!this.interactiveMode,!f||"multi-group"!==f.type&&"group"!==f.type?this.trigger("label:create",a):d.each(function(e,f){var g;a.popoverTitle?(g=a.popoverTitle,d.length>1&&(g+=" "+(f+1))):g=e.getLabel()||"Group "+(f+1),b.trigger("label:create",c.extend({},a,{picks:e,popoverTitle:g}))})},_onFilterAll:function(a){a.UUID!==this.UUID&&this._controller&&this._controller.filters.add(a.data)},_onUnfilterAll:function(a){a.UUID!==this.UUID&&this._controller&&this._controller.filters.remove(a.data)},setVisualization:function(a,b,c){var e=this,f=new o(this.state.config.toJSON());f.attributes.source.filters=this.state.filters.toJSON(),a&&(a.attributes.source.filters=this.state.filters.toJSON(),a.attributes.source.date=f.attributes.source.date);var g=new j(this.state.toJSON(),{config:f,objectFields:this.source.objectFields,oldTimeWindowScale:this.state.time.get("timeWindow"),time:this.state.time.toJSON(),timeWindowScale:this.state.get("timeWindowScale"),interactiveMode:this.interactiveMode}),h=b&&c?c:new j(this.state.toJSON(),{config:a,objectFields:this.source.objectFields,time:this.state.time.toJSON(),interactiveMode:this.interactiveMode}),i=d.clone(g.config.attributes.variables),k=d.clone(h.config.attributes.variables);g.groupBy.reset(this.state.groupBy.toJSON(),{silent:!0}),g.metrics.reset(this.state.metrics.toJSON(),{silent:!0}),a&&(this.config.set(a.toJSON(),{silent:!0}),this.config.sourceId=f.sourceId,g.config.attributes.variables=i,h.config.attributes.variables=k),this.stopVisualization(),this.removeVisualization();
var l=this.state.time.toJSON();this.state=h,this.config.set("variables",k,{silent:!0}),this.thread.tuneTo({state:this.state,config:this.config}),this.time=this.state.time,this.$el.attr("data-visid",this.config.get("visId")).removeAttr("id"),this.libraries.reset(this.config.get("libs")),this.components.reset(this.config.get("components")),this.components.setVisId(this.config.get("visId")),this.components.setVisName(this.config.get("name")),b||this.inheritanceManager.merge({oldState:g,oldConfig:f,oldTime:l}),this._configureMetricAccessors(),this.loadVisualization().done(function(){e.initVisualization(),e.startVisualization()}),this.trigger("visualization:change")},applyEvents:function(){var a=this;this.listenTo(q,"visualization:showpopup",a.showPopup),this.listenTo(this.thread,"thread:message",this._onMessage),this.listenTo(this.thread,"thread:start",this._onStart),this.listenTo(this.thread,"thread:error",this._onStreamError),this.listenTo(this.thread,"thread:notDirtyData",this._onNotDirtyData),this.listenTo(this.thread,"thread:dirtyData",this._onDirtyData),this.listenTo(this.thread,"thread:noData",this._onNoDataFound),this.listenTo(this.thread,"thread:pivotPaging",this._onPivotPaging),this.listenTo(this.thread,"thread:startFromTimeDone",this._onStartFromTimeDone),this.listenTo(this.thread,"thread:viewport",this._onViewport),this.listenTo(this.thread,"thread:stop",this._onStop),this.listenTo(this.thread,"thread:exeption",this._onExeption),this.listenTo(this.state,"change",this.restartVisualization),this.listenTo(this.state,"change:clientSort",this.refreshVisualization),this.listenTo(this.state.filters,"add remove change reset",this.restartVisualization),this.listenTo(this.state.metrics,"change",this._onMetricChange),this.listenTo(this.state.metrics,"add",this._onMetricAdd),this.listenTo(this.state.metrics,"remove",this._onMetricRemove),this.listenTo(this.state.metrics,"reset",this._onMetricReset),this.listenTo(this.state.groupBy,"change reset",this._onGroupByChange),this.listenTo(q,"restart",function(){a.startVisualization()}),this.listenTo(q,"zd_controller:filterAll",this._onFilterAll),this.listenTo(q,"zd_controller:unfilterAll",this._onUnfilterAll),this.listenTo(q,"actionList:closed",this._onActionListHide),this.listenTo(q,"widget:fullscreen",this._onFullscreen),this.listenTo(q,"widget:fullOff",this._offFullscreen),this.on("resize",this._onResize)},muteEvents:function(){this.stopListening(q,"visualization:showpopup",this.showPopup),this.stopListening(this.thread,"thread:message",this._onMessage),this.stopListening(this.thread,"thread:start",this._onStart),this.stopListening(this.thread,"thread:error",this._onStreamError),this.stopListening(this.thread,"thread:notDirtyData",this._onNotDirtyData),this.stopListening(this.thread,"thread:dirtyData",this._onDirtyData),this.stopListening(this.thread,"thread:pivotPaging",this._onPivotPaging),this.stopListening(this.thread,"thread:noData",this._onNoDataFound),this.stopListening(this.thread,"thread:startFromTimeDone",this._onStartFromTimeDone),this.stopListening(this.thread,"thread:viewport",this._onViewport),this.stopListening(this.thread,"thread:stop",this._onStop),this.stopListening(this.thread,"thread:exeption",this._onExeption),this.stopListening(this.state,"change",this.restartVisualization),this.stopListening(this.state,"change:clientSort",this.refreshVisualization),this.stopListening(this.state.filters,"add remove change reset",this.restartVisualization),this.stopListening(this.state.metrics,"change",this._onMetricChange),this.stopListening(this.state.metrics,"add",this._onMetricAdd),this.stopListening(this.state.metrics,"remove",this._onMetricRemove),this.stopListening(this.state.metrics,"reset",this._onMetricReset),this.stopListening(this.state.groupBy,"change reset",this._onGroupByChange),this.stopListening(q,"zd_controller:filterAll"),this.stopListening(q,"zd_controller:unfilterAll"),this.stopListening(q,"actionList:closed",this._onActionListHide),this.stopListening(q,"widget:fullscreen",this._onFullscreen),this.stopListening(q,"widget:fullOff",this._offFullscreen),this.off("resize",this._onResize),this._controller&&(c(this._controller.element).off("resize"),this._controller.element.resize=null)},initVisualization:function(){var a=this,b=(this.components.getComponentsNamespace(),h.MODE.WIDGET===h.mode());this._controller&&this._controller.toolbar().remove(),this.axisLabels=[],this.actionList&&(this.actionList.gestureTimeOut=null),this._controller={element:a.el,menu:{show:function(b){var c=[],d={top:0,left:0};if(b.x&&b.y)d.left=b.x,d.top=b.y;else{if(!b.event)throw new Error("Menu position is unspecified.");d.left=b.event.clientX,d.top=b.event.clientY}c=a.assemblyInteractiveElementActions({getter:b.data,menuConfig:b.menu,hiddenActions:b.hide}).actions,a.trigger("visualization:actionList:open",{at:d,actions:c})},hide:function(){a.trigger("visualization:actionList:close")}},tooltip:{show:function(b){var c={};if(a.tooltip){if(b.x&&b.y)c.at={left:b.x,top:b.y};else{if(!b.event)throw new Error("Tooltip position is unspecified.");c.event=b.event}b.data&&(c.getter=function(){return b.data}),b.color&&(c.color=b.color),a.tooltip.show(c)}},update:function(b){var c={};if(a.tooltip){if(b.x&&b.y)c.at={left:b.x,top:b.y};else{if(!b.event)throw new Error("Tooltip position is unspecified.");c.event=b.event}b.data&&(c.getter=function(){return b.data}),b.color&&(c.color=b.color),a.tooltip.update(c)}},move:function(b){var c={};if(a.tooltip){if(b.x&&b.y)c.at={left:b.x,top:b.y};else{if(!b.event)throw new Error("Tooltip position is unspecified.");c.event=b.event}a.tooltip.update(c)}},hide:function(){a.tooltip&&a.tooltip.hide()}},filters:{add:function(b){var c=a.state;return Array.isArray(b)?c.addFilters(b):c.addFilter(b),this},remove:function(b){var c=a.state;return c.removeFilter(b),this},addToAll:function(b){var c=a.UUID;return q.trigger("zd_controller:filterAll",{UUID:c,data:b}),this},removeFromAll:function(b){var c=a.UUID;return q.trigger("zd_controller:unfilterAll",{UUID:c,data:b}),this}},"switch":function(b){function c(){h=a.source.visualizations.findWhere({name:f})||a.source.visualizations.findWhere({type:e}),h.fetch().done(function(){d()})}function d(){a.setVisualization(h),g&&a._controller.filters.add(g,{silent:!0})}var e=b.type||b,f=b.name||b,g=b.filters,h=null;if(!e)throw new Error("Visualization type is unspecified.");return a.source.visualizations.bootstrap().done(function(){c()}),this},eventDispatcher:this.eventDispatcher,utilities:h,Graph:p,Datum:k,state:this.getVisualizationState(),config:this.getSourceConfiguration(),scope:{},labels:this.axisLabels,metrics:this.metrics,fields:this.fields,pickAttribute:function(b){var c=w.Picker();return a.trigger("attributePicker:show",c,b),c.result()},pickMetric:function(b){var c=w.Picker();return a.trigger("metricPicker:show",c,b),c.result()},showWarning:function(a){a.description=h.htmlEntities(a.description);var b=new z(a);b.showup()},onAdd:c.noop,onRemove:c.noop,onChange:c.noop,update:c.noop,onNoDataFound:c.noop,resize:c.noop,onStreamError:c.noop,onViewport:c.noop,onExeption:c.noop,onNotDirtyData:c.noop,onDirtyData:c.noop,onPivotPaging:c.noop,onStart:c.noop,onStop:c.noop,registerInteractiveElements:function(b,c,e,f){var g="object"==typeof c,h=g?c:e,i=h,j={};h&&h.tooltip&&a.tooltip&&(j.tooltip=a.tooltip,j.actionListTooltip=a.actionListTooltip,j.tooltip.originalConfig=h.tooltip,i=d.extend({},h,j)),i.interactive=this.isInteractive(),g?a.registerInteractiveElements(b,i,e,f):a.registerInteractiveElements(b,c,i,f)},releaseInteractiveElement:function(b,c){return a.releaseInteractiveElement(b,c)},registered:function(b){return a.elementsManager.registered(b)},requestData:function(){return a.thread.request_data.bind(a.thread)},isInteractive:function(){return this.state.interactiveMode},customReadyStatusDelay:!1,setVisualization:function(b,c){a.setVisualization(b,c)},createAxisLabel:function(b){a._createAxisLabel(b)},toolbar:function(){var d=a._controller.toolbar;if(!d.$_toolbar){d.$_toolbar=c('                            <div class="zd-visualization-toolbar navbar">                                 <div class="navbar-inner">                                      <div class="container">                                         <ul class="nav pull-left"/>                                          <ul class="nav pull-right"/>                                     </div>                                  </div>                            </div>').prependTo(c(a._controller.element).parent());var e=function(){return d.$_toolbar.find(".nav.pull-left")},f=function(){return d.$_toolbar.find(".nav.pull-right")};d.append=function(g,i){if(g.item&&void 0!==g.item.availableForMode&&"function"==typeof g.item.availableForMode){var j=g.item.availableForMode(h.mode());if(!j)return}var k=g.side||g.item&&g.item.side||"left",l=g.el||g.item&&g.item.render().$el;if(!l){var m=new ToolbarItem(g);l=m.render().$el}"left"===k?i?e().prepend(l):e().append(l):i?f().prepend(l):f().append(l),g.item&&g.name&&(d._items||(d._items={}),d._items[g.name]=g.item);var n=a.$el.parent().find(".zd-visualization-toolbar");return b&&"list"!==g.item.icon?c(l).remove():n.length>0?c(a._controller.element).css({height:"87%"}):c(a._controller.element).css("height","calc(100% - 42px)"),d},d.get=function(a){return d._items&&d._items[a]||null},d.remove=function(){d._items=null,d.$_toolbar.remove(),d.$_toolbar=null}}return d},getVisualizationName:function(){return a.getVisualizationName()}},c.each(this.metrics,function(b,c){return c.colorMetric?(a._controller.colorDataObj=c,!1):void 0}),a.config.get("variables").forEach(function(b){var c,d;("multi-group"===b.type||"group"===b.type)&&(c=JSON.parse(b.config||"{}"),c.groupColorSet&&a.state.groupBy.models.length>0&&(a._controller.colorDataObj=a.state.groupBy.models[c.colorGroupIndex],a._controller.colorDataObj.get("groupColorSet")||(a._controller.colorDataObj.set("groupColorSet",c.groupColorSet),a._controller.colorDataObj.set("autoShowColorLegend",c.autoShowColorLegend)),d=a.fields.findWhere({name:a._controller.colorDataObj.get("name")}),a._controller.colorDataObj._setField(d),a.state.colorDataObj=a._controller.colorDataObj,a.autoShowColorLegend=a.state.colorDataObj.get("autoShowColorLegend"),a.colorLegendPosition=a.state.colorDataObj.get("colorLegendPosition"),a.colorLegendPosition&&(a.colorLegendPosition=JSON.parse(a.colorLegendPosition))))}),this.state.config.set("clientSort",this.state.get("clientSort"));var e=d.filter(this.config.get("controls"),function(a){return a.indexOf("ToolbarItem")>=0?a:null});if(e.length>0){var f=[];e.forEach(function(b){if(window.Zoomdata.VisualizationToolbar[b]){var c=new window.Zoomdata.VisualizationToolbar[b]({controller:a._controller});c.name=b,f.push(c)}}),f=d.sortBy(f,function(a){return a.order||Number.MAX_VALUE}),f.forEach(function(b){a._controller.toolbar().append({item:b,name:b.name})})}this._controller.variables=this.config.get("source").variables,this.components.where({type:"text/javascript"}).forEach(function(b){b.execute(a._controller,window.Zoomdata)}),this._controller.update=this._controller.update||c.noop,this._controller.onAdd=this._controller.onAdd||c.noop,this._controller.onRemove=this._controller.onRemove||c.noop,this._controller.onChange=this._controller.onChange||c.noop,this._controller.clear=this._controller.clear||c.noop,this._controller.resize=this._controller.resize||c.noop,this._controller.onStreamError=this._controller.onStreamError||c.noop,this._controller.onNotDirtyData=this._controller.onNotDirtyData||c.noop,this._controller.onDirtyData=this._controller.onDirtyData||c.noop,this._controller.onPivotPaging=this._controller.onPivotPaging||c.noop,this._controller.onStart=this._controller.onStart||c.noop,this._controller.onViewport=this._controller.onViewport||c.noop,this._controller.onExeption=this._controller.onExeption||c.noop;var g=this.config.get("type");if(b&&"PIVOT_TABLE"!==g&&this._controller.toolbar().remove(),"PIVOT_TABLE"===g){var i=d.last(this.inheritanceManager.history).state.groupBy,j=[];i&&i.length>0&&(i.map(function(a){j.push(a.get("sort"))}),this.state.set("_pivotToSort",j,{silent:!0}))}this.initColorKey(),this.applyEvents()},removeVisualization:function(){var a=this.config.get("visId"),b={},d=c("script"),e=this.$el.parents(".widgetBody, .fullScreenContainer").eq(0);this.$el.appendTo(e),this.components.each(function(e){if("text/javascript"===e.get("type")){var f=e.get("id");d.each(function(d,e){e.getAttribute("src")&&e.getAttribute("src").indexOf(a)>-1&&e.getAttribute("src").indexOf(f)>-1&&(b[f]=c(e))})}}),e.children().not(".widgetContent").remove(),e.removeAttr("id"),this.clearVisualization(!0),this.setClearData(),this._controller&&(c(this._controller.element).children().not(".zd-legend").remove(),this._controller.labels.length>0&&this._controller.labels.forEach(function(a){a.remove(),a=null})),this.$el.removeAttr("style data-visid"),this.muteEvents(),this.trigger("visualization:removed");for(var f in b)b.hasOwnProperty(f)&&b[f].remove()},initColorKey:function(){var a;return this.colorKey instanceof y?a=this.colorKey:(a=new y({el:this.$el.find(".zd-legend"),controller:this,isDraggable:!0,autoShow:this.autoShowColorLegend,colorLegendPosition:this.colorLegendPosition}),this.colorKey=a),a},loadVisualization:function(){var a=this,b=this.components.getComponentsNamespace();return this.dfd=c.Deferred(),"undefined"==typeof window.Zoomdata&&(window.Zoomdata={}),window.Zoomdata.Visualizations instanceof Array?(a.trigger("visualization:loaded"),this.dfd.resolve()):(window.Zoomdata.Visualizations=window.Zoomdata.Visualizations||{},window.Zoomdata.Visualizations[b]=window.Zoomdata.Visualizations[b]||{},this.trigger("visualization:loading"),this.$el.attr("data-visid",this.config.get("visId")).removeAttr("id"),this.libraries.load().done(function(){a.components.load().done(function(){a.trigger("visualization:loaded"),a.dfd.resolve()}).fail(function(a,b,c){throw new Error(c)})}).fail(function(a,b,c){throw new Error(c)})),this.dfd.promise()},setUUID:function(){this.thread.setUUID(),this.UUID=this.thread.getUUID(),this.config.set("id",this.UUID),this._controller.UUID=this.UUID},applyScope:function(){var a,b=this,e=this._controller.state.config.attributes.components,f=document.styleSheets,g=null,h="uuid_",i=document.createElement("style"),j=b.config.attributes.visId;if(document.body.appendChild(i),a=i.scoped+"",i.parentNode.removeChild(i),a){var k=c('style[data-visid="'+j+'"]');return k.appendTo(b.$el),k.attr("scoped",""),void k.scopedPolyFill()}e.map(function(a){try{if("text/css"===a.type){for(var c=0,e=f.length;e>c;c++){var i=f[c],k=a.id;if(j&&i.ownerNode.attributes["data-visid"]&&j===i.ownerNode.attributes["data-visid"].value&&k&&i.ownerNode.attributes["data-componentid"]&&k===i.ownerNode.attributes["data-componentid"].value&&void 0===i.UUID){g=i;break}}if(g){var l=b._controller.UUID;for(b.$el.attr("id",h+l),c=0,e=g.cssRules.length;e>c;c++){var m=g.cssRules?g.cssRules[c].selectorText.split(","):g.rules[c].selectorText.split(","),n="";if(m.forEach(function(a,b){n+="#"+h+l+" "+a+(b!==m.length-1?",":"")}),g.cssRules){g.cssRules[c].selectorText=n;var o=d.extend({},g.cssRules[c]);g.removeRule?g.removeRule(c):g.deleteRule(c)}else{g.rules[c].selectorText=n;var o=d.extend({},g.rules[c]);g.removeRule?g.removeRule(c):g.deleteRule(c)}g.insertRule?g.insertRule(o.cssText,c):g.addRule(n,o.style.cssText,c)}}}}catch(p){throw console.log("Scoped error",p),p}})},startVisualization:function(){return this.setUUID(),this._controller.delayedStart&&this._controller.delayedStart===!0?void 0:(this.thread.start(),this)},stopVisualization:function(){return this.thread.stop(),this.trigger("visualization:stop",this),q.trigger("visualization:stop",this),this},restartVisualization:function(){this.setClearData(),this.stopVisualization(),this.startVisualization()},refreshVisualization:function(){var a,b=this.state.get("clientSort"),c=this.state.metrics.at(0),d=this._controller.colorDataObj;c&&b&&this.state.config.set("clientSort",b);var e=this.data;"function"==typeof this._controller.processData&&this._controller.processData(e,this.progress),d&&!d.isMetric()&&(a=this.fields.findWhere({name:d.get("name")}),d._setField(a)),this._updateMetricsDomain(e),this.processSocketData(e,this.progress)},clearVisualization:function(a){a||(this.setClearData(),this.refreshVisualization()),this._controller?("function"==typeof this._controller.clear&&this._controller.clear(),this.releaseAllInteractiveElements()):this.dfd&&this.dfd.reject(),this.trigger("visualization:clear",this),q.trigger("visualization:clear",this)},hideInteractiveElements:function(){this._controller&&this._controller.menu.hide()},getControlsList:function(){var a=["TimeLine","PausedIndicator","SpeedIndicator","Date"],b=this.state.config.get("source").hasOwnProperty("showTimeLine")?this.state.config.get("source").showTimeLine:this.source.get("showTimeLine"),c=[];return this.getSourceConfiguration().controls.forEach(function(d){(b||-1==a.indexOf(d))&&c.push(d)}),c},getSourceConfiguration:function(){return this.config.toJSON()},getVisualizationState:function(){return this.state},updateVisualizationState:function(a){return this.state.set(a),this},setClearData:function(){this.data=[],this.worker&&this.worker.postMessage("data:clear")},processSocketData:function(a){var b=this,c=this.worker,d=this._controller.state.groupBy.pluck("sort");if(c)c.onmessage=function(a){if(a.data.data){b.data=a.data.data;var c=JSON.parse(JSON.stringify(b.data));b._updateMetricsDomain(c),b._controller.update(c,b.thread.progress(),{original_data:a.data.original_data}),b.trigger("visualization:dataUpdate")}else a.data.type&&"log"===a.data.type&&console.log("WebWorker:",a.data.info)},c.postMessage({data:a,oldData:this.data,groupSort:d});else{if(a instanceof Array&&a.length>0){var e,f=[],g={},h={},i=this.data;if(0===i.length)f=a;else if(0===a.length)f=i;else{i.forEach(function(a){var b=Array.isArray(a.group)?a.group.join():a.group;g[b]=a}),a.forEach(function(a){var b=Array.isArray(a.group)?a.group.join():a.group;h[b]=a});for(e in h)h.hasOwnProperty(e)&&(-1===h[e].current.count?g[e]&&delete g[e]:g[e]=h[e]);for(e in g)g.hasOwnProperty(e)&&f.push(g[e])}this.data=this._sortData(f),g=null,h=null}var j=JSON.parse(JSON.stringify(this.data));this._updateMetricsDomain(j),this._controller.update(j,this.thread.progress(),{original_data:a}),b.trigger("visualization:dataUpdate")}},_sortData:function(a){var b=this.state.get("clientSort"),c=[];if(b&&this.state.metrics.size()>0){var d=null,e=this.metrics[this.state.metrics.at(0).get("label")];switch(e instanceof Array&&(e=e[0]),b){case"valueDescending":d=function(a,b){var c=e.raw(b)-e.raw(a);if(0===c){var d=a.group.join?a.group.join(""):a.group,f=b.group.join?b.group.join(""):b.group;return d.localeCompare(f)}return c};break;case"valueAscending":d=function(a,b){var c=e.raw(a)-e.raw(b);if(0===c){var d=a.group.join?a.group.join(""):a.group,f=b.group.join?b.group.join(""):b.group;return f.localeCompare(d)}return c};break;case"alphabetical":d=function(a,b){var c=a.group.join?a.group.join(""):a.group,d=b.group.join?b.group.join(""):b.group;return c.localeCompare(d)};break;case"reverseAlphabetical":d=function(a,b){var c=a.group.join?a.group.join(""):a.group,d=b.group.join?b.group.join(""):b.group;return d.localeCompare(c)};break;default:d=null}c=a.sort(d)}else c=a;return c},_updateMetricsDomain:function(a){function b(e){c.each(e,function(c,e){e instanceof Array?b(e):(e._updateDomain(a,d.state.colorNumb),d.state.colorMetricDomain=e.domain())})}var d=this;b(this.metrics),this.state.colorDataObj&&!this.state.colorDataObj.isMetric()&&this.state.colorDataObj._updateDomain(a)},_updateMetricsDivergingColorRange:function(a){function b(d){c.each(d,function(c,d){d instanceof Array?b(d):d.setColorRangeType(a)})}this.state.divergingColorRange=a,b(this.metrics)},calculateBottomMargin:function(a){var b;switch(a){case"large":b=10;break;case"medium":b=40;break;case"small":b=50}return b},_onResize:function(){var a=c(this._controller.element),b=a.parents(".widget, .fullScreenContainer").eq(0),d=b.width(),e=b.height(),f=a.width(),g=a.height(),i=h.getWidgetSizeClass(d,e),j=this.$el.parent().find(".zd-visualization-toolbar"),k=0;j.length>0&&(k=this.calculateBottomMargin(i)),a.trigger("resize",[f,g]),f=a.width(),g=a.height()-k,this.trigger("legend:reposition"),this._controller.resize(f,g,i)},_onFullscreen:function(){this.hideInteractiveElements()},_offFullscreen:function(){this.hideInteractiveElements()},_onStreamError:function(a){this._controller.onStreamError(a)},_onStart:function(a){this._controller.onStart(a),this.trigger("visualization:start")},_onNotDirtyData:function(a){this._controller.onNotDirtyData(a)},_onDirtyData:function(a){this._controller.onDirtyData(a)},_onPivotPaging:function(a){this._controller.onPivotPaging(a)},_onActionListHide:function(){this.tooltip.unsnap()},_onViewport:function(a){this._controller.onViewport(a)},_onExeption:function(a){this._controller.onExeption(a)},_onStop:function(a){this._controller.onStop(a)},startFromTime:function(a,b){this.thread.startFromTime(b)},startFromTimeTo:function(a,b){this.thread.startFromTimeTo(b)},updateSpeed:function(a,b){this.thread.updateSpeed(b)},togglePause:function(a){var b=this.thread;"undefined"!=typeof a?a?b.unpause():b.pause():this.thread.togglePause()},saveStateAndPause:function(){this._wasPaused=this.thread.time.get("paused"),this._wasLive=this.thread.time.get("live"),this._wasPaused||this.thread.time.set("paused",!0)},restorePlayState:function(){this._wasPaused||this.thread.time.set("paused",!1),this._wasLive&&(this.thread.switchOnLiveMode(),this.thread.startFromTime(null))},getRestrictions:function(a){var b=a.restrictions,c=d.map(b,function(a){return{path:a.path,operation:a.operation,value:a.value}});return d.filter(c,function(b){return b.path!=a.tsField})},getDefaultTemplate:function(){return A},getVisualizationName:function(){var a=this.state.metrics,b=a.at(0),c=(b?this.metrics[b.get("label")]:null,this.config.get("source")),d=this.config.get("type"),e=(this.config.get("name"),this.state.groupBy.getAttribute()),f=this.fields.findWhere({name:e}),g=(f?f.get("label"):e,c.sourceName),h=c.variables["Visualization Name"]||this.getDefaultTemplate(d),i=h||g;return h&&(i=i.replace(A,g)),i}})},{"../../Core/MVC":6,"../../collections/ComponentSources":11,"../../collections/Graph":21,"../../collections/LibrariesSources":24,"../../controls":66,"../../models/SourceVisualization":130,"../../utilities":144,"../../views/ColorKey":166,"../../views/ModalWarning":298,"./../../models/Zoomdata.Models.js":139,"./../DashboardEvents":34,"./../DeferredPick":35,"./../InteractiveElements":40,"./../InteractiveElementsMethods":42,"./../MetricAccessor":44,"./../StateInheritanceManager":50,"./../Thread":51,colorbrewer:89,jquery:103,underscore:458}],53:[function(a,b){b.exports=a("./VisualizationController")},{"./VisualizationController":52}],54:[function(a,b){!function(){var a={example:"This is an example with %someParam% and %oneMore% params.",distinct_count:"Distinct Count",last_value:"Last Value",min:"Min",max:"Max",sum:"Sum",avg:"Avg"};b.exports={text:function(b,c){var d=a[b];if(!d)return b;var e=d.match(/(%[^%]*%)/g);if(e)for(var c=c||{},f=0;f<e.length;f++){var g=e[f],h=g.replace(/%/g,""),i=c[h]||"";d=d.replace(g,i)}return d}}}()},{}],55:[function(a,b){function c(a,b){"use strict";var c,e;if("object"==typeof a){e=a;for(c in e)e.hasOwnProperty(c)&&d(f,c,e[c])}else d(f,a,b)}function d(a,b,c){"use strict";var f;if(-1!==e.indexOf(typeof c)){if("set"===b)throw Error("illegal property name");a[b]=c}else{if("object"!=typeof c)throw Error("illegal property value");a[b]="object"==typeof a[b]?a[b]:c instanceof Array?[]:{};for(f in c)c.hasOwnProperty(f)&&d(a[b],f,c[f])}}var e=["string","number","boolean"],f={set:c};b.exports=f},{}],56:[function(a,b){!function(){"use strict";var c=a("./dialogTemplate.html"),d=a("../Core/MVC"),e=d.Events,f=d.View,g=a("underscore"),h=a("jquery"),i=a("./paletteActionButton.html"),j=f.extend({template:c,defaults:{mode:"dialog",draggable:!1,wide:!1,modal:"static",rejectButtonLabel:"Close",acceptButtonLabel:"Accept",rejectButtonTitle:"Close",acceptButtonTitle:"Accept",containment:h("body"),docked:!0,customClass:""},events:{'click button[value="dialog-reject"]':"hide",'click button[value="dialog-accept"]':"accept",'click button[value="dialog-back"]':"back"},initialize:function(a){function b(){if(c.$el.hasClass("dialog")){var a,b=c.$el.find(".modal-header"),d=c.$el.find(".modal-footer"),e=b.outerHeight(!0),f=d.outerHeight(!0);c.$body.css({height:h(window).height()-e-f-35}),a=c.$el.outerHeight(!0)<h(window).height()?(h(window).height()-c.$el.outerHeight(!0))/2:0,c.$el.animate({top:a})}}f.prototype.initialize.apply(this,arguments),g.bindAll(this,"back");var c=this;switch(a=a||{},a.actions&&(this.actions=a.actions,delete a.actions),a.template&&(this.template=a.template,delete a.template),this.settings=h.extend({},this.defaults,a),this.removeOtherDocked(),h(".modal-backdrop.zd-overlay").remove(),this.setElement(this.template({rejectButtonLabel:this.settings.rejectButtonLabel,acceptButtonLabel:this.settings.acceptButtonLabel,rejectButtonTitle:this.settings.rejectButtonTitle,acceptButtonTitle:this.settings.acceptButtonTitle,customClass:this.settings.customClass})),this.$el.appendTo("body"),this.$el.modal({show:!1,backdrop:this.settings.modal,keyboard:!1}),this.settings.mode){case"palette":this.$(".dialog-controls").hide();break;case"alert":this.$('button[value="dialog-accept"]').hide()}this.$head=this.$(".dialog-head"),this.$body=this.$(".dialog-body"),this.$actions=h('<div class="zd-dialog-actions btn-group btn-block"></div>'),this.setActions(a.actions),this.settings.draggable&&this.$el.draggable({handle:this.$(".dialog-head, .header"),start:function(){c.$el.removeClass("fade"),"function"==typeof c.settings.draggable.onDragStart&&c.settings.draggable.onDragStart.apply(this,arguments)},stop:function(){c.$el.addClass("fade"),"function"==typeof c.settings.draggable.onDragStop&&c.settings.draggable.onDragStop.apply(this,arguments)},cursor:"move",containment:this.settings.containment}),this.settings.wide&&this.goWide(),this.$el.data().modal.$element.one("hidden",function(){c.trigger("dialog:rejected"),c.remove(),c.onReject(),c.onHide()}),this.listenTo(e,"visualization:add",function(){this.hide()}),this.listenTo(e,"admin-control:clicked",this.removeOtherDocked);var d=g.debounce(b,450);h(window).on("resize",d)},removeOtherDocked:function(){var a=h(".modal.zd-palette.docked"),b=h(".modal.zd-infopopup.docked");h(".control-rounded").removeClass("active"),h(".control-button").removeClass("active"),h(".header-control").removeClass("active"),a.remove(),b.remove()},setActions:function(a){var b=this;return a?this.actions=a:a=this.actions,this.$actions.empty(),g.each(this.actions,function(a){var c=h(i({type:a.type,label:a.label,title:a.title||a.label}));b.$actions.append(c),c.on("click",a.callback),c.css({width:100/b.actions.length+"%"})}),this},clearActions:function(){return this.actions=null,this.$actions.empty(),this},render:function(a,b){return this.$el.attr("data-name",b),this.$body.empty(),this.$head.empty(),this.$body.append(a),b instanceof h||b instanceof HTMLElement?(this.$head.append(b),this.$head.show()):"string"==typeof b?(this.$head.text(b),this.$head.show()):this.$head.hide(),this.$el.modal("show"),this._onFullScreenMode()&&(this.zIndex=this.zIndex||this.$el.zIndex(),this.$el.zIndex(this.zIndex+10),this.listenToOnce(e,"widget:fullOff",this.hide)),this.$el.find('button[value="dialog-back"]').on("click",this.back),this.actions&&0==this.$(this.$actions).length?this.$body.after(this.$actions):null,this.delegateEvents(),e.trigger("dialog:show"),this},goWide:function(){return this.$el.hasClass("wide")?null:this.$el.addClass("wide"),this.resetSizes(),this},goNormal:function(){return this.$el.hasClass("wide")?this.$el.removeClass("wide"):null,this.resetSizes(),this},resetSizes:function(){return this.$el.css({width:"",height:""}),this.$body.css({width:"",height:""}),this.adjustBodySizes(),this},adjustBodySizes:function(){var a=this.$el,b=h(this.settings.containment),c=b.offset(),d=this.$el.offset(),e=d,f={};d.left+=44,d.top+=44,e.left=d.left-c.left,e.top=d.top-c.top,e.right=b.width()-e.left-a.width(),e.bottom=b.height()-e.top-a.height(),e.left<0?(f.maxWidth+=e.left,f.marginLeft=parseInt(this.$el.css("margin-left"))-e.left):null,e.right<0?(f.maxWidth+=e.right,f.marginRight=parseInt(this.$el.css("margin-right"))-e.right):null,f.maxHeight=b.height()-e.top-d,this.$el.css(f),this.$body.css({maxHeight:f.maxHeight})},position:function(a){var b=this.$el.data().modal;return a=a||{},b&&b.$element.css({left:a.left||"",top:a.top||"",right:a.right||"",bottom:a.bottom||""}),(a.of||a.my||a.at||a.collision)&&(this.$el.position({of:a.of,my:a.my,at:a.at,collision:a.collision,within:h(this.settings.containment),using:a.using}),this.adjustBodySizes()),this},positionInToolbar:function(a){this.position({of:a,my:"right+40px bottom-20px",at:"center top",collision:"flip flip"});var b=this.$el,c=(h(this.settings.containment),a.getBoundingClientRect()),d=document.body.offsetWidth,e=(document.body.offsetHeight,d-(c.width+c.left)),f=c.left,g={left:0,top:c.top,width:0,height:0},i=(parseInt(b.css("maxWidth"),10),{left:10,top:-35});g.width=f>e?f-120:e-40,g.left=c.width+c.left-40,b.css({margin:0,left:g.left+"px",top:g.top+50+"px",width:g.width+"px"}),this.$pointer.css({left:i.left+"px","-webkit-transform":"scale(1, -1)","-moz-transform":"scale(1, -1)","-ms-transform":"scale(1, -1)"})},onBeforeHide:h.noop,hide:function(){if(this.onBeforeHide()!==!1){var a=this;this.$el.hasClass("rail-control")?this.$el.animate({left:-1*this.$el.width()},300,function(){a.$el.modal("hide")}):this.$el.fadeOut(200,function(){a.$el.modal("hide")})}},onReject:h.noop,onBeforeAccept:h.noop,accept:function(){var a=this;this.onBeforeAccept()!==!1&&(this.$el.off("hidden"),this.$el.one("hidden",function(){a.trigger("dialog:accepted"),a.remove(),a.onAccept(),a.onHide()}),this.$el.modal("hide"))},back:function(){this.onBack()},_onFullScreenMode:function(){return h(".fullScreenView").is(":visible")},onAccept:h.noop,onHide:h.noop,onBack:h.noop});b.exports=j}()},{"../Core/MVC":6,"./dialogTemplate.html":64,"./paletteActionButton.html":69,jquery:103,underscore:458}],57:[function(a,b){!function(){"use strict";var c=a("../Core/MVC/View"),d=a("underscore"),e=a("jquery"),f=a("./Dialog"),g=a("../views/SearchBox"),h=a("./paletteTemplate.html"),i=a("./dialogTemplate.html"),j=f.extend({template:h,events:{"mousedown .modal-header":"moveToFront",'click button[value="dialog-reject"]':"hide","click .zd-palette-background":"hideDocked","keypress input":"keyEnterPressed","mousewheel .zd-palette-background":"prevent2FingerGesture"},defaults:{template:i,mode:"palette",draggable:!0,docked:!1,modal:!0,containment:".zd-main-section",minWidth:250,minHeight:100,defaultWidth:264},keyEnterPressed:g.prototype.keyEnterPressed,initialize:function(a){function b(){e(window).height()<h.$el.outerHeight(!0)&&h.$body.css({height:e(window).height()-36-h.$el.find(".modal-header").outerHeight(!0)})}c.prototype.initialize.apply(this,arguments);var g,h=this;a=a||{},d.bindAll(this,"showBackButton","hideBackButton"),f.prototype.initialize.apply(this,arguments),this.$body.css({maxHeight:"none"}),g=d.debounce(b,300),e(window).on("resize",g),e(this.settings.containment).length&&this.$body.css({height:e(this.settings.containment).height()-24-59}),this.$el.on("dragstop",function(){h.adjustBodySizes()}),this.options.draggable&&this.setDragEvents()},render:function(){return f.prototype.render.apply(this,arguments),this.$el.resizable({containment:".zd-main",alsoResize:this.$body,minWidth:this.settings.minWidth,minHeight:this.settings.minHeight}),this.$el.data().modal.$backdrop.addClass("zd-overlay"),this.isDocked()?null:this.undock(),this.actions?this.$body.append(this.$actions):null,this},setDragEvents:function(){var a=this;this.palettePosition={left:e(".zd-main-section .leftPane").width()+2,top:e(".zd-main-header").height()||1},this.settings.draggable={onDragStart:function(){a.$el.removeClass("docked"),a.$el.addClass("undocked"),a.settings.docked=!1,a.$("div.zd-palette-background").remove()
}}},isDocked:function(){return this.settings.docked},undock:function(){return this.$el.removeClass("docked"),this.$el.hasClass("undocked")?null:this.$el.addClass("undocked"),this.$("div.zd-palette-background").hide(),this.settings.docked=!1,this},dock:function(a){function b(){var a=!c.$("div.zd-palette-background").length>0;a&&(c.$el.css({width:c.settings.defaultWidth,height:e(c.settings.containment).height()}),c.$body.css({width:c.settings.defaultWidth-24,height:e(c.settings.containment).height()-c.$head.parent().height()-24}))}var c=this;return this.position(a),this.$el.removeClass("undocked"),this.$el.hasClass("docked")?null:this.$el.addClass("docked"),this.$("div.zd-palette-background").show(),this.settings.docked=!0,b(),this},hide:function(){this.$el.removeClass("active"),this.$el.removeClass("fade"),f.prototype.hide.apply(this,arguments)},hideDocked:function(){this.settings.docked&&this.hide()},moveToFront:function(){this._onFullScreenMode()?(e(".zd-palette").zIndex(e(".leftPane").zIndex()-2),this.$el.zIndex(e(".leftPane").zIndex()-1)):(e(".zd-palette").zIndex(1018),this.$el.zIndex(1019))},showBackButton:function(){this.$('button[value="dialog-back"]').show()},hideBackButton:function(){this.$('button[value="dialog-back"]').hide()},remove:function(){this.clearActions(),f.prototype.remove.apply(this,arguments)},prevent2FingerGesture:function(a){a.preventDefault()}});b.exports=j}()},{"../Core/MVC/View":5,"../views/SearchBox":326,"./Dialog":56,"./dialogTemplate.html":64,"./paletteTemplate.html":70,jquery:103,underscore:458}],58:[function(a,b){!function(){"use strict";var c=a(".").SidePane,d=a("jquery"),e=a("./searchSidePaneDetails.html"),f=c.extend({render:function(){c.prototype.render.apply(this,arguments);var a=this;return this.$detailTab=this.$detailTab||d(e()),this.$detailTab.off("click"),this.$detailTab.on("click",function(){a.togglePanelDetails()}),this.$sidePane=this.$el.find(".zd-side-pane"),this.$sidePane.prepend(this.$detailTab),this},togglePanelDetails:function(){this.options.paneWidth=this.options.paneWidth||this.$sidePane.width(),this.$detailTab.hasClass("shown")?(this.$detailTab.removeClass("shown"),this.$sidePane.addClass("hidden"),this.$sidePane.css("width",0),this.$sidePane.css("right",-24)):(this.$detailTab.addClass("shown"),this.$sidePane.removeClass("hidden"),this.$sidePane.css("width",this.options.paneWidth),this.$sidePane.css("right",0))}});b.exports=f}()},{".":66,"./searchSidePaneDetails.html":78,jquery:103}],59:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<button class="arrow-left btn" title="left" value="left"><i class="icon-arrow-left"></i></button>\n<div class="btn-group-vertical">\n    <button class="arrow-up btn" title="up" value="up"><i class="icon-arrow-up"></i></button>\n    <button class="arrow-down btn" title="down" value="down"><i class="icon-arrow-down"></i></button>\n</div>\n<button class="arrow-right btn" title="right" value="right"><i class="icon-arrow-right"></i></button>';return __p}},{lodash:456}],60:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<button class="arrow-left btn" title="left" value="left"><i class="icon-arrow-left"></i></button>\n<button class="arrow-right btn" title="right" value="right"><i class="icon-arrow-right"></i></button>';return __p}},{lodash:456}],61:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="btn-group-vertical">\n    <button class="arrow-up btn" title="up" value="up"><i class="icon-arrow-up"></i></button>\n    <button class="arrow-down btn" title="down" value="down"><i class="icon-arrow-down"></i></button>\n</div>';return __p}},{lodash:456}],62:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="color-picker-button" style="background: '+(null==(__t=color)?"":__t)+';"></div>';return __p}},{lodash:456}],63:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<span>"+(null==(__t=message)?"":__t)+'</span>\n<i title="'+(null==(__t=acceptTitle)?"":__t)+'" class="icon-ok icon-white"></i>\n<i title="'+(null==(__t=cancelTitle)?"":__t)+'" class="icon-remove icon-white"></i>';return __p}},{lodash:456}],64:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="modal hide fade '+(null==(__t=customClass)?"":__t)+'" >\n    <div class="modal-header">\n        <button title="Close" value="dialog-reject" class="close">&times;</button>\n        <h3 class="dialog-head pull-left"></h3>\n        <div class="clearfix"></div>\n    </div>\n    <div class="modal-body dialog-body">\n    </div>\n    <div class="modal-footer dialog-controls">\n        <button title="'+(null==(__t=rejectButtonTitle)?"":__t)+'" value="dialog-reject" class="btn btnNo" aria-hidden="true">'+(null==(__t=rejectButtonLabel)?"":__t)+'</button>\n        <button title="'+(null==(__t=acceptButtonTitle)?"":__t)+'" value="dialog-accept" class="btn btn-primary btnYes">'+(null==(__t=acceptButtonLabel)?"":__t)+"</button>\n    </div>\n</div>";return __p}},{lodash:456}],65:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="fsWrapper">\n    <div class="fsHeader">\n        <div class="fsHead"></div>\n        <div class="exitFullscreen"><i class="zd icon exit-fullscreen"></i></div>\n        <div class="clearfix"></div>\n    </div>\n    <div class="fsBody">\n        <div class="fullScreenContainer"></div>\n    </div>\n    <div class="fsFooter">\n        <div class="fullScreenFooter"></div>\n    </div> \n</div>\n<div class="fsExpander"></div>';return __p}},{lodash:456}],66:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../Core/MVC"),f=e.Events,g=a("./../utilities"),h=(a("./../views/SearchBox/index.js"),a("./../models/User")),i=a("../Core/MVC/View"),j=a("../components/Vocabulary"),k={};k.$root=c("body"),k.setRoot=function(a){this.$root=a instanceof c?a:c(a)};var l=a("./fullscreenTemplate.html");k.FullScreenView=i.extend({className:"fullScreenView",template:l,events:{"click .exitFullscreen":"close"},initialize:function(a){a=a||{root:c("body")},this.$root=a.root,i.prototype.initialize.apply(this,arguments),this.$el.appendTo(this.$root),this.$el.hide(0),this.$el.append(this.template()),this.$wraper=this.$(".fsWrapper"),this.$header=this.$(".fsHeader"),this.$head=this.$(".fsHead"),this.$body=this.$(".fullScreenContainer"),this.$styles=this.$("style"),this.$footer=this.$(".fullScreenFooter"),this.$expander=this.$(".fsExpander"),this.$bodyPlaceholder=c("<span></span>"),this.currentBody=null,this.$headPlaceholder=c("<span></span>"),this.currentHead=null,this.listenTo(f,"switch:section",this.close)},render:function(a,b){function d(a){j.html(),a instanceof i&&(a=a.el),c(a).before(g),j.append(a),f.currentBody=a}function e(a){k.html(),a instanceof i&&(a=a.el),c(a).before(h),k.append(a),f.currentHead=a}var f=this,g=this.$bodyPlaceholder,h=this.$headPlaceholder,j=this.$body,k=this.$head,l=this.$header,m=c.Deferred();return this.$el.appendTo(this.$root).fadeIn(function(){a?d(a):j.addClass("empty"),b?e(b):l.addClass("empty"),m.resolve(),f.trigger("open")}),this.delegateEvents(),m.promise()},close:function(){var a=this,b=this.$bodyPlaceholder,d=this.$headPlaceholder,e=this.currentBody,f=this.currentHead,g=c.Deferred();return this.trigger("startClosing"),a.$el.fadeOut("fast",function(){e&&(b.after(e),b.detach()),f&&(d.after(f),d.detach()),g.resolve(),a.trigger("close")}),g.promise()},adjustBodySizes:function(){var a=this.$body.parent().prev(),b=a.offset().top+a.outerHeight()+parseFloat(a.css("margin-bottom"));this.$body.parent().css("top",b)},setActive:function(a){this._active=!!a},isActive:function(){return this._active}}),k.Slider=e.View.extend({defaults:{orientation:"vertical",range:!1,value:50,min:0,max:100},initialize:function(a){var b=this,d={start:function(a,c){b.trigger("slide:start",c.value,b),b.data.set("value",c.value,{silent:!0})},stop:function(a,c){b.trigger("slide:stop",c.value,b),b.data.set("value",c.value,{silent:!0})},change:function(a,c){b.trigger("slide:change",c.value,b),b.data.set("value",c.value,{silent:!0})}};this.options=c.extend({},this.defaults,a),this.data=new e.Model({min:this.options.min,max:this.options.max,value:this.options.value}),this.$el.slider(c.extend({},d,this.options)),this.listenTo(this.data,"change",this.render)},render:function(){return this.$el.slider(this.data.attributes),this},value:function(a){function b(){return d.data.get("value")}function c(a){d.data.set("value",a)}var d=this;return"number"==typeof a?(c(a),this):b()},min:function(a){function b(){return d.data.get("min")}function c(a){d.data.set("min",a)}var d=this;return"number"==typeof a?(c(a),this):b()},max:function(a){function b(){return d.data.get("max")}function c(a){d.data.set("max",a)}var d=this;return"number"==typeof a?(c(a),this):b()}});var m=a("./arrowHorizontalTemplate.html"),n=a("./arrowVerticalTemplate.html"),o=a("./arrowAllTemplate.html");k.Arrows=e.View.extend({_horizontalTemplate:m,_verticalTemplate:n,_allTemplate:o,defaults:{direction:"all"},events:{'click button[value="up"]':"_onUpClick",'click button[value="down"]':"_onDownClick",'click button[value="left"]':"_onLeftClick",'click button[value="right"]':"_onRightClick"},initialize:function(a){switch(this.childViews=[],this.options=c.extend({},this.defaults,a),this.options.direction){case"vertical":this.template=this._verticalTemplate;break;case"horizontal":this.template=this._horizontalTemplate;break;case"all":default:this.template=this._allTemplate}},render:function(){return this.$el.html(this.template()),this},_onUpClick:function(){this.trigger("translate:up")},_onDownClick:function(){this.trigger("translate:down")},_onLeftClick:function(){this.trigger("translate:left")},_onRightClick:function(){this.trigger("translate:right")}}),k.Zoomable=e.View.extend({className:"zoomable",defaults:{snapToEdges:!0,maxScale:!1,minScale:!1,eventNamespace:"zoomable:",mouseWheel:!1},initialize:function(a){var b=this;this._enabled=!0,this.childViews=[],this.options=c.extend({},this.defaults,a),this.$content=c('<div class="zoomable-content"></div>').appendTo(this.$el),g.MODE.NATIVE!==g.mode()&&(this._zoomHammer=this.$content.zoomHammer(this.options).data("zoomHammer"),this.$el.on("zoomable:transformstart",function(){b.trigger("transform:start",b)}),this.$el.on("zoomable:transformend",function(){b.trigger("transform:end",b)}),this.$el.on("zoomable:transform",function(){b.trigger("transform:transition",b)}))},disable:function(a){var b=a?a.resizeStart:null;this._zoomHammer&&this._zoomHammer.disable(),this.$el.hasClass("zoomable-disabled")||b?null:this.$el.addClass("zoomable-disabled"),this._enabled=!1},enable:function(a){var b=a?a.resizeStop:null;this._zoomHammer&&this._zoomHammer.enable(),this.$el.hasClass("zoomable-disabled")&&!b?this.$el.removeClass("zoomable-disabled"):null,this._enabled=!0},isEnabled:function(){return this._enabled},getMinScale:function(){return this._zoomHammer&&this._zoomHammer.parsedScale().min||1},setMinScale:function(a){return a||(a=this._zoomHammer.options.minScale),this._zoomHammer.options.minScale=a,this},getMaxScale:function(){return this._zoomHammer&&this._zoomHammer.parsedScale().max||1},setMaxScale:function(a){return a||(a=this._zoomHammer.options.maxScale),this._zoomHammer.options.maxScale=a,this},getScale:function(){return this._zoomHammer&&this._zoomHammer.scale()||1},getTranslation:function(){return this._zoomHammer&&this._zoomHammer.translate()||null},zoom:function(a,b,c){return this._zoomHammer&&this._zoomHammer.move({scale:a},b,c),this},translate:function(a,b){return a=a||{},"number"==typeof a.x?a.left=a.x:null,"number"==typeof a.y?a.top=a.y:null,delete a.x,delete a.y,this._zoomHammer&&this._zoomHammer.move(a,b),this},refresh:function(a,b){this._zoomHammer&&this._zoomHammer.adjust(a,b)},render:function(a){return this.$content.html(a),this}}),k.Dialog=a("./Dialog"),k.Palette=a("./Palette");var p=a("./infoPopupTemplate.html"),q=a("./pointerTemplate.html");k.InfoPopup=k.Dialog.extend({template:p,events:{"click .zd-infopopup-background":"hide","keypress input":"keyEnterPressed"},defaults:{autohide:!0,mode:"palette",draggable:!1,resizable:!1,modal:!1,containment:c("body")},keyEnterPressed:function(a){k.Palette.prototype.keyEnterPressed.apply(a,arguments)},initialize:function(a){function b(){e._lastPostiton?e.position():null}var e=this;this.options=c.extend({},this.options,a),this._lastPostiton=null,this._repostionCallback=d.debounce(b,300),c.extend(this.events,k.Dialog.prototype.events),k.Dialog.prototype.initialize.apply(this,arguments),this.$pointer=this.$wrapElement(q()),c("body").one("dragstart",function(){e.hide()}),this.$el.on("dragstart",!1),c(window).on("resize",this._repostionCallback),(this.options.autohide===!0||"string"==typeof this.options.autohide&&-1!==this.options.autohide.search("onStop"))&&this.listenTo(f,"visualization:stop",this.hide)},render:function(){return k.Dialog.prototype.render.apply(this,arguments),this.$(".zd-infopopup-background").show(),this.options.docked&&this.$el.addClass("docked"),this.$el.on("mousewheel","textarea",function(a,b,d,e){a.preventDefault();var f=c(this).scrollTop();c(this).scrollTop(f+e)}),this},position:function(a){function b(b,d){b.top+=a.pointerTop||0,c.$el.css(b),c._showPointer(d)}var c=this;return this.positionOptions=a=a||this._lastPostiton||{},this._lastPostiton=a,a.using=a.using||b,k.Dialog.prototype.position.call(this,a)},_showPointer:function(a){var b=this.options.pointerWidth?this.options.pointerWidth:14,c=a.element,d=a.target,e={},f="behind",g=b+"px solid transparent",h=b+"px solid rgba(50, 50, 50, 0.9)",i=parseInt(this.$el.css("border-radius"));if(d.center={left:d.left+d.width/2,top:d.top+d.height/2},c.center={left:c.left+c.width/2,top:c.top+c.height/2},d.center.top-=this.positionOptions.pointerTop||0,e.vertical=d.center.top-c.center.top,e.vertical=e.vertical<0?e.vertical+"px":"+"+e.vertical+"px",e.horizontal=d.center.left-c.center.left,e.horizontal=e.horizontal<0?e.horizontal+"px":"+"+e.horizontal+"px",c.left+c.width<=d.center.left&&(f+=" right"),c.left>=d.center.left&&(f+=" left"),c.top+c.height<=d.center.top&&(f+=" bottom"),c.top>=d.center.top&&(f+=" top"),f=f.split(" ").splice(1),1===f.length){switch(this.$pointer.appendTo(this.$el),f[0]){case"left":this.$pointer.css({"border-top":g,"border-bottom":g,"border-left":g,"border-right":h}).position({my:"right center",at:"left center"+e.vertical,of:this.$el[0]}),0===d.width&&a.element.element.css({left:"+=20"});break;case"right":this.$pointer.css({"border-top":g,"border-bottom":g,"border-right":g,"border-left":h}).position({my:"left center",at:"right center"+e.vertical,of:this.$el[0]}),0===d.width&&a.element.element.css({left:"-=20"});break;case"top":this.$pointer.css({"border-top":h,"border-right":g,"border-bottom":g,"border-left":g}).position({my:"center bottom",at:"left+"+(this.$el.width()-5)+"px top",of:this.$el[0]});break;case"bottom":this.$pointer.css({"border-right":g,"border-bottom":g,"border-top":h,"border-left":g}).position({my:"center top",at:"center"+e.horizontal+" bottom",of:this.$el[0]})}var j={};switch(j.top=parseInt(this.$pointer.css("top")),j.left=parseInt(this.$pointer.css("left")),j.offset=this.$pointer.offset(),f[0]){case"left":break;case"right":c.top+i>j.offset.top&&this.$pointer.css("top",j.top+i);break;case"top":break;case"bottom":c.left+i>j.offset.left&&this.$pointer.css("left",j.left+i)}}},remove:function(){c(window).off("resize",this._repostionCallback),k.Dialog.prototype.remove.apply(this,arguments)}});var r=a("./smallPopupTemplate.html"),s=a("./smallPointerTemplate.html");k.SmallPopup=k.Dialog.extend({template:r,events:{"click .zd-smallpopup-background":"hide","keypress input":"keyEnterPressed"},defaults:{mode:"palette",draggable:!1,resizable:!1,modal:!1,containment:c("body")},keyEnterPressed:function(a){k.Palette.prototype.keyEnterPressed.apply(a,arguments)},initialize:function(){function a(){b._lastPostiton?b.position():null}var b=this;this._lastPostiton=null,this._repostionCallback=d.debounce(a,300),c.extend(this.events,k.Dialog.prototype.events),k.Dialog.prototype.initialize.apply(this,arguments),this.$pointer=this.$wrapElement(s()),c("body").one("dragstart",function(){b.hide()}),this.$el.on("dragstart",!1),c(window).on("resize",this._repostionCallback),this.listenTo(f,"visualization:stop",this.hide)},render:function(){return k.Dialog.prototype.render.apply(this,arguments),this.$(".zd-smallpopup-background").show(),this.$el.on("mousewheel","textarea",function(a,b,d,e){a.preventDefault();var f=c(this).scrollTop();c(this).scrollTop(f+e)}),this},position:function(a){function b(b,d){b.top-=a.pointerTop||0,c.$el.css(b),c._showPointer(d)}var c=this;return a=a||this._lastPostiton||{},this._lastPostiton=a,a.using=a.using||b,k.Dialog.prototype.position.call(this,a)},_showPointer:function(a){var b=a.element,c=a.target,d={},e="behind",f="10px solid transparent",g="10px solid rgb(230, 230, 230)";if(c.center={left:c.left+c.width/2,top:c.top+c.height/2},b.center={left:b.left+b.width/2,top:b.top+b.height/2},d.vertical=c.center.top-b.center.top,d.vertical=d.vertical<0?d.vertical+"px":"+"+d.vertical+"px",d.horizontal=c.center.left-b.center.left,d.horizontal=d.horizontal<0?d.horizontal+"px":"+"+d.horizontal+"px",b.left+b.width<c.center.left&&(e+=" right"),b.left>c.center.left&&(e+=" left"),b.top+b.height<c.center.top&&(e+=" bottom"),b.top>c.center.top&&(e+=" top"),e=e.split(" ").splice(1),1===e.length)switch(this.$pointer.appendTo(this.$el),e[0]){case"left":this.$pointer.css({"border-top":f,"border-bottom":f,"border-right":g}).position({my:"right center",at:"left center"+d.vertical,of:this.$el[0]});break;case"right":this.$pointer.css({"border-top":f,"border-bottom":f,"border-left":g}).position({my:"left center",at:"right center"+d.vertical,of:this.$el[0]});break;case"top":this.$pointer.css({"border-top":g,"border-right":f,"border-left":f}).position({my:"center bottom",at:"center"+d.horizontal+" top",of:this.$el[0]});break;case"bottom":this.$pointer.css({"border-right":f,"border-top":g,"border-left":f}).position({my:"center top",at:"center"+d.horizontal+" bottom",of:this.$el[0]})}},remove:function(){c(window).off("resize",this._repostionCallback),k.Dialog.prototype.remove.apply(this,arguments)},closeModal:function(){this.$el.fadeOut(300)}});var t=a("./infoPopupFooterTemplate.html");k.PalettePopup=k.InfoPopup.extend({initialize:function(){return d.bindAll(this,"showBackButton","hideBackButton"),k.InfoPopup.prototype.initialize.apply(this,arguments),this.$el.on("dragstart",!1),this.handlers=this.options.handlers,this},render:function(a,b,c){return c=c||{top:12,bottom:66},k.InfoPopup.prototype.render.apply(this,arguments),this.$el.addClass("zd-palettepopup"),this.handlers&&this.showHandlers(this.handlers),this.$body.css("max-height",this.options.containment.height()-c.top-c.bottom-(this.$el.outerHeight()-this.$body.height())),this},ensureFooter:function(){return this.$footer=this.$footer||this.$wrapElement(t()),this.$el.has(this.$footer).length||this.$el.append(this.$footer),this},showHandlers:function(a){var b=this;return a.forEach(function(a){b.addHandler(a)}),this},addHandler:function(a){var b=a.tagName||"button",d=c("<"+b+' class="">'+a.title+"</"+b+">");return a.icon&&d.prepend('<i class="zd icon '+a.icon+'"></i>'),a.className&&d.addClass(a.className),d.click(function(){a.callback()}),this.ensureFooter(),this.$footer.append(d),this},showBackButton:function(){return k.Palette.prototype.showBackButton.apply(this,arguments),this},hideBackButton:function(){return k.Palette.prototype.hideBackButton.apply(this,arguments),this}}),k.DetailsPopup=k.Dialog.extend({template:p,events:{"click .zd-infopopup-background":"hide"},defaults:{mode:"palette",draggable:!1,resizable:!1,modal:!1,containment:c("body")},initialize:function(){c.extend(this.events,k.Dialog.prototype.events),k.Dialog.prototype.initialize.apply(this,arguments)}});var u=a("./sidePaneTemplate.html"),v=a("./sidePaneTemplateModal.html");k.SidePane=e.View.extend({initialize:function(a){function b(){var a=c.user||new h;a.bootstrap().done(function(){var b=a.get("name");window.localStorage["sidePaneHasBeenClosedBy"+b]="true"}),c.$el.hide(),f.trigger("sidepane:manualhide")}a=a||{},e.View.prototype.initialize.apply(this,arguments),d.bindAll(this,"render","hide","show","close","getHeader","visible");var c=this;if(this.hasCloseButton=this.options.hasCloseButton,this.template=this.hasCloseButton?u:v,this.setElement(this.template()),this.$el.appendTo("body"),this.hide(),this.$loading=this.$(".zd-side-pane-loading"),this.$body=this.$(".zd-side-pane-body"),this.$header=this.$(".zd-side-pane-header"),this.$closeButton=this.$(".close"),!a.user)throw new Error("user (Zoomdata.user) must be defined");this.user=a.user,this.hasCloseButton||(this.$(".zd-side-pane").on("click",function(a){a.stopPropagation()}),this.$el.on("click",b))},events:{"click .close":"hide"},render:function(a){return this.$body.empty(),this.$body.append(a),this.delegateEvents(),this},hide:function(){this.$el.hide()},show:function(){c(".zd-side-pane").parent("div").hide(),this.$el.show(),this.$el.find("input").blur()},close:function(){this.$el.remove()},getHeader:function(){return this.$header},visible:function(){return this.$el&&this.$el.is(":visible")}});var w=a("./confirmMessageTemplate.html");k.ConfirmMessage=e.View.extend({tagName:"span",className:"label label-warning pull-right confirmMessage",defaults:{template:w,message:"Warning",acceptTitle:"Accept",cancelTitle:"Cancel"},events:{"click .icon-ok":"accept","click .icon-remove":"cancel"},initialize:function(a){this.settings=c.extend({},this.defaults,a),this._deferred=c.Deferred(),this.result=this._deferred.promise()},accept:function(){var a=this;return this.$el.fadeOut(function(){a.remove(),a._deferred.resolve()}),!1},cancel:function(){var a=this;return this.$el.fadeOut(function(){a.remove(),a._deferred.reject()}),!1},render:function(){return this.$el.html(this.settings.template({message:this.settings.message,acceptTitle:this.settings.acceptTitle,cancelTitle:this.settings.cancelTitle})),this.$el.hide().fadeIn(),this.delegateEvents(),this}}),k.Notification=e.View.extend({className:"zd notification alert ",defaults:{delay:3e3,type:"info"},events:{click:"remove"},initialize:function(a){a=a||{},a.template&&(this.template=a.template,delete a.template),this.options=c.extend({},this.defaults,a),this.$el.appendTo("body").hide(),this.setType(this.options.type)},setType:function(a){var b=this.options.type,c="alert-"+b,d="alert-"+a;return this.$el.hasClass(c)&&this.$el.removeClass(c),this.$el.addClass(d),this.options.type=a,this},render:function(a){var b=this,c=this.options.delay;return this.empty(),this.$el.html(a),"number"==typeof c?setTimeout(function(){b.remove()},c):this.$el.append('<div class="zd icon remove"></div>'),this.show(),this},hide:function(a){return this.$el.slideUp(function(){"function"==typeof a&&a()}),this},show:function(a){return this.$el.slideDown(function(){"function"==typeof a&&a()}),this},remove:function(){var a=this,b=arguments;this.$el.slideUp(function(){e.View.prototype.remove.apply(a,b)})}});var x=a("./popoverHeadTemplate.html"),y=a("./popoverBodyTemplate.html");k.Popover=function(){var a=e.View.extend({contentView:null,_data:!1,_container:!1,_stopHide:!1,_setEvents:!1,_setHeadEvents:!1,_buttons:{},_headTemplate:x,_bodyTemplate:y,initialize:function(a){if(e.View.prototype.initialize.apply(this,arguments),d.bindAll(this,"render","buildPopoverHeader","buildPopoverBody","show","hide","setTemplate","data","stopHide"),a=c.extend({setEvents:!1,setHeadEvents:!1,body:!1,head:!1,container:c("body"),buttons:!1},a),this._buttons={zoom:!0,details:!1,trend:!1,twitter:!1},!a.main)throw new Error("main (Zoomdata.main) must be defined");this.main=a.main;return"function"==typeof a.setEvents&&(this._setEvents=a.setEvents),"function"==typeof a.setHeadEvents&&(this._setHeadEvents=a.setHeadEvents),a.body&&(this._bodyTemplate="string"==typeof a.body?d.template(a.body):a.body),a.buttons&&(this._buttons=c.extend(this._buttons,a.buttons)),a.head&&(this._headTemplate="string"==typeof a.head?d.template(a.head):a.head),a.container&&(this._container=a.container),c("#popoverElement").remove(),c("body").append(c("<div>").attr("id","popoverElement").css({position:"absolute",width:1,height:1,display:"none","z-index":1010}).append("<div>")),this.render()},render:function(){var a=this;return c("#popoverElement>div").popover({html:!0,title:function(){return a.buildPopoverHeader()},content:function(){return a.buildPopoverBody()}}).on("show",function(){console.log("popover shown"),c(".zd-main-section").off("click").on("click",function(b){a.hide(b)}),f.trigger("freezeTime")}).on("hide",function(){console.log("popover hidden"),c(".zd-main-section").off("click"),f.trigger("unfreezeTime")}),f.trigger("rendered"),this.listenToOnce(f,"visualization:stop",function(){c("#popoverElement").remove()}),this},buildPopoverHeader:function(){var a=this.$wrapElement(this._headTemplate(this._data));return"function"==typeof this._setHeadEvents&&this._setHeadEvents(a,this._data),a},buildPopoverBody:function(){this._data.buttons=this._buttons,this._data.height=Math.max(250,Math.min(500,c("body").height()/2));var a=this.$wrapElement(this._bodyTemplate(this._data));return"function"==typeof this._setEvents&&this._setEvents(a,this._data),a},hideDelay:!1,show:function(a,b){var d=b.x,e=b.y;this._data=a;var f=this;c("#popContainer").attr("class",this.main.$section.width()<500?"span3":"span4"),c("#popoverElement .popoverFooter .btn-group").css("paddingLeft",this.main.$section.width()<500?"6%":"15%");var h=c("body").height(),i=null,j=null,k=null,l=0,m=0,n=g.MODE.WIDGET!==g.mode()&&h>=450?300:10,o=g.MODE.WIDGET!==g.mode()&&h>=450?50:10;m=Math.max(200,Math.min(Math.max(e,n),h-o)),i=c("#popoverElement"),i.css({top:m,left:d}).show().find("div").popover("show"),j=c("#popoverElement .popover"),k=c("#popoverElement .arrow"),d+1*j.width()>this.main.$section.width()+c("#popContainer").width()/2&&i.css("left",Math.max(10,d-j.width()-10)).find(".popover").removeClass("right").addClass("left");var p=c("#popoverElement>.popover").height();m+p/2>h-o&&(m=h-o-p/2,i.css("top",m)),l=e-(m+j.position().top);var q=p,r=2,s=k[0].offsetHeight;l=Math.min(q-s/2-r,l),l=Math.max(s/2+2*r,l),k.css("top",l),this.hideDelay=!0,setTimeout(function(){f.hideDelay=!1},200)},hide:function(a){return this._stopHide?void(this._stopHide=!1):void(void 0!==a&&(c(a.target).parents(".popover").length||c(a.target).parent(".bar").length||this.hideDelay)||c("#popoverElement>div:first").popover("hide"))},setTemplate:function(a,b){"string"==typeof a&&(a=d.template(a)),void 0!==b&&b?this._headTemplate=a:this._bodyTemplate=a},data:function(){return this._data},stopHide:function(){this._stopHide=!0}});return a}(),k.TwittViewer=e.View.extend({contentView:null,_data:!1,_stopHide:!1,_setEvents:!1,_bodyTemplate:"<div></div>",initialize:function(a){e.View.prototype.initialize.apply(this,arguments),a=c.extend({setEvents:!1,body:!1},a);return"function"==typeof a.setEvents&&(this._setEvents=a.setEvents),a.body&&(this._bodyTemplate=a.body),c("#twittViewerElement").remove(),c("body").append(c("<div>").attr("id","twittViewerElement").attr("class","modal hide fade").attr("tabindex","-1").attr("role","dialog").attr("aria-labelledby","myModalLabel").attr("aria-hidden","true")),this.render()},render:function(){return c("#twittViewerElement").html(this.buildTwittViewerBody()),c("#twittViewerElement").modal({show:!1}),this},buildTwittViewerBody:function(){console.log(this._data);var a=this.$wrapElement(this._bodyTemplate(this._data));return"function"==typeof this._setEvents&&this._setEvents(a,this._data),a},show:function(a){this._data=a;c("#twittViewerElement").modal("show")},hide:function(){c("#twittViewerElement").modal("hide"),f.trigger("twittViewerHide")},data:function(){return this._data}});var z=a("./radialMenuItemTemplate.html"),A=a("./radialMenuStartTemplate.html"),B=a("./radialMenuEndTemplate.html"),C=a("./radialMenuRemoveButton.html")();k.RadialMenu=e.View.extend({className:"zd-radial-menu",defaults:{template:z,arc:{start:-40,end:220,gap:4,radius:66,width:44,color:"rgba(0, 0, 0, 0.7)"},arcClosed:{radius:66,width:44,start:89,angle:2}},events:{},initialize:function(a){var b;if(a=a||{},d.bindAll(this,"close"),!(a.root instanceof HTMLElement))throw Error("options.root must be a HTMLElement");return this.$root=c(a.root),delete a.root,this.items=[],this.icons=[],this.closed=[],this.position={left:"50%",top:"50%"},e.View.prototype.initialize.apply(this,arguments),b={start:90,end:90,gap:0,radius:this.options.arc.radius,width:this.options.arc.width},this.$el.appendTo(this.$root),this.$root.on("click dragstart",this.close),this.start=this.$wrapElement(A()),this._renderStart(b),this.end=this.$wrapElement(B()),this._renderEnd(b),a.items&&(this.reset(a.items),delete this.options.items),this},remove:function(){this.$root.off("click dragstart",this.close),e.View.prototype.remove.apply(this,arguments)},render:function(a){var b=this;return a=a||{},this.empty(),""===a.group?this.$el.addClass("zd-empty-group"):this.$el.removeClass("zd-empty-group"),this.$el.append(this.start.show()),this.$el.append(this.end.show()),this.start.off("transitionend"),this.end.off("transitionend"),this.start.on("click",function(){b.items[0].arc.$donut.click()}).on("mouseenter",function(){b.items[0].arc.$donut.hasClass("active")?null:b.items[0].arc.$donut.addClass("active")}).on("mouseleave",function(){b.items[0].arc.$donut.hasClass("active")?b.items[0].arc.$donut.removeClass("active"):null}),this.end.on("click",function(){var a=b.items.length-1;b.items[a].arc.$donut.click()}).on("mouseenter",function(){var a=b.items.length-1;b.items[a].arc.$donut.hasClass("active")?null:b.items[a].arc.$donut.addClass("active")}).on("mouseleave",function(){var a=b.items.length-1;b.items[a].arc.$donut.hasClass("active")?b.items[a].arc.$donut.removeClass("active"):null}),requestAnimationFrame(function(){b._renderStart(),b._renderEnd()}),this.setPosition(a),this.open(),this},renderIcons:function(){var a=this;return d.each(this.icons,function(b,c){a.renderIcon(c)}),this},renderIcon:function(a){var b=this.icons;return 0>a||a>=b.length?this:(this.$el.children().has(b[a].$icon).length||this.$el.append(b[a].$icon),requestAnimationFrame(function(){b[a].$icon.css({top:-91,left:-30,opacity:1})}),this)},setPosition:function(a){return this.position.left=a.left||this.position.left,this.position.top=a.top||this.position.top,this.$el.css({left:this.position.left,top:this.position.top}),this},renderItems:function(){{var a=this;this.items.length}return d.each(this.items,function(b,c){a.renderItem(c)}),this},renderItem:function(a){var b=this.items;return this.isClosed(a)?this:0>a||a>=b.length?this:(this._renderArc(a),b[a].arc.$el.show(200),this)},reset:function(a){var b=this;return this.clear(),d.each(a,function(a){b.add(a)}),this},clear:function(){return this.clearItems(),this.clearIcons(),this},clearItems:function(){for(;0!==this.items.length;)this.removeItem(0);
return this.closed=[],this},clearIcons:function(){for(;0!==this.icons.length;)this.removeIcon(0);return this},add:function(a){switch(a.type){case"icon":this.addIcon(a);break;case"arc":default:this.addItem(a)}return this},addIcon:function(a){var b=this;return"exclude"===a.name?(a.$icon=c('<div class="zd-radial-icon-exclude" title="Exclude"></div>'),a.$icon.append(C)):(a.$icon=c('<div class="zd-radial-icon" title="'+a.label+'"></div>'),a.$icon.append('<i class="zd icon '+a.label.toLowerCase()+'"/>')),setTimeout(function(){a.$icon.on("click",function(c){return"function"==typeof a.action?a.action.call(this,c,b.$el):null})},300),this.icons.push(a),this},addItem:function(a){var b=this,d=this.items,e=d[0],f=d[d.length-1];return a.arc=new g.Arc(this.options.arcClosed),setTimeout(function(){a.arc.$donut.on("click",function(c){return"function"==typeof a.action?a.action.call(this,c,b.$el):(""===a.group.group&&c.stopPropagation(),null)})},300),a.arc.$center.html(this.options.template(a)),f&&f.arc.$donut.off("mouseenter"),f&&f.arc.$donut.off("mouseleave"),a.arc.$donut.on("mouseenter",function(){b.end.hasClass("active")||b.end.addClass("active")}).on("mouseleave",function(){b.end.hasClass("active")&&b.end.removeClass("active")}),e&&e.arc.$donut.on("mouseenter",function(){b.start.hasClass("active")||b.start.addClass("active")}).on("mouseleave",function(){b.start.hasClass("active")&&b.start.removeClass("active")}),void 0!==a.disabled&&c.isFunction(a.disabled)&&a.disabled()===!0?this:(this.items.push(a),this)},removeItem:function(a){var b=this.items[a];return this.isClosed(a)&&this.closed.splice(this.closed.indexOf(a),1),b.arc.$donut.off("click"),b.arc.$donut.off("mouseenter"),b.arc.$donut.off("mouseleave"),b.arc.remove(),this.items.splice(a,1),this},removeIcon:function(a){var b=this.icons[a];return b.$icon.off("click"),b.$icon.remove(),this.icons.splice(a,2),this},close:function(){if(this.isOpen){var a=this,b={start:90,end:90,gap:0,radius:this.options.arc.radius,width:this.options.arc.width};d.each(this.items,function(b,c){a.closeItem(c)}),d.each(this.icons,function(b,c){a.closeIcon(c)}),this.start&&(this._renderStart(b),this.start.one("transitionend",function(){a.start.hide(),a.empty()})),this.end&&(this._renderEnd(b),this.end.one("transitionend",function(){a.end.hide(),a.empty()})),this.isOpen=!1,this.trigger("close")}return this},open:function(){var a=this,b="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend";return this.isOpen||(this.start.off(b).on(b,function(){a.isOpen=!0}),this.closed=[],this.renderItems(),this.renderIcons(),this.trigger("open")),this},closeItem:function(a){var b=this.items;return this.isClosed(a)?this:0>a||a>=b.length?this:(b[a].arc.set(this.options.arcClosed),b[a].arc.$el.fadeOut(200),this.closed.push(a),this)},closeIcon:function(a){var b=this.icons;return b[a].$icon.css({width:0,height:0,opacity:0}),this},openItem:function(a){var b=this.items;return this.isClosed(a)?0>a||a>=b.length?this:(this.closed.splice(this.closed.indexOf(a),1),this.renderItem(a),this):this},isClosed:function(a){return-1!==this.closed.indexOf(a)},_renderArc:function(a){var b=a,c=this.items.length-this.closed.length,e=this.items[a].arc,f={};return d.each(this.closed,function(c){a>c?b--:null}),f.gap=this.options.arc.gap,f.radius=this.options.arc.radius,f.angle=(this.options.arc.end-this.options.arc.start)/c,f.start=this.options.arc.start+f.angle*b,this.$el.children().has(e.$el).length?null:this.$el.append(e.$el),requestAnimationFrame(function(){e.set(f)}),this},_renderStart:function(a){var b=this.start,a=a||this.options.arc,c=a.end+90,d=a.width,e=a.radius-a.width,f=-a.width/2+a.gap/2;b.css({transform:"rotate("+c+"deg)",transformOrigin:-f+"px "+-e+"px",width:d/2,height:d,borderBottomLeftRadius:d/2,borderTopLeftRadius:d/2,top:e,left:f})},_renderEnd:function(a){var b=this.end,a=a||this.options.arc,c=a.start+90,d=a.width,e=a.radius-a.width,f=-a.gap/2;b.css({transform:"rotate("+c+"deg)",transformOrigin:-f+"px "+-e+"px",width:d/2,height:d,borderBottomRightRadius:d/2,borderTopRightRadius:d/2,top:e,left:f})}});var D=a("./colorPickerTemplate.html");k.ColorPicker=e.View.extend({template:D,initialize:function(a){return e.View.prototype.initialize.apply(this,arguments),this.color=a.color,this.render()},render:function(){return this.button=this.$wrapElement(this.template({color:this.color})),this.$el.append(this.button),this.renderPopup(),this},setColor:function(a){this.color=a,this.button.css("background",this.color),this.button.spectrum("set",this.color)},applyColor:function(a){this.button.css("background",a),this.trigger("change",a)},renderPopup:function(){var a,b,d=this;this.button.spectrum({color:this.color,preferredFormat:"hex",showInput:!0,showInitial:!0,chooseText:"Apply",cancelText:"Cancel",change:function(a){d.color=a.toHexString()},beforeShow:function(){d.trigger("beforeShow")},show:function(){if(!b){b=c(".sp-container:visible");var e=b.find(".sp-choose");e.addClass("zd btn btn-success btn-block"),b.find(".sp-cancel").addClass("zd btn btn-cancel btn-block").insertAfter(e),e.on("click",function(){d.applyColor(d.color)})}a=new k.SmallPopup({customClass:"colorPickerPalette",pointerWidth:14}),a.render(b).position({of:d.button,my:"left+10 center+10",at:"right center",collision:"flipfit flipfit"})},hide:function(){b.appendTo("body"),a.hide()}})}});var E=a("./tooltipTemplate.html"),F=a("./tooltipInfoTemplate.html");k.VisualizationTooltip=i.extend({className:"zd_controls_tooltip_container",template:E,infoTemplate:F,converter:function(a){var b=Object.keys(this.controller.metrics),e={format:"#,##0.##",locale:"us"},f={};return f.current={count:c.formatNumber(a.current.count,e)},f.group=a.group,a.key&&(f.key=a.key),b.length>0&&a.current.metrics&&(f.current.metrics={},d.each(this.controller.metrics,function(b){if(Array.isArray(b))d.each(b,function(b){if("count"!==b.metric.name&&"none"!==b.metric.name&&a.current.metrics[b.metric.name]){var d="distinct_count"===b.metric.func?c.formatNumber(a.current.metrics[b.metric.name][b.metric.func],e):b.formatted(a);f.current.metrics[b.metric.label+" : "+b.objectField.label]=f.current.metrics[b.metric.label+" : "+b.objectField.label]||{},f.current.metrics[b.metric.label+" : "+b.objectField.label][b.metric.func]=d}});else{if("count"===b.metric.name||"none"===b.metric.name)return;var g="distinct_count"===b.metric.func?c.formatNumber(a.current.metrics[b.metric.name][b.metric.func],e):b.formatted(a);f.current.metrics[b.objectField.label]=f.current.metrics[b.objectField.label]||{},f.current.metrics[b.objectField.label][b.metric.func]=g}})),a.historical&&(f.historical={count:c.formatNumber(a.historical.count,e)},b.length>0&&(f.historical.metrics={},d.each(this.controller.metrics,function(b){if("count"!==b.metric.name&&"none"!==b.metric.name){var d="distinct_count"===b.metric.func?c.formatNumber(a.historical.metrics[b.metric.name][b.metric.func],e):b.formatted(a,null,{historical:!0});f.historical.metrics[b.objectField.label]=f.historical.metrics[b.objectField.label]||{},f.historical.metrics[b.objectField.label][b.metric.func]=d}}))),f},initialize:function(a){return i.prototype.initialize.apply(this,arguments),d.bindAll(this,"snap","unsnap","onMenuClose"),this.tid=Math.round(1e9*Math.random())+"",this.SETTINGS={radius:18,border:2,color:"#939393",bg_color:"white",opacity:1,edge_margin:5},this.$body=c("body"),this.$root=this.$body,this.hidden=!0,this.at={left:0,top:0},this.getter=null,this.snapped=!1,this.temp={},a.template&&(this.infoTemplate="string"==typeof a.template?d.template(a.template):a.template,delete a.template),a.at&&(this.at=a.at,delete a.at),a.converter&&(this.converter=a.converter,delete a.converter),a.controller&&(this.controller=a.controller,this.$root=this.controller.$el,delete a.controller,this.applyEvents()),this.options=a,this.$el.appendTo(this.$body),this.position={x:0,y:0},this.SHAPES={corner:"<svg width="+this.SETTINGS.radius+" height="+2*this.SETTINGS.radius+'><path class="zd_controls_tooltip_stroke" d="" /></svg>',between:"<svg width="+this.SETTINGS.radius+" height="+3*this.SETTINGS.radius+'><path class="zd_controls_tooltip_stroke" d="" /></svg>'},this.$styles=c("<style></style>"),this.$tailDiv=c('<div class="zd_controls_tooltip_tail"></div>'),this},$in:function(){return this.$(".zd_controls_tooltip_content").eq(0)},$main:function(){return this.$(".zd_controls_tooltip_shape").eq(0)},snap:function(){var a=this;return this.snapped=!0,setTimeout(function(){a.$el.addClass("snapped "+a._orientation)},1),this},unsnap:function(){if(this.snapped){var a=this;this.menuClosed=!1,this.snapped=!1,setTimeout(function(){a.snapped||a.onMenuClose()},10),a.$el.attr("class","zd_controls_tooltip_container")}return this},onResnap:function(){return this.temp.render&&this.render(this.temp.render),this.temp.move&&this.move(this.temp.move),this},onMenuClose:function(){return this.menuClosed=!0,this.temp={},this.hide(),this},applyEvents:function(){var a=this;return this.listenTo(this.controller.thread,"thread:message",function(){setTimeout(function(){a.update()},60)}),this},show:function(a){return this.hidden=!1,this.render(a),this},hide:function(){return this.hidden=!0,this.render(),this},render:function(a){var b=null;return this.snapped?(this.temp.render=a,this):this.hidden?(this.$el.empty().hide(),this):(this.$el.html(this.template({content:""})),a.at&&(this.at=a.at,delete a.at),a.color&&(this.color=a.color,this.updateColor(),delete a.color),a.getter&&(this.updateGetter(a.getter),delete a.getter),a.event&&(b=a.event,delete a.event),this.$tailDiv.appendTo(this.$main()),this.prepareStyles(),this.prepareCurve(),this.$el.show(),this.update(),this.move(b?{event:b}:!1),this)},update:function(a){if(!(this.hidden&&!this.snapped||!this.getter&&this.controller)){var b,e=this.getter?this.getter():{},f=e(),g=JSON.stringify(f.group)+(f.key?f.key:"");this.tid=g,b=this.controller?this.converter(e()):{},b.text=j.text,b._=d,this.options.editUrl&&(b.editUrl=this.options.editUrl),this.$in().html(this.infoTemplate(b));var h=c(this.$el.find(".zd_tooltip_info_header")),i=h.width();return i%2!==0&&h.width(i+1),this.updateColor(),this.snapped?this:(a&&(a.event||a.at)&&this.move(a),this)}},move:function(a){function b(){var a=[[0,0,0],[0,0,0],[0,0,0]],b=[["corner top left","between top","corner top right"],["between left","between top","between right"],["corner bottom left","between bottom","corner bottom right"]],c=null;if(2*(g+l+k)>i){var d=i/2-e>0?0:2;a.forEach(function(a){a[d]=a[d]+1})}else a.forEach(g/2+l+k>=e?function(a,d){1===a[0]&&(c=b[d][0]),a[0]=a[0]+1}:e>=i-g/2-l-k?function(a,d){1===a[2]&&(c=b[d][2]),a[2]=a[2]+1}:function(a,d){1===a[1]&&(c=b[d][1]),a[1]=a[1]+1});if(2*(h+l+k)>j){var m=j/2-f>0?0:2;a[m]=a[m].map(function(a,d){return 1===a&&(c=b[m][d]),a+1})}else h+l+k>=f?a[0]=a[0].map(function(a,d){return 1===a&&(c=b[0][d]),a+1}):f>=j-h-l-k?a[2]=a[2].map(function(a,d){return 1===a&&(c=b[2][d]),a+1}):a[1]=a[1].map(function(a,d){return 1===a&&(c=b[1][d]),a+1});return c}if(this.snapped)return this.temp.move=a,this;var c=this.$root.offset(),d={top:0,left:0};a&&a.at&&(this.at=a.at,delete a.at),a&&a.event?(d.top=a.event.clientY,d.left=a.event.clientX):(d.top=this.at.top,d.left=this.at.left),d.top-=c.top,d.left-=c.left;var e=d.left,f=d.top,g=this.$el.width(),h=this.$el.height(),i=this.$root.width(),j=this.$root.height(),k=this.SETTINGS.edge_margin,l=this.SETTINGS.radius+k,m=[0,0,0,0],n=b();this._orientation=n,this.$tailDiv.attr("class","zd_controls_tooltip_tail "+n),this.$tailDiv.html(this.SHAPES[n.split(" ")[0]]),this.updateColor();var o=n.split(" ");switch(o[0]){case"corner":f="top"===o[1]?f+l+k:f-h-l-k,"right"===o[2]&&(e-=g);break;case"between":"top"===o[1]?(e-=g/2,f=f+l+3*k):"bottom"===o[1]&&(e-=g/2,f=f-h-l),"left"===o[1]?(e=e+l+k,f-=h/2):"right"===o[1]&&(e=e-g-l-k,f-=h/2)}var p=m.join("px ")+"px";return this.position={x:e+c.left,y:f+c.top},this.$el.css({left:this.position.x,top:this.position.y,margin:p}),this},updateColor:function(){if(this.hidden&&!this.snapped)return this;if(this.color){var a="function"==typeof this.color()?this.color()():this.color();if(a)return this.$tailDiv.find("path").css({stroke:a}),this.$main().css({"border-color":a}),this}},updateGetter:function(a){this.getter!==a&&(this.getter=a,this.update())},prepareStyles:function(){function a(a,b){return"#"+i+" "+a+"{"+b+"}"}function b(a){var b="";for(var d in a)b+=c(d,a[d]);return b}function c(a,b){return" "+a+":"+b+"; "}function d(c,d){g+=a(c,b(d))}function e(a){return a+"px "}function f(a){var b=navigator.userAgent,c=/MSIE\s?(\d+)(?:\.(\d+))?/i,d=b.match(c);return d&&10==d[1]?a:0}{var g="",h=this.SETTINGS,i=this.controller?"tid_"+this.controller.UUID:"tid_"+this.options.tooltipId;Math.round(h.radius/1.5)}return this.$el.attr("id",i),d(".zd_controls_tooltip_shape",{opacity:h.opacity,"background-color":h.bg_color,border:e(h.border)+"solid "+h.color,"border-radius":e(h.radius/1.5)}),d(".zd_controls_tooltip_tail.corner",{width:e(h.radius),height:e(2*h.radius)}),d(".zd_controls_tooltip_tail.corner.right",{right:e(-h.border)}),d(".zd_controls_tooltip_tail.corner.left",{left:e(-h.border),transform:"scaleX(-1)"}),d(".zd_controls_tooltip_tail.corner.top",{top:e(-(h.radius+h.border/2))}),d(".zd_controls_tooltip_tail.corner.bottom",{transform:"scaleY(-1)",bottom:e(-(h.radius+h.border/2))}),d(".zd_controls_tooltip_tail.corner.bottom.left",{transform:"scaleY(-1) scaleX(-1)",bottom:e(-(h.radius+h.border/2))}),d(".zd_controls_tooltip_tail.between",{width:e(h.radius),height:e(3*h.radius)}),d(".zd_controls_tooltip_tail.between.right",{margin:e(1.5*-h.radius)+" "+e(f(0))+" 0 0",right:e(-h.radius)}),d(".zd_controls_tooltip_tail.between.left",{margin:e(1.5*-h.radius+f(4))+"0 0 "+e(f(0)),left:e(-h.radius),transform:"scaleX(-1)"}),d(".zd_controls_tooltip_tail.between.top",{top:e(2*-h.radius-h.border/2+1),left:"50%",margin:"0 0 0 "+e(-(h.radius/2+h.border/2)),transform:"rotate(-90deg)"}),d(".zd_controls_tooltip_tail.between.bottom",{bottom:e(2*-h.radius-h.border/2+1),left:"50%",margin:"0 0 0 "+e(-(h.radius/2+h.border/2)),transform:"rotate(90deg)"}),d(".zd_controls_tooltip_stroke",{stroke:h.color,fill:h.bg_color,"stroke-width":e(h.border),"stroke-linecap":"round"}),this.$styles.text(g),this.$styles.appendTo(this.$body),this},prepareCurve:function(){var a=this.SETTINGS.radius,b=this.SETTINGS.border,c={corner:"M0,"+a+" C"+a/2+","+(a-b/2)+" "+(a-b/2)+","+a/2+" "+(a-b/2)+",0 V"+(a-b/2)+","+2*a,between:"M0,0 C0,"+a+" "+a/2+","+1.5*a+" "+a+","+1.5*a+" C"+a/2+","+1.5*a+" 0,"+2*a+" 0,"+3*a};return this.SHAPES.corner=this.SHAPES.corner.replace('d=""','d="'+c.corner+'"'),this.SHAPES.between=this.SHAPES.between.replace('d=""','d="'+c.between+'"'),this}}),b.exports=k}()},{"../Core/MVC":6,"../Core/MVC/View":5,"../components/Vocabulary":54,"./../models/User":133,"./../utilities":144,"./../views/SearchBox/index.js":326,"./Dialog":56,"./Palette":57,"./arrowAllTemplate.html":59,"./arrowHorizontalTemplate.html":60,"./arrowVerticalTemplate.html":61,"./colorPickerTemplate.html":62,"./confirmMessageTemplate.html":63,"./fullscreenTemplate.html":65,"./infoPopupFooterTemplate.html":67,"./infoPopupTemplate.html":68,"./pointerTemplate.html":71,"./popoverBodyTemplate.html":72,"./popoverHeadTemplate.html":73,"./radialMenuEndTemplate.html":74,"./radialMenuItemTemplate.html":75,"./radialMenuRemoveButton.html":76,"./radialMenuStartTemplate.html":77,"./sidePaneTemplate.html":79,"./sidePaneTemplateModal.html":80,"./smallPointerTemplate.html":81,"./smallPopupTemplate.html":82,"./tooltipInfoTemplate.html":83,"./tooltipTemplate.html":84,jquery:103,underscore:458}],67:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd-infopopup-footer"></div>';return __p}},{lodash:456}],68:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="modal hide zd-infopopup '+(null==(__t=customClass)?"":__t)+'" >\n    <div class="modal-header zd-infopopup-titlebar">\n        <button title="Close" value="dialog-reject" class="zd icon close" />\n        <button title="" value="dialog-back" class="zd icon back" style="display:none;" />  \n        <h3 class="dialog-head zd-infopopup-header"></h3>\n        <div class="clearfix"></div>\n    </div>\n    <div class="modal-body dialog-body zd-infopopup-body">\n    </div>\n    <div class="zd-infopopup-background">\n    </div>\n    <div class="zd-infopopup-background small">\n    </div>\n</div>';return __p}},{lodash:456}],69:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<button title="'+(null==(__t=title)?"":__t)+'" class="zd btn btn-'+(null==(__t=type)?"":__t)+'">'+(null==(__t=label)?"":__t)+"</button>";return __p}},{lodash:456}],70:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="modal hide zd-palette '+(null==(__t=customClass)?"":__t)+'">\n    <div class="modal-header zd-palette-titlebar">\n        <button title="Close" value="dialog-reject" class="zd icon close" /> \n        <button title="" value="dialog-back" class="zd icon back" style="display:none;" /> \n        <div class="zd icon header"/> \n        <h3 class="dialog-head zd-palette-header"></h3>\n        <div class="clearfix"></div>\n    </div>\n    <div class="modal-body dialog-body zd-palette-body">\n    </div>\n    <div class="zd-palette-background">\n    </div>\n    <div class="zd-palette-background small">\n    </div>\n</div>';return __p}},{lodash:456}],71:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd-infopopup-pointer">\n	<div class="zd-infopopup-pointer-arrow"></div>\n</div>';return __p}},{lodash:456}],72:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="span4" style="margin-left:0"> \n    <div class="row-fluid">   \n        <div class="popoverWindow" id="popowerWindow_1" style="min-height:'+(null==(__t=height)?"":__t)+'px;">\n        <div style="height: '+(null==(__t=height-40)?"":__t)+'px; overflow: auto;"> \n        ',data.forEach(function(a){__p+='\n            <div class="span12 popoverSmallHeader">\n                '+(null==(__t=a.name)?"":__t)+' \n            </div>  \n            <div class="span12 popoverDataInfo">\n                Time Window \n                <div>'+(null==(__t=a.time)?"":__t)+"</div> \n            </div>  \n            ",a.values.forEach(function(a){__p+='\n                <div class="span12 popoverDataInfo">\n                    '+(null==(__t=a.name)?"":__t)+" \n                    <div>"+(null==(__t=a.value)?"":__t)+"</div> \n                </div>  \n            "}),__p+="\n        "}),__p+='\n        </div> \n            <div class="span12 popoverFooter">\n                <span></span>\n                <div class="btn-group">\n                    <button class="btn',0==buttons.zoom&&(__p+=" dis"),__p+='" data-type="zoom">Zoom In</button>\n                    <button class="btn',0==buttons.details&&(__p+=" dis"),__p+='" data-type="details">Details</button>\n                    <button class="btn',0==buttons.trend&&(__p+=" dis"),__p+='" data-type="trend" data-name="_ts">Trend</button>\n                    ',buttons.twitter&&(__p+='<button class="btn" data-type="twitter" data-name="_ts">Twitter</button>'),__p+='\n                </div>\n            </div>\n        </div>\n        <div class="popoverWindow" id="popowerWindow_2" style="display:none;min-height:'+(null==(__t=height)?"":__t)+'px;">\n            <div style="height: '+(null==(__t=height)?"":__t)+'px; overflow: auto;"> \n                ',zoomInFields.forEach(function(a){__p+='\n                    <div class="span12 popoverDataInfo">\n                        <div class="popoverZoomTo" data-name="'+(null==(__t=a.name)?"":__t)+'">'+(null==(__t=a.label)?"":__t)+"</div> \n                    </div>  \n                "}),__p+="\n            </div>\n        </div>\n        \n    </div>\n</div>";return __p}},{lodash:456}],73:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<span style="overflow: hidden;display: block;">'+(null==(__t=name)?"":__t)+"</span>";return __p}},{lodash:456}],74:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd-radial-end"></div>';return __p}},{lodash:456}],75:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<span class="zd-radial-item-label">'+(null==(__t=label)?"":__t)+"</span>";return __p}},{lodash:456}],76:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="61" height="25" viewBox="0 0 61 25">\n    <defs>\n        <path id="radialMenuRemoveTitlePath" d="M 96, 96 m -96, 0 a 96,96 0 1,1 192,0 a 96,96 0 1,1 -192,0"></path>\n    </defs>\n    <g>\n        <g transform="translate(0, 5)">\n            <path class="background" d="M8.2,19.6c-3.5,0-6.6-2.3-7.7-5.7c-1.2-4.2,1.2-8.7,5.4-9.9c8-2.3,16.3-3.5,24.6-3.5\n                  C39,0.4,47,1.5,55.1,3.9c4.2,1.2,6.7,5.7,5.4,9.9c-1.2,4.2-5.7,6.7-9.9,5.4c-6.6-1.9-13.1-2.9-20-2.9c-6.8,0-13.6,1-20.1,2.9\n                  C9.7,19.5,8.9,19.6,8.2,19.6z"/>\n        </g>\n    </g>\n    <g transform="translate(-65, 17)">\n        <text font-size="10" text-anchor="middle" fill="white">\n            <textPath startOffset="25%" xlink:href="#radialMenuRemoveTitlePath" id="title">REMOVE</textPath>\n        </text>\n    </g>\n</svg>';return __p}},{lodash:456}],77:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd-radial-start"></div>';return __p}},{lodash:456}],78:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="toggleDetails facet-tab shown">Details</div>';return __p}},{lodash:456}],79:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div>\n    <div class="zd-side-pane">\n        <div class="zd-side-pane-header"/>\n        <button value="closeSidePane" class="close">&times;</button>\n        <div class="zd-side-pane-body"/>\n    </div>\n</div>';return __p}},{lodash:456}],80:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd-modal sidepane"> \n    <div class="zd-side-pane">\n        <div class="zd-side-pane-loading"/>\n        <div class="zd-side-pane-header"/>\n        <div class="zd-side-pane-body"/>\n    </div>\n</div> ';return __p}},{lodash:456}],81:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd-smallpopup-pointer">\n	<div class="zd-smallpopup-pointer-arrow"></div>\n</div>';return __p}},{lodash:456}],82:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="modal hide zd-smallpopup '+(null==(__t=customClass)?"":__t)+'" >\n    <div class="modal-body dialog-body zd-smallpopup-body">\n    </div>\n    <div class="zd-smallpopup-background">\n    </div>\n    <div class="zd-smallpopup-background small">\n    </div>\n</div>';return __p}},{lodash:456}],83:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n";var key=key||!1;__p+='\n<h4 class="zd_tooltip_info_header">'+__e(Array.isArray(group)?group.join(", "):key?key+", "+group:group)+'</h4>\n<div class="zd_tooltip_info_group">\n    ',historical&&(__p+='\n        <span class="zd_tooltip_info_title">Current</span>\n    '),__p+='\n    <div class="zd_tooltip_info_table">\n        <div class="zd_tooltip_info_table_row">\n            <div class="zd_tooltip_info_table_col">\n                Volume\n            </div>\n            <div class="zd_tooltip_info_table_col">\n                '+__e(current.count)+"\n            </div>\n        </div>\n        ",current.metrics&&(__p+="\n            ",_.each(current.metrics,function(a,b){__p+="\n                ",_.each(a,function(a,c){__p+='\n                    <div class="zd_tooltip_info_table_row">\n                        <div class="zd_tooltip_info_table_col">\n                            '+__e(b)+" ("+__e(text(c))+')\n                        </div>\n                        <div class="zd_tooltip_info_table_col">\n                            '+__e(a)+"\n                        </div>\n                    </div>\n                "}),__p+="\n            "}),__p+="\n        "),__p+="\n    </div>\n</div>\n";var historical=historical||!1;__p+="\n",historical&&(__p+='\n<div class="zd_tooltip_info_group">\n    <span class="zd_tooltip_info_title">Historical</span>\n    <div class="zd_tooltip_info_table">\n        <div class="zd_tooltip_info_table_row">\n            <div class="zd_tooltip_info_table_col">\n                Volume\n            </div>\n            <div class="zd_tooltip_info_table_col">\n                '+__e(historical.count)+"\n            </div>\n        </div>\n        ",historical.metrics&&(__p+="\n            ",_.each(historical.metrics,function(a,b){__p+="\n                ",_.each(a,function(a,c){__p+='\n                    <div class="zd_tooltip_info_table_row">\n                        <div class="zd_tooltip_info_table_col">\n                            '+__e(b)+" ("+__e(c)+')\n                        </div>\n                        <div class="zd_tooltip_info_table_col">\n                            '+__e(a)+"\n                        </div>\n                    </div>\n                "}),__p+="\n            "}),__p+="\n        "),__p+="\n    </div>\n</div>\n")}return __p}},{lodash:456}],84:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd_controls_tooltip_content">\n    '+(null==(__t=content)?"":__t)+'\n</div>\n<div class="zd_controls_tooltip_shape"></div>';return __p}},{lodash:456}],85:[function(){!function(a){function b(){return new Date(Date.UTC.apply(Date,arguments))}function c(b,c){var d,e=a(b).data(),f={},g=new RegExp("^"+c.toLowerCase()+"([A-Z])"),c=new RegExp("^"+c.toLowerCase());for(var h in e)c.test(h)&&(d=h.replace(g,function(a,b){return b.toLowerCase()}),f[d]=e[h]);return f}function d(b){var c={};if(k[b]||(b=b.split("-")[0],k[b])){var d=k[b];return a.each(j,function(a,b){b in d&&(c[b]=d[b])}),c}}var e=a(window),f=function(b,c){this._process_options(c),this.element=a(b),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=a(l.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};f.prototype={constructor:f,_process_options:function(b){this._o=a.extend({},this._o,b);var c=this.o=a.extend({},this._o),d=c.language;switch(k[d]||(d=d.split("-")[0],k[d]||(d=i.language)),c.language=d,c.startView){case 2:case"decade":c.startView=2;break;case 1:case"year":c.startView=1;break;default:c.startView=0}switch(c.minViewMode){case 1:case"months":c.minViewMode=1;break;case 2:case"years":c.minViewMode=2;break;default:c.minViewMode=0}c.startView=Math.max(c.startView,c.minViewMode),c.weekStart%=7,c.weekEnd=(c.weekStart+6)%7;var e=l.parseFormat(c.format);c.startDate!==-1/0&&(c.startDate=c.startDate?l.parseDate(c.startDate,e,c.language):-1/0),1/0!==c.endDate&&(c.endDate=c.endDate?l.parseDate(c.endDate,e,c.language):1/0),c.daysOfWeekDisabled=c.daysOfWeekDisabled||[],a.isArray(c.daysOfWeekDisabled)||(c.daysOfWeekDisabled=c.daysOfWeekDisabled.split(/[,\s]*/)),c.daysOfWeekDisabled=a.map(c.daysOfWeekDisabled,function(a){return parseInt(a,10)});var f=String(c.orientation).toLowerCase().split(/\s+/g),g=c.orientation.toLowerCase();if(f=a.grep(f,function(a){return/^auto|left|right|top|bottom$/.test(a)}),c.orientation={x:"auto",y:"auto"},g&&"auto"!==g)if(1===f.length)switch(f[0]){case"top":case"bottom":c.orientation.y=f[0];break;case"left":case"right":c.orientation.x=f[0]}else g=a.grep(f,function(a){return/^left|right$/.test(a)}),c.orientation.x=g[0]||"auto",g=a.grep(f,function(a){return/^top|bottom$/.test(a)}),c.orientation.y=g[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var b,c,d=0;d<a.length;d++)b=a[d][0],c=a[d][1],b.on(c)},_unapplyEvents:function(a){for(var b,c,d=0;d<a.length;d++)b=a[d][0],c=a[d][1],b.off(c)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).size()||this.picker.is(a.target)||this.picker.find(a.target).size()||this.hide()
},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.date,e=new Date(d.getTime()+6e4*d.getTimezoneOffset());this.element.trigger({type:b,date:e,format:a.proxy(function(a){var b=a||this.o.format;return l.formatDate(d,b,this.o.language)},this)})},show:function(a){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),a&&a.preventDefault(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6e4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6e4*a.getTimezoneOffset()))},setUTCDate:function(a){this.date=a,this.setValue()},setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a):this.component&&this.element.find("input").val(a)},getFormattedDate:function(a){return void 0===a&&(a=this.o.format),l.formatDate(this.date,a,this.o.language)},setStartDate:function(a){this._process_options({startDate:a}),this.update(),this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var b=this.picker.outerWidth(),c=this.picker.outerHeight(),d=10,f=e.width(),g=e.height(),h=parseInt(this.element.parents().filter(function(){return"auto"!=a(this).css("z-index")}).first().css("z-index"))+10,i=this.component?this.component.parent().offset():this.element.offset(),j=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0),k=this.component?this.component.outerWidth(!0):this.element.outerWidth(!0),l=i.left,m=i.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(l-=b-k)):(this.picker.addClass("datepicker-orient-left"),i.left<0?l-=i.left-d:i.left+b>f&&(l=f-b-d));var n,o,p=this.o.orientation.y;"auto"===p&&(n=0+i.top-c,o=g-(i.top+j+c),p=Math.max(n,o)===o?"top":"bottom"),this.picker.addClass("datepicker-orient-"+p),"top"===p?m+=j:m-=c+parseInt(this.picker.css("padding")),this.picker.css({top:m,left:l,zIndex:h})}},_allow_update:!0,update:function(){if(this._allow_update){var a,b=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):(a=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=l.parseDate(a,this.o.format,this.o.language),b&&this.setValue(),this.viewDate=new Date(this.date<this.o.startDate?this.o.startDate:this.date>this.o.endDate?this.o.endDate:this.date),this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";if(this.o.calendarWeeks){var c='<th class="cw">&nbsp;</th>';b+=c,this.picker.find(".datepicker-days thead tr:first-child").prepend(c)}for(;a<this.o.weekStart+7;)b+='<th class="dow">'+k[this.o.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+k[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=this.date.valueOf(),g=new Date;return b.getUTCFullYear()<d||b.getUTCFullYear()==d&&b.getUTCMonth()<e?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()==d&&b.getUTCMonth()>e)&&c.push("new"),this.o.todayHighlight&&b.getUTCFullYear()==g.getFullYear()&&b.getUTCMonth()==g.getMonth()&&b.getUTCDate()==g.getDate()&&c.push("today"),f&&b.valueOf()==f&&c.push("active"),(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!=a.inArray(b.valueOf(),this.range)&&c.push("selected")),c},fill:function(){{var c,d=new Date(this.viewDate),e=d.getUTCFullYear(),f=d.getUTCMonth(),g=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,h=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,i=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,j=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf()}this.picker.find(".datepicker-days thead th.datepicker-switch").text(k[this.o.language].months[f]+" "+e),this.picker.find("tfoot th.today").text(k[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(k[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var m=b(e,f-1,28,0,0,0,0),n=l.getDaysInMonth(m.getUTCFullYear(),m.getUTCMonth());m.setUTCDate(n),m.setUTCDate(n-(m.getUTCDay()-this.o.weekStart+7)%7);var o=new Date(m);o.setUTCDate(o.getUTCDate()+42),o=o.valueOf();for(var p,q=[];m.valueOf()<o;){if(m.getUTCDay()==this.o.weekStart&&(q.push("<tr>"),this.o.calendarWeeks)){var r=new Date(+m+(this.o.weekStart-m.getUTCDay()-7)%7*864e5),s=new Date(+r+(11-r.getUTCDay())%7*864e5),t=new Date(+(t=b(s.getUTCFullYear(),0,1))+(11-t.getUTCDay())%7*864e5),u=(s-t)/864e5/7+1;q.push('<td class="cw">'+u+"</td>")}p=this.getClassNames(m),p.push("day");var v=this.o.beforeShowDay(m);void 0===v?v={}:"boolean"==typeof v?v={enabled:v}:"string"==typeof v&&(v={classes:v}),v.enabled===!1&&p.push("disabled"),v.classes&&(p=p.concat(v.classes.split(/\s+/))),v.tooltip&&(c=v.tooltip),p=a.unique(p),q.push('<td class="'+p.join(" ")+'"'+(c?' title="'+c+'"':"")+">"+m.getUTCDate()+"</td>"),m.getUTCDay()==this.o.weekEnd&&q.push("</tr>"),m.setUTCDate(m.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(q.join(""));var w=this.date&&this.date.getUTCFullYear(),x=this.picker.find(".datepicker-months").find("th:eq(1)").text(e).end().find("span").removeClass("active");w&&w==e&&x.eq(this.date.getUTCMonth()).addClass("active"),(g>e||e>i)&&x.addClass("disabled"),e==g&&x.slice(0,h).addClass("disabled"),e==i&&x.slice(j+1).addClass("disabled"),q="",e=10*parseInt(e/10,10);var y=this.picker.find(".datepicker-years").find("th:eq(1)").text(e+"-"+(e+9)).end().find("td");e-=1;for(var z=-1;11>z;z++)q+='<span class="year'+(-1==z?" old":10==z?" new":"")+(w==e?" active":"")+(g>e||e>i?" disabled":"")+'">'+e+"</span>",e+=1;y.html(q)},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.o.startDate!==-1/0&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.o.startDate!==-1/0&&b<=this.o.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}}},click:function(c){c.preventDefault();var d=a(c.target).closest("span, td, th");if(1==d.length)switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var e=l.modes[this.viewMode].navStep*("prev"==d[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,e),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,e),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var f=new Date;f=b(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0),this.showMode(-2);var g="linked"==this.o.todayBtn?null:"view";this._setDate(f,g);break;case"clear":var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!d.is(".disabled")){if(this.viewDate.setUTCDate(1),d.is(".month")){var i=1,j=d.parent().find("span").index(d),k=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(j),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(b(k,j,i,0,0,0,0))}else{var k=parseInt(d.text(),10)||0,i=1,j=0;this.viewDate.setUTCFullYear(k),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(b(k,j,i,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var i=parseInt(d.text(),10)||1,k=this.viewDate.getUTCFullYear(),j=this.viewDate.getUTCMonth();d.is(".old")?0===j?(j=11,k-=1):j-=1:d.is(".new")&&(11==j?(j=0,k+=1):j+=1),this._setDate(b(k,j,i,0,0,0,0))}}},_setDate:function(a,b){b&&"date"!=b||(this.date=new Date(a)),b&&"view"!=b||(this.viewDate=new Date(a)),this.fill(),this.setValue(),this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.change(),!this.o.autoclose||b&&"date"!=b||this.hide()},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth(),h=Math.abs(b);if(b=b>0?1:-1,1==h)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var i=0;h>i;i++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27==a.keyCode&&this.show());var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;b=37==a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;b=38==a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+7*b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+7*b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:this.hide(),a.preventDefault();break;case 9:this.hide()}if(e){this._trigger("changeDate");var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change()}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+l.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var g=function(b,c){this.element=a(b),this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a}),delete c.inputs,a(this.inputs).datepicker(c).bind("changeDate",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")}),this.updateDates()};g.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.date}),this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){var c=a(b.target).data("datepicker"),d=c.getUTCDate(),e=a.inArray(b.target,this.inputs),f=this.inputs.length;if(-1!=e){if(d<this.dates[e])for(;e>=0&&d<this.dates[e];)this.pickers[e--].setUTCDate(d);else if(d>this.dates[e])for(;f>e&&d>this.dates[e];)this.pickers[e++].setUTCDate(d);this.updateDates()}},remove:function(){a.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var h=a.fn.datepicker;a.fn.datepicker=function(b){var e=Array.apply(null,arguments);e.shift();var h;return this.each(function(){var j=a(this),k=j.data("datepicker"),l="object"==typeof b&&b;if(!k){var m=c(this,"date"),n=a.extend({},i,m,l),o=d(n.language),p=a.extend({},i,o,m,l);if(j.is(".input-daterange")||p.inputs){var q={inputs:p.inputs||j.find("input").toArray()};j.data("datepicker",k=new g(this,a.extend(p,q)))}else j.data("datepicker",k=new f(this,p))}return"string"==typeof b&&"function"==typeof k[b]&&(h=k[b].apply(k,e),void 0!==h)?!1:void 0}),void 0!==h?h:this};var i=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},j=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=f;var k=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},l={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,l.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(c,d,e){if(c instanceof Date)return c;if("string"==typeof d&&(d=l.parseFormat(d)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(c)){var g,h,i=/([\-+]\d+)([dmwy])/,j=c.match(/([\-+]\d+)([dmwy])/g);c=new Date;for(var m=0;m<j.length;m++)switch(g=i.exec(j[m]),h=parseInt(g[1]),g[2]){case"d":c.setUTCDate(c.getUTCDate()+h);break;case"m":c=f.prototype.moveMonth.call(f.prototype,c,h);break;case"w":c.setUTCDate(c.getUTCDate()+7*h);break;case"y":c=f.prototype.moveYear.call(f.prototype,c,h)}return b(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),0,0,0)}var n,o,g,j=c&&c.match(this.nonpunctuation)||[],c=new Date,p={},q=["yyyy","yy","M","MM","m","mm","d","dd"],r={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){if(isNaN(a))return a;for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};r.M=r.MM=r.mm=r.m,r.dd=r.d,c=b(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0);var s=d.parts.slice();if(j.length!=s.length&&(s=a(s).filter(function(b,c){return-1!==a.inArray(c,q)}).toArray()),j.length==s.length){for(var m=0,t=s.length;t>m;m++){if(n=parseInt(j[m],10),g=s[m],isNaN(n))switch(g){case"MM":o=a(k[e].months).filter(function(){var a=this.slice(0,j[m].length),b=j[m].slice(0,a.length);return a==b}),n=a.inArray(o[0],k[e].months)+1;break;case"M":o=a(k[e].monthsShort).filter(function(){var a=this.slice(0,j[m].length),b=j[m].slice(0,a.length);return a==b}),n=a.inArray(o[0],k[e].monthsShort)+1}p[g]=n}for(var u,v,m=0;m<q.length;m++)v=q[m],v in p&&!isNaN(p[v])&&(u=new Date(c),r[v](u,p[v]),isNaN(u)||(c=u))}return c},formatDate:function(b,c,d){"string"==typeof c&&(c=l.parseFormat(c));var e={d:b.getUTCDate(),D:k[d].daysShort[b.getUTCDay()],DD:k[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:k[d].monthsShort[b.getUTCMonth()],MM:k[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m;for(var b=[],f=a.extend([],c.separators),g=0,h=c.parts.length;h>=g;g++)f.length&&b.push(f.shift()),b.push(e[c.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};l.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+l.headTemplate+"<tbody></tbody>"+l.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+l.headTemplate+l.contTemplate+l.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+l.headTemplate+l.contTemplate+l.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=l,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=h,this},a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),c.datepicker("show"))}),a(function(){a('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery)},{}],86:[function(){!function(a){"use strict";var b=function(b,c){if(this.$element=a(b),this.type=this.$element.data("uploadtype")||(this.$element.find(".thumbnail").length>0?"image":"file"),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||c.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=a('<input type="hidden" />'),this.$element.prepend(this.$hidden)),this.$preview=this.$element.find(".fileupload-preview");var d=this.$preview.css("height");"inline"!=this.$preview.css("display")&&"0px"!=d&&"none"!=d&&this.$preview.css("line-height",d),this.original={exists:this.$element.hasClass("fileupload-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.$remove=this.$element.find('[data-dismiss="fileupload"]'),this.$element.find('[data-trigger="fileupload"]').on("click.fileupload",a.proxy(this.trigger,this)),this.listen()}};b.prototype={listen:function(){this.$input.on("change.fileupload",a.proxy(this.change,this)),a(this.$input[0].form).on("reset.fileupload",a.proxy(this.reset,this)),this.$remove&&this.$remove.on("click.fileupload",a.proxy(this.clear,this))},change:function(a,b){if("clear"!==b){var c=void 0!==a.target.files?a.target.files[0]:a.target.value?{name:a.target.value.replace(/^.+\\/,"")}:null;if(!c)return void this.clear();if(this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name),"image"===this.type&&this.$preview.length>0&&("undefined"!=typeof c.type?c.type.match("image.*"):c.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var d=new FileReader,e=this.$preview,f=this.$element;d.onload=function(a){e.html('<img src="'+a.target.result+'" '+("none"!=e.css("max-height")?'style="max-height: '+e.css("max-height")+';"':"")+" />"),f.addClass("fileupload-exists").removeClass("fileupload-new")},d.readAsDataURL(c)}else this.$preview.text(c.name),this.$element.addClass("fileupload-exists").removeClass("fileupload-new")}},clear:function(a){if(this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),navigator.userAgent.match(/msie/i)){var b=this.$input.clone(!0);this.$input.after(b),this.$input.remove(),this.$input=b}else this.$input.val("");this.$preview.html(""),this.$element.addClass("fileupload-new").removeClass("fileupload-exists"),a&&(this.$input.trigger("change",["clear"]),a.preventDefault())},reset:function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.original.exists?this.$element.addClass("fileupload-exists").removeClass("fileupload-new"):this.$element.addClass("fileupload-new").removeClass("fileupload-exists")},trigger:function(a){this.$input.trigger("click"),a.preventDefault()}},a.fn.fileupload=function(c){return this.each(function(){var d=a(this),e=d.data("fileupload");e||d.data("fileupload",e=new b(this,c)),"string"==typeof c&&e[c]()})},a.fn.fileupload.Constructor=b,a(document).on("click.fileupload.data-api",'[data-provides="fileupload"]',function(b){var c=a(this);if(!c.data("fileupload")){c.fileupload(c.data());var d=a(b.target).closest('[data-dismiss="fileupload"],[data-trigger="fileupload"]');d.length>0&&(d.trigger("click.fileupload"),b.preventDefault())}})}(window.jQuery)},{}],87:[function(a,b){(function(c){jQuery=c.jQuery=a("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=a,function(){!function(a){"use strict";a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){d.trigger("closed").remove()}var d,e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),d=a(f),b&&b.preventDefault(),d.length||(d=e.hasClass("alert")?e:e.parent()),d.trigger(b=a.Event("close")),b.isDefaultPrevented()||(d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.on(a.support.transition.end,c):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f="object"==typeof c&&c;e||d.data("button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),d=this;if(!(b>this.$items.length-1||0>b))return this.sliding?this.$element.one("slid",function(){d.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(b,c){var d,e=this.$element.find(".item.active"),f=c||e[b](),g=this.interval,h="next"==b?"left":"right",i="next"==b?"first":"last",j=this;if(this.sliding=!0,g&&this.pause(),f=f.length?f:this.$element.find(".item")[i](),d=a.Event("slide",{relatedTarget:f[0],direction:h}),!f.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(j.$indicators.children()[j.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(d),d.isDefaultPrevented())return;f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),this.$element.one(a.support.transition.end,function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger("slid")},0)})}else{if(this.$element.trigger(d),d.isDefaultPrevented())return;e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return g&&this.cycle(),this}}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d,e=a(this),f=a(e.attr("data-target")||(c=e.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),g=a.extend({},f.data(),e.data());f.carousel(g),(d=e.attr("data-slide-to"))&&f.data("carousel").pause().to(d).cycle(),b.preventDefault()})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(!this.transitioning&&!this.$element.hasClass("in")){if(b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in"),d&&d.length){if(e=d.data("collapse"),e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;!this.transitioning&&this.$element.hasClass("in")&&(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[null!==a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){"show"==c.type&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c),c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),"object"==typeof c&&c);e||d.data("collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":d.data();d[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){"use strict";function b(){a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=d&&a(d),c&&c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(){var d,e,f=a(this);if(!f.is(".disabled, :disabled"))return d=c(f),e=d.hasClass("open"),b(),e||d.toggleClass("open"),f.focus(),!1},keydown:function(b){var e,f,g,h,i;if(/(38|40|27)/.test(b.keyCode)&&(e=a(this),b.preventDefault(),b.stopPropagation(),!e.is(".disabled, :disabled"))){if(g=c(e),h=g.hasClass("open"),!h||h&&27==b.keyCode)return 27==b.which&&g.find(d).focus(),e.click();f=a("[role=menu] li:not(.divider):visible a",g),f.length&&(i=f.index(f.filter(":focus")),38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<f.length-1&&i++,~i||(i=0),f.eq(i).focus())}}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown-menu",function(a){a.stopPropagation()}).on("click.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");
this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};return this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",void(this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show))):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",void(this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide))):c.hide()},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=("function"==typeof c.content?c.content.call(b[0]):c.content)||b.attr("data-content")},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f="object"==typeof c&&c;e||d.data("popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){"use strict";function b(b,c){var d,e=a.proxy(this.process,this),f=a(a(b).is("body")?window:b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=f.on("scroll.scroll-spy.data-api",e),this.selector=(this.options.target||(d=a(b).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b,c=this;this.offsets=a([]),this.targets=a([]),b=this.$body.find(this.selector).map(function(){var b=a(this),d=b.data("target")||b.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},process:function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f="object"==typeof c&&c;e||d.data("scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b,c,d,e=this.element,f=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target");g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,"")),e.parent("li").hasClass("active")||(b=f.find(".active:last a")[0],d=a.Event("show",{relatedTarget:b}),e.trigger(d),d.isDefaultPrevented()||(c=a(g),this.activate(e.parent("li"),f),this.activate(c,c.parent(),function(){e.trigger({type:"shown",relatedTarget:b})})))},activate:function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e):e(),f.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var b;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(b=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,b?this.process(b):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(){var b=this.$menu.find(".active").removeClass("active"),c=b.next();c.length||(c=a(this.$menu.find("li")[0])),c.addClass("active")},prev:function(){var a=this.$menu.find(".active").removeClass("active"),b=a.prev();b.length||(b=this.$menu.find("li").last()),b.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var b=a(this);b.data("typeahead")||b.typeahead(b.data())})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="affix affix-top affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=g&&e.top+this.$element.height()>=c-g?"bottom":null!=h&&h>=d?"top":!1,this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?e.top-d:null,this.$element.removeClass(i).addClass("affix"+(b?"-"+b:"")))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof c&&c;e||d.data("affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js":98}],88:[function(a,b){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(){function a(){var a={};return a.FRAMERATE=30,a.MAX_VIRTUAL_PIXELS=3e4,a.init=function(b){var c=0;a.UniqueId=function(){return c++,"canvg"+c},a.Definitions={},a.Styles={},a.Animations=[],a.Images=[],a.ctx=b,a.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(a,b){this.viewPorts.push({width:a,height:b})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(a){return null!=a&&"number"==typeof a?a:"x"==a?this.width():"y"==a?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},a.init(),a.ImagesLoaded=function(){for(var b=0;b<a.Images.length;b++)if(!a.Images[b].loaded)return!1;return!0},a.trim=function(a){return a.replace(/^\s+|\s+$/g,"")},a.compressSpaces=function(a){return a.replace(/[\s\r\t\n]+/gm," ")},a.ajax=function(a){var b;return b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),b?(b.open("GET",a,!1),b.send(null),b.responseText):null},a.parseXml=function(a){if(window.DOMParser){var b=new DOMParser;return b.parseFromString(a,"text/xml")}a=a.replace(/<!DOCTYPE svg[^>]*>/,"");var c=new ActiveXObject("Microsoft.XMLDOM");return c.async="false",c.loadXML(a),c},a.Property=function(a,b){this.name=a,this.value=b},a.Property.prototype.getValue=function(){return this.value},a.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},a.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var a=parseFloat(this.value);return(this.value+"").match(/%$/)&&(a/=100),a},a.Property.prototype.valueOrDefault=function(a){return this.hasValue()?this.value:a},a.Property.prototype.numValueOrDefault=function(a){return this.hasValue()?this.numValue():a},a.Property.prototype.addOpacity=function(c){var d=this.value;if(null!=c&&""!=c&&"string"==typeof this.value){var e=new b(this.value);e.ok&&(d="rgba("+e.r+", "+e.g+", "+e.b+", "+c+")")}return new a.Property(this.name,d)},a.Property.prototype.getDefinition=function(){var b=this.value.match(/#([^\)'"]+)/);return b&&(b=b[1]),b||(b=this.value),a.Definitions[b]},a.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},a.Property.prototype.getFillStyleDefinition=function(b,c){var d=this.getDefinition();if(null!=d&&d.createGradient)return d.createGradient(a.ctx,b,c);if(null!=d&&d.createPattern){if(d.getHrefAttribute().hasValue()){var e=d.attribute("patternTransform");d=d.getHrefAttribute().getDefinition(),e.hasValue()&&(d.attribute("patternTransform",!0).value=e.value)}return d.createPattern(a.ctx,b)}return null},a.Property.prototype.getDPI=function(){return 96},a.Property.prototype.getEM=function(b){var c=12,d=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);return d.hasValue()&&(c=d.toPixels(b)),c},a.Property.prototype.getUnits=function(){var a=this.value+"";return a.replace(/[0-9\.\-]/g,"")},a.Property.prototype.toPixels=function(b,c){if(!this.hasValue())return 0;var d=this.value+"";if(d.match(/em$/))return this.numValue()*this.getEM(b);if(d.match(/ex$/))return this.numValue()*this.getEM(b)/2;if(d.match(/px$/))return this.numValue();if(d.match(/pt$/))return this.numValue()*this.getDPI(b)*(1/72);if(d.match(/pc$/))return 15*this.numValue();if(d.match(/cm$/))return this.numValue()*this.getDPI(b)/2.54;if(d.match(/mm$/))return this.numValue()*this.getDPI(b)/25.4;if(d.match(/in$/))return this.numValue()*this.getDPI(b);if(d.match(/%$/))return this.numValue()*a.ViewPort.ComputeSize(b);var e=this.numValue();return c&&1>e?e*a.ViewPort.ComputeSize(b):e},a.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/s$/)?1e3*this.numValue():(a.match(/ms$/),this.numValue())},a.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/deg$/)?this.numValue()*(Math.PI/180):a.match(/grad$/)?this.numValue()*(Math.PI/200):a.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},a.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(b,c,d,e,f,g){var h=null!=g?this.Parse(g):this.CreateFont("","","","","",a.ctx.font);return{fontFamily:f||h.fontFamily,fontSize:e||h.fontSize,fontStyle:b||h.fontStyle,fontWeight:d||h.fontWeight,fontVariant:c||h.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var b=this;this.Parse=function(c){for(var d={},e=a.trim(a.compressSpaces(c||"")).split(" "),f={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},g="",h=0;h<e.length;h++)f.fontStyle||-1==b.Styles.indexOf(e[h])?f.fontVariant||-1==b.Variants.indexOf(e[h])?f.fontWeight||-1==b.Weights.indexOf(e[h])?f.fontSize?"inherit"!=e[h]&&(g+=e[h]):("inherit"!=e[h]&&(d.fontSize=e[h].split("/")[0]),f.fontStyle=f.fontVariant=f.fontWeight=f.fontSize=!0):("inherit"!=e[h]&&(d.fontWeight=e[h]),f.fontStyle=f.fontVariant=f.fontWeight=!0):("inherit"!=e[h]&&(d.fontVariant=e[h]),f.fontStyle=f.fontVariant=!0):("inherit"!=e[h]&&(d.fontStyle=e[h]),f.fontStyle=!0);return""!=g&&(d.fontFamily=g),d}},a.ToNumberArray=function(b){for(var c=a.trim(a.compressSpaces((b||"").replace(/,/g," "))).split(" "),d=0;d<c.length;d++)c[d]=parseFloat(c[d]);return c},a.Point=function(a,b){this.x=a,this.y=b},a.Point.prototype.angleTo=function(a){return Math.atan2(a.y-this.y,a.x-this.x)},a.Point.prototype.applyTransform=function(a){var b=this.x*a[0]+this.y*a[2]+a[4],c=this.x*a[1]+this.y*a[3]+a[5];this.x=b,this.y=c},a.CreatePoint=function(b){var c=a.ToNumberArray(b);return new a.Point(c[0],c[1])},a.CreatePath=function(b){for(var c=a.ToNumberArray(b),d=[],e=0;e<c.length;e+=2)d.push(new a.Point(c[e],c[e+1]));return d},a.BoundingBox=function(a,b,c,d){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(a,b){null!=a&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=a,this.x2=a),a<this.x1&&(this.x1=a),a>this.x2&&(this.x2=a)),null!=b&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=b,this.y2=b),b<this.y1&&(this.y1=b),b>this.y2&&(this.y2=b))},this.addX=function(a){this.addPoint(a,null)},this.addY=function(a){this.addPoint(null,a)},this.addBoundingBox=function(a){this.addPoint(a.x1,a.y1),this.addPoint(a.x2,a.y2)},this.addQuadraticCurve=function(a,b,c,d,e,f){var g=a+2/3*(c-a),h=b+2/3*(d-b),i=g+1/3*(e-a),j=h+1/3*(f-b);this.addBezierCurve(a,b,g,i,h,j,e,f)},this.addBezierCurve=function(a,b,c,d,e,f,g,h){var j=[a,b],k=[c,d],l=[e,f],m=[g,h];for(this.addPoint(j[0],j[1]),this.addPoint(m[0],m[1]),i=0;1>=i;i++){var n=function(a){return Math.pow(1-a,3)*j[i]+3*Math.pow(1-a,2)*a*k[i]+3*(1-a)*Math.pow(a,2)*l[i]+Math.pow(a,3)*m[i]},o=6*j[i]-12*k[i]+6*l[i],p=-3*j[i]+9*k[i]-9*l[i]+3*m[i],q=3*k[i]-3*j[i];if(0!=p){var r=Math.pow(o,2)-4*q*p;if(!(0>r)){var s=(-o+Math.sqrt(r))/(2*p);s>0&&1>s&&(0==i&&this.addX(n(s)),1==i&&this.addY(n(s)));var t=(-o-Math.sqrt(r))/(2*p);t>0&&1>t&&(0==i&&this.addX(n(t)),1==i&&this.addY(n(t)))}}else{if(0==o)continue;var u=-q/o;u>0&&1>u&&(0==i&&this.addX(n(u)),1==i&&this.addY(n(u)))}}},this.isPointInBox=function(a,b){return this.x1<=a&&a<=this.x2&&this.y1<=b&&b<=this.y2},this.addPoint(a,b),this.addPoint(c,d)},a.Transform=function(b){var c=this;this.Type={},this.Type.translate=function(b){this.p=a.CreatePoint(b),this.apply=function(a){a.translate(this.p.x||0,this.p.y||0)},this.unapply=function(a){a.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(a){a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(b){var c=a.ToNumberArray(b);this.angle=new a.Property("angle",c[0]),this.cx=c[1]||0,this.cy=c[2]||0,this.apply=function(a){a.translate(this.cx,this.cy),a.rotate(this.angle.toRadians()),a.translate(-this.cx,-this.cy)},this.unapply=function(a){a.translate(this.cx,this.cy),a.rotate(-1*this.angle.toRadians()),a.translate(-this.cx,-this.cy)},this.applyToPoint=function(a){var b=this.angle.toRadians();a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),a.applyTransform([Math.cos(b),Math.sin(b),-Math.sin(b),Math.cos(b),0,0]),a.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(b){this.p=a.CreatePoint(b),this.apply=function(a){a.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(a){a.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(a){a.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(b){this.m=a.ToNumberArray(b),this.apply=function(a){a.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(a){a.applyTransform(this.m)}},this.Type.SkewBase=function(b){this.base=c.Type.matrix,this.base(b),this.angle=new a.Property("angle",b)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(a){this.base=c.Type.SkewBase,this.base(a),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(a){this.base=c.Type.SkewBase,this.base(a),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].apply(a)},this.unapply=function(a){for(var b=this.transforms.length-1;b>=0;b--)this.transforms[b].unapply(a)},this.applyToPoint=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].applyToPoint(a)};for(var d=a.trim(a.compressSpaces(b)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),e=0;e<d.length;e++){var f=a.trim(d[e].split("(")[0]),g=d[e].split("(")[1].replace(")",""),h=new this.Type[f](g);h.type=f,this.transforms.push(h)}},a.AspectRatio=function(b,c,d,e,f,g,h,i,j,k){c=a.compressSpaces(c),c=c.replace(/^defer\s/,"");var l=c.split(" ")[0]||"xMidYMid",m=c.split(" ")[1]||"meet",n=d/e,o=f/g,p=Math.min(n,o),q=Math.max(n,o);"meet"==m&&(e*=p,g*=p),"slice"==m&&(e*=q,g*=q),j=new a.Property("refX",j),k=new a.Property("refY",k),j.hasValue()&&k.hasValue()?b.translate(-p*j.toPixels("x"),-p*k.toPixels("y")):(l.match(/^xMid/)&&("meet"==m&&p==o||"slice"==m&&q==o)&&b.translate(d/2-e/2,0),l.match(/YMid$/)&&("meet"==m&&p==n||"slice"==m&&q==n)&&b.translate(0,f/2-g/2),l.match(/^xMax/)&&("meet"==m&&p==o||"slice"==m&&q==o)&&b.translate(d-e,0),l.match(/YMax$/)&&("meet"==m&&p==n||"slice"==m&&q==n)&&b.translate(0,f-g)),"none"==l?b.scale(n,o):"meet"==m?b.scale(p,p):"slice"==m&&b.scale(q,q),b.translate(null==h?0:-h,null==i?0:-i)},a.Element={},a.EmptyProperty=new a.Property("EMPTY",""),a.Element.ElementBase=function(b){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(b,c){var d=this.attributes[b];return null!=d?d:(1==c&&(d=new a.Property(b,""),this.attributes[b]=d),d||a.EmptyProperty)},this.getHrefAttribute=function(){for(var b in this.attributes)if(b.match(/:href$/))return this.attributes[b];return a.EmptyProperty},this.style=function(b,c){var d=this.styles[b];if(null!=d)return d;var e=this.attribute(b);if(null!=e&&e.hasValue())return this.styles[b]=e,e;var f=this.parent;if(null!=f){var g=f.style(b);if(null!=g&&g.hasValue())return g}return 1==c&&(d=new a.Property(b,""),this.styles[b]=d),d||a.EmptyProperty},this.render=function(a){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){if(a.save(),this.attribute("mask").hasValue()){var b=this.attribute("mask").getDefinition();null!=b&&b.apply(a,this)}else if(this.style("filter").hasValue()){var c=this.style("filter").getDefinition();null!=c&&c.apply(a,this)}else this.setContext(a),this.renderChildren(a),this.clearContext(a);a.restore()}},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(a){for(var b=0;b<this.children.length;b++)this.children[b].render(a)},this.addChild=function(b,c){var d=b;c&&(d=a.CreateElement(b)),d.parent=this,this.children.push(d)},null!=b&&1==b.nodeType){for(var c=0;c<b.childNodes.length;c++){var d=b.childNodes[c];if(1==d.nodeType&&this.addChild(d,!0),this.captureTextNodes&&3==d.nodeType){var e=d.nodeValue||d.text||"";""!=a.trim(a.compressSpaces(e))&&this.addChild(new a.Element.tspan(d),!1)}}for(var c=0;c<b.attributes.length;c++){var f=b.attributes[c];this.attributes[f.nodeName]=new a.Property(f.nodeName,f.nodeValue)}var g=a.Styles[b.nodeName];if(null!=g)for(var h in g)this.styles[h]=g[h];if(this.attribute("class").hasValue())for(var i=a.compressSpaces(this.attribute("class").value).split(" "),j=0;j<i.length;j++){if(g=a.Styles["."+i[j]],null!=g)for(var h in g)this.styles[h]=g[h];if(g=a.Styles[b.nodeName+"."+i[j]],null!=g)for(var h in g)this.styles[h]=g[h]}if(this.attribute("id").hasValue()){var g=a.Styles["#"+this.attribute("id").value];
if(null!=g)for(var h in g)this.styles[h]=g[h]}if(this.attribute("style").hasValue())for(var g=this.attribute("style").value.split(";"),c=0;c<g.length;c++)if(""!=a.trim(g[c])){var k=g[c].split(":"),h=a.trim(k[0]),l=a.trim(k[1]);this.styles[h]=new a.Property(h,l)}this.attribute("id").hasValue()&&null==a.Definitions[this.attribute("id").value]&&(a.Definitions[this.attribute("id").value]=this)}},a.Element.RenderedElementBase=function(b){this.base=a.Element.ElementBase,this.base(b),this.setContext=function(b){if(this.style("fill").isUrlDefinition()){var c=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=c&&(b.fillStyle=c)}else if(this.style("fill").hasValue()){var d=this.style("fill");"currentColor"==d.value&&(d.value=this.style("color").value),b.fillStyle="none"==d.value?"rgba(0,0,0,0)":d.value}if(this.style("fill-opacity").hasValue()){var d=new a.Property("fill",b.fillStyle);d=d.addOpacity(this.style("fill-opacity").value),b.fillStyle=d.value}if(this.style("stroke").isUrlDefinition()){var c=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=c&&(b.strokeStyle=c)}else if(this.style("stroke").hasValue()){var e=this.style("stroke");"currentColor"==e.value&&(e.value=this.style("color").value),b.strokeStyle="none"==e.value?"rgba(0,0,0,0)":e.value}if(this.style("stroke-opacity").hasValue()){var e=new a.Property("stroke",b.strokeStyle);e=e.addOpacity(this.style("stroke-opacity").value),b.strokeStyle=e.value}if(this.style("stroke-width").hasValue()){var f=this.style("stroke-width").toPixels();b.lineWidth=0==f?.001:f}if(this.style("stroke-linecap").hasValue()&&(b.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(b.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(b.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()){var g=a.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof b.setLineDash?b.setLineDash(g):"undefined"!=typeof b.webkitLineDash?b.webkitLineDash=g:"undefined"!=typeof b.mozDash&&(b.mozDash=g);var h=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof b.lineDashOffset?b.lineDashOffset=h:"undefined"!=typeof b.webkitLineDashOffset?b.webkitLineDashOffset=h:"undefined"!=typeof b.mozDashOffset&&(b.mozDashOffset=h)}if("undefined"!=typeof b.font&&(b.font=a.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var i=new a.Transform(this.attribute("transform").value);i.apply(b)}if(this.style("clip-path").hasValue()){var j=this.style("clip-path").getDefinition();null!=j&&j.apply(b)}this.style("opacity").hasValue()&&(b.globalAlpha=this.style("opacity").numValue())}},a.Element.RenderedElementBase.prototype=new a.Element.ElementBase,a.Element.PathElementBase=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.path=function(b){return null!=b&&b.beginPath(),new a.BoundingBox},this.renderChildren=function(b){var c=-1!==navigator.userAgent.toLowerCase().indexOf("msie")||navigator.userAgent.match(/Trident\/7\./);c&&this.hiddenVisibility||this.path(b),a.Mouse.checkPath(this,b),""!=b.fillStyle&&(this.attribute("fill-rule").hasValue()?b.fill(this.attribute("fill-rule").value):c&&this instanceof a.Element.path||b.fill()),""!=b.strokeStyle&&(!c||this instanceof a.Element.circle||"rgba(0, 0, 0, 0)"!==b.strokeStyle||(b.strokeStyle="rgba(0, 0, 0, 1)"),b.stroke());var d=this.getMarkers();if(null!=d){if(this.style("marker-start").isUrlDefinition()){var e=this.style("marker-start").getDefinition();e.render(b,d[0][0],d[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var e=this.style("marker-mid").getDefinition(),f=1;f<d.length-1;f++)e.render(b,d[f][0],d[f][1]);if(this.style("marker-end").isUrlDefinition()){var e=this.style("marker-end").getDefinition();e.render(b,d[d.length-1][0],d[d.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},a.Element.PathElementBase.prototype=new a.Element.RenderedElementBase,a.Element.svg=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.baseClearContext=this.clearContext,this.clearContext=function(b){this.baseClearContext(b),a.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(b){b.strokeStyle="rgba(0,0,0,0)",b.lineCap="butt",b.lineJoin="miter",b.miterLimit=4,this.baseSetContext(b),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),b.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var c=a.ViewPort.width(),d=a.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){c=this.attribute("width").toPixels("x"),d=this.attribute("height").toPixels("y");var e=0,f=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(e=-this.attribute("refX").toPixels("x"),f=-this.attribute("refY").toPixels("y")),b.beginPath(),b.moveTo(e,f),b.lineTo(c,f),b.lineTo(c,d),b.lineTo(e,d),b.closePath(),b.clip()}if(a.ViewPort.SetCurrent(c,d),this.attribute("viewBox").hasValue()){var g=a.ToNumberArray(this.attribute("viewBox").value),h=g[0],i=g[1];c=g[2],d=g[3],a.AspectRatio(b,this.attribute("preserveAspectRatio").value,a.ViewPort.width(),c,a.ViewPort.height(),d,h,i,this.attribute("refX").value,this.attribute("refY").value),a.ViewPort.RemoveCurrent(),a.ViewPort.SetCurrent(g[2],g[3])}}},a.Element.svg.prototype=new a.Element.RenderedElementBase,a.Element.rect=function(b){this.base=a.Element.PathElementBase,this.base(b),"hidden"===b.style.visibility&&(this.hiddenVisibility=!0),this.path=function(b){var c=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),e=this.attribute("width").toPixels("x"),f=this.attribute("height").toPixels("y"),g=this.attribute("rx").toPixels("x"),h=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(h=g),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(g=h),g=Math.min(g,e/2),h=Math.min(h,f/2),null!=b&&(b.beginPath(),b.moveTo(c+g,d),b.lineTo(c+e-g,d),b.quadraticCurveTo(c+e,d,c+e,d+h),b.lineTo(c+e,d+f-h),b.quadraticCurveTo(c+e,d+f,c+e-g,d+f),b.lineTo(c+g,d+f),b.quadraticCurveTo(c,d+f,c,d+f-h),b.lineTo(c,d+h),b.quadraticCurveTo(c,d,c+g,d),b.closePath()),new a.BoundingBox(c,d,c+e,d+f)}},a.Element.rect.prototype=new a.Element.PathElementBase,a.Element.circle=function(b){this.base=a.Element.PathElementBase,this.base(b),this.path=function(b){var c=this.attribute("cx").toPixels("x"),d=this.attribute("cy").toPixels("y"),e=this.attribute("r").toPixels();return null!=b&&(b.beginPath(),b.arc(c,d,e,0,2*Math.PI,!0),b.closePath()),new a.BoundingBox(c-e,d-e,c+e,d+e)}},a.Element.circle.prototype=new a.Element.PathElementBase,a.Element.ellipse=function(b){this.base=a.Element.PathElementBase,this.base(b),this.path=function(b){var c=4*((Math.sqrt(2)-1)/3),d=this.attribute("rx").toPixels("x"),e=this.attribute("ry").toPixels("y"),f=this.attribute("cx").toPixels("x"),g=this.attribute("cy").toPixels("y");return null!=b&&(b.beginPath(),b.moveTo(f,g-e),b.bezierCurveTo(f+c*d,g-e,f+d,g-c*e,f+d,g),b.bezierCurveTo(f+d,g+c*e,f+c*d,g+e,f,g+e),b.bezierCurveTo(f-c*d,g+e,f-d,g+c*e,f-d,g),b.bezierCurveTo(f-d,g-c*e,f-c*d,g-e,f,g-e),b.closePath()),new a.BoundingBox(f-d,g-e,f+d,g+e)}},a.Element.ellipse.prototype=new a.Element.PathElementBase,a.Element.line=function(b){this.base=a.Element.PathElementBase,this.base(b),this.getPoints=function(){return[new a.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new a.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(b){var c=this.getPoints();return null!=b&&(b.beginPath(),b.moveTo(c[0].x,c[0].y),b.lineTo(c[1].x,c[1].y)),new a.BoundingBox(c[0].x,c[0].y,c[1].x,c[1].y)},this.getMarkers=function(){var a=this.getPoints(),b=a[0].angleTo(a[1]);return[[a[0],b],[a[1],b]]}},a.Element.line.prototype=new a.Element.PathElementBase,a.Element.polyline=function(b){this.base=a.Element.PathElementBase,this.base(b),this.points=a.CreatePath(this.attribute("points").value),this.path=function(b){var c=new a.BoundingBox(this.points[0].x,this.points[0].y);null!=b&&(b.beginPath(),b.moveTo(this.points[0].x,this.points[0].y));for(var d=1;d<this.points.length;d++)c.addPoint(this.points[d].x,this.points[d].y),null!=b&&b.lineTo(this.points[d].x,this.points[d].y);return c},this.getMarkers=function(){for(var a=[],b=0;b<this.points.length-1;b++)a.push([this.points[b],this.points[b].angleTo(this.points[b+1])]);return a.push([this.points[this.points.length-1],a[a.length-1][1]]),a}},a.Element.polyline.prototype=new a.Element.PathElementBase,a.Element.polygon=function(b){this.base=a.Element.polyline,this.base(b),this.basePath=this.path,this.path=function(a){var b=this.basePath(a);return null!=a&&(a.lineTo(this.points[0].x,this.points[0].y),a.closePath()),b}},a.Element.polygon.prototype=new a.Element.polyline,a.Element.path=function(b){this.base=a.Element.PathElementBase,this.base(b);var c=this.attribute("d").value;c=c.replace(/,/gm," "),c=c.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),c=c.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),c=c.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),c=c.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),c=c.replace(/([0-9])([+\-])/gm,"$1 $2"),c=c.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),c=c.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),c=a.compressSpaces(c),c=a.trim(c),this.PathParser=new function(b){this.tokens=b.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new a.Point(0,0),this.control=new a.Point(0,0),this.current=new a.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var b=new a.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(b)},this.getAsControlPoint=function(){var a=this.getPoint();return this.control=a,a},this.getAsCurrentPoint=function(){var a=this.getPoint();return this.current=a,a},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var b=new a.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return b},this.makeAbsolute=function(a){return this.isRelativeCommand()&&(a.x+=this.current.x,a.y+=this.current.y),a},this.addMarker=function(a,b,c){null!=c&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(c)),this.addMarkerAngle(a,null==b?null:b.angleTo(a))},this.addMarkerAngle=function(a,b){this.points.push(a),this.angles.push(b)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var a=0;a<this.angles.length;a++)if(null==this.angles[a])for(var b=a+1;b<this.angles.length;b++)if(null!=this.angles[b]){this.angles[a]=this.angles[b];break}return this.angles}}(c),this.path=function(b){var c=this.PathParser;c.reset();var d=new a.BoundingBox;for(null!=b&&b.beginPath();!c.isEnd();)switch(c.nextCommand(),c.command){case"M":case"m":var e=c.getAsCurrentPoint();for(c.addMarker(e),d.addPoint(e.x,e.y),null!=b&&b.moveTo(e.x,e.y),c.start=c.current;!c.isCommandOrEnd();){var e=c.getAsCurrentPoint();c.addMarker(e,c.start),d.addPoint(e.x,e.y),null!=b&&b.lineTo(e.x,e.y)}break;case"L":case"l":for(;!c.isCommandOrEnd();){var f=c.current,e=c.getAsCurrentPoint();c.addMarker(e,f),d.addPoint(e.x,e.y),null!=b&&b.lineTo(e.x,e.y)}break;case"H":case"h":for(;!c.isCommandOrEnd();){var g=new a.Point((c.isRelativeCommand()?c.current.x:0)+c.getScalar(),c.current.y);c.addMarker(g,c.current),c.current=g,d.addPoint(c.current.x,c.current.y),null!=b&&b.lineTo(c.current.x,c.current.y)}break;case"V":case"v":for(;!c.isCommandOrEnd();){var g=new a.Point(c.current.x,(c.isRelativeCommand()?c.current.y:0)+c.getScalar());c.addMarker(g,c.current),c.current=g,d.addPoint(c.current.x,c.current.y),null!=b&&b.lineTo(c.current.x,c.current.y)}break;case"C":case"c":for(;!c.isCommandOrEnd();){var h=c.current,i=c.getPoint(),j=c.getAsControlPoint(),k=c.getAsCurrentPoint();c.addMarker(k,j,i),d.addBezierCurve(h.x,h.y,i.x,i.y,j.x,j.y,k.x,k.y),null!=b&&b.bezierCurveTo(i.x,i.y,j.x,j.y,k.x,k.y)}break;case"S":case"s":for(;!c.isCommandOrEnd();){var h=c.current,i=c.getReflectedControlPoint(),j=c.getAsControlPoint(),k=c.getAsCurrentPoint();c.addMarker(k,j,i),d.addBezierCurve(h.x,h.y,i.x,i.y,j.x,j.y,k.x,k.y),null!=b&&b.bezierCurveTo(i.x,i.y,j.x,j.y,k.x,k.y)}break;case"Q":case"q":for(;!c.isCommandOrEnd();){var h=c.current,j=c.getAsControlPoint(),k=c.getAsCurrentPoint();c.addMarker(k,j,j),d.addQuadraticCurve(h.x,h.y,j.x,j.y,k.x,k.y),null!=b&&b.quadraticCurveTo(j.x,j.y,k.x,k.y)}break;case"T":case"t":for(;!c.isCommandOrEnd();){var h=c.current,j=c.getReflectedControlPoint();c.control=j;var k=c.getAsCurrentPoint();c.addMarker(k,j,j),d.addQuadraticCurve(h.x,h.y,j.x,j.y,k.x,k.y),null!=b&&b.quadraticCurveTo(j.x,j.y,k.x,k.y)}break;case"A":case"a":for(;!c.isCommandOrEnd();){var h=c.current,l=c.getScalar(),m=c.getScalar(),n=c.getScalar()*(Math.PI/180),o=c.getScalar(),p=c.getScalar(),k=c.getAsCurrentPoint(),q=new a.Point(Math.cos(n)*(h.x-k.x)/2+Math.sin(n)*(h.y-k.y)/2,-Math.sin(n)*(h.x-k.x)/2+Math.cos(n)*(h.y-k.y)/2),r=Math.pow(q.x,2)/Math.pow(l,2)+Math.pow(q.y,2)/Math.pow(m,2);r>1&&(l*=Math.sqrt(r),m*=Math.sqrt(r));var s=(o==p?-1:1)*Math.sqrt((Math.pow(l,2)*Math.pow(m,2)-Math.pow(l,2)*Math.pow(q.y,2)-Math.pow(m,2)*Math.pow(q.x,2))/(Math.pow(l,2)*Math.pow(q.y,2)+Math.pow(m,2)*Math.pow(q.x,2)));isNaN(s)&&(s=0);var t=new a.Point(s*l*q.y/m,s*-m*q.x/l),u=new a.Point((h.x+k.x)/2+Math.cos(n)*t.x-Math.sin(n)*t.y,(h.y+k.y)/2+Math.sin(n)*t.x+Math.cos(n)*t.y),v=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))},w=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(v(a)*v(b))},x=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(w(a,b))},y=x([1,0],[(q.x-t.x)/l,(q.y-t.y)/m]),z=[(q.x-t.x)/l,(q.y-t.y)/m],A=[(-q.x-t.x)/l,(-q.y-t.y)/m],B=x(z,A);w(z,A)<=-1&&(B=Math.PI),w(z,A)>=1&&(B=0);var C=1-p?1:-1,D=y+C*(B/2),E=new a.Point(u.x+l*Math.cos(D),u.y+m*Math.sin(D));if(c.addMarkerAngle(E,D-C*Math.PI/2),c.addMarkerAngle(k,D-C*Math.PI),d.addPoint(k.x,k.y),null!=b){var w=l>m?l:m,F=l>m?1:l/m,G=l>m?m/l:1;b.translate(u.x,u.y),b.rotate(n),b.scale(F,G),b.arc(0,0,w,y,y+B,1-p),b.scale(1/F,1/G),b.rotate(-n),b.translate(-u.x,-u.y)}}break;case"Z":case"z":null!=b&&b.closePath(),c.current=c.start}return d},this.getMarkers=function(){for(var a=this.PathParser.getMarkerPoints(),b=this.PathParser.getMarkerAngles(),c=[],d=0;d<a.length;d++)c.push([a[d],b[d]]);return c}},a.Element.path.prototype=new a.Element.PathElementBase,a.Element.pattern=function(b){this.base=a.Element.ElementBase,this.base(b),this.createPattern=function(b){var c=this.attribute("width").toPixels("x",!0),d=this.attribute("height").toPixels("y",!0),e=new a.Element.svg;e.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value),e.attributes.width=new a.Property("width",c+"px"),e.attributes.height=new a.Property("height",d+"px"),e.attributes.transform=new a.Property("transform",this.attribute("patternTransform").value),e.children=this.children;var f=document.createElement("canvas");f.width=c,f.height=d;var g=f.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&g.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var h=-1;1>=h;h++)for(var i=-1;1>=i;i++)g.save(),g.translate(h*f.width,i*f.height),e.render(g),g.restore();var j=b.createPattern(f,"repeat");return j}},a.Element.pattern.prototype=new a.Element.ElementBase,a.Element.marker=function(b){this.base=a.Element.ElementBase,this.base(b),this.baseRender=this.render,this.render=function(b,c,d){b.translate(c.x,c.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&b.rotate(d),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&b.scale(b.lineWidth,b.lineWidth),b.save();var e=new a.Element.svg;e.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value),e.attributes.refX=new a.Property("refX",this.attribute("refX").value),e.attributes.refY=new a.Property("refY",this.attribute("refY").value),e.attributes.width=new a.Property("width",this.attribute("markerWidth").value),e.attributes.height=new a.Property("height",this.attribute("markerHeight").value),e.attributes.fill=new a.Property("fill",this.attribute("fill").valueOrDefault("black")),e.attributes.stroke=new a.Property("stroke",this.attribute("stroke").valueOrDefault("none")),e.children=this.children,e.render(b),b.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&b.scale(1/b.lineWidth,1/b.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&b.rotate(-d),b.translate(-c.x,-c.y)}},a.Element.marker.prototype=new a.Element.ElementBase,a.Element.defs=function(b){this.base=a.Element.ElementBase,this.base(b),this.render=function(){}},a.Element.defs.prototype=new a.Element.ElementBase,a.Element.GradientBase=function(b){this.base=a.Element.ElementBase,this.base(b),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var c=0;c<this.children.length;c++){var d=this.children[c];"stop"==d.type&&this.stops.push(d)}this.getGradient=function(){},this.createGradient=function(b,c,d){var e=this;this.getHrefAttribute().hasValue()&&(e=this.getHrefAttribute().getDefinition());var f=function(b){if(d.hasValue()){var c=new a.Property("color",b);return c.addOpacity(d.value).value}return b},g=this.getGradient(b,c);if(null==g)return f(e.stops[e.stops.length-1].color);for(var h=0;h<e.stops.length;h++)g.addColorStop(e.stops[h].offset,f(e.stops[h].color));if(this.attribute("gradientTransform").hasValue()){var i=a.ViewPort.viewPorts[0],j=new a.Element.rect;j.attributes.x=new a.Property("x",-a.MAX_VIRTUAL_PIXELS/3),j.attributes.y=new a.Property("y",-a.MAX_VIRTUAL_PIXELS/3),j.attributes.width=new a.Property("width",a.MAX_VIRTUAL_PIXELS),j.attributes.height=new a.Property("height",a.MAX_VIRTUAL_PIXELS);var k=new a.Element.g;k.attributes.transform=new a.Property("transform",this.attribute("gradientTransform").value),k.children=[j];var l=new a.Element.svg;l.attributes.x=new a.Property("x",0),l.attributes.y=new a.Property("y",0),l.attributes.width=new a.Property("width",i.width),l.attributes.height=new a.Property("height",i.height),l.children=[k];var m=document.createElement("canvas");m.width=i.width,m.height=i.height;var n=m.getContext("2d");return n.fillStyle=g,l.render(n),n.createPattern(m,"no-repeat")}return g}},a.Element.GradientBase.prototype=new a.Element.ElementBase,a.Element.linearGradient=function(b){this.base=a.Element.GradientBase,this.base(b),this.getGradient=function(a,b){var c=b.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var d="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),e="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),f="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),g="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return d==f&&e==g?null:a.createLinearGradient(d,e,f,g)}},a.Element.linearGradient.prototype=new a.Element.GradientBase,a.Element.radialGradient=function(b){this.base=a.Element.GradientBase,this.base(b),this.getGradient=function(a,b){var c=b.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var d="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),e="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),f=d,g=e;this.attribute("fx").hasValue()&&(f="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(g="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var h="objectBoundingBox"==this.gradientUnits?(c.width()+c.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return a.createRadialGradient(f,g,0,d,e,h)}},a.Element.radialGradient.prototype=new a.Element.GradientBase,a.Element.stop=function(b){this.base=a.Element.ElementBase,this.base(b),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var c=this.style("stop-color");this.style("stop-opacity").hasValue()&&(c=c.addOpacity(this.style("stop-opacity").value)),this.color=c.value},a.Element.stop.prototype=new a.Element.ElementBase,a.Element.AnimateBase=function(b){this.base=a.Element.ElementBase,this.base(b),a.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var a=this.attribute("attributeType").value,b=this.attribute("attributeName").value;return"CSS"==a?this.parent.style(b,!0):this.parent.attribute(b,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(a){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"!=this.attribute("fill").valueOrDefault("remove")||this.removed?!1:(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}this.duration=this.duration+a;var b=!1;if(this.begin<this.duration){var c=this.calcValue();if(this.attribute("type").hasValue()){var d=this.attribute("type").value;c=d+"("+c+")"}this.getProperty().value=c,b=!0}return b},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var b={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var c=b.progress*(this.values.value.length-1),d=Math.floor(c),e=Math.ceil(c);b.from=new a.Property("from",parseFloat(this.values.value[d])),b.to=new a.Property("to",parseFloat(this.values.value[e])),b.progress=(c-d)/(e-d)}else b.from=this.from,b.to=this.to;return b}},a.Element.AnimateBase.prototype=new a.Element.ElementBase,a.Element.animate=function(b){this.base=a.Element.AnimateBase,this.base(b),this.calcValue=function(){var a=this.progress(),b=a.from.numValue()+(a.to.numValue()-a.from.numValue())*a.progress;return b+this.initialUnits}},a.Element.animate.prototype=new a.Element.AnimateBase,a.Element.animateColor=function(c){this.base=a.Element.AnimateBase,this.base(c),this.calcValue=function(){var a=this.progress(),c=new b(a.from.value),d=new b(a.to.value);if(c.ok&&d.ok){var e=c.r+(d.r-c.r)*a.progress,f=c.g+(d.g-c.g)*a.progress,g=c.b+(d.b-c.b)*a.progress;return"rgb("+parseInt(e,10)+","+parseInt(f,10)+","+parseInt(g,10)+")"}return this.attribute("from").value}},a.Element.animateColor.prototype=new a.Element.AnimateBase,a.Element.animateTransform=function(b){this.base=a.Element.AnimateBase,this.base(b),this.calcValue=function(){for(var b=this.progress(),c=a.ToNumberArray(b.from.value),d=a.ToNumberArray(b.to.value),e="",f=0;f<c.length;f++)e+=c[f]+(d[f]-c[f])*b.progress+" ";return e}},a.Element.animateTransform.prototype=new a.Element.animate,a.Element.font=function(b){this.base=a.Element.ElementBase,this.base(b),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var c=0;c<this.children.length;c++){var d=this.children[c];"font-face"==d.type?(this.fontFace=d,d.style("font-family").hasValue()&&(a.Definitions[d.style("font-family").value]=this)):"missing-glyph"==d.type?this.missingGlyph=d:"glyph"==d.type&&(""!=d.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[d.unicode]&&(this.glyphs[d.unicode]=[]),this.glyphs[d.unicode][d.arabicForm]=d):this.glyphs[d.unicode]=d)}},a.Element.font.prototype=new a.Element.ElementBase,a.Element.fontface=function(b){this.base=a.Element.ElementBase,this.base(b),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},a.Element.fontface.prototype=new a.Element.ElementBase,a.Element.missingglyph=function(b){this.base=a.Element.path,this.base(b),this.horizAdvX=0},a.Element.missingglyph.prototype=new a.Element.path,a.Element.glyph=function(b){this.base=a.Element.path,this.base(b),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},a.Element.glyph.prototype=new a.Element.path,a.Element.text=function(b){this.captureTextNodes=!0,this.base=a.Element.RenderedElementBase,this.base(b),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.style("dominant-baseline").hasValue()&&(a.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(a.textBaseline=this.style("alignment-baseline").value)},this.getBoundingBox=function(){return new a.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)},this.renderChildren=function(a){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(a,this,0);for(var b=0;b<this.children.length;b++)this.renderChild(a,this,b)},this.getAnchorDelta=function(a,b,c){var d=this.style("text-anchor").valueOrDefault("start");if("start"!=d){for(var e=0,f=c;f<b.children.length;f++){var g=b.children[f];if(f>c&&g.attribute("x").hasValue())break;e+=g.measureTextRecursive(a)}return-1*("end"==d?e:e/2)}return 0},this.renderChild=function(a,b,c){var d=b.children[c];d.attribute("x").hasValue()?d.x=d.attribute("x").toPixels("x")+this.getAnchorDelta(a,b,c):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),d.attribute("dx").hasValue()&&(this.x+=d.attribute("dx").toPixels("x")),d.x=this.x),this.x=d.x+d.measureText(a),d.attribute("y").hasValue()?d.y=d.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),d.attribute("dy").hasValue()&&(this.y+=d.attribute("dy").toPixels("y")),d.y=this.y),this.y=d.y,d.render(a);for(var c=0;c<d.children.length;c++)this.renderChild(a,d,c)}},a.Element.text.prototype=new a.Element.RenderedElementBase,a.Element.TextElementBase=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.getGlyph=function(a,b,c){var d=b[c],e=null;if(a.isArabic){var f="isolated";(0==c||" "==b[c-1])&&c<b.length-2&&" "!=b[c+1]&&(f="terminal"),c>0&&" "!=b[c-1]&&c<b.length-2&&" "!=b[c+1]&&(f="medial"),c>0&&" "!=b[c-1]&&(c==b.length-1||" "==b[c+1])&&(f="initial"),"undefined"!=typeof a.glyphs[d]&&(e=a.glyphs[d][f],null==e&&"glyph"==a.glyphs[d].type&&(e=a.glyphs[d]))}else e=a.glyphs[d];return null==e&&(e=a.missingGlyph),e},this.renderChildren=function(b){var c=this.parent.style("font-family").getDefinition();if(null==c)""!=b.fillStyle&&b.fillText(a.compressSpaces(this.getText()),this.x,this.y),""!=b.strokeStyle&&b.strokeText(a.compressSpaces(this.getText()),this.x,this.y);else{var d=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),e=this.parent.style("font-style").valueOrDefault(a.Font.Parse(a.ctx.font).fontStyle),f=this.getText();c.isRTL&&(f=f.split("").reverse().join(""));for(var g=a.ToNumberArray(this.parent.attribute("dx").value),h=0;h<f.length;h++){var i=this.getGlyph(c,f,h),j=d/c.fontFace.unitsPerEm;b.translate(this.x,this.y),b.scale(j,-j);var k=b.lineWidth;b.lineWidth=b.lineWidth*c.fontFace.unitsPerEm/d,"italic"==e&&b.transform(1,0,.4,1,0,0),i.render(b),"italic"==e&&b.transform(1,0,-.4,1,0,0),b.lineWidth=k,b.scale(1/j,-1/j),b.translate(-this.x,-this.y),this.x+=d*(i.horizAdvX||c.horizAdvX)/c.fontFace.unitsPerEm,"undefined"==typeof g[h]||isNaN(g[h])||(this.x+=g[h])}}},this.getText=function(){},this.measureTextRecursive=function(a){for(var b=this.measureText(a),c=0;c<this.children.length;c++)b+=this.children[c].measureTextRecursive(a);return b},this.measureText=function(b){var c=this.parent.style("font-family").getDefinition();if(null!=c){var d=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),e=0,f=this.getText();c.isRTL&&(f=f.split("").reverse().join(""));for(var g=a.ToNumberArray(this.parent.attribute("dx").value),h=0;h<f.length;h++){var i=this.getGlyph(c,f,h);e+=(i.horizAdvX||c.horizAdvX)*d/c.fontFace.unitsPerEm,"undefined"==typeof g[h]||isNaN(g[h])||(e+=g[h])}return e}var j=a.compressSpaces(this.getText());if(!b.measureText)return 10*j.length;b.save(),this.setContext(b);var k=b.measureText(j).width;return b.restore(),k}},a.Element.TextElementBase.prototype=new a.Element.RenderedElementBase,a.Element.tspan=function(b){this.captureTextNodes=!0,this.base=a.Element.TextElementBase,this.base(b),this.text=b.nodeValue||b.text||"",this.getText=function(){return this.text}},a.Element.tspan.prototype=new a.Element.TextElementBase,a.Element.tref=function(b){this.base=a.Element.TextElementBase,this.base(b),this.getText=function(){var a=this.getHrefAttribute().getDefinition();return null!=a?a.children[0].getText():void 0}},a.Element.tref.prototype=new a.Element.TextElementBase,a.Element.a=function(b){this.base=a.Element.TextElementBase,this.base(b),this.hasText=!0;for(var c=0;c<b.childNodes.length;c++)3!=b.childNodes[c].nodeType&&(this.hasText=!1);this.text=this.hasText?b.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(b){if(this.hasText){this.baseRenderChildren(b);var c=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);a.Mouse.checkBoundingBox(this,new a.BoundingBox(this.x,this.y-c.toPixels("y"),this.x+this.measureText(b),this.y))}else{var d=new a.Element.g;d.children=this.children,d.parent=this,d.render(b)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){a.ctx.canvas.style.cursor="pointer"}},a.Element.a.prototype=new a.Element.TextElementBase,a.Element.image=function(b){this.base=a.Element.RenderedElementBase,this.base(b);
var c=this.getHrefAttribute().value,d=c.match(/\.svg$/);if(a.Images.push(this),this.loaded=!1,d)this.img=a.ajax(c),this.loaded=!0;else{this.img=document.createElement("img");var e=this;this.img.onload=function(){e.loaded=!0},this.img.onerror=function(){"undefined"!=typeof console&&(console.log('ERROR: image "'+c+'" not found'),e.loaded=!0)},this.img.src=c}this.renderChildren=function(b){var c=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");0!=f&&0!=g&&(b.save(),d?b.drawSvg(this.img,c,e,f,g):(b.translate(c,e),a.AspectRatio(b,this.attribute("preserveAspectRatio").value,f,this.img.width,g,this.img.height,0,0),b.drawImage(this.img,0,0)),b.restore())},this.getBoundingBox=function(){var b=this.attribute("x").toPixels("x"),c=this.attribute("y").toPixels("y"),d=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y");return new a.BoundingBox(b,c,b+d,c+e)}},a.Element.image.prototype=new a.Element.RenderedElementBase,a.Element.g=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.getBoundingBox=function(){for(var b=new a.BoundingBox,c=0;c<this.children.length;c++)b.addBoundingBox(this.children[c].getBoundingBox());return b}},a.Element.g.prototype=new a.Element.RenderedElementBase,a.Element.symbol=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.baseSetContext=this.setContext,this.setContext=function(b){if(this.baseSetContext(b),this.attribute("viewBox").hasValue()){var c=a.ToNumberArray(this.attribute("viewBox").value),d=c[0],e=c[1];width=c[2],height=c[3],a.AspectRatio(b,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,d,e),a.ViewPort.SetCurrent(c[2],c[3])}}},a.Element.symbol.prototype=new a.Element.RenderedElementBase,a.Element.style=function(b){this.base=a.Element.ElementBase,this.base(b);for(var c="",d=0;d<b.childNodes.length;d++)c+=b.childNodes[d].nodeValue;c=c.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),c=a.compressSpaces(c);for(var e=c.split("}"),d=0;d<e.length;d++)if(""!=a.trim(e[d]))for(var f=e[d].split("{"),g=f[0].split(","),h=f[1].split(";"),i=0;i<g.length;i++){var j=a.trim(g[i]);if(""!=j){for(var k={},l=0;l<h.length;l++){var m=h[l].indexOf(":"),n=h[l].substr(0,m),o=h[l].substr(m+1,h[l].length-m);null!=n&&null!=o&&(k[a.trim(n)]=new a.Property(a.trim(n),a.trim(o)))}if(a.Styles[j]=k,"@font-face"==j)for(var p=k["font-family"].value.replace(/"/g,""),q=k.src.value.split(","),r=0;r<q.length;r++)if(q[r].indexOf('format("svg")')>0)for(var s=q[r].indexOf("url"),t=q[r].indexOf(")",s),u=q[r].substr(s+5,t-s-6),v=a.parseXml(a.ajax(u)),w=v.getElementsByTagName("font"),x=0;x<w.length;x++){var y=a.CreateElement(w[x]);a.Definitions[p]=y}}}},a.Element.style.prototype=new a.Element.ElementBase,a.Element.use=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.attribute("x").hasValue()&&a.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&a.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var a=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(a.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(a.attribute("height",!0).value=this.attribute("height").value),a},this.path=function(a){var b=this.getDefinition();null!=b&&b.path(a)},this.getBoundingBox=function(){var a=this.getDefinition();return null!=a?a.getBoundingBox():void 0},this.renderChildren=function(a){var b=this.getDefinition();if(null!=b){var c=b.parent;b.parent=null,b.render(a),b.parent=c}}},a.Element.use.prototype=new a.Element.RenderedElementBase,a.Element.mask=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(b,c){var d=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");if(0==f&&0==g){for(var h=new a.BoundingBox,i=0;i<this.children.length;i++)h.addBoundingBox(this.children[i].getBoundingBox());var d=Math.floor(h.x1),e=Math.floor(h.y1),f=Math.floor(h.width()),g=Math.floor(h.height())}var j=c.attribute("mask").value;c.attribute("mask").value="";var k=document.createElement("canvas");k.width=d+f,k.height=e+g;var l=k.getContext("2d");this.renderChildren(l);var m=document.createElement("canvas");m.width=d+f,m.height=e+g;var n=m.getContext("2d");c.render(n),n.globalCompositeOperation="destination-in",n.fillStyle=l.createPattern(k,"no-repeat"),n.fillRect(0,0,d+f,e+g),b.fillStyle=n.createPattern(m,"no-repeat"),b.fillRect(0,0,d+f,e+g),c.attribute("mask").value=j},this.render=function(){}},a.Element.mask.prototype=new a.Element.ElementBase,a.Element.clipPath=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(b){for(var c=0;c<this.children.length;c++){var d=this.children[c];if("undefined"!=typeof d.path){var e=null;d.attribute("transform").hasValue()&&(e=new a.Transform(d.attribute("transform").value),e.apply(b)),d.path(b),b.clip(),e&&e.unapply(b)}}},this.render=function(){}},a.Element.clipPath.prototype=new a.Element.ElementBase,a.Element.filter=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(a,b){var c=b.getBoundingBox(),d=Math.floor(c.x1),e=Math.floor(c.y1),f=Math.floor(c.width()),g=Math.floor(c.height()),h=b.style("filter").value;b.style("filter").value="";for(var i=0,j=0,k=0;k<this.children.length;k++){var l=this.children[k].extraFilterDistance||0;i=Math.max(i,l),j=Math.max(j,l)}var m=document.createElement("canvas");m.width=f+2*i,m.height=g+2*j;var n=m.getContext("2d");n.translate(-d+i,-e+j),b.render(n);for(var k=0;k<this.children.length;k++)this.children[k].apply(n,0,0,f+2*i,g+2*j);a.drawImage(m,0,0,f+2*i,g+2*j,d-i,e-j,f+2*i,g+2*j),b.style("filter",!0).value=h},this.render=function(){}},a.Element.filter.prototype=new a.Element.ElementBase,a.Element.feMorphology=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(){}},a.Element.feMorphology.prototype=new a.Element.ElementBase,a.Element.feColorMatrix=function(b){function c(a,b,c,d,e,f){return a[c*d*4+4*b+f]}function d(a,b,c,d,e,f,g){a[c*d*4+4*b+f]=g}this.base=a.Element.ElementBase,this.base(b),this.apply=function(a,b,e,f,g){for(var h=a.getImageData(0,0,f,g),e=0;g>e;e++)for(var b=0;f>b;b++){var i=c(h.data,b,e,f,g,0),j=c(h.data,b,e,f,g,1),k=c(h.data,b,e,f,g,2),l=(i+j+k)/3;d(h.data,b,e,f,g,0,l),d(h.data,b,e,f,g,1,l),d(h.data,b,e,f,g,2,l)}a.clearRect(0,0,f,g),a.putImageData(h,0,0)}},a.Element.feColorMatrix.prototype=new a.Element.ElementBase,a.Element.feGaussianBlur=function(b){this.base=a.Element.ElementBase,this.base(b),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(b,c,d,e,f){return"undefined"==typeof stackBlurCanvasRGBA?void("undefined"!=typeof console&&console.log("ERROR: StackBlur.js must be included for blur to work")):(b.canvas.id=a.UniqueId(),b.canvas.style.display="none",document.body.appendChild(b.canvas),stackBlurCanvasRGBA(b.canvas.id,c,d,e,f,this.blurRadius),void document.body.removeChild(b.canvas))}},a.Element.feGaussianBlur.prototype=new a.Element.ElementBase,a.Element.title=function(){},a.Element.title.prototype=new a.Element.ElementBase,a.Element.desc=function(){},a.Element.desc.prototype=new a.Element.ElementBase,a.Element.MISSING=function(a){"undefined"!=typeof console&&console.log("ERROR: Element '"+a.nodeName+"' not yet implemented.")},a.Element.MISSING.prototype=new a.Element.ElementBase,a.CreateElement=function(b){var c=b.nodeName.replace(/^[^:]+:/,"");c=c.replace(/\-/g,"");var d=null;return d="undefined"!=typeof a.Element[c]?new a.Element[c](b):new a.Element.MISSING(b),d.type=b.nodeName,d},a.load=function(b,c){a.loadXml(b,a.ajax(c))},a.loadXml=function(b,c){a.loadXmlDoc(b,a.parseXml(c))},a.loadXmlDoc=function(b,c){a.init(b);var d=function(a){for(var c=b.canvas;c;)a.x-=c.offsetLeft,a.y-=c.offsetTop,c=c.offsetParent;return window.scrollX&&(a.x+=window.scrollX),window.scrollY&&(a.y+=window.scrollY),a};1!=a.opts.ignoreMouse&&(b.canvas.onclick=function(b){var c=d(new a.Point(null!=b?b.clientX:event.clientX,null!=b?b.clientY:event.clientY));a.Mouse.onclick(c.x,c.y)},b.canvas.onmousemove=function(b){var c=d(new a.Point(null!=b?b.clientX:event.clientX,null!=b?b.clientY:event.clientY));a.Mouse.onmousemove(c.x,c.y)});var e=a.CreateElement(c.documentElement);e.root=!0;var f=!0,g=function(){a.ViewPort.Clear(),b.canvas.parentNode&&a.ViewPort.SetCurrent(b.canvas.parentNode.clientWidth,b.canvas.parentNode.clientHeight),1!=a.opts.ignoreDimensions&&(e.style("width").hasValue()&&(b.canvas.width=e.style("width").toPixels("x"),b.canvas.style.width=b.canvas.width+"px"),e.style("height").hasValue()&&(b.canvas.height=e.style("height").toPixels("y"),b.canvas.style.height=b.canvas.height+"px"));var d=b.canvas.clientWidth||b.canvas.width,g=b.canvas.clientHeight||b.canvas.height;if(1==a.opts.ignoreDimensions&&e.style("width").hasValue()&&e.style("height").hasValue()&&(d=e.style("width").toPixels("x"),g=e.style("height").toPixels("y")),a.ViewPort.SetCurrent(d,g),null!=a.opts.offsetX&&(e.attribute("x",!0).value=a.opts.offsetX),null!=a.opts.offsetY&&(e.attribute("y",!0).value=a.opts.offsetY),null!=a.opts.scaleWidth&&null!=a.opts.scaleHeight){var h=1,i=1,j=a.ToNumberArray(e.attribute("viewBox").value);e.attribute("width").hasValue()?h=e.attribute("width").toPixels("x")/a.opts.scaleWidth:isNaN(j[2])||(h=j[2]/a.opts.scaleWidth),e.attribute("height").hasValue()?i=e.attribute("height").toPixels("y")/a.opts.scaleHeight:isNaN(j[3])||(i=j[3]/a.opts.scaleHeight),e.attribute("width",!0).value=a.opts.scaleWidth,e.attribute("height",!0).value=a.opts.scaleHeight,e.attribute("viewBox",!0).value="0 0 "+d*h+" "+g*i,e.attribute("preserveAspectRatio",!0).value="none"}1!=a.opts.ignoreClear&&b.clearRect(0,0,d,g),e.render(b),f&&(f=!1,"function"==typeof a.opts.renderCallback&&a.opts.renderCallback(c))},h=!0;a.ImagesLoaded()&&(h=!1,g()),a.intervalID=setInterval(function(){var b=!1;if(h&&a.ImagesLoaded()&&(h=!1,b=!0),1!=a.opts.ignoreMouse&&(b|=a.Mouse.hasEvents()),1!=a.opts.ignoreAnimation)for(var c=0;c<a.Animations.length;c++)b|=a.Animations[c].update(1e3/a.FRAMERATE);"function"==typeof a.opts.forceRedraw&&1==a.opts.forceRedraw()&&(b=!0),b&&(g(),a.Mouse.runEvents())},1e3/a.FRAMERATE)},a.stop=function(){a.intervalID&&clearInterval(a.intervalID)},a.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(a,b){this.events.push({type:"onclick",x:a,y:b,run:function(a){a.onclick&&a.onclick()}})},this.onmousemove=function(a,b){this.events.push({type:"onmousemove",x:a,y:b,run:function(a){a.onmousemove&&a.onmousemove()}})},this.eventElements=[],this.checkPath=function(a,b){for(var c=0;c<this.events.length;c++){var d=this.events[c];b.isPointInPath&&b.isPointInPath(d.x,d.y)&&(this.eventElements[c]=a)}},this.checkBoundingBox=function(a,b){for(var c=0;c<this.events.length;c++){var d=this.events[c];b.isPointInBox(d.x,d.y)&&(this.eventElements[c]=a)}},this.runEvents=function(){a.ctx.canvas.style.cursor="";for(var b=0;b<this.events.length;b++)for(var c=this.events[b],d=this.eventElements[b];d;)c.run(d),d=d.parent;this.events=[],this.eventElements=[]}},a}function b(a){this.ok=!1,"#"==a.charAt(0)&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var d in c)a==d&&(a=c[d]);for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],f=0;f<e.length;f++){var g=e[f].re,h=e[f].process,i=g.exec(a);i&&(channels=h(i),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);return 1==a.length&&(a="0"+a),1==b.length&&(b="0"+b),1==c.length&&(c="0"+c),"#"+a+b+c},this.getHelpXML=function(){for(var a=new Array,d=0;d<e.length;d++)for(var f=e[d].example,g=0;g<f.length;g++)a[a.length]=f[g];for(var h in c)a[a.length]=h;var i=document.createElement("ul");i.setAttribute("id","rgbcolor-examples");for(var d=0;d<a.length;d++)try{var j=document.createElement("li"),k=new b(a[d]),l=document.createElement("div");l.style.cssText="margin: 3px; border: 1px solid black; background:"+k.toHex()+"; color:"+k.toHex(),l.appendChild(document.createTextNode("test"));var m=document.createTextNode(" "+a[d]+" -> "+k.toRGB()+" -> "+k.toHex());j.appendChild(l),j.appendChild(m),i.appendChild(j)}catch(n){}return i}}this.canvg=function(b,c,d){if(null!=b||null!=c||null!=d){d=d||{},"string"==typeof b&&(b=document.getElementById(b)),null!=b.svg&&b.svg.stop();var e=a();(1!=b.childNodes.length||"OBJECT"!=b.childNodes[0].nodeName)&&(b.svg=e),e.opts=d;var f=b.getContext("2d");"undefined"!=typeof c.documentElement?e.loadXmlDoc(f,c):"<"==c.substr(0,1)?e.loadXml(f,c):e.load(f,c)}else for(var g=document.getElementsByTagName("svg"),h=0;h<g.length;h++){var i=g[h],j=document.createElement("canvas");j.width=i.clientWidth,j.height=i.clientHeight,i.parentNode.insertBefore(j,i),i.parentNode.removeChild(i);var k=document.createElement("div");k.appendChild(i),canvg(j,k.innerHTML)}}}(),e("undefined"!=typeof canvg?canvg:window.canvg)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],89:[function(a,b){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){var f={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}};
e("undefined"!=typeof f?f:window.colorbrewer)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],90:[function(a,b){!function(){function a(a,b){return b>a?-1:a>b?1:a>=b?0:0/0}function c(a){return null===a?0/0:+a}function d(a){return!isNaN(a)}function e(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function f(a){return a.length}function g(a){for(var b=1;a*b%1;)b*=10;return b}function h(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function i(){this._=Object.create(null)}function j(a){return(a+="")===kh||a[0]===lh?lh+a:a}function k(a){return(a+="")[0]===lh?a.slice(1):a}function l(a){return j(a)in this._}function m(a){return(a=j(a))in this._&&delete this._[a]}function n(){var a=[];for(var b in this._)a.push(k(b));return a}function o(){var a=0;for(var b in this._)++a;return a}function p(){for(var a in this._)return!1;return!0}function q(){this._=Object.create(null)}function r(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function s(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=mh.length;d>c;++c){var e=mh[c]+b;if(e in a)return e}}function t(){}function u(){}function v(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new i;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function w(){Xg.event.preventDefault()}function x(){for(var a,b=Xg.event;a=b.sourceEvent;)b=a;return b}function y(a){for(var b=new u,c=0,d=arguments.length;++c<d;)b[arguments[c]]=v(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=Xg.event;e.target=a,Xg.event=e,b[e.type].apply(c,d)}finally{Xg.event=f}}},b}function z(a){return oh(a,th),a}function A(a){return"function"==typeof a?a:function(){return ph(a,this)}}function B(a){return"function"==typeof a?a:function(){return qh(a,this)}}function C(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=Xg.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function D(a){return a.trim().replace(/\s+/g," ")}function E(a){return new RegExp("(?:^|\\s+)"+Xg.requote(a)+"(?:\\s+|$)","g")}function F(a){return(a+"").trim().split(/^|\s+/)}function G(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=F(a).map(H);var e=a.length;return"function"==typeof b?d:c}function H(a){var b=E(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",D(e+" "+a))):c.setAttribute("class",D(e.replace(b," ")))}}function I(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function J(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function K(a){return"function"==typeof a?a:(a=Xg.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function L(a){return{__data__:a}}function M(a){return function(){return sh(this,a)}}function N(b){return arguments.length||(b=a),function(a,c){return a&&c?b(a.__data__,c.__data__):!a-!c}}function O(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function P(a){return oh(a,vh),a}function Q(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function R(){var a=this.__transition__;a&&++a.active}function S(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,Zg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+Xg.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=T;h>0&&(a=a.slice(0,h));var j=xh.get(a);return j&&(a=j,i=U),h?b?e:d:b?t:f}function T(a,b){return function(c){var d=Xg.event;Xg.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{Xg.event=d}}}function U(a,b){var c=T(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function V(){var a=".dragsuppress-"+ ++zh,b="click"+a,c=Xg.select(ah).on("touchmove"+a,w).on("dragstart"+a,w).on("selectstart"+a,w);if(yh){var d=_g.style,e=d[yh];d[yh]="none"}return function(f){function g(){c.on(b,null)}c.on(a,null),yh&&(d[yh]=e),f&&(c.on(b,function(){w(),g()},!0),setTimeout(g,0))}}function W(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>Ah&&(ah.scrollX||ah.scrollY)){c=Xg.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var e=c[0][0].getScreenCTM();Ah=!(e.f||e.e),c.remove()}return Ah?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var f=a.getBoundingClientRect();return[b.clientX-f.left-a.clientLeft,b.clientY-f.top-a.clientTop]}function X(){return Xg.event.changedTouches[0].identifier}function Y(){return Xg.event.target}function Z(){return ah}function $(a){return a>0?1:0>a?-1:0}function _(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ab(a){return a>1?0:-1>a?Bh:Math.acos(a)}function bb(a){return a>1?Dh:-1>a?-Dh:Math.asin(a)}function cb(a){return((a=Math.exp(a))-1/a)/2}function db(a){return((a=Math.exp(a))+1/a)/2}function eb(a){return((a=Math.exp(2*a))-1)/(a+1)}function fb(a){return(a=Math.sin(a/2))*a}function gb(){}function hb(a,b,c){return this instanceof hb?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof hb?new hb(a.h,a.s,a.l):vb(""+a,wb,hb):new hb(a,b,c)}function ib(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,new rb(e(a+120),e(a),e(a-120))}function jb(a,b,c){return this instanceof jb?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof jb?new jb(a.h,a.c,a.l):a instanceof lb?nb(a.l,a.a,a.b):nb((a=xb((a=Xg.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new jb(a,b,c)}function kb(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new lb(c,Math.cos(a*=Gh)*b,Math.sin(a)*b)}function lb(a,b,c){return this instanceof lb?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof lb?new lb(a.l,a.a,a.b):a instanceof jb?kb(a.h,a.c,a.l):xb((a=rb(a)).r,a.g,a.b):new lb(a,b,c)}function mb(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=ob(e)*Rh,d=ob(d)*Sh,f=ob(f)*Th,new rb(qb(3.2404542*e-1.5371385*d-.4985314*f),qb(-.969266*e+1.8760108*d+.041556*f),qb(.0556434*e-.2040259*d+1.0572252*f))}function nb(a,b,c){return a>0?new jb(Math.atan2(c,b)*Hh,Math.sqrt(b*b+c*c),a):new jb(0/0,0/0,a)}function ob(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function pb(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function qb(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function rb(a,b,c){return this instanceof rb?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof rb?new rb(a.r,a.g,a.b):vb(""+a,rb,ib):new rb(a,b,c)}function sb(a){return new rb(a>>16,255&a>>8,255&a)}function tb(a){return sb(a)+""}function ub(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function vb(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(zb(e[0]),zb(e[1]),zb(e[2]))}return(f=Wh.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function wb(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=0/0,e=i>0&&1>i?0:d),new hb(d,e,i)}function xb(a,b,c){a=yb(a),b=yb(b),c=yb(c);var d=pb((.4124564*a+.3575761*b+.1804375*c)/Rh),e=pb((.2126729*a+.7151522*b+.072175*c)/Sh),f=pb((.0193339*a+.119192*b+.9503041*c)/Th);return lb(116*e-16,500*(d-e),200*(e-f))}function yb(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function zb(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Ab(a){return"function"==typeof a?a:function(){return a}}function Bb(a){return a}function Cb(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Db(b,c,a,d)}}function Db(a,b,c,d){function e(){var a,b=i.status;if(!b&&Fb(i)||b>=200&&300>b||304===b){try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=Xg.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!ah.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=Xg.event;Xg.event=a;try{g.progress.call(f,i)}finally{Xg.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(Zg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},Xg.rebind(f,g,"on"),null==d?f:f.get(Eb(d))}function Eb(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Fb(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Gb(){var a=Hb(),b=Ib()-a;b>24?(isFinite(b)&&(clearTimeout($h),$h=setTimeout(Gb,b)),Zh=0):(Zh=1,ai(Gb))}function Hb(){var a=Date.now();for(_h=Xh;_h;)a>=_h.t&&(_h.f=_h.c(a-_h.t)),_h=_h.n;return a}function Ib(){for(var a,b=Xh,c=1/0;b;)b.f?b=a?a.n=b.n:Xh=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return Yh=a,c}function Jb(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Kb(a,b){var c=Math.pow(10,3*jh(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Lb(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:Bb;return function(a){var c=ci.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):("e"==n||"f"==n)&&(m=Math.max(0,Math.min(20,m)))),n=di.get(n)||Mb;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===h?"":h;if(0>o){var i=Xg.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(0>w){var x=s?a.lastIndexOf("e"):-1;0>x?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=k>y?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Mb(a){return a+""}function Nb(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ob(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new fi(c-1)),1),c}function f(a,c){return b(a=new fi(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{fi=Nb;var d=new Nb;return d._=a,g(d,b,c)}finally{fi=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Pb(a);return i.floor=i,i.round=Pb(d),i.ceil=Pb(e),i.offset=Pb(f),i.range=h,a}function Pb(a){return function(b,c){try{fi=Nb;var d=new Nb;return d._=b,a(d,c)._}finally{fi=Date}}}function Qb(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=hi[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&fi!==Nb,g=new(f?Nb:fi);return"j"in d?g.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(0|d.Z/100),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;i>h;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in hi?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{fi=Nb;var b=new fi;return b._=a,d(b)}finally{fi=Date}}var d=b(a);return c.parse=function(a){try{fi=Nb;var b=d.parse(a);return b&&b._}finally{fi=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=ic;var t=Xg.map(),u=Sb(p),v=Tb(p),w=Sb(q),x=Tb(q),y=Sb(r),z=Tb(r),A=Sb(s),B=Tb(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Rb(a.getDate(),b,2)},e:function(a,b){return Rb(a.getDate(),b,2)},H:function(a,b){return Rb(a.getHours(),b,2)},I:function(a,b){return Rb(a.getHours()%12||12,b,2)},j:function(a,b){return Rb(1+ei.dayOfYear(a),b,3)},L:function(a,b){return Rb(a.getMilliseconds(),b,3)},m:function(a,b){return Rb(a.getMonth()+1,b,2)},M:function(a,b){return Rb(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Rb(a.getSeconds(),b,2)},U:function(a,b){return Rb(ei.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Rb(ei.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Rb(a.getFullYear()%100,b,2)},Y:function(a,b){return Rb(a.getFullYear()%1e4,b,4)},Z:gc,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:ac,e:ac,H:cc,I:cc,j:bc,L:fc,m:_b,M:dc,p:k,S:ec,U:Vb,w:Ub,W:Wb,x:i,X:j,y:Yb,Y:Xb,Z:Zb,"%":hc};return b}function Rb(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function Sb(a){return new RegExp("^(?:"+a.map(Xg.requote).join("|")+")","i")}function Tb(a){for(var b=new i,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Ub(a,b,c){ii.lastIndex=0;var d=ii.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Vb(a,b,c){ii.lastIndex=0;var d=ii.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Wb(a,b,c){ii.lastIndex=0;var d=ii.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Xb(a,b,c){ii.lastIndex=0;var d=ii.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Yb(a,b,c){ii.lastIndex=0;var d=ii.exec(b.slice(c,c+2));return d?(a.y=$b(+d[0]),c+d[0].length):-1}function Zb(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function $b(a){return a+(a>68?1900:2e3)}function _b(a,b,c){ii.lastIndex=0;var d=ii.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function ac(a,b,c){ii.lastIndex=0;var d=ii.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function bc(a,b,c){ii.lastIndex=0;var d=ii.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function cc(a,b,c){ii.lastIndex=0;var d=ii.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function dc(a,b,c){ii.lastIndex=0;var d=ii.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function ec(a,b,c){ii.lastIndex=0;var d=ii.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function fc(a,b,c){ii.lastIndex=0;var d=ii.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function gc(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=0|jh(b)/60,e=jh(b)%60;return c+Rb(d,"0",2)+Rb(e,"0",2)}function hc(a,b,c){ji.lastIndex=0;var d=ji.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function ic(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function jc(){}function kc(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function lc(a,b){a&&ni.hasOwnProperty(a.type)&&ni[a.type](a,b)}function mc(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function nc(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)mc(a[c],b,1);b.polygonEnd()}function oc(){function a(a,b){a*=Gh,b=b*Gh/2+Bh/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);pi.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;qi.point=function(g,h){qi.point=a,d=(b=g)*Gh,e=Math.cos(h=(c=h)*Gh/2+Bh/4),f=Math.sin(h)},qi.lineEnd=function(){a(b,c)}}function pc(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function qc(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function rc(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function sc(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function tc(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function uc(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function vc(a){return[Math.atan2(a[1],a[0]),bb(a[2])]}function wc(a,b){return jh(a[0]-b[0])<Eh&&jh(a[1]-b[1])<Eh}function xc(a,b){a*=Gh;var c=Math.cos(b*=Gh);yc(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function yc(a,b,c){++ri,ti+=(a-ti)/ri,ui+=(b-ui)/ri,vi+=(c-vi)/ri}function zc(){function a(a,e){a*=Gh;var f=Math.cos(e*=Gh),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);si+=j,wi+=j*(b+(b=g)),xi+=j*(c+(c=h)),yi+=j*(d+(d=i)),yc(b,c,d)}var b,c,d;Ci.point=function(e,f){e*=Gh;var g=Math.cos(f*=Gh);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Ci.point=a,yc(b,c,d)}}function Ac(){Ci.point=xc}function Bc(){function a(a,b){a*=Gh;var c=Math.cos(b*=Gh),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-ab(n)/m,p=Math.atan2(m,n);zi+=o*j,Ai+=o*k,Bi+=o*l,si+=p,wi+=p*(d+(d=g)),xi+=p*(e+(e=h)),yi+=p*(f+(f=i)),yc(d,e,f)}var b,c,d,e,f;Ci.point=function(g,h){b=g,c=h,Ci.point=a,g*=Gh;var i=Math.cos(h*=Gh);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),yc(d,e,f)},Ci.lineEnd=function(){a(b,c),Ci.lineEnd=Ac,Ci.point=xc}}function Cc(){return!0}function Dc(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(wc(c,d)){e.lineStart();for(var h=0;b>h;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Fc(c,a,null,!0),j=new Fc(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Fc(d,a,null,!1),j=new Fc(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Ec(f),Ec(g),f.length){for(var h=0,i=c,j=g.length;j>h;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;j>h;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Ec(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Fc(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Gc(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Hc))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=Xg.merge(n);var a=Nc(r,o);n.length?(v||(f.polygonStart(),v=!0),Dc(n,Jc,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Ic(),u=b(t),v=!1;return s}}function Hc(a){return a.length>1}function Ic(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:t,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Jc(a,b){return((a=a.x)[0]<0?a[1]-Dh-Eh:Dh-a[1])-((b=b.x)[0]<0?b[1]-Dh-Eh:Dh-b[1])}function Kc(a){var b,c=0/0,d=0/0,e=0/0;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Bh:-Bh,i=jh(f-c);jh(i-Bh)<Eh?(a.point(c,d=(d+g)/2>0?Dh:-Dh),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Bh&&(jh(c-e)<Eh&&(c-=e*Eh),jh(f-h)<Eh&&(f-=h*Eh),d=Lc(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=0/0},clean:function(){return 2-b}}}function Lc(a,b,c,d){var e,f,g=Math.sin(a-c);return jh(g)>Eh?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Mc(a,b,c,d){var e;if(null==a)e=c*Dh,d.point(-Bh,e),d.point(0,e),d.point(Bh,e),d.point(Bh,0),d.point(Bh,-e),d.point(0,-e),d.point(-Bh,-e),d.point(-Bh,0),d.point(-Bh,e);else if(jh(a[0]-b[0])>Eh){var f=a[0]<b[0]?Bh:-Bh;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Nc(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;pi.reset();for(var h=0,i=b.length;i>h;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Bh/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Bh/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Bh,z=o*t;if(pi.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Ch:v,y^m>=c^r>=c){var A=rc(pc(l),pc(a));uc(A);var B=rc(e,A);uc(B);var C=(y^v>=0?-1:1)*bb(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(-Eh>f||Eh>f&&0>pi)^1&g}function Oc(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(0>l?Bh:-Bh),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(wc(c,n)||wc(o,n))&&(o[0]+=Eh,o[1]+=Eh,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&wc(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=pc(a),e=pc(b),g=[1,0,0],h=rc(d,e),i=qc(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=rc(g,h),o=tc(g,l),p=tc(h,m);sc(o,p);var q=n,r=qc(o,q),s=qc(q,q),t=r*r-s*(qc(o,o)-1);if(!(0>t)){var u=Math.sqrt(t),v=tc(q,(-r-u)/s);if(sc(v,o),v=vc(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];x>y&&(w=x,x=y,y=w);var B=y-x,C=jh(B-Bh)<Eh,D=C||Eh>B;if(!C&&z>A&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(jh(v[0]-x)<Eh?z:A):z<=v[1]&&v[1]<=A:B>Bh^(x<=v[0]&&v[0]<=y)){var E=tc(q,(-r+u)/s);return sc(E,o),[v,vc(E)]}}}function e(b,c){var d=g?a:Bh-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=jh(f)>Eh,i=od(a,6*Gh);return Gc(b,c,i,g?[0,-a]:[-Bh,a-Bh])}function Pc(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,0>o){if(m>f)return;n>f&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(0>f)){if(f/=o,0>o){if(f>n)return;f>m&&(m=f)}else if(o>0){if(m>f)return;n>f&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,0>p){if(m>f)return;n>f&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(0>f)){if(f/=p,0>p){if(f>n)return;f>m&&(m=f)}else if(p>0){if(m>f)return;n>f&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),1>n&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Qc(a,b,c,d){function e(d,e){return jh(d[0]-a)<Eh?e>0?0:3:jh(d[0]-c)<Eh?e>0?2:1:jh(d[1]-b)<Eh?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;c>e;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];i>g;++g)f=h[g],j[1]<=d?f[1]>d&&_(j,f,a)>0&&++b:f[1]<=d&&_(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return e>=a&&c>=e&&f>=b&&d>=f}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=0/0}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Ei,Math.min(Ei,a)),b=Math.max(-Ei,Math.min(Ei,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Ic(),C=Pc(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=Xg.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Dc(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Rc(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Sc(a){var b=0,c=Bh/3,d=gd(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Bh/180,c=a[1]*Bh/180):[180*(b/Bh),180*(c/Bh)]},e}function Tc(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,bb((f-(a*a+c*c)*e*e)/(2*e))]},c}function Uc(){function a(a,b){Gi+=e*a-d*b,d=a,e=b}var b,c,d,e;Li.point=function(f,g){Li.point=a,b=d=f,c=e=g},Li.lineEnd=function(){a(b,c)}}function Vc(a,b){Hi>a&&(Hi=a),a>Ji&&(Ji=a),Ii>b&&(Ii=b),b>Ki&&(Ki=b)}function Wc(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Xc(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Xc(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Xc(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Yc(a,b){ti+=a,ui+=b,++vi}function Zc(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);wi+=g*(b+a)/2,xi+=g*(c+d)/2,yi+=g,Yc(b=a,c=d)}var b,c;Ni.point=function(d,e){Ni.point=a,Yc(b=d,c=e)}}function $c(){Ni.point=Yc}function _c(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);wi+=g*(d+a)/2,xi+=g*(e+b)/2,yi+=g,g=e*a-d*b,zi+=g*(d+a),Ai+=g*(e+b),Bi+=3*g,Yc(d=a,e=b)}var b,c,d,e;Ni.point=function(f,g){Ni.point=a,Yc(b=d=f,c=e=g)},Ni.lineEnd=function(){a(b,c)}}function ad(a){function b(b,c){a.moveTo(b,c),a.arc(b,c,g,0,Ch)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:t};return h}function bd(a){function b(a){return(h?d:c)(a)}function c(b){return ed(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=0/0,y.point=f,b.lineStart()}function f(c,d){var f=pc([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i
},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=jh(jh(x)-1)<Eh||jh(d-m)<Eh?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||jh((s*E+t*F)/u-.5)>.3||g>h*n+i*o+j*p)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Gh),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function cd(a){var b=bd(function(b,c){return a([b*Hh,c*Hh])});return function(a){return hd(b(a))}}function dd(a){this.stream=a}function ed(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function fd(a){return gd(function(){return a})()}function gd(a){function b(a){return a=h(a[0]*Gh,a[1]*Gh),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Hh,a[1]*Hh]}function d(){h=Rc(g=kd(r,s,t),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=bd(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,t=0,u=Di,v=Bb,w=null,x=null;return b.stream=function(a){return k&&(k.valid=!1),k=hd(u(g,l(v(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(u=null==a?(w=a,Di):Oc((w=+a)*Gh),e()):w},b.clipExtent=function(a){return arguments.length?(x=a,v=a?Qc(a[0][0],a[0][1],a[1][0],a[1][1]):Bb,e()):x},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Gh,q=a[1]%360*Gh,d()):[p*Hh,q*Hh]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Gh,s=a[1]%360*Gh,t=a.length>2?a[2]%360*Gh:0,d()):[r*Hh,s*Hh,t*Hh]},Xg.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function hd(a){return ed(a,function(b,c){a.point(b*Gh,c*Gh)})}function id(a,b){return[a,b]}function jd(a,b){return[a>Bh?a-Ch:-Bh>a?a+Ch:a,b]}function kd(a,b,c){return a?b||c?Rc(md(a),nd(b,c)):md(a):b||c?nd(b,c):jd}function ld(a){return function(b,c){return b+=a,[b>Bh?b-Ch:-Bh>b?b+Ch:b,c]}}function md(a){var b=ld(a);return b.invert=ld(-a),b}function nd(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),bb(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),bb(k*d-h*e)]},c}function od(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=pd(c,e),f=pd(c,f),(g>0?f>e:e>f)&&(e+=g*Ch)):(e=a+g*Ch,f=a-.5*i);for(var j,k=e;g>0?k>f:f>k;k-=i)h.point((j=vc([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function pd(a,b){var c=pc(b);c[0]-=a,uc(c);var d=ab(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Eh)%(2*Math.PI)}function qd(a,b,c){var d=Xg.range(a,b-Eh,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function rd(a,b,c){var d=Xg.range(a,b-Eh,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function sd(a){return a.source}function td(a){return a.target}function ud(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(fb(d-b)+e*g*fb(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Hh,Math.atan2(g,Math.sqrt(d*d+e*e))*Hh]}:function(){return[a*Hh,b*Hh]};return o.distance=m,o}function vd(){function a(a,e){var f=Math.sin(e*=Gh),g=Math.cos(e),h=jh((a*=Gh)-b),i=Math.cos(h);Oi+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Pi.point=function(e,f){b=e*Gh,c=Math.sin(f*=Gh),d=Math.cos(f),Pi.point=a},Pi.lineEnd=function(){Pi.point=Pi.lineEnd=t}}function wd(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function xd(a,b){function c(a,b){g>0?-Dh+Eh>b&&(b=-Dh+Eh):b>Dh-Eh&&(b=Dh-Eh);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Bh/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=$(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Dh]},c):zd}function yd(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return jh(e)<Eh?id:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-$(e)*Math.sqrt(a*a+c*c)]},c)}function zd(a,b){return[a,Math.log(Math.tan(Bh/4+b/2))]}function Ad(a){var b,c=fd(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Bh*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Bd(a,b){return[Math.log(Math.tan(Bh/4+b/2)),-a]}function Cd(a){return a[0]}function Dd(a){return a[1]}function Ed(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;e++){for(;d>1&&_(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Fd(a,b){return a[0]-b[0]||a[1]-b[1]}function Gd(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Hd(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Id(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Jd(){ce(this),this.edge=this.site=this.circle=null}function Kd(a){var b=_i.pop()||new Jd;return b.site=a,b}function Ld(a){Vd(a),Yi.remove(a),_i.push(a),ce(a)}function Md(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Ld(a);for(var i=f;i.circle&&jh(c-i.circle.x)<Eh&&jh(d-i.circle.cy)<Eh;)f=i.P,h.unshift(i),Ld(i),i=f;h.unshift(i),Vd(i);for(var j=g;j.circle&&jh(c-j.circle.x)<Eh&&jh(d-j.circle.cy)<Eh;)g=j.N,h.push(j),Ld(j),j=g;h.push(j),Vd(j);var k,l=h.length;for(k=1;l>k;++k)j=h[k],i=h[k-1],_d(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=Zd(i.site,j.site,null,e),Ud(i),Ud(j)}function Nd(a){for(var b,c,d,e,f=a.x,g=a.y,h=Yi._;h;)if(d=Od(h,g)-f,d>Eh)h=h.L;else{if(e=f-Pd(h,g),!(e>Eh)){d>-Eh?(b=h.P,c=h):e>-Eh?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Kd(a);if(Yi.insert(b,i),b||c){if(b===c)return Vd(b),c=Kd(b.site),Yi.insert(i,c),i.edge=c.edge=Zd(b.site,i.site),Ud(b),void Ud(c);if(!c)return void(i.edge=Zd(b.site,i.site));Vd(b),Vd(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};_d(c.edge,j,o,u),i.edge=Zd(j,a,null,u),c.edge=Zd(a,o,null,u),Ud(b),Ud(c)}}function Od(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-1/0;c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Pd(a,b){var c=a.N;if(c)return Od(c,b);var d=a.site;return d.y===b?d.x:1/0}function Qd(a){this.site=a,this.edges=[]}function Rd(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=Xi,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;i>g;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(jh(d-b)>Eh||jh(e-c)>Eh)&&(h.splice(g,0,new ae($d(f.site,k,jh(d-l)<Eh&&o-e>Eh?{x:l,y:jh(b-l)<Eh?c:o}:jh(e-o)<Eh&&m-d>Eh?{x:jh(c-o)<Eh?b:m,y:o}:jh(d-m)<Eh&&e-n>Eh?{x:m,y:jh(b-m)<Eh?c:n}:jh(e-n)<Eh&&d-l>Eh?{x:jh(c-n)<Eh?b:l,y:n}:null),f.site,null)),++i)}function Sd(a,b){return b.angle-a.angle}function Td(){ce(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ud(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Fh)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=aj.pop()||new Td;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=$i._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}$i.insert(s,r),s||(Zi=r)}}}}function Vd(a){var b=a.circle;b&&(b.P||(Zi=b.N),$i.remove(b),aj.push(b),ce(b),a.circle=null)}function Wd(a){for(var b,c=Wi,d=Pc(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Xd(b,a)||!d(b)||jh(b.a.x-b.b.x)<Eh&&jh(b.a.y-b.b.y)<Eh)&&(b.a=b.b=null,c.splice(e,1))}function Xd(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(g>q||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,-1>d||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(p>n){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Yd(a,b){this.l=a,this.r=b,this.a=this.b=null}function Zd(a,b,c,d){var e=new Yd(a,b);return Wi.push(e),c&&_d(e,a,b,c),d&&_d(e,b,a,d),Xi[a.i].edges.push(new ae(e,a,b)),Xi[b.i].edges.push(new ae(e,b,a)),e}function $d(a,b,c){var d=new Yd(a,null);return d.a=b,d.b=c,Wi.push(d),d}function _d(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function ae(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function be(){this._=null}function ce(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function de(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function ee(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function fe(a){for(;a.L;)a=a.L;return a}function ge(a,b){var c,d,e,f=a.sort(he).pop();for(Wi=[],Xi=new Array(a.length),Yi=new be,$i=new be;;)if(e=Zi,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))(f.x!==c||f.y!==d)&&(Xi[f.i]=new Qd(f),Nd(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Md(e.arc)}b&&(Wd(b),Rd(b));var g={cells:Xi,edges:Wi};return Yi=$i=Wi=Xi=null,g}function he(a,b){return b.y-a.y||b.x-a.x}function ie(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function je(a){return a.x}function ke(a){return a.y}function le(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function me(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&me(a,i[0],c,d,g,h),i[1]&&me(a,i[1],g,d,e,h),i[2]&&me(a,i[2],c,h,g,f),i[3]&&me(a,i[3],g,h,e,f)}}function ne(a,b){a=Xg.rgb(a),b=Xg.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+ub(Math.round(c+f*a))+ub(Math.round(d+g*a))+ub(Math.round(e+h*a))}}function oe(a,b){var c,d={},e={};for(c in a)c in b?d[c]=re(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function pe(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function qe(a,b){var c,d,e,f=cj.lastIndex=dj.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=cj.exec(a))&&(d=dj.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:pe(c,d)})),f=dj.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function re(a,b){for(var c,d=Xg.interpolators.length;--d>=0&&!(c=Xg.interpolators[d](a,b)););return c}function se(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(re(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function te(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function ue(a){return function(b){return 1-a(1-b)}}function ve(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function we(a){return a*a}function xe(a){return a*a*a}function ye(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function ze(a){return function(b){return Math.pow(b,a)}}function Ae(a){return 1-Math.cos(a*Dh)}function Be(a){return Math.pow(2,10*(a-1))}function Ce(a){return 1-Math.sqrt(1-a*a)}function De(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Ch*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Ch/b)}}function Ee(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Fe(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Ge(a,b){a=Xg.hcl(a),b=Xg.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return kb(c+f*a,d+g*a,e+h*a)+""}}function He(a,b){a=Xg.hsl(a),b=Xg.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ib(c+f*a,d+g*a,e+h*a)+""}}function Ie(a,b){a=Xg.lab(a),b=Xg.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return mb(c+f*a,d+g*a,e+h*a)+""}}function Je(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Ke(a){var b=[a.a,a.b],c=[a.c,a.d],d=Me(b),e=Le(b,c),f=Me(Ne(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Hh,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Hh:0}function Le(a,b){return a[0]*b[0]+a[1]*b[1]}function Me(a){var b=Math.sqrt(Le(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Ne(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Oe(a,b){var c,d=[],e=[],f=Xg.transform(a),g=Xg.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:pe(h[0],i[0])},{i:3,x:pe(h[1],i[1])})):d.push(i[0]||i[1]?"translate("+i+")":""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:pe(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:pe(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:pe(n[0],o[0])},{i:c-2,x:pe(n[1],o[1])})):(1!=o[0]||1!=o[1])&&d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Pe(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Qe(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Re(a){for(var b=a.source,c=a.target,d=Te(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Se(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Te(a,b){if(a===b)return a;for(var c=Se(a),d=Se(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Ue(a){a.fixed|=2}function Ve(a){a.fixed&=-7}function We(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Xe(a){a.fixed&=-5}function Ye(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(Ye(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function Ze(a,b){return Xg.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=df,a}function $e(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function _e(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function af(a){return a.children}function bf(a){return a.value}function cf(a,b){return b.value-a.value}function df(a){return Xg.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function ef(a){return a.x}function ff(a){return a.y}function gf(a,b,c){a.y0=b,a.y=c}function hf(a){return Xg.range(a.length)}function jf(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function kf(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function lf(a){return a.reduce(mf,0)}function mf(a,b){return a+b[1]}function nf(a,b){return of(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function of(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function pf(a){return[Xg.min(a),Xg.max(a)]}function qf(a,b){return a.value-b.value}function rf(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function sf(a,b){a._pack_next=b,b._pack_prev=a}function tf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function uf(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-1/0,m=1/0,n=-1/0;if(c.forEach(vf),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],yf(d,e,f),b(f),rf(d,f),d._pack_prev=f,rf(f,e),e=d._pack_next,g=3;j>g;g++){yf(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(tf(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!tf(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?sf(d,e=h):sf(d=i,e),g--):(rf(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(wf)}}function vf(a){a._pack_next=a._pack_prev=a}function wf(a){delete a._pack_next,delete a._pack_prev}function xf(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)xf(e[f],b,c,d)}function yf(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function zf(a,b){return a.parent==b.parent?1:2}function Af(a){var b=a.children;return b.length?b[0]:a.t}function Bf(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Cf(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Df(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Ef(a,b,c){return a.a.parent===b.parent?a.a:c}function Ff(a){return 1+Xg.max(a,function(a){return a.y})}function Gf(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Hf(a){var b=a.children;return b&&b.length?Hf(b[0]):a}function If(a){var b,c=a.children;return c&&(b=c.length)?If(c[b-1]):a}function Jf(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Kf(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Lf(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Mf(a){return a.rangeExtent?a.rangeExtent():Lf(a.range())}function Nf(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Of(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Pf(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:oj}function Qf(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=Xg.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Rf(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Qf:Nf,i=d?Qe:Pe;return g=e(a,b,i,c),h=e(b,a,i,re),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Je)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return Vf(a,b)},f.tickFormat=function(b,c){return Wf(a,b,c)},f.nice=function(b){return Tf(a,b),e()},f.copy=function(){return Rf(a,b,c,d)},e()}function Sf(a,b){return Xg.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Tf(a,b){return Of(a,Pf(Uf(a,b)[2]))}function Uf(a,b){null==b&&(b=10);var c=Lf(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Vf(a,b){return Xg.range.apply(Xg,Uf(a,b))}function Wf(a,b,c){var d=Uf(a,b);if(c){var e=ci.exec(c);if(e.shift(),"s"===e[8]){var f=Xg.formatPrefix(Math.max(jh(d[0]),jh(d[1])));return e[7]||(e[7]="."+Xf(f.scale(d[2]))),e[8]="f",c=Xg.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+Yf(e[8],d)),c=e.join("")}else c=",."+Xf(d[2])+"f";return Xg.format(c)}function Xf(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Yf(a,b){var c=Xf(b[2]);return a in pj?Math.abs(c-Xf(Math.max(jh(b[0]),jh(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Zf(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Of(d.map(e),c?Math:rj);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Lf(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;k>j;j++)for(var m=1;l>m;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,b){if(!arguments.length)return qj;arguments.length<2?b=qj:"function"!=typeof b&&(b=Xg.format(b));var d,h=Math.max(.1,a/g.ticks().length),i=c?(d=1e-12,Math.ceil):(d=-1e-12,Math.floor);return function(a){return a/f(i(e(a)+d))<=h?b(a):""}},g.copy=function(){return Zf(a.copy(),b,c,d)},Sf(g,a)}function $f(a,b,c){function d(b){return a(e(b))}var e=_f(b),f=_f(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return Vf(c,a)},d.tickFormat=function(a,b){return Wf(c,a,b)},d.nice=function(a){return d.domain(Tf(c,a))},d.exponent=function(g){return arguments.length?(e=_f(b=g),f=_f(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return $f(a.copy(),b,c)},Sf(d,a)}function _f(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function ag(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):0/0))-1)%f.length]}function d(b,c){return Xg.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new i;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=(j-i)/(Math.max(1,a.length-1)+h);return f=d(a.length<2?(i+j)/2:i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i)),n=l-k-(a.length-h)*m;return f=d(k+Math.round(n/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Lf(b.a[0])},c.copy=function(){return ag(a,b)},c.domain(a)}function bg(b,e){function f(){var a=0,c=e.length;for(h=[];++a<c;)h[a-1]=Xg.quantile(b,a/c);return g}function g(a){return isNaN(a=+a)?void 0:e[Xg.bisect(h,a)]}var h;return g.domain=function(e){return arguments.length?(b=e.map(c).filter(d).sort(a),f()):b},g.range=function(a){return arguments.length?(e=a,f()):e},g.quantiles=function(){return h},g.invertExtent=function(a){return a=e.indexOf(a),0>a?[0/0,0/0]:[a>0?h[a-1]:b[0],a<h.length?h[a]:b[b.length-1]]},g.copy=function(){return bg(b,e)},f()}function cg(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?0/0:b/f+a,[b,b+1/f]},d.copy=function(){return cg(a,b,c)},e()}function dg(a,b){function c(c){return c>=c?b[Xg.bisect(a,c)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return dg(a,b)},c}function eg(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return Vf(a,b)},b.tickFormat=function(b,c){return Wf(a,b,c)},b.copy=function(){return eg(a)},b}function fg(a){return a.innerRadius}function gg(a){return a.outerRadius}function hg(a){return a.startAngle}function ig(a){return a.endAngle}function jg(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Ab(c),o=Ab(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Cd,d=Dd,e=Cc,f=kg,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=yj.get(a)||kg).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function kg(a){return a.join("L")}function lg(a){return kg(a)+"Z"}function mg(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function ng(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function og(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function pg(a,b){return a.length<4?kg(a):a[1]+sg(a.slice(1,a.length-1),tg(a,b))}function qg(a,b){return a.length<3?kg(a):a[0]+sg((a.push(a[0]),a),tg([a[a.length-2]].concat(a,[a[1]]),b))}function rg(a,b){return a.length<3?kg(a):a[0]+sg(a,tg(a,b))}function sg(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return kg(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function tg(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function ug(a){if(a.length<3)return kg(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",yg(Bj,g),",",yg(Bj,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),zg(i,g,h);return a.pop(),i.push("L",d),i.join("")}function vg(a){if(a.length<4)return kg(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(yg(Bj,f)+","+yg(Bj,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),zg(c,f,g);return c.join("")}function wg(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[yg(Bj,g),",",yg(Bj,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),zg(b,g,h);return b.join("")}function xg(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return ug(a)}function yg(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function zg(a,b,c){a.push("C",yg(zj,b),",",yg(zj,c),",",yg(Aj,b),",",yg(Aj,c),",",yg(Bj,b),",",yg(Bj,c))}function Ag(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Bg(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Ag(e,f);++b<c;)d[b]=(g+(g=Ag(e=f,f=a[b+1])))/2;return d[b]=g,d}function Cg(a){for(var b,c,d,e,f=[],g=Bg(a),h=-1,i=a.length-1;++h<i;)b=Ag(a[h],a[h+1]),jh(b)<Eh?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Dg(a){return a.length<3?kg(a):a[0]+sg(a,Cg(a))}function Eg(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]+wj,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Fg(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Ab(c),v=Ab(e),w=c===d?function(){return n}:Ab(d),x=e===f?function(){return o}:Ab(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Cd,d=Cd,e=0,f=Dd,g=Cc,h=kg,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=yj.get(a)||kg).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Gg(a){return a.radius}function Hg(a){return[a.x,a.y]}function Ig(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+wj;return[c*Math.cos(d),c*Math.sin(d)]}}function Jg(){return 64}function Kg(){return"circle"}function Lg(a){var b=Math.sqrt(a/Bh);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Mg(a,b){return oh(a,Hj),a.id=b,a}function Ng(a,b,c,d){var e=a.id;return O(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Og(a){return null==a&&(a=""),function(){this.textContent=a}}function Pg(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),f=e[c];
if(!f){var g=d.time;f=e[c]={tween:new i,time:g,ease:d.ease,delay:d.delay,duration:d.duration},++e.count,Xg.timer(function(d){function h(d){return e.active>c?j():(e.active=c,f.event&&f.event.start.call(a,k,b),f.tween.forEach(function(c,d){(d=d.call(a,k,b))&&p.push(d)}),void Xg.timer(function(){return o.c=i(d||1)?Cc:i,1},0,g))}function i(d){if(e.active!==c)return j();for(var g=d/n,h=l(g),i=p.length;i>0;)p[--i].call(a,h);return g>=1?(f.event&&f.event.end.call(a,k,b),j()):void 0}function j(){return--e.count?delete e[c]:delete a.__transition__,1}var k=a.__data__,l=f.ease,m=f.delay,n=f.duration,o=_h,p=[];return o.t=m+g,d>=m?h(d-m):void(o.c=h)},0,g)}}function Qg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function Rg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function Sg(a){return a.toISOString()}function Tg(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=Xg.bisect(Qj,e);return f==Qj.length?[b.year,Uf(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Qj[f-1]<Qj[f]/e?f-1:f]:[Tj,Uf(a,c)[2]]}return d.invert=function(b){return Ug(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(Ug)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,Ug(+c+1),b).length}var f=d.domain(),g=Lf(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Of(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=Ug(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=Ug(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Lf(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],Ug(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return Tg(a.copy(),b,c)},Sf(d,a)}function Ug(a){return new Date(a)}function Vg(a){return JSON.parse(a.responseText)}function Wg(a){var b=$g.createRange();return b.selectNode($g.body),b.createContextualFragment(a.responseText)}var Xg={version:"3.4.13"};Date.now||(Date.now=function(){return+new Date});var Yg=[].slice,Zg=function(a){return Yg.call(a)},$g=document,_g=$g.documentElement,ah=window;try{Zg(_g.childNodes)[0].nodeType}catch(bh){Zg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}try{$g.createElement("div").style.setProperty("opacity",0,"")}catch(ch){var dh=ah.Element.prototype,eh=dh.setAttribute,fh=dh.setAttributeNS,gh=ah.CSSStyleDeclaration.prototype,hh=gh.setProperty;dh.setAttribute=function(a,b){eh.call(this,a,b+"")},dh.setAttributeNS=function(a,b,c){fh.call(this,a,b,c+"")},gh.setProperty=function(a,b,c){hh.call(this,a,b+"",c)}}Xg.ascending=a,Xg.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:0/0},Xg.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},Xg.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},Xg.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&!(null!=(c=e=a[f])&&c>=c);)c=e=void 0;for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g&&!(null!=(c=e=b.call(a,a[f],f))&&c>=c);)c=void 0;for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},Xg.sum=function(a,b){var c,e=0,f=a.length,g=-1;if(1===arguments.length)for(;++g<f;)d(c=+a[g])&&(e+=c);else for(;++g<f;)d(c=+b.call(a,a[g],g))&&(e+=c);return e},Xg.mean=function(a,b){var e,f=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)d(e=c(a[h]))?f+=e:--i;else for(;++h<g;)d(e=c(b.call(a,a[h],h)))?f+=e:--i;return i?f/i:void 0},Xg.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},Xg.median=function(b,e){var f,g=[],h=b.length,i=-1;if(1===arguments.length)for(;++i<h;)d(f=c(b[i]))&&g.push(f);else for(;++i<h;)d(f=c(e.call(b,b[i],i)))&&g.push(f);return g.length?Xg.quantile(g.sort(a),.5):void 0};var ih=e(a);Xg.bisectLeft=ih.left,Xg.bisect=Xg.bisectRight=ih.right,Xg.bisector=function(b){return e(1===b.length?function(c,d){return a(b(c),d)}:b)},Xg.shuffle=function(a){for(var b,c,d=a.length;d;)c=0|Math.random()*d--,b=a[d],a[d]=a[c],a[c]=b;return a},Xg.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},Xg.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(0>d?0:d);d>c;)f[c]=[b=e,e=a[++c]];return f},Xg.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,b=Xg.min(arguments,f),c=new Array(b);++a<b;)for(var d,e=-1,g=c[a]=new Array(d);++e<d;)g[e]=arguments[e][a];return c},Xg.transpose=function(a){return Xg.zip.apply(Xg,a)},Xg.keys=function(a){var b=[];for(var c in a)b.push(c);return b},Xg.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},Xg.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},Xg.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var jh=Math.abs;Xg.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),1/0===(b-a)/c)throw new Error("infinite range");var d,e=[],f=g(jh(c)),h=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++h)>b;)e.push(d/f);else for(;(d=a+c*++h)<b;)e.push(d/f);return e},Xg.map=function(a){var b=new i;if(a instanceof i)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b};var kh="__proto__",lh="\x00";h(i,{has:l,get:function(a){return this._[j(a)]},set:function(a,b){return this._[j(a)]=b},remove:m,keys:n,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:k(b),value:this._[b]});return a},size:o,empty:p,forEach:function(a){for(var b in this._)a.call(this,k(b),this._[b])}}),Xg.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var j,k,l,m,n=-1,o=g.length,p=f[h++],q=new i;++n<o;)(m=q.get(j=p(k=g[n])))?m.push(k):q.set(j,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,h))}):(k={},l=function(c,d){k[c]=a(b,d,h)}),q.forEach(l),k}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(Xg.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},Xg.set=function(a){var b=new q;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b},h(q,{has:l,add:function(a){return this._[j(a+="")]=!0,a},remove:m,values:n,size:o,empty:p,forEach:function(a){for(var b in this._)a.call(this,k(b))}}),Xg.behavior={},Xg.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=r(a,b,b[c]);return a};var mh=["webkit","ms","moz","Moz","o","O"];Xg.dispatch=function(){for(var a=new u,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=v(a);return a},u.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},Xg.event=null,Xg.requote=function(a){return a.replace(nh,"\\$&")};var nh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,oh={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},ph=function(a,b){return b.querySelector(a)},qh=function(a,b){return b.querySelectorAll(a)},rh=_g.matches||_g[s(_g,"matchesSelector")],sh=function(a,b){return rh.call(a,b)};"function"==typeof Sizzle&&(ph=function(a,b){return Sizzle(a,b)[0]||null},qh=Sizzle,sh=Sizzle.matchesSelector),Xg.selection=function(){return wh};var th=Xg.selection.prototype=[];th.select=function(a){var b,c,d,e,f=[];a=A(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return z(f)},th.selectAll=function(a){var b,c,d=[];a=B(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=Zg(a.call(c,c.__data__,h,e))),b.parentNode=c);return z(d)};var uh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Xg.ns={prefix:uh,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.slice(0,b),a=a.slice(b+1)),uh.hasOwnProperty(c)?{space:uh[c],local:a}:a}},th.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=Xg.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(C(b,a[b]));return this}return this.each(C(a,b))},th.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=F(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!E(a[e]).test(b))return!1;return!0}for(b in a)this.each(G(b,a[b]));return this}return this.each(G(a,b))},th.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(I(c,a[c],b));return this}if(2>d)return ah.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(I(a,b,c))},th.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(J(b,a[b]));return this}return this.each(J(a,b))},th.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},th.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},th.append=function(a){return a=K(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},th.insert=function(a,b){return a=K(a),b=A(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},th.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},th.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new i,s=new Array(g);for(d=-1;++d<g;)r.has(q=b.call(e=a[d],e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q;for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=L(f),r.set(q,!0);for(d=-1;++d<g;)r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=L(f);for(;l>d;++d)o[d]=L(c[d]);for(;g>d;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),j.push(n),k.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=P([]),j=z([]),k=z([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return j.enter=function(){return h},j.exit=function(){return k},j},th.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},th.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=M(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return z(e)},th.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},th.sort=function(a){a=N.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},th.each=function(a){return O(this,function(b,c,d){a.call(b,b.__data__,c,d)})},th.call=function(a){var b=Zg(arguments);return a.apply(b[0]=this,b),this},th.empty=function(){return!this.node()},th.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},th.size=function(){var a=0;return O(this,function(){++a}),a};var vh=[];Xg.selection.enter=P,Xg.selection.enter.prototype=vh,vh.append=th.append,vh.empty=th.empty,vh.node=th.node,vh.call=th.call,vh.size=th.size,vh.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return z(g)},vh.insert=function(a,b){return arguments.length<2&&(b=Q(this)),th.insert.call(this,a,b)},th.transition=function(){for(var a,b,c=Dj||++Ij,d=[],e=Ej||{time:Date.now(),ease:ye,delay:0,duration:250},f=-1,g=this.length;++f<g;){d.push(a=[]);for(var h=this[f],i=-1,j=h.length;++i<j;)(b=h[i])&&Pg(b,i,c,e),a.push(b)}return Mg(d,c)},th.interrupt=function(){return this.each(R)},Xg.select=function(a){var b=["string"==typeof a?ph(a,$g):a];return b.parentNode=_g,z([b])},Xg.selectAll=function(a){var b=Zg("string"==typeof a?qh(a,$g):a);return b.parentNode=_g,z([b])};var wh=Xg.select(_g);th.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(S(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(S(a,b,c))};var xh=Xg.map({mouseenter:"mouseover",mouseleave:"mouseout"});xh.forEach(function(a){"on"+a in $g&&xh.remove(a)});var yh="onselectstart"in $g?null:s(_g.style,"userSelect"),zh=0;Xg.mouse=function(a){return W(a,x())};var Ah=/WebKit/.test(ah.navigator.userAgent)?-1:0;Xg.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=x().changedTouches),b)for(var d,e=0,f=b.length;f>e;++e)if((d=b[e]).identifier===c)return W(a,d)},Xg.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function b(a,b,e,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o&&Xg.event.target===l),n({type:"dragend"}))}var j,k=this,l=Xg.event.target,m=k.parentNode,n=c.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=Xg.select(e()).on(f+q,h).on(g+q,i),s=V(),t=b(m,p);d?(j=d.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var c=y(a,"drag","dragstart","dragend"),d=null,e=b(t,Xg.mouse,Z,"mousemove","mouseup"),f=b(X,Xg.touch,Y,"touchmove","touchend");return a.origin=function(b){return arguments.length?(d=b,a):d},Xg.rebind(a,c,"on")},Xg.touches=function(a,b){return arguments.length<2&&(b=x().touches),b?Zg(b).map(function(b){var c=W(a,b);return c.identifier=b.identifier,c}):[]};var Bh=Math.PI,Ch=2*Bh,Dh=Bh/2,Eh=1e-6,Fh=Eh*Eh,Gh=Bh/180,Hh=180/Bh,Ih=Math.SQRT2,Jh=2,Kh=4;Xg.interpolateZoom=function(a,b){function c(a){var b=a*s;if(r){var c=db(p),g=f/(Jh*m)*(c*eb(Ih*b+p)-cb(p));return[d+g*j,e+g*k,f*c/db(Ih*b+p)]}return[d+a*j,e+a*k,f*Math.exp(Ih*b)]}var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2],j=g-d,k=h-e,l=j*j+k*k,m=Math.sqrt(l),n=(i*i-f*f+Kh*l)/(2*f*Jh*m),o=(i*i-f*f-Kh*l)/(2*i*Jh*m),p=Math.log(Math.sqrt(n*n+1)-n),q=Math.log(Math.sqrt(o*o+1)-o),r=q-p,s=(r||Math.log(i/f))/Ih;return c.duration=1e3*s,c},Xg.behavior.zoom=function(){function a(a){a.on(B,j).on(Nh+".zoom",l).on("dblclick.zoom",m).on(E,k)}function b(a){return[(a[0]-x.x)/x.k,(a[1]-x.y)/x.k]}function c(a){return[a[0]*x.k+x.x,a[1]*x.k+x.y]}function d(a){x.k=Math.max(A[0],Math.min(A[1],a))}function e(a,b){b=c(b),x.x+=a[0]-b[0],x.y+=a[1]-b[1]}function f(){t&&t.domain(s.range().map(function(a){return(a-x.x)/x.k}).map(s.invert)),v&&v.domain(u.range().map(function(a){return(a-x.y)/x.k}).map(u.invert))}function g(a){a({type:"zoomstart"})}function h(a){f(),a({type:"zoom",scale:x.k,translate:[x.x,x.y]})}function i(a){a({type:"zoomend"})}function j(){function a(){k=1,e(Xg.mouse(d),m),h(j)}function c(){l.on(C,null).on(D,null),n(k&&Xg.event.target===f),i(j)}var d=this,f=Xg.event.target,j=F.of(d,arguments),k=0,l=Xg.select(ah).on(C,a).on(D,c),m=b(Xg.mouse(d)),n=V();R.call(d),g(j)}function k(){function a(){var a=Xg.touches(n);return m=x.k,a.forEach(function(a){a.identifier in p&&(p[a.identifier]=b(a))}),a}function c(){var b=Xg.event.target;Xg.select(b).on(t,f).on(u,l),v.push(b);for(var c=Xg.event.changedTouches,g=0,i=c.length;i>g;++g)p[c[g].identifier]=null;var j=a(),k=Date.now();if(1===j.length){if(500>k-r){var m=j[0],n=p[m.identifier];d(2*x.k),e(m,n),w(),h(o)}r=k}else if(j.length>1){var m=j[0],s=j[1],y=m[0]-s[0],z=m[1]-s[1];q=y*y+z*z}}function f(){for(var a,b,c,f,g=Xg.touches(n),i=0,j=g.length;j>i;++i,f=null)if(c=g[i],f=p[c.identifier]){if(b)break;a=c,b=f}if(f){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=q&&Math.sqrt(k/q);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+f[0])/2,(b[1]+f[1])/2],d(l*m)}r=null,e(a,b),h(o)}function l(){if(Xg.event.touches.length){for(var b=Xg.event.changedTouches,c=0,d=b.length;d>c;++c)delete p[b[c].identifier];for(var e in p)return void a()}Xg.selectAll(v).on(s,null),y.on(B,j).on(E,k),z(),i(o)}var m,n=this,o=F.of(n,arguments),p={},q=0,s=".zoom-"+Xg.event.changedTouches[0].identifier,t="touchmove"+s,u="touchend"+s,v=[],y=Xg.select(n),z=V();R.call(n),c(),g(o),y.on(B,null).on(E,c)}function l(){var a=F.of(this,arguments);q?clearTimeout(q):(n=b(o=p||Xg.mouse(this)),R.call(this),g(a)),q=setTimeout(function(){q=null,i(a)},50),w(),d(Math.pow(2,.002*Lh())*x.k),e(o,n),h(a)}function m(){var a=F.of(this,arguments),c=Xg.mouse(this),f=b(c),j=Math.log(x.k)/Math.LN2;g(a),d(Math.pow(2,Xg.event.shiftKey?Math.ceil(j)-1:Math.floor(j)+1)),e(c,f),h(a),i(a)}var n,o,p,q,r,s,t,u,v,x={x:0,y:0,k:1},z=[960,500],A=Mh,B="mousedown.zoom",C="mousemove.zoom",D="mouseup.zoom",E="touchstart.zoom",F=y(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=F.of(this,arguments),b=x;Dj?Xg.select(this).transition().each("start.zoom",function(){x=this.__chart__||{x:0,y:0,k:1},g(a)}).tween("zoom:zoom",function(){var c=z[0],d=z[1],e=c/2,f=d/2,g=Xg.interpolateZoom([(e-x.x)/x.k,(f-x.y)/x.k,c/x.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),i=c/d[2];this.__chart__=x={x:e-d[0]*i,y:f-d[1]*i,k:i},h(a)}}).each("end.zoom",function(){i(a)}):(this.__chart__=x,g(a),h(a),i(a))})},a.translate=function(b){return arguments.length?(x={x:+b[0],y:+b[1],k:x.k},f(),a):[x.x,x.y]},a.scale=function(b){return arguments.length?(x={x:x.x,y:x.y,k:+b},f(),a):x.k},a.scaleExtent=function(b){return arguments.length?(A=null==b?Mh:[+b[0],+b[1]],a):A},a.center=function(b){return arguments.length?(p=b&&[+b[0],+b[1]],a):p},a.size=function(b){return arguments.length?(z=b&&[+b[0],+b[1]],a):z},a.x=function(b){return arguments.length?(t=b,s=b.copy(),x={x:0,y:0,k:1},a):t},a.y=function(b){return arguments.length?(v=b,u=b.copy(),x={x:0,y:0,k:1},a):v},Xg.rebind(a,F,"on")};var Lh,Mh=[0,1/0],Nh="onwheel"in $g?(Lh=function(){return-Xg.event.deltaY*(Xg.event.deltaMode?120:1)},"wheel"):"onmousewheel"in $g?(Lh=function(){return Xg.event.wheelDelta},"mousewheel"):(Lh=function(){return-Xg.event.detail},"MozMousePixelScroll");Xg.color=gb,gb.prototype.toString=function(){return this.rgb()+""},Xg.hsl=hb;var Oh=hb.prototype=new gb;Oh.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new hb(this.h,this.s,this.l/a)},Oh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new hb(this.h,this.s,a*this.l)},Oh.rgb=function(){return ib(this.h,this.s,this.l)},Xg.hcl=jb;var Ph=jb.prototype=new gb;Ph.brighter=function(a){return new jb(this.h,this.c,Math.min(100,this.l+Qh*(arguments.length?a:1)))},Ph.darker=function(a){return new jb(this.h,this.c,Math.max(0,this.l-Qh*(arguments.length?a:1)))},Ph.rgb=function(){return kb(this.h,this.c,this.l).rgb()},Xg.lab=lb;var Qh=18,Rh=.95047,Sh=1,Th=1.08883,Uh=lb.prototype=new gb;Uh.brighter=function(a){return new lb(Math.min(100,this.l+Qh*(arguments.length?a:1)),this.a,this.b)},Uh.darker=function(a){return new lb(Math.max(0,this.l-Qh*(arguments.length?a:1)),this.a,this.b)},Uh.rgb=function(){return mb(this.l,this.a,this.b)},Xg.rgb=rb;var Vh=rb.prototype=new gb;Vh.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),new rb(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new rb(e,e,e)},Vh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new rb(a*this.r,a*this.g,a*this.b)},Vh.hsl=function(){return wb(this.r,this.g,this.b)},Vh.toString=function(){return"#"+ub(this.r)+ub(this.g)+ub(this.b)};var Wh=Xg.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Wh.forEach(function(a,b){Wh.set(a,sb(b))}),Xg.functor=Ab,Xg.xhr=Cb(Bb),Xg.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Db(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;j>k;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new q,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},Xg.csv=Xg.dsv(",","text/csv"),Xg.tsv=Xg.dsv("	","text/tab-separated-values");var Xh,Yh,Zh,$h,_h,ai=ah[s(ah,"requestAnimationFrame")]||function(a){setTimeout(a,17)};Xg.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0),3>d&&(c=Date.now());var e=c+b,f={c:a,t:e,f:!1,n:null};Yh?Yh.n=f:Xh=f,Yh=f,Zh||($h=clearTimeout($h),Zh=1,ai(Gb))},Xg.timer.flush=function(){Hb(),Ib()},Xg.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var bi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Kb);Xg.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=Xg.round(a,Jb(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),bi[8+c/3]};var ci=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,di=Xg.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=Xg.round(a,Jb(a,b))).toFixed(Math.max(0,Math.min(20,Jb(a*(1+1e-15),b))))}}),ei=Xg.time={},fi=Date;Nb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){gi.setUTCDate.apply(this._,arguments)},setDay:function(){gi.setUTCDay.apply(this._,arguments)},setFullYear:function(){gi.setUTCFullYear.apply(this._,arguments)},setHours:function(){gi.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){gi.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){gi.setUTCMinutes.apply(this._,arguments)},setMonth:function(){gi.setUTCMonth.apply(this._,arguments)},setSeconds:function(){gi.setUTCSeconds.apply(this._,arguments)},setTime:function(){gi.setTime.apply(this._,arguments)}};var gi=Date.prototype;ei.year=Ob(function(a){return a=ei.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),ei.years=ei.year.range,ei.years.utc=ei.year.utc.range,ei.day=Ob(function(a){var b=new fi(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),ei.days=ei.day.range,ei.days.utc=ei.day.utc.range,ei.dayOfYear=function(a){var b=ei.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=ei[a]=Ob(function(a){return(a=ei.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=ei.year(a).getDay();return Math.floor((ei.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});ei[a+"s"]=c.range,ei[a+"s"].utc=c.utc.range,ei[a+"OfYear"]=function(a){var c=ei.year(a).getDay();return Math.floor((ei.dayOfYear(a)+(c+b)%7)/7)}}),ei.week=ei.sunday,ei.weeks=ei.sunday.range,ei.weeks.utc=ei.sunday.utc.range,ei.weekOfYear=ei.sundayOfYear;var hi={"-":"",_:" ",0:"0"},ii=/^\s*\d+/,ji=/^%/;Xg.locale=function(a){return{numberFormat:Lb(a),timeFormat:Qb(a)}};var ki=Xg.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Xg.format=ki.numberFormat,Xg.geo={},jc.prototype={s:0,t:0,add:function(a){kc(a,this.t,li),kc(li.s,this.s,this),this.s?this.t+=li.t:this.s=li.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var li=new jc;Xg.geo.stream=function(a,b){a&&mi.hasOwnProperty(a.type)?mi[a.type](a,b):lc(a,b)};var mi={Feature:function(a,b){lc(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)lc(c[d].geometry,b)}},ni={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){mc(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)mc(c[d],b,0)},Polygon:function(a,b){nc(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)nc(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)lc(c[d],b)}};Xg.geo.area=function(a){return oi=0,Xg.geo.stream(a,qi),oi};var oi,pi=new jc,qi={sphere:function(){oi+=4*Bh},point:t,lineStart:t,lineEnd:t,polygonStart:function(){pi.reset(),qi.lineStart=oc},polygonEnd:function(){var a=2*pi;oi+=0>a?4*Bh+a:a,qi.lineStart=qi.lineEnd=qi.point=t}};Xg.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),l>b&&(l=b),b>n&&(n=b)}function b(b,c){var d=pc([b*Gh,c*Gh]);if(r){var e=rc(r,d),f=[e[1],-e[0],0],g=rc(f,e);uc(g),g=vc(g);var i=b-o,j=i>0?1:-1,p=g[0]*Hh*j,q=jh(i)>180;if(q^(p>j*o&&j*b>p)){var s=g[1]*Hh;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(p>j*o&&j*b>p)){var s=-g[1]*Hh;l>s&&(l=s)}else l>c&&(l=c),c>n&&(n=c);q?o>b?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(k>b&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=jh(d)>180?d+(d>0?360:-360):d}else p=a,q=c;qi.point(a,c),b(a,c)}function f(){qi.lineStart()}function g(){e(p,q),qi.lineEnd(),jh(s)>Eh&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,qi.polygonStart()
},polygonEnd:function(){qi.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,0>pi?(k=-(m=180),l=-(n=90)):s>Eh?n=90:-Eh>s&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],Xg.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];b>d;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-1/0,b=f.length-1,d=0,e=f[b];b>=d;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,1/0===k||1/0===l?[[0/0,0/0],[0/0,0/0]]:[[k,l],[m,n]]}}(),Xg.geo.centroid=function(a){ri=si=ti=ui=vi=wi=xi=yi=zi=Ai=Bi=0,Xg.geo.stream(a,Ci);var b=zi,c=Ai,d=Bi,e=b*b+c*c+d*d;return Fh>e&&(b=wi,c=xi,d=yi,Eh>si&&(b=ti,c=ui,d=vi),e=b*b+c*c+d*d,Fh>e)?[0/0,0/0]:[Math.atan2(c,b)*Hh,bb(d/Math.sqrt(e))*Hh]};var ri,si,ti,ui,vi,wi,xi,yi,zi,Ai,Bi,Ci={sphere:t,point:xc,lineStart:zc,lineEnd:Ac,polygonStart:function(){Ci.lineStart=Bc},polygonEnd:function(){Ci.lineStart=zc}},Di=Gc(Cc,Kc,Mc,[-Bh,-Bh/2]),Ei=1e9;Xg.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Qc(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(Xg.geo.conicEqualArea=function(){return Sc(Tc)}).raw=Tc,Xg.geo.albers=function(){return Xg.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Xg.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=Xg.geo.albers(),g=Xg.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=Xg.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&.234>e&&d>=-.425&&-.214>d?g:e>=.166&&.234>e&&d>=-.214&&-.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Eh,l+.12*j+Eh],[k-.214*j-Eh,l+.234*j-Eh]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Eh,l+.166*j+Eh],[k-.115*j-Eh,l+.234*j-Eh]]).stream(i).point,a},a.scale(1070)};var Fi,Gi,Hi,Ii,Ji,Ki,Li={point:t,lineStart:t,lineEnd:t,polygonStart:function(){Gi=0,Li.lineStart=Uc},polygonEnd:function(){Li.lineStart=Li.lineEnd=Li.point=t,Fi+=jh(Gi/2)}},Mi={point:Vc,lineStart:t,lineEnd:t,polygonStart:t,polygonEnd:t},Ni={point:Yc,lineStart:Zc,lineEnd:$c,polygonStart:function(){Ni.lineStart=_c},polygonEnd:function(){Ni.point=Yc,Ni.lineStart=Zc,Ni.lineEnd=$c}};Xg.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),Xg.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Fi=0,Xg.geo.stream(a,e(Li)),Fi},a.centroid=function(a){return ti=ui=vi=wi=xi=yi=zi=Ai=Bi=0,Xg.geo.stream(a,e(Ni)),Bi?[zi/Bi,Ai/Bi]:yi?[wi/yi,xi/yi]:vi?[ti/vi,ui/vi]:[0/0,0/0]},a.bounds=function(a){return Ji=Ki=-(Hi=Ii=1/0),Xg.geo.stream(a,e(Mi)),[[Hi,Ii],[Ji,Ki]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||cd(a):Bb,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Wc:new ad(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(Xg.geo.albersUsa()).context(null)},Xg.geo.transform=function(a){return{stream:function(b){var c=new dd(b);for(var d in a)c[d]=a[d];return c}}},dd.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Xg.geo.projection=fd,Xg.geo.projectionMutator=gd,(Xg.geo.equirectangular=function(){return fd(id)}).raw=id.invert=id,Xg.geo.rotation=function(a){function b(b){return b=a(b[0]*Gh,b[1]*Gh),b[0]*=Hh,b[1]*=Hh,b}return a=kd(a[0]%360*Gh,a[1]*Gh,a.length>2?a[2]*Gh:0),b.invert=function(b){return b=a.invert(b[0]*Gh,b[1]*Gh),b[0]*=Hh,b[1]*=Hh,b},b},jd.invert=id,Xg.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=kd(-a[0]*Gh,-a[1]*Gh,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Hh,a[1]*=Hh}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=od((b=+d)*Gh,e*Gh),a):b},a.precision=function(d){return arguments.length?(c=od(b*Gh,(e=+d)*Gh),a):e},a.angle(90)},Xg.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Gh,e=a[1]*Gh,f=b[1]*Gh,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},Xg.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return Xg.range(Math.ceil(f/q)*q,e,q).map(m).concat(Xg.range(Math.ceil(j/r)*r,i,r).map(n)).concat(Xg.range(Math.ceil(d/o)*o,c,o).filter(function(a){return jh(a%q)>Eh}).map(k)).concat(Xg.range(Math.ceil(h/p)*p,g,p).filter(function(a){return jh(a%r)>Eh}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=qd(h,g,90),l=rd(d,c,s),m=qd(j,i,90),n=rd(f,e,s),a):s},a.majorExtent([[-180,-90+Eh],[180,90-Eh]]).minorExtent([[-180,-80-Eh],[180,80+Eh]])},Xg.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=sd,e=td;return a.distance=function(){return Xg.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},Xg.geo.interpolate=function(a,b){return ud(a[0]*Gh,a[1]*Gh,b[0]*Gh,b[1]*Gh)},Xg.geo.length=function(a){return Oi=0,Xg.geo.stream(a,Pi),Oi};var Oi,Pi={sphere:t,point:t,lineStart:vd,lineEnd:t,polygonStart:t,polygonEnd:t},Qi=wd(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(Xg.geo.azimuthalEqualArea=function(){return fd(Qi)}).raw=Qi;var Ri=wd(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},Bb);(Xg.geo.azimuthalEquidistant=function(){return fd(Ri)}).raw=Ri,(Xg.geo.conicConformal=function(){return Sc(xd)}).raw=xd,(Xg.geo.conicEquidistant=function(){return Sc(yd)}).raw=yd;var Si=wd(function(a){return 1/a},Math.atan);(Xg.geo.gnomonic=function(){return fd(Si)}).raw=Si,zd.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Dh]},(Xg.geo.mercator=function(){return Ad(zd)}).raw=zd;var Ti=wd(function(){return 1},Math.asin);(Xg.geo.orthographic=function(){return fd(Ti)}).raw=Ti;var Ui=wd(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(Xg.geo.stereographic=function(){return fd(Ui)}).raw=Ui,Bd.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Dh]},(Xg.geo.transverseMercator=function(){var a=Ad(Bd),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Bd,Xg.geom={},Xg.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Ab(c),f=Ab(d),g=a.length,h=[],i=[];for(b=0;g>b;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Fd),b=0;g>b;b++)i.push([h[b][0],-h[b][1]]);var j=Ed(h),k=Ed(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Cd,d=Dd;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},Xg.geom.polygon=function(a){return oh(a,Vi),a};var Vi=Xg.geom.polygon.prototype=[];Vi.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},Vi.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},Vi.clip=function(a){for(var b,c,d,e,f,g,h=Id(a),i=-1,j=this.length-Id(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Gd(g,k,e)?(Gd(f,k,e)||a.push(Hd(f,g,k,e)),a.push(g)):Gd(f,k,e)&&a.push(Hd(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var Wi,Xi,Yi,Zi,$i,_i=[],aj=[];Qd.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Sd),b.length},ae.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},be.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=fe(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(de(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ee(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(ee(this,c),a=c,c=a.U),c.C=!1,d.C=!0,de(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?fe(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,de(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,ee(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,de(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,ee(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,de(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,ee(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},Xg.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return ge(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Eh)*Eh,y:Math.round(g(a,b)/Eh)*Eh,i:b}})}var d=Cd,e=Dd,f=d,g=e,h=bj;return a?b(a):(b.links=function(a){return ge(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return ge(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Sd),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&ie(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Ab(d=a),b):d},b.y=function(a){return arguments.length?(g=Ab(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?bj:a,b):h===bj?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===bj?null:h&&h[1]},b)};var bj=[[-1e6,-1e6],[1e6,1e6]];Xg.geom.delaunay=function(a){return Xg.geom.voronoi().triangles(a)},Xg.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(jh(i-c)+jh(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=(m<<1)+l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=le()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Ab(h),u=Ab(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;o>n;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;o>n;++n){var v=+t(k=a[n],n),w=+u(k,n);p>v&&(p=v),q>w&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=le();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){me(a,z,p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Cd,i=Dd;return(g=arguments.length)?(h=je,i=ke,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},Xg.interpolateRgb=ne,Xg.interpolateObject=oe,Xg.interpolateNumber=pe,Xg.interpolateString=qe;var cj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dj=new RegExp(cj.source,"g");Xg.interpolate=re,Xg.interpolators=[function(a,b){var c=typeof b;return("string"===c?Wh.has(b)||/^(#|rgb\(|hsl\()/.test(b)?ne:qe:b instanceof gb?ne:Array.isArray(b)?se:"object"===c&&isNaN(b)?oe:pe)(a,b)}],Xg.interpolateArray=se;var ej=function(){return Bb},fj=Xg.map({linear:ej,poly:ze,quad:function(){return we},cubic:function(){return xe},sin:function(){return Ae},exp:function(){return Be},circle:function(){return Ce},elastic:De,back:Ee,bounce:function(){return Fe}}),gj=Xg.map({"in":Bb,out:ue,"in-out":ve,"out-in":function(a){return ve(ue(a))}});Xg.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=fj.get(c)||ej,d=gj.get(d)||Bb,te(d(c.apply(null,Yg.call(arguments,1))))},Xg.interpolateHcl=Ge,Xg.interpolateHsl=He,Xg.interpolateLab=Ie,Xg.interpolateRound=Je,Xg.transform=function(a){var b=$g.createElementNS(Xg.ns.prefix.svg,"g");return(Xg.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Ke(c?c.matrix:hj)})(a)},Ke.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var hj={a:1,b:0,c:0,d:1,e:0,f:0};Xg.interpolateTransform=Oe,Xg.layout={},Xg.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Re(a[c]));return b}},Xg.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=Xg.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(Xg.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Ch-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},Xg.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(i>h*h/q){if(o>i){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&o>i){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=Xg.event.x,a.py=Xg.event.y,h.resume()}var c,d,e,f,g,h={},i=Xg.dispatch("start","tick","end"),j=[1,1],k=.9,l=ij,m=jj,n=-30,o=kj,p=.1,q=.64,r=[],s=[];return h.tick=function(){if((d*=.99)<.005)return i.end({type:"end",alpha:d=0}),!0;var b,c,h,l,m,o,q,t,u,v=r.length,w=s.length;for(c=0;w>c;++c)h=s[c],l=h.source,m=h.target,t=m.x-l.x,u=m.y-l.y,(o=t*t+u*u)&&(o=d*f[c]*((o=Math.sqrt(o))-e[c])/o,t*=o,u*=o,m.x-=t*(q=l.weight/(m.weight+l.weight)),m.y-=u*q,l.x+=t*(q=1-q),l.y+=u*q);if((q=d*p)&&(t=j[0]/2,u=j[1]/2,c=-1,q))for(;++c<v;)h=r[c],h.x+=(t-h.x)*q,h.y+=(u-h.y)*q;if(n)for(Ye(b=Xg.geom.quadtree(r),d,g),c=-1;++c<v;)(h=r[c]).fixed||b.visit(a(h));for(c=-1;++c<v;)h=r[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*k,h.y-=(h.py-(h.py=h.y))*k);i.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(r=a,h):r},h.links=function(a){return arguments.length?(s=a,h):s},h.size=function(a){return arguments.length?(j=a,h):j},h.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,h):l},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,h):m},h.friction=function(a){return arguments.length?(k=+a,h):k},h.charge=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.chargeDistance=function(a){return arguments.length?(o=a*a,h):Math.sqrt(o)},h.gravity=function(a){return arguments.length?(p=+a,h):p},h.theta=function(a){return arguments.length?(q=a*a,h):Math.sqrt(q)},h.alpha=function(a){return arguments.length?(a=+a,d?d=a>0?a:0:a>0&&(i.start({type:"start",alpha:d=a}),Xg.timer(h.tick)),h):d},h.start=function(){function a(a,d){if(!c){for(c=new Array(i),h=0;i>h;++h)c[h]=[];for(h=0;j>h;++h){var e=s[h];c[e.source.index].push(e.target),c[e.target.index].push(e.source)}}for(var f,g=c[b],h=-1,j=g.length;++h<j;)if(!isNaN(f=g[h][a]))return f;return Math.random()*d}var b,c,d,i=r.length,k=s.length,o=j[0],p=j[1];for(b=0;i>b;++b)(d=r[b]).index=b,d.weight=0;for(b=0;k>b;++b)d=s[b],"number"==typeof d.source&&(d.source=r[d.source]),"number"==typeof d.target&&(d.target=r[d.target]),++d.source.weight,++d.target.weight;for(b=0;i>b;++b)d=r[b],isNaN(d.x)&&(d.x=a("x",o)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof l)for(b=0;k>b;++b)e[b]=+l.call(this,s[b],b);else for(b=0;k>b;++b)e[b]=l;if(f=[],"function"==typeof m)for(b=0;k>b;++b)f[b]=+m.call(this,s[b],b);else for(b=0;k>b;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;i>b;++b)g[b]=+n.call(this,r[b],b);else for(b=0;i>b;++b)g[b]=n;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=Xg.behavior.drag().origin(Bb).on("dragstart.force",Ue).on("drag.force",b).on("dragend.force",Ve)),arguments.length?void this.on("mouseover.force",We).on("mouseout.force",Xe).call(c):c},Xg.rebind(h,i,"on")};var ij=20,jj=1,kj=1/0;Xg.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return _e(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=cf,c=af,d=bf;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&($e(b,function(a){a.children&&(a.value=0)}),_e(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},Xg.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=Xg.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},Ze(c,d)},Xg.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),i=(("function"==typeof e?e.apply(this,arguments):e)-h)/Xg.sum(g),j=Xg.range(f.length);null!=c&&j.sort(c===lj?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var k=[];return j.forEach(function(a){var b;k[a]={data:f[a],value:b=g[a],startAngle:h,endAngle:h+=b*i}}),k}var b=Number,c=lj,d=0,e=Ch;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var lj={};Xg.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=Xg.permute(j,l),k=Xg.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;r>o;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;m>n;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=Bb,c=hf,d=jf,e=gf,f=ef,g=ff;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:mj.get(b)||hf,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:nj.get(b)||jf,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var mj=Xg.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(kf),f=a.map(lf),g=Xg.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return Xg.range(a.length).reverse()},"default":hf}),nj=Xg.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:jf});Xg.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[Xg.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=pf,e=nf;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Ab(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return of(a,b)}:Ab(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},Xg.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,_e(h,function(a){a.r=+k(a.value)}),_e(h,uf),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;_e(h,function(a){a.r+=l}),_e(h,uf),_e(h,function(a){a.r-=l})}return xf(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=Xg.layout.hierarchy().sort(qf),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},Ze(a,c)},Xg.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(_e(m,c),m.parent.m=-m.z,$e(m,d),j)$e(l,f);else{var n=l,o=l,p=l;$e(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);$e(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;h>g;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Df(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=Bf(g),e=Af(e),g&&e;)i=Af(i),f=Bf(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Cf(Ef(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!Bf(f)&&(f.t=g,f.m+=l-k),e&&!Af(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=Xg.layout.hierarchy().sort(null).value(null),h=zf,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},Ze(a,g)},Xg.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;_e(i,function(a){var b=a.children;b&&b.length?(a.x=Gf(b),a.y=Ff(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Hf(i),l=If(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return _e(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=Xg.layout.hierarchy().sort(null).value(null),c=zf,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},Ze(a,b)},Xg.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=Xg.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Jf,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Jf(b):Kf(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Kf(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Jf:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},Ze(f,h)},Xg.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=Xg.random.normal.apply(Xg,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=Xg.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}},Xg.scale={};var oj={floor:Bb,ceil:Bb};Xg.scale.linear=function(){return Rf([0,1],[0,1],re,!1)};var pj={s:1,g:1,p:1,r:1,e:1};Xg.scale.log=function(){return Zf(Xg.scale.linear().domain([0,1]),10,!0,[1,10])};var qj=Xg.format(".0e"),rj={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};Xg.scale.pow=function(){return $f(Xg.scale.linear(),1,[0,1])},Xg.scale.sqrt=function(){return Xg.scale.pow().exponent(.5)},Xg.scale.ordinal=function(){return ag([],{t:"range",a:[[]]})},Xg.scale.category10=function(){return Xg.scale.ordinal().range(sj)},Xg.scale.category20=function(){return Xg.scale.ordinal().range(tj)},Xg.scale.category20b=function(){return Xg.scale.ordinal().range(uj)},Xg.scale.category20c=function(){return Xg.scale.ordinal().range(vj)};var sj=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(tb),tj=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(tb),uj=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(tb),vj=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(tb);
Xg.scale.quantile=function(){return bg([],[])},Xg.scale.quantize=function(){return cg(0,1,[0,1])},Xg.scale.threshold=function(){return dg([.5],[0,1])},Xg.scale.identity=function(){return eg([0,1])},Xg.svg={},Xg.svg.arc=function(){function a(){var a=b.apply(this,arguments),f=c.apply(this,arguments),g=d.apply(this,arguments)+wj,h=e.apply(this,arguments)+wj,i=(g>h&&(i=g,g=h,h=i),h-g),j=Bh>i?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=xj?a?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":a?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+a*m+","+a*n+"A"+a+","+a+" 0 "+j+",0 "+a*k+","+a*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0Z"}var b=fg,c=gg,d=hg,e=ig;return a.innerRadius=function(c){return arguments.length?(b=Ab(c),a):b},a.outerRadius=function(b){return arguments.length?(c=Ab(b),a):c},a.startAngle=function(b){return arguments.length?(d=Ab(b),a):d},a.endAngle=function(b){return arguments.length?(e=Ab(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+wj;return[Math.cos(f)*a,Math.sin(f)*a]},a};var wj=-Dh,xj=Ch-Eh;Xg.svg.line=function(){return jg(Bb)};var yj=Xg.map({linear:kg,"linear-closed":lg,step:mg,"step-before":ng,"step-after":og,basis:ug,"basis-open":vg,"basis-closed":wg,bundle:xg,cardinal:rg,"cardinal-open":pg,"cardinal-closed":qg,monotone:Dg});yj.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var zj=[0,2/3,1/3,0],Aj=[0,1/3,2/3,0],Bj=[0,1/6,2/3,1/6];Xg.svg.line.radial=function(){var a=jg(Eg);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},ng.reverse=og,og.reverse=ng,Xg.svg.area=function(){return Fg(Bb)},Xg.svg.area.radial=function(){var a=Fg(Eg);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},Xg.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)+wj,k=j.call(a,e,d)+wj;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Bh)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=sd,g=td,h=Gg,i=hg,j=ig;return a.radius=function(b){return arguments.length?(h=Ab(b),a):h},a.source=function(b){return arguments.length?(f=Ab(b),a):f},a.target=function(b){return arguments.length?(g=Ab(b),a):g},a.startAngle=function(b){return arguments.length?(i=Ab(b),a):i},a.endAngle=function(b){return arguments.length?(j=Ab(b),a):j},a},Xg.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=sd,c=td,d=Hg;return a.source=function(c){return arguments.length?(b=Ab(c),a):b},a.target=function(b){return arguments.length?(c=Ab(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},Xg.svg.diagonal.radial=function(){var a=Xg.svg.diagonal(),b=Hg,c=a.projection;return a.projection=function(a){return arguments.length?c(Ig(b=a)):b},a},Xg.svg.symbol=function(){function a(a,d){return(Cj.get(b.call(this,a,d))||Lg)(c.call(this,a,d))}var b=Kg,c=Jg;return a.type=function(c){return arguments.length?(b=Ab(c),a):b},a.size=function(b){return arguments.length?(c=Ab(b),a):c},a};var Cj=Xg.map({circle:Lg,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Gj)),c=b*Gj;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Fj),c=b*Fj/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Fj),c=b*Fj/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});Xg.svg.symbolTypes=Cj.keys();var Dj,Ej,Fj=Math.sqrt(3),Gj=Math.tan(30*Gh),Hj=[],Ij=0;Hj.call=th.call,Hj.empty=th.empty,Hj.node=th.node,Hj.size=th.size,Xg.transition=function(a){return arguments.length?Dj?a.transition():a:wh.transition()},Xg.transition.prototype=Hj,Hj.select=function(a){var b,c,d,e=this.id,f=[];a=A(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]);for(var i=this[g],j=-1,k=i.length;++j<k;)(d=i[j])&&(c=a.call(d,d.__data__,j,g))?("__data__"in d&&(c.__data__=d.__data__),Pg(c,j,e,d.__transition__[e]),b.push(c)):b.push(null)}return Mg(f,e)},Hj.selectAll=function(a){var b,c,d,e,f,g=this.id,h=[];a=B(a);for(var i=-1,j=this.length;++i<j;)for(var k=this[i],l=-1,m=k.length;++l<m;)if(d=k[l]){f=d.__transition__[g],c=a.call(d,d.__data__,l,i),h.push(b=[]);for(var n=-1,o=c.length;++n<o;)(e=c[n])&&Pg(e,n,g,f),b.push(e)}return Mg(h,g)},Hj.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=M(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Mg(e,this.id)},Hj.tween=function(a,b){var c=this.id;return arguments.length<2?this.node().__transition__[c].tween.get(a):O(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})},Hj.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Oe:re,h=Xg.ns.qualify(a);return Ng(this,"attr."+a,b,h.local?f:e)},Hj.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=Xg.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Hj.style=function(a,b,c){function d(){this.style.removeProperty(a)}function e(b){return null==b?d:(b+="",function(){var d,e=ah.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=re(e,b),function(b){this.style.setProperty(a,d(b),c)})})}var f=arguments.length;if(3>f){if("string"!=typeof a){2>f&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Ng(this,"style."+a,b,e)},Hj.styleTween=function(a,b,c){function d(d,e){var f=b.call(this,d,e,ah.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,d)},Hj.text=function(a){return Ng(this,"text",a,Og)},Hj.remove=function(){return this.each("end.transition",function(){var a;this.__transition__.count<2&&(a=this.parentNode)&&a.removeChild(this)})},Hj.ease=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].ease:("function"!=typeof a&&(a=Xg.ease.apply(Xg,arguments)),O(this,function(c){c.__transition__[b].ease=a}))},Hj.delay=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].delay:O(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))},Hj.duration=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].duration:O(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=a}))},Hj.each=function(a,b){var c=this.id;if(arguments.length<2){var d=Ej,e=Dj;Dj=c,O(this,function(b,d,e){Ej=b.__transition__[c],a.call(b,b.__data__,d,e)}),Ej=d,Dj=e}else O(this,function(d){var e=d.__transition__[c];(e.event||(e.event=Xg.dispatch("start","end"))).on(a,b)});return this},Hj.transition=function(){for(var a,b,c,d,e=this.id,f=++Ij,g=[],h=0,i=this.length;i>h;h++){g.push(a=[]);for(var b=this[h],j=0,k=b.length;k>j;j++)(c=b[j])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,Pg(c,j,f,d)),a.push(c)}return Mg(g,f)},Xg.svg.axis=function(){function a(a){a.each(function(){var a,j=Xg.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):Bb:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Eh),q=Xg.transition(o.exit()).style("opacity",Eh).remove(),r=Xg.transition(o.order()).style("opacity",1),s=Math.max(e,0)+g,t=Mf(l),u=j.selectAll(".domain").data([0]),v=(u.enter().append("path").attr("class","domain"),Xg.transition(u));p.append("line"),p.append("text");var w,x,y,z,A=p.select("line"),B=r.select("line"),C=o.select("text").text(n),D=p.select("text"),E=r.select("text"),F="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=Qg,w="x",y="y",x="x2",z="y2",C.attr("dy",0>F?"0em":".71em").style("text-anchor","middle"),v.attr("d","M"+t[0]+","+F*f+"V0H"+t[1]+"V"+F*f)):(a=Rg,w="y",y="x",x="y2",z="x2",C.attr("dy",".32em").style("text-anchor",0>F?"end":"start"),v.attr("d","M"+F*f+","+t[0]+"H0V"+t[1]+"H"+F*f)),A.attr(z,F*e),D.attr(y,F*s),B.attr(x,0).attr(z,F*e),E.attr(w,0).attr(y,F*s),l.rangeBand){var G=l,H=G.rangeBand()/2;k=l=function(a){return G(a)+H}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=Xg.scale.linear(),d=Jj,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Kj?b+"":Jj,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Jj="bottom",Kj={top:1,right:1,bottom:1,left:1};Xg.svg.brush=function(){function a(f){f.each(function(){var f=Xg.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),g=f.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=f.selectAll(".resize").data(o,Bb);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Lj[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var k,l=Xg.transition(f),m=Xg.transition(g);i&&(k=Mf(i),m.attr("x",k[0]).attr("width",k[1]-k[0]),c(l)),j&&(k=Mf(j),m.attr("y",k[0]).attr("height",k[1]-k[0]),d(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+k[+/e$/.test(a)]+","+l[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",k[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1]-k[0])}function d(a){a.select(".extent").attr("y",l[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function e(){function e(){32==Xg.event.keyCode&&(C||(s=null,E[0]-=k[1],E[1]-=l[1],C=2),w())}function o(){32==Xg.event.keyCode&&2==C&&(E[0]+=k[1],E[1]+=l[1],C=0,w())}function p(){var a=Xg.mouse(u),e=!1;t&&(a[0]+=t[0],a[1]+=t[1]),C||(Xg.event.altKey?(s||(s=[(k[0]+k[1])/2,(l[0]+l[1])/2]),E[0]=k[+(a[0]<s[0])],E[1]=l[+(a[1]<s[1])]):s=null),A&&q(a,i,0)&&(c(y),e=!0),B&&q(a,j,1)&&(d(y),e=!0),e&&(b(y),x({type:"brush",mode:C?"move":"resize"}))}function q(a,b,c){var d,e,h=Mf(b),i=h[0],j=h[1],o=E[c],p=c?l:k,q=p[1]-p[0];return C&&(i-=o,j-=q+o),d=(c?n:m)?Math.max(i,Math.min(j,a[c])):a[c],C?e=(d+=o)+q:(s&&(o=Math.max(i,Math.min(j,2*s[c]-d))),d>o?(e=d,d=o):e=o),p[0]!=d||p[1]!=e?(c?g=null:f=null,p[0]=d,p[1]=e,!0):void 0}function r(){p(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),Xg.select("body").style("cursor",null),F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),D(),x({type:"brushend"})}var s,t,u=this,v=Xg.select(Xg.event.target),x=h.of(u,arguments),y=Xg.select(u),z=v.datum(),A=!/^(n|s)$/.test(z)&&i,B=!/^(e|w)$/.test(z)&&j,C=v.classed("extent"),D=V(),E=Xg.mouse(u),F=Xg.select(ah).on("keydown.brush",e).on("keyup.brush",o);if(Xg.event.changedTouches?F.on("touchmove.brush",p).on("touchend.brush",r):F.on("mousemove.brush",p).on("mouseup.brush",r),y.interrupt().selectAll("*").interrupt(),C)E[0]=k[0]-E[0],E[1]=l[0]-E[1];else if(z){var G=+/w$/.test(z),H=+/^n/.test(z);t=[k[1-G]-E[0],l[1-H]-E[1]],E[0]=k[G],E[1]=l[H]}else Xg.event.altKey&&(s=E.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),Xg.select("body").style("cursor",v.style("cursor")),x({type:"brushstart"}),p()}var f,g,h=y(a,"brushstart","brush","brushend"),i=null,j=null,k=[0,0],l=[0,0],m=!0,n=!0,o=Mj[0];return a.event=function(a){a.each(function(){var a=h.of(this,arguments),b={x:k,y:l,i:f,j:g},c=this.__chart__||b;this.__chart__=b,Dj?Xg.select(this).transition().each("start.brush",function(){f=c.i,g=c.j,k=c.x,l=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=se(k,b.x),d=se(l,b.y);return f=g=null,function(e){k=b.x=c(e),l=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=b.i,g=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(i=b,o=Mj[!i<<1|!j],a):i},a.y=function(b){return arguments.length?(j=b,o=Mj[!i<<1|!j],a):j},a.clamp=function(b){return arguments.length?(i&&j?(m=!!b[0],n=!!b[1]):i?m=!!b:j&&(n=!!b),a):i&&j?[m,n]:i?m:j?n:null},a.extent=function(b){var c,d,e,h,m;return arguments.length?(i&&(c=b[0],d=b[1],j&&(c=c[0],d=d[0]),f=[c,d],i.invert&&(c=i(c),d=i(d)),c>d&&(m=c,c=d,d=m),(c!=k[0]||d!=k[1])&&(k=[c,d])),j&&(e=b[0],h=b[1],i&&(e=e[1],h=h[1]),g=[e,h],j.invert&&(e=j(e),h=j(h)),e>h&&(m=e,e=h,h=m),(e!=l[0]||h!=l[1])&&(l=[e,h])),a):(i&&(f?(c=f[0],d=f[1]):(c=k[0],d=k[1],i.invert&&(c=i.invert(c),d=i.invert(d)),c>d&&(m=c,c=d,d=m))),j&&(g?(e=g[0],h=g[1]):(e=l[0],h=l[1],j.invert&&(e=j.invert(e),h=j.invert(h)),e>h&&(m=e,e=h,h=m))),i&&j?[[c,e],[d,h]]:i?[c,d]:j&&[e,h])},a.clear=function(){return a.empty()||(k=[0,0],l=[0,0],f=g=null),a},a.empty=function(){return!!i&&k[0]==k[1]||!!j&&l[0]==l[1]},Xg.rebind(a,h,"on")};var Lj={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Mj=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Nj=ei.format=ki.timeFormat,Oj=Nj.utc,Pj=Oj("%Y-%m-%dT%H:%M:%S.%LZ");Nj.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Sg:Pj,Sg.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},Sg.toString=Pj.toString,ei.second=Ob(function(a){return new fi(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),ei.seconds=ei.second.range,ei.seconds.utc=ei.second.utc.range,ei.minute=Ob(function(a){return new fi(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),ei.minutes=ei.minute.range,ei.minutes.utc=ei.minute.utc.range,ei.hour=Ob(function(a){var b=a.getTimezoneOffset()/60;return new fi(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),ei.hours=ei.hour.range,ei.hours.utc=ei.hour.utc.range,ei.month=Ob(function(a){return a=ei.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),ei.months=ei.month.range,ei.months.utc=ei.month.utc.range;var Qj=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Rj=[[ei.second,1],[ei.second,5],[ei.second,15],[ei.second,30],[ei.minute,1],[ei.minute,5],[ei.minute,15],[ei.minute,30],[ei.hour,1],[ei.hour,3],[ei.hour,6],[ei.hour,12],[ei.day,1],[ei.day,2],[ei.week,1],[ei.month,1],[ei.month,3],[ei.year,1]],Sj=Nj.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Cc]]),Tj={range:function(a,b,c){return Xg.range(Math.ceil(a/c)*c,+b,c).map(Ug)},floor:Bb,ceil:Bb};Rj.year=ei.year,ei.scale=function(){return Tg(Xg.scale.linear(),Rj,Sj)};var Uj=Rj.map(function(a){return[a[0].utc,a[1]]}),Vj=Oj.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Cc]]);Uj.year=ei.year.utc,ei.scale.utc=function(){return Tg(Xg.scale.linear(),Uj,Vj)},Xg.text=Cb(function(a){return a.responseText}),Xg.json=function(a,b){return Db(a,"application/json",Vg,b)},Xg.html=function(a,b){return Db(a,"text/html",Wg,b)},Xg.xml=Cb(function(a){return a.responseXML}),"function"==typeof define&&define.amd?define(Xg):"object"==typeof b&&b.exports&&(b.exports=Xg),this.d3=Xg}()},{}],91:[function(a,b){(function(c){$=c.$=a("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=a,function(a,b){!function(a,c){"function"==typeof b&&b.amd?b("gridster-coords",["jquery"],c):a.GridsterCoords=c(a.$||a.jQuery)}(window,function(a){function b(b){return b[0]&&a.isPlainObject(b[0])?this.data=b[0]:this.el=b,this.isCoords=!0,this.coords={},this.init(),this}var c=b.prototype;return c.init=function(){this.set(),this.original_coords=this.get()},c.set=function(a,b){var c=this.el;if(c&&!a&&(this.data=c.offset(),this.data.width=c.width(),this.data.height=c.height()),c&&a&&!b){var d=c.offset();this.data.top=d.top,this.data.left=d.left}var e=this.data;return"undefined"==typeof e.left&&(e.left=e.x1),"undefined"==typeof e.top&&(e.top=e.y1),this.coords.x1=e.left,this.coords.y1=e.top,this.coords.x2=e.left+e.width,this.coords.y2=e.top+e.height,this.coords.cx=e.left+e.width/2,this.coords.cy=e.top+e.height/2,this.coords.width=e.width,this.coords.height=e.height,this.coords.el=c||!1,this},c.update=function(b){if(!b&&!this.el)return this;if(b){var c=a.extend({},this.data,b);return this.data=c,this.set(!0,!0)}return this.set(!0),this},c.get=function(){return this.coords},c.destroy=function(){this.el.removeData("coords"),delete this.el},a.fn.coords=function(){if(this.data("coords"))return this.data("coords");var a=new b(this,arguments[0]);return this.data("coords",a),a},b}),function(a,c){"function"==typeof b&&b.amd?b("gridster-collision",["jquery","gridster-coords"],c):a.GridsterCollision=c(a.$||a.jQuery,a.GridsterCoords)}(window,function(a){function b(b,d,e){this.options=a.extend(c,e),this.$element=b,this.last_colliders=[],this.last_colliders_coords=[],this.set_colliders(d),this.init()}var c={colliders_context:document.body,overlapping_region:"C"};b.defaults=c;var d=b.prototype;return d.init=function(){this.find_collisions()},d.overlaps=function(a,b){var c=!1,d=!1;return(b.x1>=a.x1&&b.x1<=a.x2||b.x2>=a.x1&&b.x2<=a.x2||a.x1>=b.x1&&a.x2<=b.x2)&&(c=!0),(b.y1>=a.y1&&b.y1<=a.y2||b.y2>=a.y1&&b.y2<=a.y2||a.y1>=b.y1&&a.y2<=b.y2)&&(d=!0),c&&d},d.detect_overlapping_region=function(a,b){var c="",d="";return a.y1>b.cy&&a.y1<b.y2&&(c="N"),a.y2>b.y1&&a.y2<b.cy&&(c="S"),a.x1>b.cx&&a.x1<b.x2&&(d="W"),a.x2>b.x1&&a.x2<b.cx&&(d="E"),c+d||"C"},d.calculate_overlapped_area_coords=function(b,c){var d=Math.max(b.x1,c.x1),e=Math.max(b.y1,c.y1),f=Math.min(b.x2,c.x2),g=Math.min(b.y2,c.y2);return a({left:d,top:e,width:f-d,height:g-e}).coords().get()},d.calculate_overlapped_area=function(a){return a.width*a.height},d.manage_colliders_start_stop=function(b,c,d){for(var e=this.last_colliders_coords,f=0,g=e.length;g>f;f++)-1===a.inArray(e[f],b)&&c.call(this,e[f]);for(var h=0,i=b.length;i>h;h++)-1===a.inArray(b[h],e)&&d.call(this,b[h])},d.find_collisions=function(b){for(var c=this,d=this.options.overlapping_region,e=[],f=[],g=this.colliders||this.$colliders,h=g.length,i=c.$element.coords().update(b||!1).get();h--;){var j=c.$colliders?a(g[h]):g[h],k=j.isCoords?j:j.coords(),l=k.get(),m=c.overlaps(i,l);if(m){var n=c.detect_overlapping_region(i,l);if(n===d||"all"===d){var o=c.calculate_overlapped_area_coords(i,l),p=c.calculate_overlapped_area(o),q={area:p,area_coords:o,region:n,coords:l,player_coords:i,el:j};c.options.on_overlap&&c.options.on_overlap.call(this,q),e.push(k),f.push(q)}}}return(c.options.on_overlap_stop||c.options.on_overlap_start)&&this.manage_colliders_start_stop(e,c.options.on_overlap_start,c.options.on_overlap_stop),this.last_colliders_coords=e,f},d.get_closest_colliders=function(a){var b=this.find_collisions(a);return b.sort(function(a,b){return"C"===a.region&&"C"===b.region?a.coords.y1<b.coords.y1||a.coords.x1<b.coords.x1?-1:1:a.area<b.area?1:1}),b},d.set_colliders=function(b){"string"==typeof b||b instanceof a?this.$colliders=a(b,this.options.colliders_context).not(this.$element):this.colliders=a(b)},a.fn.collision=function(a,c){return new b(this,a,c)},b}),function(a){a.delay=function(a,b){var c=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},a.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},a.throttle=function(a,b){var c,d,e,f,g,h,i=debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&a.apply(c,d),i()};return e||(e=setTimeout(j,b)),f?g=!0:h=a.apply(c,d),i(),f=!0,h}}}(window),function(a,c){"function"==typeof b&&b.amd?b("gridster-draggable",["jquery"],c):a.GridsterDraggable=c(a.$||a.jQuery)}(window,function(a){function b(b,d){this.options=a.extend({},c,d),this.$document=a(document),this.$container=a(b),this.$dragitems=a(this.options.items,this.$container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.id=i(),this.ns=".gridster-draggable-"+this.id,this.init()}var c={items:"li",distance:1,limit:!0,offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null,container_width:0,move_element:!0,helper:!1,remove_helper:!0},d=a(window),e={x:"left",y:"top"},f=!!("ontouchstart"in window),g=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},h=0,i=function(){return++h+""};b.defaults=c;var j=b.prototype;return j.init=function(){var b=this.$container.css("position");this.calculate_dimensions(),this.$container.css("position","static"===b?"relative":b),this.disabled=!1,this.events(),a(window).bind(this.nsEvent("resize"),throttle(a.proxy(this.calculate_dimensions,this),200))},j.nsEvent=function(a){return(a||"")+this.ns},j.events=function(){this.pointer_events={start:this.nsEvent("touchstart")+" "+this.nsEvent("mousedown"),move:this.nsEvent("touchmove")+" "+this.nsEvent("mousemove"),end:this.nsEvent("touchend")+" "+this.nsEvent("mouseup")},this.$container.on(this.nsEvent("selectstart"),a.proxy(this.on_select_start,this)),this.$container.on(this.pointer_events.start,this.options.items,a.proxy(this.drag_handler,this)),this.$document.on(this.pointer_events.end,a.proxy(function(a){this.is_dragging=!1,this.disabled||(this.$document.off(this.pointer_events.move),this.drag_start&&this.on_dragstop(a))},this))},j.get_actual_pos=function(a){var b=a.position();return b},j.get_mouse_pos=function(a){if(a.originalEvent&&a.originalEvent.touches){var b=a.originalEvent;a=b.touches.length?b.touches[0]:b.changedTouches[0]}return{left:a.clientX,top:a.clientY}},j.get_offset=function(b){b.preventDefault();var c=this.get_mouse_pos(b),d=Math.round(c.left-this.mouse_init_pos.left),e=Math.round(c.top-this.mouse_init_pos.top),f=Math.round(this.el_init_offset.left+d-this.baseX+a(window).scrollLeft()-this.win_offset_x),g=Math.round(this.el_init_offset.top+e-this.baseY+a(window).scrollTop()-this.win_offset_y);return this.options.limit&&(f>this.player_max_left?f=this.player_max_left:f<this.player_min_left&&(f=this.player_min_left)),{position:{left:f,top:g},pointer:{left:c.left,top:c.top,diff_left:d+(a(window).scrollLeft()-this.win_offset_x),diff_top:e+(a(window).scrollTop()-this.win_offset_y)}}},j.get_drag_data=function(a){var b=this.get_offset(a);return b.$player=this.$player,b.$helper=this.helper?this.$helper:this.$player,b},j.set_limits=function(a){return a||(a=this.$container.width()),this.player_max_left=a-this.player_width+-this.options.offset_left,this.options.container_width=a,this},j.scroll_in=function(b,c){var f,h=e[b],i=50,j=30,k="x"===b,l=k?this.window_width:this.window_height,m=k?a(document).width():a(document).height(),n=k?this.$player.width():this.$player.height(),o=d["scroll"+g(h)](),p=o,q=p+l,r=q-i,s=p+i,t=p+c.pointer[h],u=m-l+n;return t>=r&&(f=o+j,u>f&&(d["scroll"+g(h)](f),this["scroll_offset_"+b]+=j)),s>=t&&(f=o-j,f>0&&(d["scroll"+g(h)](f),this["scroll_offset_"+b]-=j)),this},j.manage_scroll=function(a){this.scroll_in("x",a),this.scroll_in("y",a)},j.calculate_dimensions=function(){this.window_height=d.height(),this.window_width=d.width()},j.drag_handler=function(b){b.target.nodeName;if(!this.disabled&&(1===b.which||f)&&!this.ignore_drag(b)){var c=this,d=!0;return this.$player=a(b.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(b),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.$document.on(this.pointer_events.move,function(a){var b=c.get_mouse_pos(a),e=Math.abs(b.left-c.mouse_init_pos.left),f=Math.abs(b.top-c.mouse_init_pos.top);return e>c.options.distance||f>c.options.distance?d?(d=!1,c.on_dragstart.call(c,a),!1):(c.is_dragging===!0&&c.on_dragmove.call(c,a),!1):!1}),f?void 0:!1}},j.on_dragstart=function(b){if(b.preventDefault(),this.is_dragging)return this;this.drag_start=this.is_dragging=!0;var c=this.$container.offset();return this.baseX=Math.round(c.left),this.baseY=Math.round(c.top),this.initial_container_width=this.options.container_width||this.$container.width(),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.win_offset_y=a(window).scrollTop(),this.win_offset_x=a(window).scrollLeft(),this.scroll_offset_y=0,this.scroll_offset_x=0,this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.set_limits(this.options.container_width),this.options.start&&this.options.start.call(this.$player,b,this.get_drag_data(b)),!1},j.on_dragmove=function(a){var b=this.get_drag_data(a);this.options.autoscroll&&this.manage_scroll(b),this.options.move_element&&(this.helper?this.$helper:this.$player).css({position:"absolute",left:b.position.left,top:b.position.top});var c=this.last_position||b.position;return b.prev_position=c,this.options.drag&&this.options.drag.call(this.$player,a,b),this.last_position=b.position,!1},j.on_dragstop=function(a){var b=this.get_drag_data(a);return this.drag_start=!1,this.options.stop&&this.options.stop.call(this.$player,a,b),this.helper&&this.options.remove_helper&&this.$helper.remove(),!1},j.on_select_start=function(a){return this.disabled||this.ignore_drag(a)?void 0:!1},j.enable=function(){this.disabled=!1},j.disable=function(){this.disabled=!0},j.destroy=function(){this.disable(),this.$container.off(this.ns),this.$document.off(this.ns),a(window).off(this.ns),a.removeData(this.$container,"drag")},j.ignore_drag=function(b){return this.options.handle?!a(b.target).is(this.options.handle):a.isFunction(this.options.ignore_dragging)?this.options.ignore_dragging(b):a(b.target).is(this.options.ignore_dragging.join(", "))},a.fn.drag=function(a){return new b(this,a)},b}),function(a,c){"function"==typeof b&&b.amd?b(["jquery","gridster-draggable","gridster-collision"],c):a.Gridster=c(a.$||a.jQuery,a.GridsterDraggable,a.GridsterCollision)}(window,function(a,b){function c(b,c){this.options=a.extend(!0,{},d,c),this.$el=a(b),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs-w"),this.widgets=[],this.$changed=a([]),this.wrapper_width=this.$wrapper.width(),this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this.generated_stylesheets=[],this.$style_tags=a([]),this.options.auto_init&&this.init()}var d={namespace:"",widget_selector:"li",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:1/0,min_rows:15,max_size_x:!1,autogrow_cols:!1,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,auto_init:!0,serialize_params:function(a,b){return{col:b.col,row:b.row,size_x:b.size_x,size_y:b.size_y}},collision:{},draggable:{items:".gs-w",distance:4,ignore_dragging:b.defaults.ignore_dragging.slice(0)},resize:{enabled:!1,axes:["both"],handle_append_to:"",handle_class:"gs-resize-handle",max_size:[1/0,1/0],min_size:[1,1]}};c.defaults=d,c.generated_stylesheets=[],c.sort_by_row_asc=function(b){return b=b.sort(function(b,c){return b.row||(b=a(b).coords().grid,c=a(c).coords().grid),b.row>c.row?1:-1})},c.sort_by_row_and_col_asc=function(a){return a=a.sort(function(a,b){return a.row>b.row||a.row===b.row&&a.col>b.col?1:-1})},c.sort_by_col_asc=function(a){return a=a.sort(function(a,b){return a.col>b.col?1:-1})},c.sort_by_row_desc=function(a){return a=a.sort(function(a,b){return a.row+a.size_y<b.row+b.size_y?1:-1})};var e=c.prototype;return e.init=function(){this.options.resize.enabled&&this.setup_resize(),this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.set_dom_grid_width(),this.$wrapper.addClass("ready"),this.draggable(),this.options.resize.enabled&&this.resizable(),a(window).bind("resize.gridster",throttle(a.proxy(this.recalculate_faux_grid,this),200))},e.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},e.enable=function(){return this.drag_api.enable(),this},e.disable_resize=function(){return this.$el.addClass("gs-resize-disabled"),this.resize_api.disable(),this},e.enable_resize=function(){return this.$el.removeClass("gs-resize-disabled"),this.resize_api.enable(),this},e.add_widget=function(b,c,d,e,f,g,h){var i;c||(c=1),d||(d=1),!e&!f?i=this.next_position(c,d):(i={col:e,row:f,size_x:c,size_y:d},this.empty_cells(e,f,c,d));var j=a(b).attr({"data-col":i.col,"data-row":i.row,"data-sizex":c,"data-sizey":d}).addClass("gs-w").appendTo(this.$el).hide();return this.$widgets=this.$widgets.add(j),this.register_widget(j),this.add_faux_rows(i.size_y),g&&this.set_widget_max_size(j,g),h&&this.set_widget_min_size(j,h),this.set_dom_grid_width(),this.set_dom_grid_height(),this.drag_api.set_limits(this.cols*this.min_widget_width),j.fadeIn()
},e.set_widget_min_size=function(a,b){if(a="number"==typeof a?this.$widgets.eq(a):a,!a.length)return this;var c=a.data("coords").grid;return c.min_size_x=b[0],c.min_size_y=b[1],this},e.set_widget_max_size=function(a,b){if(a="number"==typeof a?this.$widgets.eq(a):a,!a.length)return this;var c=a.data("coords").grid;return c.max_size_x=b[0],c.max_size_y=b[1],this},e.add_resize_handle=function(b){var c=this.options.resize.handle_append_to;return a(this.resize_handle_tpl).appendTo(c?a(c,b):b),this},e.resize_widget=function(a,b,c,d){var e=a.coords().grid,f=e.col,g=this.options.max_cols,h=e.size_y,i=e.col,j=i;b||(b=e.size_x),c||(c=e.size_y),1/0!==g&&(b=Math.min(b,g-f+1)),c>h&&this.add_faux_rows(Math.max(c-h,0));var k=f+b-1;k>this.cols&&this.add_faux_cols(k-this.cols);var l={col:j,row:e.row,size_x:b,size_y:c};return this.mutate_widget_in_gridmap(a,e,l),this.set_dom_grid_height(),this.set_dom_grid_width(),d&&d.call(this,l.size_x,l.size_y),a},e.mutate_widget_in_gridmap=function(b,c,d){var e=(c.size_x,c.size_y),f=this.get_cells_occupied(c),g=this.get_cells_occupied(d),h=[];a.each(f.cols,function(b,c){-1===a.inArray(c,g.cols)&&h.push(c)});var i=[];a.each(g.cols,function(b,c){-1===a.inArray(c,f.cols)&&i.push(c)});var j=[];a.each(f.rows,function(b,c){-1===a.inArray(c,g.rows)&&j.push(c)});var k=[];if(a.each(g.rows,function(b,c){-1===a.inArray(c,f.rows)&&k.push(c)}),this.remove_from_gridmap(c),i.length){var l=[d.col,d.row,d.size_x,Math.min(e,d.size_y),b];this.empty_cells.apply(this,l)}if(k.length){var m=[d.col,d.row,d.size_x,d.size_y,b];this.empty_cells.apply(this,m)}if(c.col=d.col,c.row=d.row,c.size_x=d.size_x,c.size_y=d.size_y,this.add_to_gridmap(d,b),b.removeClass("player-revert"),b.data("coords").update({width:d.size_x*this.options.widget_base_dimensions[0]+(d.size_x-1)*this.options.widget_margins[0]*2,height:d.size_y*this.options.widget_base_dimensions[1]+(d.size_y-1)*this.options.widget_margins[1]*2}),b.attr({"data-col":d.col,"data-row":d.row,"data-sizex":d.size_x,"data-sizey":d.size_y}),h.length){var n=[h[0],d.row,h.length,Math.min(e,d.size_y),b];this.remove_empty_cells.apply(this,n)}if(j.length){var o=[d.col,d.row,d.size_x,d.size_y,b];this.remove_empty_cells.apply(this,o)}return this.move_widget_up(b),this},e.empty_cells=function(b,c,d,e,f){var g=this.widgets_below({col:b,row:c-e,size_x:d,size_y:e});return g.not(f).each(a.proxy(function(b,d){var f=a(d).coords().grid;if(f.row<=c+e-1){var g=c+e-f.row;this.move_widget_down(a(d),g)}},this)),this.set_dom_grid_height(),this},e.remove_empty_cells=function(b,c,d,e,f){var g=this.widgets_below({col:b,row:c,size_x:d,size_y:e});return g.not(f).each(a.proxy(function(b,c){this.move_widget_up(a(c),e)},this)),this.set_dom_grid_height(),this},e.next_position=function(a,b){a||(a=1),b||(b=1);for(var d,e=this.gridmap,f=e.length,g=[],h=1;f>h;h++){d=e[h].length;for(var i=1;d>=i;i++){var j=this.can_move_to({size_x:a,size_y:b},h,i);j&&g.push({col:h,row:i,size_y:b,size_x:a})}}return g.length?c.sort_by_row_and_col_asc(g)[0]:!1},e.remove_widget=function(b,c,d){var e=b instanceof a?b:a(b),f=e.coords().grid;a.isFunction(c)&&(d=c,c=!1),this.cells_occupied_by_placeholder={},this.$widgets=this.$widgets.not(e);var g=this.widgets_below(e);return this.remove_from_gridmap(f),e.fadeOut(a.proxy(function(){e.remove(),c||g.each(a.proxy(function(b,c){this.move_widget_up(a(c),f.size_y)},this)),this.set_dom_grid_height(),d&&d.call(this,b)},this)),this},e.remove_all_widgets=function(b){return this.$widgets.each(a.proxy(function(a,c){this.remove_widget(c,!0,b)},this)),this},e.serialize=function(b){return b||(b=this.$widgets),b.map(a.proxy(function(b,c){var d=a(c);return this.options.serialize_params(d,d.coords().grid)},this)).get()},e.serialize_changed=function(){return this.serialize(this.$changed)},e.dom_to_coords=function(a){return{col:parseInt(a.attr("data-col"),10),row:parseInt(a.attr("data-row"),10),size_x:parseInt(a.attr("data-sizex"),10)||1,size_y:parseInt(a.attr("data-sizey"),10)||1,max_size_x:parseInt(a.attr("data-max-sizex"),10)||!1,max_size_y:parseInt(a.attr("data-max-sizey"),10)||!1,min_size_x:parseInt(a.attr("data-min-sizex"),10)||!1,min_size_y:parseInt(a.attr("data-min-sizey"),10)||!1,el:a}},e.register_widget=function(b){var c=b instanceof jQuery,d=c?this.dom_to_coords(b):b,e=!1;c||(b=d.el);var f=this.can_go_widget_up(d);return f&&(d.row=f,b.attr("data-row",f),this.$el.trigger("gridster:positionchanged",[d]),e=!0),this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:d.size_x,size_y:d.size_y},d.col,d.row)&&(a.extend(d,this.next_position(d.size_x,d.size_y)),b.attr({"data-col":d.col,"data-row":d.row,"data-sizex":d.size_x,"data-sizey":d.size_y}),e=!0),b.data("coords",b.coords()),b.data("coords").grid=d,this.add_to_gridmap(d,b),this.options.resize.enabled&&this.add_resize_handle(b),e},e.update_widget_position=function(a,b){return this.for_each_cell_occupied(a,function(a,c){return this.gridmap[a]?void(this.gridmap[a][c]=b):this}),this},e.remove_from_gridmap=function(a){return this.update_widget_position(a,!1)},e.add_to_gridmap=function(b,c){if(this.update_widget_position(b,c||b.el),b.el){var d=this.widgets_below(b.el);d.each(a.proxy(function(b,c){this.move_widget_up(a(c))},this))}},e.draggable=function(){var b=this,c=a.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],offset_top:this.options.widget_margins[1],container_width:this.cols*this.min_widget_width,limit:!0,start:function(c,d){b.$widgets.filter(".player-revert").removeClass("player-revert"),b.$player=a(this),b.$helper=a(d.$helper),b.helper=!b.$helper.is(b.$player),b.on_start_drag.call(b,c,d),b.$el.trigger("gridster:dragstart")},stop:function(a,c){b.on_stop_drag.call(b,a,c),b.$el.trigger("gridster:dragstop")},drag:throttle(function(a,c){b.on_drag.call(b,a,c),b.$el.trigger("gridster:drag")},60)});return this.drag_api=this.$el.drag(c),this},e.resizable=function(){return this.resize_api=this.$el.drag({items:"."+this.options.resize.handle_class,offset_left:this.options.widget_margins[0],container_width:this.container_width,move_element:!1,resize:!0,limit:this.options.autogrow_cols?!1:!0,start:a.proxy(this.on_start_resize,this),stop:a.proxy(function(b,c){delay(a.proxy(function(){this.on_stop_resize(b,c)},this),120)},this),drag:throttle(a.proxy(this.on_resize,this),60)}),this},e.setup_resize=function(){this.resize_handle_class=this.options.resize.handle_class;var b=this.options.resize.axes,c='<span class="'+this.resize_handle_class+" "+this.resize_handle_class+'-{type}" />';return this.resize_handle_tpl=a.map(b,function(a){return c.replace("{type}",a)}).join(""),a.isArray(this.options.draggable.ignore_dragging)&&this.options.draggable.ignore_dragging.push("."+this.resize_handle_class),this},e.on_start_drag=function(b,c){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.highest_col=this.get_highest_occupied_cell().col,this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=a.extend({},this.player_grid_data),this.set_dom_grid_height(this.$el.height()+this.player_grid_data.size_y*this.min_widget_height),this.set_dom_grid_width(this.cols);var d=this.player_grid_data.size_x,e=this.cols-this.highest_col;this.options.autogrow_cols&&d>=e&&this.add_faux_cols(Math.min(d-e,1));var f=this.faux_grid,g=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(f,this.options.collision),this.$preview_holder=a("<"+this.$player.get(0).tagName+" />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:g.width,height:g.height}}).appendTo(this.$el),this.options.draggable.start&&this.options.draggable.start.call(this,b,c)},e.on_drag=function(a,b){if(null===this.$player)return!1;var c={left:b.position.left+this.baseX,top:b.position.top+this.baseY};if(this.options.autogrow_cols){var d=this.placeholder_grid_data.col+this.placeholder_grid_data.size_x-1;d>=this.cols-1&&this.options.max_cols>=this.cols+1&&(this.add_faux_cols(1),this.set_dom_grid_width(this.cols+1),this.drag_api.set_limits(this.container_width)),this.collision_api.set_colliders(this.faux_grid)}this.colliders_data=this.collision_api.get_closest_colliders(c),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({left:b.position.left,top:b.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,a,b)},e.on_stop_drag=function(a,b){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging"),b.position.left=b.position.left+this.baseX,b.position.top=b.position.top+this.baseY,this.colliders_data=this.collision_api.get_closest_colliders(b.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$player.addClass("player-revert").removeClass("player").attr({"data-col":this.placeholder_grid_data.col,"data-row":this.placeholder_grid_data.row}).css({left:"",top:""}),this.$changed=this.$changed.add(this.$player),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data),this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row),this.$player.coords().grid.row=this.placeholder_grid_data.row,this.$player.coords().grid.col=this.placeholder_grid_data.col,this.options.draggable.stop&&this.options.draggable.stop.call(this,a,b),this.$preview_holder.remove(),this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.set_dom_grid_height(),this.set_dom_grid_width(),this.options.autogrow_cols&&this.drag_api.set_limits(this.cols*this.min_widget_width)},e.on_start_resize=function(b,c){this.$resized_widget=c.$player.closest(".gs-w"),this.resize_coords=this.$resized_widget.coords(),this.resize_wgd=this.resize_coords.grid,this.resize_initial_width=this.resize_coords.coords.width,this.resize_initial_height=this.resize_coords.coords.height,this.resize_initial_sizex=this.resize_coords.grid.size_x,this.resize_initial_sizey=this.resize_coords.grid.size_y,this.resize_initial_col=this.resize_coords.grid.col,this.resize_last_sizex=this.resize_initial_sizex,this.resize_last_sizey=this.resize_initial_sizey,this.resize_max_size_x=Math.min(this.resize_wgd.max_size_x||this.options.resize.max_size[0],this.options.max_cols-this.resize_initial_col+1),this.resize_max_size_y=this.resize_wgd.max_size_y||this.options.resize.max_size[1],this.resize_min_size_x=this.resize_wgd.min_size_x||this.options.resize.min_size[0]||1,this.resize_min_size_y=this.resize_wgd.min_size_y||this.options.resize.min_size[1]||1,this.resize_initial_last_col=this.get_highest_occupied_cell().col,this.set_dom_grid_width(this.cols),this.resize_dir={right:c.$player.is("."+this.resize_handle_class+"-x"),bottom:c.$player.is("."+this.resize_handle_class+"-y")},this.$resized_widget.css({"min-width":this.options.widget_base_dimensions[0],"min-height":this.options.widget_base_dimensions[1]});var d=this.$resized_widget.get(0).tagName;this.$resize_preview_holder=a("<"+d+" />",{"class":"preview-holder resize-preview-holder","data-row":this.$resized_widget.attr("data-row"),"data-col":this.$resized_widget.attr("data-col"),css:{width:this.resize_initial_width,height:this.resize_initial_height}}).appendTo(this.$el),this.$resized_widget.addClass("resizing"),this.options.resize.start&&this.options.resize.start.call(this,b,c,this.$resized_widget),this.$el.trigger("gridster:resizestart")},e.on_stop_resize=function(b,c){this.$resized_widget.removeClass("resizing").css({width:"",height:""}),delay(a.proxy(function(){this.$resize_preview_holder.remove().css({"min-width":"","min-height":""}),this.options.resize.stop&&this.options.resize.stop.call(this,b,c,this.$resized_widget),this.$el.trigger("gridster:resizestop")},this),300),this.set_dom_grid_width(),this.options.autogrow_cols&&this.drag_api.set_limits(this.cols*this.min_widget_width)},e.on_resize=function(a,b){var c,d=b.pointer.diff_left,e=b.pointer.diff_top,f=this.options.widget_base_dimensions[0],g=this.options.widget_base_dimensions[1],h=this.options.widget_margins[0],i=this.options.widget_margins[1],j=this.resize_max_size_x,k=this.resize_min_size_x,l=this.resize_max_size_y,m=this.resize_min_size_y,n=this.options.autogrow_cols,o=1/0,p=1/0,q=Math.ceil(d/(f+2*h)-.2),r=Math.ceil(e/(g+2*i)-.2),s=Math.max(1,this.resize_initial_sizex+q),t=Math.max(1,this.resize_initial_sizey+r),u=this.container_width/this.min_widget_width-this.resize_initial_col+1,v=u*this.min_widget_width-2*h;if(s=Math.max(Math.min(s,j),k),s=Math.min(u,s),c=j*f+(s-1)*h*2,o=Math.min(c,v),min_width=k*f+(s-1)*h*2,t=Math.max(Math.min(t,l),m),p=l*g+(t-1)*i*2,min_height=m*g+(t-1)*i*2,this.resize_dir.right?t=this.resize_initial_sizey:this.resize_dir.bottom&&(s=this.resize_initial_sizex),n){var w=this.resize_initial_col+s-1;n&&this.resize_initial_last_col<=w&&(this.set_dom_grid_width(Math.max(w+1,this.cols)),this.cols<w&&this.add_faux_cols(w-this.cols))}var x={};!this.resize_dir.bottom&&(x.width=Math.max(Math.min(this.resize_initial_width+d,o),min_width)),!this.resize_dir.right&&(x.height=Math.max(Math.min(this.resize_initial_height+e,p),min_height)),this.$resized_widget.css(x),(s!==this.resize_last_sizex||t!==this.resize_last_sizey)&&(this.resize_widget(this.$resized_widget,s,t),this.set_dom_grid_width(this.cols),this.$resize_preview_holder.css({width:"",height:""}).attr({"data-row":this.$resized_widget.attr("data-row"),"data-sizex":s,"data-sizey":t})),this.options.resize.resize&&this.options.resize.resize.call(this,a,b,this.$resized_widget),this.$el.trigger("gridster:resize"),this.resize_last_sizex=s,this.resize_last_sizey=t},e.on_overlapped_column_change=function(b,c){if(!this.colliders_data.length)return this;var d,e=this.get_targeted_columns(this.colliders_data[0].el.data.col),f=this.last_cols.length,g=e.length;for(d=0;g>d;d++)-1===a.inArray(e[d],this.last_cols)&&(b||a.noop).call(this,e[d]);for(d=0;f>d;d++)-1===a.inArray(this.last_cols[d],e)&&(c||a.noop).call(this,this.last_cols[d]);return this.last_cols=e,this},e.on_overlapped_row_change=function(b,c){if(!this.colliders_data.length)return this;var d,e=this.get_targeted_rows(this.colliders_data[0].el.data.row),f=this.last_rows.length,g=e.length;for(d=0;g>d;d++)-1===a.inArray(e[d],this.last_rows)&&(b||a.noop).call(this,e[d]);for(d=0;f>d;d++)-1===a.inArray(this.last_rows[d],e)&&(c||a.noop).call(this,this.last_rows[d]);this.last_rows=e},e.set_player=function(a,b,c){var d=this;c||this.empty_cells_player_occupies();var e=c?{col:a}:d.colliders_data[0].el.data,f=e.col,g=b||e.row;this.player_grid_data={col:f,row:g,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);var h=this.get_widgets_overlapped(this.player_grid_data),i=this.widgets_constraints(h);if(this.manage_movements(i.can_go_up,f,g),this.manage_movements(i.can_not_go_up,f,g),!h.length){var j=this.can_go_player_up(this.player_grid_data);j!==!1&&(g=j),this.set_placeholder(f,g)}return{col:f,row:g}},e.widgets_constraints=function(b){var d,e=a([]),f=[],g=[];return b.each(a.proxy(function(b,c){var d=a(c),h=d.coords().grid;this.can_go_widget_up(h)?(e=e.add(d),f.push(h)):g.push(h)},this)),d=b.not(e),{can_go_up:c.sort_by_row_asc(f),can_not_go_up:c.sort_by_row_desc(g)}},e.manage_movements=function(b,c,d){return a.each(b,a.proxy(function(a,b){var e=b,f=e.el,g=this.can_go_widget_up(e);if(g)this.move_widget_to(f,g),this.set_placeholder(c,g+e.size_y);else{var h=this.can_go_player_up(this.player_grid_data);if(!h){var i=d+this.player_grid_data.size_y-e.row;this.move_widget_down(f,i),this.set_placeholder(c,d)}}},this)),this},e.is_player=function(a,b){if(b&&!this.gridmap[a])return!1;var c=b?this.gridmap[a][b]:a;return c&&(c.is(this.$player)||c.is(this.$helper))},e.is_player_in=function(b,c){var d=this.cells_occupied_by_player||{};return a.inArray(b,d.cols)>=0&&a.inArray(c,d.rows)>=0},e.is_placeholder_in=function(b,c){var d=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(b)&&a.inArray(c,d.rows)>=0},e.is_placeholder_in_col=function(b){var c=this.cells_occupied_by_placeholder||[];return a.inArray(b,c.cols)>=0},e.is_empty=function(a,b){return"undefined"!=typeof this.gridmap[a]?"undefined"!=typeof this.gridmap[a][b]&&this.gridmap[a][b]===!1?!0:!1:!0},e.is_occupied=function(a,b){return this.gridmap[a]&&this.gridmap[a][b]?!0:!1},e.is_widget=function(a,b){var c=this.gridmap[a];return c?(c=c[b],c?c:!1):!1},e.is_widget_under_player=function(a,b){return this.is_widget(a,b)?this.is_player_in(a,b):!1},e.get_widgets_under_player=function(b){b||(b=this.cells_occupied_by_player||{cols:[],rows:[]});var c=a([]);return a.each(b.cols,a.proxy(function(d,e){a.each(b.rows,a.proxy(function(a,b){this.is_widget(e,b)&&(c=c.add(this.gridmap[e][b]))},this))},this)),c},e.set_placeholder=function(b,c){var d=a.extend({},this.placeholder_grid_data),e=this.widgets_below({col:d.col,row:d.row,size_y:d.size_y,size_x:d.size_x}),f=b+d.size_x-1;f>this.cols&&(b-=f-b);var g=this.placeholder_grid_data.row<c,h=this.placeholder_grid_data.col!==b;this.placeholder_grid_data.col=b,this.placeholder_grid_data.row=c,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":c,"data-col":b}),(g||h)&&e.each(a.proxy(function(c,e){this.move_widget_up(a(e),this.placeholder_grid_data.col-b+d.size_y)},this));var i=this.get_widgets_under_player(this.cells_occupied_by_placeholder);i.length&&i.each(a.proxy(function(b,e){var f=a(e);this.move_widget_down(f,c+d.size_y-f.data("coords").grid.row)},this))},e.can_go_player_up=function(a){var b=a.row+a.size_y-1,c=!0,d=[],e=1e4,f=this.get_widgets_under_player();return this.for_each_column_occupied(a,function(a){var g=this.gridmap[a],h=b+1;for(d[a]=[];--h>0&&(this.is_empty(a,h)||this.is_player(a,h)||this.is_widget(a,h)&&g[h].is(f));)d[a].push(h),e=e>h?h:e;return 0===d[a].length?(c=!1,!0):void d[a].sort(function(a,b){return a-b})}),c?this.get_valid_rows(a,d,e):!1},e.can_go_widget_up=function(a){var b=a.row+a.size_y-1,c=!0,d=[],e=1e4;return this.for_each_column_occupied(a,function(f){var g=this.gridmap[f];d[f]=[];for(var h=b+1;--h>0&&(!this.is_widget(f,h)||this.is_player_in(f,h)||g[h].is(a.el));)this.is_player(f,h)||this.is_placeholder_in(f,h)||this.is_player_in(f,h)||d[f].push(h),e>h&&(e=h);return 0===d[f].length?(c=!1,!0):void d[f].sort(function(a,b){return a-b})}),c?this.get_valid_rows(a,d,e):!1},e.get_valid_rows=function(b,c,d){for(var e=b.row,f=b.row+b.size_y-1,g=b.size_y,h=d-1,i=[];++h<=f;){var j=!0;if(a.each(c,function(b,c){a.isArray(c)&&-1===a.inArray(h,c)&&(j=!1)}),j===!0&&(i.push(h),i.length===g))break}var k=!1;return 1===g?i[0]!==e&&(k=i[0]||!1):i[0]!==e&&(k=this.get_consecutive_numbers_index(i,g)),k},e.get_consecutive_numbers_index=function(a,b){for(var c=a.length,d=[],e=!0,f=-1,g=0;c>g;g++){if(e||a[g]===f+1){if(d.push(g),d.length===b)break;e=!1}else d=[],e=!0;f=a[g]}return d.length>=b?a[d[0]]:!1},e.get_widgets_overlapped=function(){var b=a([]),c=[],d=this.cells_occupied_by_player.rows.slice(0);return d.reverse(),a.each(this.cells_occupied_by_player.cols,a.proxy(function(e,f){a.each(d,a.proxy(function(d,e){if(!this.gridmap[f])return!0;var g=this.gridmap[f][e];this.is_occupied(f,e)&&!this.is_player(g)&&-1===a.inArray(g,c)&&(b=b.add(g),c.push(g))},this))},this)),b},e.on_start_overlapping_column=function(a){this.set_player(a,!1)},e.on_start_overlapping_row=function(a){this.set_player(!1,a)},e.on_stop_overlapping_column=function(a){this.set_player(a,!1);var b=this;this.for_each_widget_below(a,this.cells_occupied_by_player.rows[0],function(){b.move_widget_up(this,b.player_grid_data.size_y)})},e.on_stop_overlapping_row=function(a){this.set_player(!1,a);for(var b=this,c=this.cells_occupied_by_player.cols,d=0,e=c.length;e>d;d++)this.for_each_widget_below(c[d],a,function(){b.move_widget_up(this,b.player_grid_data.size_y)})},e.move_widget_to=function(b,c){var d=this,e=b.coords().grid,f=(c-e.row,this.widgets_below(b)),g=this.can_move_to(e,e.col,c,b);return g===!1?!1:(this.remove_from_gridmap(e),e.row=c,this.add_to_gridmap(e),b.attr("data-row",c),this.$changed=this.$changed.add(b),f.each(function(b,c){var e=a(c),f=e.coords().grid,g=d.can_go_widget_up(f);g&&g!==f.row&&d.move_widget_to(e,g)}),this)},e.move_widget_up=function(b,c){var d=b.coords().grid,e=d.row,f=[];return c||(c=1),this.can_go_up(b)?void this.for_each_column_occupied(d,function(d){if(-1===a.inArray(b,f)){var g=b.coords().grid,h=e-c;if(h=this.can_go_up_to_row(g,d,h),!h)return!0;var i=this.widgets_below(b);this.remove_from_gridmap(g),g.row=h,this.add_to_gridmap(g),b.attr("data-row",g.row),this.$changed=this.$changed.add(b),f.push(b),i.each(a.proxy(function(b,d){this.move_widget_up(a(d),c)},this))}}):!1},e.move_widget_down=function(b,c){var d,e,f,g;if(0>=c)return!1;if(d=b.coords().grid,e=d.row,f=[],g=c,!b)return!1;if(-1===a.inArray(b,f)){var h=b.coords().grid,i=e+c,j=this.widgets_below(b);this.remove_from_gridmap(h),j.each(a.proxy(function(b,c){var d=a(c),e=d.coords().grid,f=this.displacement_diff(e,h,g);f>0&&this.move_widget_down(d,f)},this)),h.row=i,this.update_widget_position(h,b),b.attr("data-row",h.row),this.$changed=this.$changed.add(b),f.push(b)}},e.can_go_up_to_row=function(b,c,d){var e,f=this.gridmap,g=!0,h=[],i=b.row;if(this.for_each_column_occupied(b,function(a){f[a];for(h[a]=[],e=i;e--&&this.is_empty(a,e)&&!this.is_placeholder_in(a,e);)h[a].push(e);return h[a].length?void 0:(g=!1,!0)}),!g)return!1;for(e=d,e=1;i>e;e++){for(var j=!0,k=0,l=h.length;l>k;k++)h[k]&&-1===a.inArray(e,h[k])&&(j=!1);if(j===!0){g=e;break}}return g},e.displacement_diff=function(a,b,c){var d=a.row,e=[],f=b.row+b.size_y;this.for_each_column_occupied(a,function(a){for(var b=0,c=f;d>c;c++)this.is_empty(a,c)&&(b+=1);e.push(b)});var g=Math.max.apply(Math,e);return c-=g,c>0?c:0},e.widgets_below=function(b){var d=a.isPlainObject(b)?b:b.coords().grid,e=this,f=(this.gridmap,d.row+d.size_y-1),g=a([]);return this.for_each_column_occupied(d,function(b){e.for_each_widget_below(b,f,function(){return e.is_player(this)||-1!==a.inArray(this,g)?void 0:(g=g.add(this),!0)})}),c.sort_by_row_asc(g)},e.set_cells_player_occupies=function(a,b){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=a,this.placeholder_grid_data.row=b,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this},e.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},e.can_go_up=function(a){var b=a.coords().grid,c=b.row,d=c-1,e=(this.gridmap,!0);return 1===c?!1:(this.for_each_column_occupied(b,function(a){this.is_widget(a,d);return this.is_occupied(a,d)||this.is_player(a,d)||this.is_placeholder_in(a,d)||this.is_player_in(a,d)?(e=!1,!0):void 0}),e)},e.can_move_to=function(a,b,c,d){var e=(this.gridmap,a.el),f={size_y:a.size_y,size_x:a.size_x,col:b,row:c},g=!0,h=b+a.size_x-1;return h>this.cols?!1:d&&d<c+a.size_y-1?!1:(this.for_each_cell_occupied(f,function(b,c){var d=this.is_widget(b,c);!d||a.el&&!d.is(e)||(g=!1)}),g)},e.get_targeted_columns=function(a){for(var b=(a||this.player_grid_data.col)+(this.player_grid_data.size_x-1),c=[],d=a;b>=d;d++)c.push(d);return c},e.get_targeted_rows=function(a){for(var b=(a||this.player_grid_data.row)+(this.player_grid_data.size_y-1),c=[],d=a;b>=d;d++)c.push(d);return c},e.get_cells_occupied=function(b){var c,d={cols:[],rows:[]};for(arguments[1]instanceof a&&(b=arguments[1].coords().grid),c=0;c<b.size_x;c++){var e=b.col+c;d.cols.push(e)}for(c=0;c<b.size_y;c++){var f=b.row+c;d.rows.push(f)}return d},e.for_each_cell_occupied=function(a,b){return this.for_each_column_occupied(a,function(c){this.for_each_row_occupied(a,function(a){b.call(this,c,a)})}),this},e.for_each_column_occupied=function(a,b){for(var c=0;c<a.size_x;c++){var d=a.col+c;b.call(this,d,a)}},e.for_each_row_occupied=function(a,b){for(var c=0;c<a.size_y;c++){var d=a.row+c;b.call(this,d,a)}},e._traversing_widgets=function(b,c,d,e,f){var g=this.gridmap;if(g[d]){var h,i,j=b+"/"+c;if(arguments[2]instanceof a){var k=arguments[2].coords().grid;d=k.col,e=k.row,f=arguments[3]}var l=[],m=e,n={"for_each/above":function(){for(;m--&&!(m>0&&this.is_widget(d,m)&&-1===a.inArray(g[d][m],l)&&(h=f.call(g[d][m],d,m),l.push(g[d][m]),h)););},"for_each/below":function(){for(m=e+1,i=g[d].length;i>m&&(!this.is_widget(d,m)||-1!==a.inArray(g[d][m],l)||(h=f.call(g[d][m],d,m),l.push(g[d][m]),!h));m++);}};n[j]&&n[j].call(this)}},e.for_each_widget_above=function(a,b,c){return this._traversing_widgets("for_each","above",a,b,c),this},e.for_each_widget_below=function(a,b,c){return this._traversing_widgets("for_each","below",a,b,c),this},e.get_highest_occupied_cell=function(){for(var a,b=this.gridmap,c=b[1].length,d=[],e=[],f=b.length-1;f>=1;f--)for(a=c-1;a>=1;a--)if(this.is_widget(f,a)){d.push(a),e.push(f);break}return{col:Math.max.apply(Math,e),row:Math.max.apply(Math,d)}},e.get_widgets_from=function(b,c){var d=(this.gridmap,a());return b&&(d=d.add(this.$widgets.filter(function(){var c=a(this).attr("data-col");return c===b||c>b}))),c&&(d=d.add(this.$widgets.filter(function(){var b=a(this).attr("data-row");return b===c||b>c}))),d},e.set_dom_grid_height=function(a){if("undefined"==typeof a){var b=this.get_highest_occupied_cell().row;a=b*this.min_widget_height}return this.container_height=a,this.$el.css("height",this.container_height),this},e.set_dom_grid_width=function(a){"undefined"==typeof a&&(a=this.get_highest_occupied_cell().col);var b=this.options.autogrow_cols?this.options.max_cols:this.cols;return a=Math.min(b,Math.max(a,this.options.min_cols)),this.container_width=a*this.min_widget_width,this.$el.css("width",this.container_width),this},e.generate_stylesheet=function(b){var d,e="",f=this.options.max_size_x||this.cols;b||(b={}),b.cols||(b.cols=this.cols),b.rows||(b.rows=this.rows),b.namespace||(b.namespace=this.options.namespace),b.widget_base_dimensions||(b.widget_base_dimensions=this.options.widget_base_dimensions),b.widget_margins||(b.widget_margins=this.options.widget_margins),b.min_widget_width=2*b.widget_margins[0]+b.widget_base_dimensions[0],b.min_widget_height=2*b.widget_margins[1]+b.widget_base_dimensions[1];var g=a.param(b);if(a.inArray(g,c.generated_stylesheets)>=0)return!1;for(this.generated_stylesheets.push(g),c.generated_stylesheets.push(g),d=b.cols;d>=0;d--)e+=b.namespace+' [data-col="'+(d+1)+'"] { left:'+(d*b.widget_base_dimensions[0]+d*b.widget_margins[0]+(d+1)*b.widget_margins[0])+"px; }\n";for(d=b.rows;d>=0;d--)e+=b.namespace+' [data-row="'+(d+1)+'"] { top:'+(d*b.widget_base_dimensions[1]+d*b.widget_margins[1]+(d+1)*b.widget_margins[1])+"px; }\n";for(var h=1;h<=b.rows;h++)e+=b.namespace+' [data-sizey="'+h+'"] { height:'+(h*b.widget_base_dimensions[1]+2*(h-1)*b.widget_margins[1])+"px; }\n";for(var i=1;f>=i;i++)e+=b.namespace+' [data-sizex="'+i+'"] { width:'+(i*b.widget_base_dimensions[0]+2*(i-1)*b.widget_margins[0])+"px; }\n";return this.remove_style_tags(),this.add_style_tag(e)},e.add_style_tag=function(a){var b=document,c=b.createElement("style");return b.getElementsByTagName("head")[0].appendChild(c),c.setAttribute("type","text/css"),c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),this.$style_tags=this.$style_tags.add(c),this},e.remove_style_tags=function(){var b=c.generated_stylesheets,d=this.generated_stylesheets;this.$style_tags.remove(),c.generated_stylesheets=a.map(b,function(b){return-1===a.inArray(b,d)?b:void 0})},e.generate_faux_grid=function(a,b){this.faux_grid=[],this.gridmap=[];var c,d;for(c=b;c>0;c--)for(this.gridmap[c]=[],d=a;d>0;d--)this.add_faux_cell(d,c);return this},e.add_faux_cell=function(b,c){var d=a({left:this.baseX+(c-1)*this.min_widget_width,top:this.baseY+(b-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:c,row:b,original_col:c,original_row:b}).coords();return a.isArray(this.gridmap[c])||(this.gridmap[c]=[]),this.gridmap[c][b]=!1,this.faux_grid.push(d),this},e.add_faux_rows=function(a){for(var b=this.rows,c=b+(a||1),d=c;d>b;d--)for(var e=this.cols;e>=1;e--)this.add_faux_cell(d,e);return this.rows=c,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},e.add_faux_cols=function(a){var b=this.cols,c=b+(a||1);c=Math.min(c,this.options.max_cols);for(var d=b+1;c>=d;d++)for(var e=this.rows;e>=1;e--)this.add_faux_cell(e,d);return this.cols=c,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},e.recalculate_faux_grid=function(){var b=this.$wrapper.width();return this.baseX=(a(window).width()-b)/2,this.baseY=this.$wrapper.offset().top,a.each(this.faux_grid,a.proxy(function(a,b){this.faux_grid[a]=b.update({left:this.baseX+(b.data.col-1)*this.min_widget_width,top:this.baseY+(b.data.row-1)*this.min_widget_height})},this)),this},e.get_widgets_from_DOM=function(){var b=this.$widgets.map(a.proxy(function(b,c){var d=a(c);return this.dom_to_coords(d)},this));b=c.sort_by_row_and_col_asc(b);var d=a(b).map(a.proxy(function(a,b){return this.register_widget(b)||null},this));return d.length&&this.$el.trigger("gridster:positionschanged"),this},e.generate_grid_and_stylesheet=function(){var b=this.$wrapper.width(),c=this.options.max_cols,d=Math.floor(b/this.min_widget_width)+this.options.extra_cols,e=this.$widgets.map(function(){return a(this).attr("data-col")}).get();e.length||(e=[0]);var f=Math.max.apply(Math,e);this.cols=Math.max(f,d,this.options.min_cols),1/0!==c&&c>=f&&c<this.cols&&(this.cols=c);var g=this.options.extra_rows;return this.$widgets.each(function(b,c){g+=+a(c).attr("data-sizey")}),this.rows=Math.max(g,this.options.min_rows),this.baseX=(a(window).width()-b)/2,this.baseY=this.$wrapper.offset().top,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},e.destroy=function(b){return this.$el.removeData("gridster"),a(window).unbind(".gridster"),this.drag_api&&this.drag_api.destroy(),this.remove_style_tags(),b&&this.$el.remove(),this},a.fn.gridster=function(b){return this.each(function(){a(this).data("gridster")||a(this).data("gridster",new c(this,b))})},c})}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js":98}],92:[function(a,b){!function(a,c){"use strict";function d(){if(!e.READY){e.event.determineEventTypes();for(var a in e.gestures)e.gestures.hasOwnProperty(a)&&e.detection.register(e.gestures[a]);e.event.onTouch(e.DOCUMENT,e.EVENT_MOVE,e.detection.detect),e.event.onTouch(e.DOCUMENT,e.EVENT_END,e.detection.detect),e.READY=!0}}var e=function(a,b){return new e.Instance(a,b||{})};e.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},e.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,e.HAS_TOUCHEVENTS="ontouchstart"in a,e.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,e.NO_MOUSEEVENTS=e.HAS_TOUCHEVENTS&&navigator.userAgent.match(e.MOBILE_REGEX),e.EVENT_TYPES={},e.DIRECTION_DOWN="down",e.DIRECTION_LEFT="left",e.DIRECTION_UP="up",e.DIRECTION_RIGHT="right",e.POINTER_MOUSE="mouse",e.POINTER_TOUCH="touch",e.POINTER_PEN="pen",e.EVENT_START="start",e.EVENT_MOVE="move",e.EVENT_END="end",e.DOCUMENT=document,e.plugins={},e.READY=!1,e.Instance=function(a,b){var c=this;return d(),this.element=a,this.enabled=!0,this.options=e.utils.extend(e.utils.extend({},e.defaults),b||{}),this.options.stop_browser_behavior&&e.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),e.event.onTouch(a,e.EVENT_START,function(a){c.enabled&&e.detection.startDetect(c,a)
}),this},e.Instance.prototype={on:function(a,b){for(var c=a.split(" "),d=0;c.length>d;d++)this.element.addEventListener(c[d],b,!1);return this},off:function(a,b){for(var c=a.split(" "),d=0;c.length>d;d++)this.element.removeEventListener(c[d],b,!1);return this},trigger:function(a,b){var c=e.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var d=this.element;return e.utils.hasParent(b.target,d)&&(d=b.target),d.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this}};var f=null,g=!1,h=!1;e.event={bindDom:function(a,b,c){for(var d=b.split(" "),e=0;d.length>e;e++)a.addEventListener(d[e],c,!1)},onTouch:function(a,b,c){var d=this;this.bindDom(a,e.EVENT_TYPES[b],function(i){var j=i.type.toLowerCase();if(!j.match(/mouse/)||!h){(j.match(/touch/)||j.match(/pointerdown/)||j.match(/mouse/)&&1===i.which)&&(g=!0),j.match(/touch|pointer/)&&(h=!0);var k=0;g&&(e.HAS_POINTEREVENTS&&b!=e.EVENT_END?k=e.PointerEvent.updatePointer(b,i):j.match(/touch/)?k=i.touches.length:h||(k=j.match(/up/)?0:1),k>0&&b==e.EVENT_END?b=e.EVENT_MOVE:k||(b=e.EVENT_END),k||null===f?f=i:i=f,c.call(e.detection,d.collectEventData(a,b,i)),e.HAS_POINTEREVENTS&&b==e.EVENT_END&&(k=e.PointerEvent.updatePointer(b,i))),k||(f=null,g=!1,h=!1,e.PointerEvent.reset())}})},determineEventTypes:function(){var a;a=e.HAS_POINTEREVENTS?e.PointerEvent.getEvents():e.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],e.EVENT_TYPES[e.EVENT_START]=a[0],e.EVENT_TYPES[e.EVENT_MOVE]=a[1],e.EVENT_TYPES[e.EVENT_END]=a[2]},getTouchList:function(a){return e.HAS_POINTEREVENTS?e.PointerEvent.getTouchList():a.touches?a.touches:[{identifier:1,pageX:a.pageX,pageY:a.pageY,target:a.target}]},collectEventData:function(a,b,c){var d=this.getTouchList(c,b),f=e.POINTER_TOUCH;return(c.type.match(/mouse/)||e.PointerEvent.matchType(e.POINTER_MOUSE,c))&&(f=e.POINTER_MOUSE),{center:e.utils.getCenter(d),timeStamp:(new Date).getTime(),target:c.target,touches:d,eventType:b,pointerType:f,srcEvent:c,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return e.detection.stopDetect()}}}},e.PointerEvent={pointers:{},getTouchList:function(){var a=this,b=[];return Object.keys(a.pointers).sort().forEach(function(c){b.push(a.pointers[c])}),b},updatePointer:function(a,b){return a==e.EVENT_END?this.pointers={}:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b),Object.keys(this.pointers).length},matchType:function(a,b){if(!b.pointerType)return!1;var c={};return c[e.POINTER_MOUSE]=b.pointerType==b.MSPOINTER_TYPE_MOUSE||b.pointerType==e.POINTER_MOUSE,c[e.POINTER_TOUCH]=b.pointerType==b.MSPOINTER_TYPE_TOUCH||b.pointerType==e.POINTER_TOUCH,c[e.POINTER_PEN]=b.pointerType==b.MSPOINTER_TYPE_PEN||b.pointerType==e.POINTER_PEN,c[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},e.utils={extend:function(a,b,d){for(var e in b)a[e]!==c&&d||(a[e]=b[e]);return a},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){for(var b=[],c=[],d=0,e=a.length;e>d;d++)b.push(a[d].pageX),c.push(a[d].pageY);return{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return 180*Math.atan2(c,d)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.pageX-b.pageX),d=Math.abs(a.pageY-b.pageY);return c>=d?a.pageX-b.pageX>0?e.DIRECTION_LEFT:e.DIRECTION_RIGHT:a.pageY-b.pageY>0?e.DIRECTION_UP:e.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==e.DIRECTION_UP||a==e.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){var c,d=["webkit","khtml","moz","ms","o",""];if(b&&a.style){for(var e=0;d.length>e;e++)for(var f in b)b.hasOwnProperty(f)&&(c=f,d[e]&&(c=d[e]+c.substring(0,1).toUpperCase()+c.substring(1)),a.style[c]=b[f]);"none"==b.userSelect&&(a.onselectstart=function(){return!1})}}},e.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:e.utils.extend({},b),lastEvent:!1,name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);for(var b=this.current.inst.options,c=0,d=this.gestures.length;d>c;c++){var f=this.gestures[c];if(!this.stopped&&b[f.name]!==!1&&f.handler.call(f,a,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=a),a.eventType==e.EVENT_END&&!a.touches.length-1&&this.stopDetect(),a}},stopDetect:function(){this.previous=e.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var b=this.current.startEvent;if(b&&(a.touches.length!=b.touches.length||a.touches===b.touches)){b.touches=[];for(var c=0,d=a.touches.length;d>c;c++)b.touches.push(e.utils.extend({},a.touches[c]))}var f=a.timeStamp-b.timeStamp,g=a.center.pageX-b.center.pageX,h=a.center.pageY-b.center.pageY,i=e.utils.getVelocity(f,g,h);return e.utils.extend(a,{deltaTime:f,deltaX:g,deltaY:h,velocityX:i.x,velocityY:i.y,distance:e.utils.getDistance(b.center,a.center),angle:e.utils.getAngle(b.center,a.center),direction:e.utils.getDirection(b.center,a.center),scale:e.utils.getScale(b.touches,a.touches),rotation:e.utils.getRotation(b.touches,a.touches),startEvent:b}),a},register:function(a){var b=a.defaults||{};return b[a.name]===c&&(b[a.name]=!0),e.utils.extend(e.defaults,b,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},e.gestures=e.gestures||{},e.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,b){switch(a.eventType){case e.EVENT_START:clearTimeout(this.timer),e.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==e.detection.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case e.EVENT_MOVE:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case e.EVENT_END:clearTimeout(this.timer)}}},e.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(a,b){if(a.eventType==e.EVENT_END){var c=e.detection.previous,d=!1;if(a.deltaTime>b.options.tap_max_touchtime||a.distance>b.options.tap_max_distance)return;c&&"tap"==c.name&&a.timeStamp-c.lastEvent.timeStamp<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance&&(b.trigger("doubletap",a),d=!0),(!d||b.options.tap_always)&&(e.detection.current.name="tap",b.trigger(e.detection.current.name,a))}}},e.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==e.EVENT_END){if(b.options.swipe_max_touches>0&&a.touches.length>b.options.swipe_max_touches)return;(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},e.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,b){if(e.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),this.triggered=!1,c;if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case e.EVENT_START:this.triggered=!1;break;case e.EVENT_MOVE:if(a.distance<b.options.drag_min_distance&&e.detection.current.name!=this.name)return;e.detection.current.name=this.name,(e.detection.current.lastEvent.drag_locked_to_axis||b.options.drag_lock_to_axis&&b.options.drag_lock_min_distance<=a.distance)&&(a.drag_locked_to_axis=!0);var d=e.detection.current.lastEvent.direction;a.drag_locked_to_axis&&d!==a.direction&&(a.direction=e.utils.isVertical(d)?0>a.deltaY?e.DIRECTION_UP:e.DIRECTION_DOWN:0>a.deltaX?e.DIRECTION_LEFT:e.DIRECTION_RIGHT),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a),(b.options.drag_block_vertical&&e.utils.isVertical(a.direction)||b.options.drag_block_horizontal&&!e.utils.isVertical(a.direction))&&a.preventDefault();break;case e.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},e.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,b){if(e.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),this.triggered=!1,c;if(!(2>a.touches.length))switch(b.options.transform_always_block&&a.preventDefault(),a.eventType){case e.EVENT_START:this.triggered=!1;break;case e.EVENT_MOVE:var d=Math.abs(1-a.scale),f=Math.abs(a.rotation);if(b.options.transform_min_scale>d&&b.options.transform_min_rotation>f)return;e.detection.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),f>b.options.transform_min_rotation&&b.trigger("rotate",a),d>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(1>a.scale?"in":"out"),a));break;case e.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},e.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,b){return b.options.prevent_mouseevents&&a.pointerType==e.POINTER_MOUSE?(a.stopDetect(),c):(b.options.prevent_default&&a.preventDefault(),a.eventType==e.EVENT_START&&b.trigger(this.name,a),c)}},e.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==e.EVENT_END&&b.trigger(this.name,a)}},"object"==typeof b&&"object"==typeof b.exports?b.exports=e:(a.Hammer=e,"function"==typeof a.define&&a.define.amd&&a.define("hammer",[],function(){return e}))}(this)},{}],93:[function(a,b){!function(c,d){"use strict";function e(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}}function f(a,b){this.modes[b.mode]&&(this.defaults=d.extend({},this.defaults,this.modes[b.mode]),delete b.mode),this.options=d.extend({},this.defaults,b),this._animated=null,this._state="idle",this.container=a,this.$container=d(this.container),this.$container.css("user-select","none"),this.hammer=new g(this.$root()[0],this.options),this.hammer.enable(!1),this.enable()}var g="object"==typeof b&&"object"==typeof b.exports?a("./hammer.min.js"):c.Hammer;f.prototype={$root:function(){return this.$container.parent()},modes:{scroll:{snapToEdges:!0,minScale:1,maxScale:1,gestures:"drag"},"scroll-x":{snapToEdges:!0,minScale:1,maxScale:1,gestures:"dragleft dragright"},"scroll-y":{snapToEdges:!0,minScale:1,maxScale:1,gestures:"dragup dragdown"},disabled:{snapToEdges:!0,minScale:1,maxScale:1,gestures:"drag pinch",disabled:!0}},defaults:{snapToEdges:!0,eventNamespace:"zh",gestures:"drag pinch",transitionDuration:250,adjustTimeout:300,drag_min_distance:5,mouseWheel:!0,wheelZoomStep:.4,minScale:"fill",maxScale:3,disabled:!1},_event:function(a){return this.options.eventNamespace+a},_notify:function(a){switch(a){case"start":"transforming"!==this._state&&(this._state="transforming",this.$container.trigger(this._event("transformstart"),this));break;case"stop":"transforming"===this._state&&(this._state="idle",this.$container.trigger(this._event("transformend"),this));break;case"progress":"transforming"===this._state?this.$container.trigger(this._event("transform"),this):this._notify("start")}},_applyAnimationStyles:function(a){return"number"==typeof a&&0!==a&&this.$container.css({transition:"all "+a+"ms","transition-timing-function":"cubic-bezier(0,0,0.25,1);"}),this},_removeAnimationStyles:function(){this.$container.css({transition:"none"})},_handleTouches:function(a){switch(a.type){case"touch":return this._startCapturing(a);case"release":return this._stopCapturing(a)}},_handleWheel:e(function(a,b){var c=this,d=c.offset(),e=parseInt(b)/Math.abs(parseInt(b)),f=c.scale(),g=f*(1+c.options.wheelZoomStep*e),h={left:a.originalEvent.pageX-d.left,top:a.originalEvent.pageY-d.top},i={left:h.left/f,top:h.top/f},j=this.parsedScale();return g<j.min&&(g=j.min),g>j.max&&(g=j.max),g!==f&&(this._notify("start"),this._removeAnimationStyles(),this.origin(i),this.move({scale:g},this.options.transitionDuration,c.adjust)),!1},100,!0),_startCapturing:function(a){function b(a){var b,d,f={};switch(a.gesture.preventDefault(),a.stopPropagation(),b=c.transform(),d=e*a.gesture.scale,f.left=h.left+a.gesture.deltaX,f.top=h.top+a.gesture.deltaY,a.type){case"pinch":b[0]=b[3]=d;break;case"drag":b[4]=f.left,b[5]=f.top;break;case"dragleft":case"dragright":b[4]=f.left;break;case"dragup":case"dragdown":b[5]=f.top}return c._animated?cancelAnimationFrame(c._animated):null,c._animated=requestAnimationFrame(function(){c.transform(b)}),!1}var c=this,d=this.offset(),e=this.scale(),f={left:a.gesture.srcEvent.pageX-d.left,top:a.gesture.srcEvent.pageY-d.top},g={left:f.left/e,top:f.top/e},h=this.translate();return this._notify("start"),this._removeAnimationStyles(),this.origin(g),h=this.translate(),this.hammer.on(this.options.gestures,b),2===a.gesture.touches.length&&-1===c.options.gestures.split(" ").indexOf("pinch")},_stopCapturing:function(a){return this.hammer.off(this.options.gestures),this.adjust(),a&&2===a.gesture.touches.length&&-1===this.options.gestures.split(" ").indexOf("pinch")},parsedScale:function(){var a={},b=this.options.minScale,c=this.options.maxScale,d=this.transform()[0],e={width:this.$container.width()*d,height:this.$container.height()*d},f={width:this.$root().width(),height:this.$root().height()};if(b)if("number"==typeof b)a.min=b;else switch(b){case"fill":a.min=Math.max(f.width/e.width*d,f.height/e.height*d);break;case"fit":default:a.min=Math.min(f.width/e.width*d,f.height/e.height*d)}if(c)if("number"==typeof c)a.max=c;else switch(c){case"fill":a.max=Math.max(f.width/e.width*d,f.height/e.height*d);break;case"fit":default:a.max=Math.min(f.width/e.width*d,f.height/e.height*d)}return a},adjust:function(a,b){"function"==typeof a&&(b=a,a=null);var c=this,d=this.transform(),e=this.offset(),f=this.origin(),g=this.$container.position(),h={left:d[4],top:d[5]},i=d[0],j={scale:d[0],left:d[4],top:d[5]},k={width:this.$container.width(),height:this.$container.height()},l={width:this.$root().width(),height:this.$root().height()},m=this.parsedScale();m.min&&i<m.min&&(j.scale=m.min),m.max&&i>m.max&&(j.scale=m.max),k.width*=j.scale,k.height*=j.scale,this.options.snapToEdges&&(k.height<l.height?j.top=f.top*(j.scale-1):e.top>0?j.top=f.top*(j.scale-1):e.top+k.height<l.height&&(j.top=f.top*(j.scale-1)+(l.height-k.height)),k.width<l.width?j.left=f.left*(j.scale-1):g.left>0?j.left=f.left*(j.scale-1):g.left+k.width<l.width&&(j.left=f.left*(j.scale-1)+(l.width-k.width))),j.scale!==i||Math.abs(j.left-h.left)>1||Math.abs(j.top-h.top)>1?c.move(j,a,function(){var a={width:c.$container.width(),heiht:c.$container.height()};c.origin({left:a.width/2,top:a.heiht/2})}):("function"==typeof b?b.apply(c,arguments):null,this._notify("stop"))},move:function(a,b,c){function d(){return 0==b?void(h=!0):void(g||(g=!0,f._notify("start"),f._applyAnimationStyles(b||f.options.transitionDuration)))}function e(){f._removeAnimationStyles(),f._notify("stop"),"function"==typeof c?c.apply(f):null}var f=this,g=!1,h=!1,i=this.transform();"function"==typeof b&&(c=b,b=null),"number"==typeof a.scale&&(i[0]!==a.scale?d():null,i[0]=i[3]=a.scale),"number"==typeof a.left&&(i[4]!==a.left?d():null,i[4]=a.left),"number"==typeof a.top&&(i[5]!==a.top?d():null,i[5]=a.top),g?(requestAnimationFrame(function(){f.transform(i)}),f.$container.off("transitionend",e),f.$container.one("transitionend",e)):h?(f.transform(i),e()):e()},origin:function(a){function b(){var a=d.$container.css("transform-origin").match(/-?[0-9.]+/g);return{left:a&&a[0],top:a&&a[1]}}function c(a){var b,c=d.offset(),e=d.translate();d.$container.css("transform-origin",a.left+"px "+a.top+"px"),b=d.offset(),d.translate({left:e.left+c.left-b.left,top:e.top+c.top-b.top})}var d=this;return a?(c(a),this):b()},transform:function(a){function b(){return e.$container.css("transform").match(/-?[0-9.]+/g)||[1,0,0,1,0,0]}function d(a){"Microsoft Internet Explorer"===c.navigator.appName||navigator.appVersion.indexOf("Trident/")>0?e.$container.css("transform","matrix("+a.join(",")+")"):e.$container.css("transform","matrix("+a.join(",")+") translateZ(0)"),e._notify("progress")}var e=this;return a?(d(a),this):b()},scale:function(a){function b(){var a=d.transform();return parseFloat(a[0])}function c(a){var b=d.transform();b[0]=b[3]=a,d.transform(b)}var d=this;return a?(c(a),this):b()},translate:function(a){function b(){var a=d.transform(),b={};return b.left=parseInt(a[4]),b.top=parseInt(a[5]),b}function c(a){var b=d.transform();b[4]=a.left,b[5]=a.top,d.transform(b)}var d=this;return a?(c(a),this):b()},offset:function(){var a=this.$container.offset();return{left:parseInt(a.left),top:parseInt(a.top)}},disable:function(){this.hammer.enable(!1),this._stopCapturing(),this.hammer.off("touch release"),this.$root().off("mousewheel")},enable:function(){var a=this;if(!this.hammer.enabled){this.hammer.enable(!0);var b=!1;this.hammer.on("touch",function(b){return b.preventDefault(),a.options.disabled?!1:a._handleTouches(b)}),this.hammer.on("drag",function(a){return a.preventDefault(),b=!0,!0}),this.hammer.on("release",function(c){return b&&(a.$root().addClass("prevent-click"),setTimeout(function(){b||a.$root().removeClass("prevent-click")},1)),b=!1,c.preventDefault(),a.options.disabled?!1:a._handleTouches(c)}),-1!==a.options.gestures.split(" ").indexOf("pinch")&&a.options.mouseWheel&&this.$root().on("mousewheel",function(b,c){return b.preventDefault(),a.options.disabled?!1:a._handleWheel(b,c)})}}},d.fn.zoomHammer=function(a){return this.each(function(){var b=d(this),c=b.data("zoomHammer");c?(c.adjust(),g.utils.extend(c.options,a||{})):b.data("zoomHammer",new f(this,a||{}))})}}(window,jQuery)},{"./hammer.min.js":92}],94:[function(a,b){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(a,b,c){"use strict";function d(b){j.logging&&a.console&&a.console.log&&a.console.log(b)}function e(a,b,c,d,e,f){var g,h,i,k,l=j.Util.getCSS(b,a,e);if(1===l.length&&(k=l[0],l=[],l[0]=k,l[1]=k),-1!==l[0].toString().indexOf("%"))i=parseFloat(l[0])/100,h=c.width*i,"backgroundSize"!==a&&(h-=(f||d).width*i);else if("backgroundSize"===a)if("auto"===l[0])h=d.width;else if(l[0].match(/contain|cover/)){var m=j.Util.resizeBounds(d.width,d.height,c.width,c.height,l[0]);h=m.width,g=m.height}else h=parseInt(l[0],10);else h=parseInt(l[0],10);return"auto"===l[1]?g=h/d.width*d.height:-1!==l[1].toString().indexOf("%")?(i=parseFloat(l[1])/100,g=c.height*i,"backgroundSize"!==a&&(g-=(f||d).height*i)):g=parseInt(l[1],10),[h,g]}function f(a,b){var c=[];return{storage:c,width:a,height:b,clip:function(){c.push({type:"function",name:"clip",arguments:arguments})},translate:function(){c.push({type:"function",name:"translate",arguments:arguments})},setTransform:function(){c.push({type:"function",name:"setTransform",arguments:arguments})},fill:function(){c.push({type:"function",name:"fill",arguments:arguments})},save:function(){c.push({type:"function",name:"save",arguments:arguments})},restore:function(){c.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){c.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){c.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var a=[];return c.push({type:"function",name:"drawShape",arguments:a}),{moveTo:function(){a.push({name:"moveTo",arguments:arguments})},lineTo:function(){a.push({name:"lineTo",arguments:arguments})},arcTo:function(){a.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){a.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){a.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){c.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){c.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(a,b){c.push({type:"variable",name:a,arguments:b})},drawLinearGradient:function(){c.push({type:"function",name:"drawLinearGradient",arguments:arguments})}}}function g(a){return{zindex:a,children:[]}}var h,i,j={};j.Util={},j.Util.trimText=function(a){return function(b){return a?a.apply(b):((b||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),j.Util.multiplyMatrices=function(a,b){for(var c=[],d=0;d<a.length;d++){c[d]=[];for(var e=0;e<b[0].length;e++){for(var f=0,g=0;g<a[0].length;g++)f+=a[d][g]*b[g][e];c[d][e]=f}}return c},j.Util.transformToMatrix=function(a){var b=[];return b[0]=[a[0],a[1],0],b[1]=[a[2],a[3],0],b[2]=[a[4],a[5],1],b},j.Util.matrixToTransform=function(a){return[a[0][0],a[0][1],a[1][0],a[1][1],a[2][0],a[2][1]]},j.Util.parseBackgroundImage=function(a){var b,c,d,e,f,g,h,i,j=" \r\n	",k=[],l=0,m=0,n=function(){b&&('"'===c.substr(0,1)&&(c=c.substr(1,c.length-2)),c&&i.push(c),"-"===b.substr(0,1)&&(e=b.indexOf("-",1)+1)>0&&(d=b.substr(0,e),b=b.substr(e)),k.push({prefix:d,method:b.toLowerCase(),value:f,args:i})),i=[],b=d=c=f=""};n();for(var o=0,p=a.length;p>o;o++)if(g=a[o],!(0===l&&j.indexOf(g)>-1)){switch(g){case'"':h?h===g&&(h=null):h=g;break;case"(":if(h)break;if(0===l){l=1,f+=g;continue}m++;break;case")":if(h)break;if(1===l){if(0===m){l=0,f+=g,n();continue}m--}break;case",":if(h)break;if(0===l){n();continue}if(1===l&&0===m&&!b.match(/^url$/i)){i.push(c),c="",f+=g;continue}}f+=g,0===l?b+=g:c+=g}return n(),k},j.Util.Bounds=function(a){var b,c={};return a.getBoundingClientRect?(b=a.getBoundingClientRect(),c.top=b.top,c.bottom=b.bottom||b.top+b.height,c.left=b.left,c.width=b.width||b.right-b.left,c.height=b.height||b.bottom-b.top,c):void 0},j.Util.getCSS=function k(a,d,e){function f(b,c){var d,e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(c)&&/^-?\d/.test(c)&&(d=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":c||0,c=f.pixelLeft+"px",f.left=d,e&&(a.runtimeStyle.left=e)),/^(thin|medium|thick)$/i.test(c)?c:Math.round(parseFloat(c))+"px"}var g,l,m=j.Util.matrixToTransform,n=j.Util.transformToMatrix,o=j.Util.multiplyMatrices,p=a.parentElement,q=d.match(/^background(Size|Position)$/),r=d.match(/transform$/);if(h!==a&&(i=b.defaultView.getComputedStyle(a,null)),g=i[d]||i.getPropertyValue(d),q)if(g=(g||"").split(","),g=g[e||0]||g[0]||"auto",g=j.Util.trimText(g).split(" "),"backgroundSize"!==d||g[0]&&!g[0].match(/cover|contain|auto/)){if(g[0]=-1===g[0].indexOf("%")?f(d+"X",g[0]):g[0],g[1]===c){if("backgroundSize"===d)return g[1]="auto",g;g[1]=g[0]}g[1]=-1===g[1].indexOf("%")?f(d+"Y",g[1]):g[1]}else;else if(/border(Top|Bottom)(Left|Right)Radius/.test(d)){var s=g.split(" ");s.length<=1&&(s[1]=s[0]),s[0]=parseInt(s[0],10),s[1]=parseInt(s[1],10),g=s}if(r){if(l=g&&"none"!==g?g.substring(7,g.indexOf(")")).split(",").map(function(a){return+Number(a)}):[1,0,0,1,0,0],p){var t=k(p,d,e);isNaN(t[0])||(l=m(o(n(l),n(t))))}g=l}return g},j.Util.resizeBounds=function(a,b,c,d,e){var f,g,h=c/d,i=a/b;return e&&"auto"!==e?i>h^"contain"===e?(g=d,f=d*i):(f=c,g=c/i):(f=c,g=d),{width:f,height:g}},j.Util.BackgroundPosition=function(a,b,c,d,f){var g=e("backgroundPosition",a,b,c,d,f);return{left:g[0],top:g[1]}},j.Util.BackgroundSize=function(a,b,c,d){var f=e("backgroundSize",a,b,c,d);return{width:f[0],height:f[1]}},j.Util.Extend=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},j.Util.Children=function(a){var b;try{b=a.nodeName&&"IFRAME"===a.nodeName.toUpperCase()?a.contentDocument||a.contentWindow.document:function(a){var b=[];return null!==a&&!function(a,b){var d=a.length,e=0;if("number"==typeof b.length)for(var f=b.length;f>e;e++)a[d++]=b[e];else for(;b[e]!==c;)a[d++]=b[e++];return a.length=d,a}(b,a),b}(a.childNodes)}catch(e){d("html2canvas.Util.Children failed with exception: "+e.message),b=[]}return b},j.Util.Font=function(){var a={};return function(b,d,e){if(a[b+"-"+d]!==c)return a[b+"-"+d];var f,g,h,i=e.createElement("div"),j=e.createElement("img"),k=e.createElement("span"),l="Hidden Text";return i.style.visibility="hidden",i.style.fontFamily=b,i.style.fontSize=d,i.style.margin=0,i.style.padding=0,e.body.appendChild(i),j.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",j.width=1,j.height=1,j.style.margin=0,j.style.padding=0,j.style.verticalAlign="baseline",k.style.fontFamily=b,k.style.fontSize=d,k.style.margin=0,k.style.padding=0,k.appendChild(e.createTextNode(l)),i.appendChild(k),i.appendChild(j),f=j.offsetTop-k.offsetTop+1,i.removeChild(k),i.appendChild(e.createTextNode(l)),i.style.lineHeight="normal",j.style.verticalAlign="super",g=j.offsetTop-i.offsetTop+1,h={baseline:f,lineWidth:1,middle:g},a[b+"-"+d]=h,e.body.removeChild(i),h}}(),function(){j.Generate={};var a=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];j.Generate.parseGradient=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=a.length;for(e=0;p>e&&!(f=b.match(a[e]));e+=1);if(f)switch(f[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(d={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},h=f[2].match(/\w+/g))for(i=h.length,e=0;i>e;e+=1)switch(h[e]){case"top":d.y0=0,d.y1=c.height;break;case"right":d.x0=c.width,d.x1=0;break;case"bottom":d.y0=c.height,d.y1=0;break;case"left":d.x0=0,d.x1=c.width}if(null===d.x0&&null===d.x1&&(d.x0=d.x1=c.width/2),null===d.y0&&null===d.y1&&(d.y0=d.y1=c.height/2),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:c.width):g=e*j,d.colorStops.push({color:k[1],stop:g});break;case"-webkit-gradient":if(d={type:"radial"===f[2]?"circle":f[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),h&&(d.x0=h[1]*c.width/100,d.y0=h[2]*c.height/100,d.x1=h[3]*c.width/100,d.y1=h[4]*c.height/100),h=f[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(i=h.length,e=0;i>e;e+=1)k=h[e].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),g=parseFloat(k[2]),"from"===k[1]&&(g=0),"to"===k[1]&&(g=1),d.colorStops.push({color:k[3],stop:g});break;case"-moz-linear-gradient":if(d={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(d.x0=h[1]*c.width/100,d.y0=h[2]*c.height/100,d.x1=c.width-d.x0,d.y1=c.height-d.y0),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),k[2]?(g=parseFloat(k[2]),k[3]&&(g/=100)):g=e*j,d.colorStops.push({color:k[1],stop:g});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(d={type:"circle",x0:0,y0:0,x1:c.width,y1:c.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(d.cx=h[1]*c.width/100,d.cy=h[2]*c.height/100),h=f[3].match(/\w+/),k=f[4].match(/[a-z\-]*/),h&&k)switch(k[0]){case"farthest-corner":case"cover":case"":l=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.cy,2)),m=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.y1-d.cy,2)),n=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.y1-d.cy,2)),o=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.cy,2)),d.rx=d.ry=Math.max(l,m,n,o);break;case"closest-corner":l=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.cy,2)),m=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.y1-d.cy,2)),n=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.y1-d.cy,2)),o=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.cy,2)),d.rx=d.ry=Math.min(l,m,n,o);break;case"farthest-side":"circle"===h[0]?d.rx=d.ry=Math.max(d.cx,d.cy,d.x1-d.cx,d.y1-d.cy):(d.type=h[0],d.rx=Math.max(d.cx,d.x1-d.cx),d.ry=Math.max(d.cy,d.y1-d.cy));break;case"closest-side":case"contain":"circle"===h[0]?d.rx=d.ry=Math.min(d.cx,d.cy,d.x1-d.cx,d.y1-d.cy):(d.type=h[0],d.rx=Math.min(d.cx,d.x1-d.cx),d.ry=Math.min(d.cy,d.y1-d.cy))}if(h=f[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:c.width):g=e*j,d.colorStops.push({color:k[1],stop:g})}return d},j.Generate.Gradient=function(a,c){if(0!==c.width&&0!==c.height){var e,f,g,h,i=b.createElement("canvas"),k=i.getContext("2d");if(i.width=c.width,i.height=c.height,e=j.Generate.parseGradient(a,c))if("linear"===e.type){for(f=k.createLinearGradient(e.x0,e.y0,e.x1,e.y1),g=0,h=e.colorStops.length;h>g;g+=1)try{f.addColorStop(e.colorStops[g].stop,e.colorStops[g].color)}catch(l){d(["failed to add color stop: ",l,"; tried to add: ",e.colorStops[g],"; stop: ",g,"; in: ",a])}k.fillStyle=f,k.fillRect(0,0,c.width,c.height)}else if("circle"===e.type){for(f=k.createRadialGradient(e.cx,e.cy,0,e.cx,e.cy,e.rx),g=0,h=e.colorStops.length;h>g;g+=1)try{f.addColorStop(e.colorStops[g].stop,e.colorStops[g].color)}catch(l){d(["failed to add color stop: ",l,"; tried to add: ",e.colorStops[g],"; stop: ",g,"; in: ",a])}k.fillStyle=f,k.fillRect(0,0,c.width,c.height)}else if("ellipse"===e.type){var m=b.createElement("canvas"),n=m.getContext("2d"),o=Math.max(e.rx,e.ry),p=2*o;for(m.width=m.height=p,f=n.createRadialGradient(e.rx,e.ry,0,e.rx,e.ry,o),g=0,h=e.colorStops.length;h>g;g+=1)try{f.addColorStop(e.colorStops[g].stop,e.colorStops[g].color)}catch(l){d(["failed to add color stop: ",l,"; tried to add: ",e.colorStops[g],"; stop: ",g,"; in: ",a])}n.fillStyle=f,n.fillRect(0,0,p,p),k.fillStyle=e.colorStops[g-1].color,k.fillRect(0,0,i.width,i.height),k.drawImage(m,e.cx-e.rx,e.cy-e.ry,2*e.rx,2*e.ry)}return i}},j.Generate.ListAlpha=function(a){var b,c="";do b=a%26,c=String.fromCharCode(b+64)+c,a/=26;while(26*a>26);return c},j.Generate.ListRoman=function(a){var b,c=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],d=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],e="",f=c.length;if(0>=a||a>=4e3)return a;for(b=0;f>b;b+=1)for(;a>=d[b];)a-=d[b],e+=c[b];return e}}(),j.Parse=function(e,h){function i(){return Math.max(Math.max(jb.body.scrollWidth,jb.documentElement.scrollWidth),Math.max(jb.body.offsetWidth,jb.documentElement.offsetWidth),Math.max(jb.body.clientWidth,jb.documentElement.clientWidth))}function k(){return Math.max(Math.max(jb.body.scrollHeight,jb.documentElement.scrollHeight),Math.max(jb.body.offsetHeight,jb.documentElement.offsetHeight),Math.max(jb.body.clientHeight,jb.documentElement.clientHeight))
}function l(a,b){var c=parseInt(nb(a,b),10);return isNaN(c)?0:c}function m(a,b,c,d,e,f){"transparent"!==f&&(a.setVariable("fillStyle",f),a.fillRect(b,c,d,e),ib+=1)}function n(a,b){switch(b){case"lowercase":return a.toLowerCase();case"capitalize":return a.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(a,b,c){return a.length>0?b+c.toUpperCase():void 0});case"uppercase":return a.toUpperCase();default:return a}}function o(a){return/^(normal|none|0px)$/.test(a)}function p(a,b,c,d,e){null!==a&&j.Util.trimText(a).length>0&&(d.setTransform(e[0],e[1],e[2],e[3],b,c),d.fillText(a,0,0),d.setTransform(1,0,0,1,0,0),ib+=1)}function q(a,b,c,d){var e=!1,f=nb(b,"fontWeight"),g=nb(b,"fontFamily"),h=nb(b,"fontSize");switch(parseInt(f,10)){case 401:f="bold";break;case 400:f="normal"}return a.setVariable("fillStyle",d),a.setVariable("font",[nb(b,"fontStyle"),nb(b,"fontVariant"),f,h,g].join(" ")),a.setVariable("textAlign",e?"right":"left"),"none"!==c?j.Util.Font(g,h,jb):void 0}function r(a,b,c,d,e){switch(b){case"underline":m(a,c.left,Math.round(c.top+d.baseline+d.lineWidth),c.width,1,e);break;case"overline":m(a,c.left,Math.round(c.top),c.width,1,e);break;case"line-through":m(a,c.left,Math.ceil(c.top+d.middle+d.lineWidth),c.width,1,e)}}function s(a,b,c,d){var e;if(kb.rangeBounds)("none"!==c||0!==j.Util.trimText(b).length)&&(e=t(b,a.node,a.textOffset)),a.textOffset+=b.length;else if(a.node&&"string"==typeof a.node.nodeValue){var f=d?a.node.splitText(b.length):null;e=u(a.node),a.node=f}return e}function t(a,b,c){var d=jb.createRange();return d.setStart(b,c),d.setEnd(b,c+a.length),d.getBoundingClientRect()}function u(a){var b=a.parentNode,c=jb.createElement("wrapper"),d=a.cloneNode(!0);c.appendChild(a.cloneNode(!0)),b.replaceChild(c,a);var e=j.Util.Bounds(c);return b.replaceChild(d,c),e}function v(a,b,c){function d(a){if(v){var b=g();a=k(a,!!b),b&&(a=f(a,b))}return a}function e(a){var b=-1!==navigator.userAgent.toLowerCase().indexOf("msie")||navigator.userAgent.match(/Trident\/7\./);if(b&&isNaN(a[0])){var c=i();a=[1,0,0,1,c.x,c.y]}return a}function f(a,b){var c=i(b);return a=$.extend({},a),a.bottom+=c.y,a.top+=c.y,a.left+=c.x,a.right+=c.x,a}function g(){var b=$(a).parents('[style*="translate3d"]');return b.length>0?b:null}function i(a){var b=a||g(),c={x:0,y:0};return b&&b.each(function(a,b){var d=b.getAttribute("style").match(/translate3d\(([^\)]*)/)[1],e=parseFloat(d.split(" ")[0]),f=parseFloat(d.split(" ")[1]);c.y+=f,c.x+=e}),c}function k(a,b){if(F){var c=a;a=$.extend({},a),b?(a.right-=c.height,a.left-=c.height):(a.top=c.left,a.right=c.top,a.bottom=c.right,a.left=c.top-c.height/2)}return a}var l,m,t=c.ctx,u=nb(a,"color"),v=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,w=navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0,x=nb(a,"textDecoration"),y=nb(a,"textAlign"),z=e(nb(a,w?"-webkit-transform":"transform")),A=nb(a,w?"-webkit-transform-origin":"transform-origin"),B=A?A.split(" "):[0,0],C=Math.atan(z[1]/z[3]),D=Math.sin(C),E=(Math.cos(C),{node:b,textOffset:0}),F=1===Math.abs(D);j.Util.trimText(b.nodeValue).length>0&&(b.nodeValue=n(b.nodeValue,nb(a,"textTransform")),y=y.replace(["-webkit-auto"],["auto"]),m=b.nodeValue.split(!h.letterRendering&&/^(left|right|justify|auto)$/.test(y)&&o(nb(a,"letterSpacing"))?/(\b| )/:""),l=q(t,a,x,u),h.chinese&&m.forEach(function(a,b){/.*[\u4E00-\u9FA5].*$/.test(a)&&(a=a.split(""),a.unshift(b,1),m.splice.apply(m,a))}),v&&F&&(m=[b.nodeValue]),m.forEach(function(a,b){var c=s(E,a,x,b<m.length-1);c&&(c=d(c),p(a,c.left+parseFloat(B[1])*Math.abs(D),c.bottom,t,z),r(t,x,c,l,u))}))}function w(a,b){var c,d,e=jb.createElement("boundelement");return e.style.display="inline",c=a.style.listStyleType,a.style.listStyleType="none",e.appendChild(jb.createTextNode(b)),a.insertBefore(e,a.firstChild),d=j.Util.Bounds(e),a.removeChild(e),a.style.listStyleType=c,d}function x(a){var b=-1,c=1,d=a.parentNode.childNodes;if(a.parentNode){for(;d[++b]!==a;)1===d[b].nodeType&&c++;return c}return-1}function y(a,b){var c,d=x(a);switch(b){case"decimal":c=d;break;case"decimal-leading-zero":c=1===d.toString().length?d="0"+d.toString():d.toString();break;case"upper-roman":c=j.Generate.ListRoman(d);break;case"lower-roman":c=j.Generate.ListRoman(d).toLowerCase();break;case"lower-alpha":c=j.Generate.ListAlpha(d).toLowerCase();break;case"upper-alpha":c=j.Generate.ListAlpha(d)}return c+=". "}function z(a,b,c){var d,e,f,g=b.ctx,h=nb(a,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(h)){if(e=y(a,h),f=w(a,e),q(g,a,"none",nb(a,"color")),"inside"!==nb(a,"listStylePosition"))return;g.setVariable("textAlign","left"),d=c.left,p(e,d,f.bottom,g)}}function A(a){var b=e[a];return b&&b.succeeded===!0?b.img:!1}function B(a,b){var c=Math.max(a.left,b.left),d=Math.max(a.top,b.top),e=Math.min(a.left+a.width,b.left+b.width),f=Math.min(a.top+a.height,b.top+b.height);return{left:c,top:d,width:e-c,height:f-d}}function C(a,b){var c;return b?"auto"!==a?(c=g(a),b.children.push(c),c):b:c=g(0)}function D(a,b,c,d,e){var f=l(b,"paddingLeft"),g=l(b,"paddingTop"),h=l(b,"paddingRight"),i=l(b,"paddingBottom");P(a,c,0,0,c.width,c.height,d.left+f+e[3].width,d.top+g+e[0].width,d.width-(e[1].width+e[3].width+f+h),d.height-(e[0].width+e[2].width+g+i))}function E(a){return["Top","Right","Bottom","Left"].map(function(b){return{width:l(a,"border"+b+"Width"),color:nb(a,"border"+b+"Color")}})}function F(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(b){return nb(a,"border"+b+"Radius")})}function G(a,b,c,d){var e=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};return{start:a,startControl:b,endControl:c,end:d,subdivide:function(f){var g=e(a,b,f),h=e(b,c,f),i=e(c,d,f),j=e(g,h,f),k=e(h,i,f),l=e(j,k,f);return[G(a,g,j,l),G(l,k,i,d)]},curveTo:function(a){a.push(["bezierCurve",b.x,b.y,c.x,c.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",c.x,c.y,b.x,b.y,a.x,a.y])}}}function H(a,b,c,d,e,f,g){b[0]>0||b[1]>0?(a.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(a),d[1].curveTo(a)):a.push(["line",f,g]),(c[0]>0||c[1]>0)&&a.push(["line",e[0].start.x,e[0].start.y])}function I(a,b,c,d,e,f,g){var h=[];return b[0]>0||b[1]>0?(h.push(["line",d[1].start.x,d[1].start.y]),d[1].curveTo(h)):h.push(["line",a.c1[0],a.c1[1]]),c[0]>0||c[1]>0?(h.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(h),h.push(["line",g[0].end.x,g[0].end.y]),g[0].curveToReversed(h)):(h.push(["line",a.c2[0],a.c2[1]]),h.push(["line",a.c3[0],a.c3[1]])),b[0]>0||b[1]>0?(h.push(["line",e[1].end.x,e[1].end.y]),e[1].curveToReversed(h)):h.push(["line",a.c4[0],a.c4[1]]),h}function J(a,b,c){var d=a.left,e=a.top,f=a.width,g=a.height,h=b[0][0],i=b[0][1],j=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1],n=b[3][0],o=b[3][1],p=f-j,q=g-l,r=f-m,s=g-o;return{topLeftOuter:qb(d,e,h,i).topLeft.subdivide(.5),topLeftInner:qb(d+c[3].width,e+c[0].width,Math.max(0,h-c[3].width),Math.max(0,i-c[0].width)).topLeft.subdivide(.5),topRightOuter:qb(d+p,e,j,k).topRight.subdivide(.5),topRightInner:qb(d+Math.min(p,f+c[3].width),e+c[0].width,p>f+c[3].width?0:j-c[3].width,k-c[0].width).topRight.subdivide(.5),bottomRightOuter:qb(d+r,e+q,m,l).bottomRight.subdivide(.5),bottomRightInner:qb(d+Math.min(r,f+c[3].width),e+Math.min(q,g+c[0].width),Math.max(0,m-c[1].width),Math.max(0,l-c[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:qb(d,e+s,n,o).bottomLeft.subdivide(.5),bottomLeftInner:qb(d+c[3].width,e+s,Math.max(0,n-c[3].width),Math.max(0,o-c[2].width)).bottomLeft.subdivide(.5)}}function K(a,b,c,d,e){var f=nb(a,"backgroundClip"),g=[];switch(f){case"content-box":case"padding-box":H(g,d[0],d[1],b.topLeftInner,b.topRightInner,e.left+c[3].width,e.top+c[0].width),H(g,d[1],d[2],b.topRightInner,b.bottomRightInner,e.left+e.width-c[1].width,e.top+c[0].width),H(g,d[2],d[3],b.bottomRightInner,b.bottomLeftInner,e.left+e.width-c[1].width,e.top+e.height-c[2].width),H(g,d[3],d[0],b.bottomLeftInner,b.topLeftInner,e.left+c[3].width,e.top+e.height-c[2].width);break;default:H(g,d[0],d[1],b.topLeftOuter,b.topRightOuter,e.left,e.top),H(g,d[1],d[2],b.topRightOuter,b.bottomRightOuter,e.left+e.width,e.top),H(g,d[2],d[3],b.bottomRightOuter,b.bottomLeftOuter,e.left+e.width,e.top+e.height),H(g,d[3],d[0],b.bottomLeftOuter,b.topLeftOuter,e.left,e.top+e.height)}return g}function L(a,b,c){var d,e,f,g,h,i,j=b.left,k=b.top,l=b.width,m=b.height,n=F(a),o=J(b,n,c),p={clip:K(a,o,c,n,b),borders:[]};for(d=0;4>d;d++)if(c[d].width>0){switch(e=j,f=k,g=l,h=m-c[2].width,d){case 0:h=c[0].width,i=I({c1:[e,f],c2:[e+g,f],c3:[e+g-c[1].width,f+h],c4:[e+c[3].width,f+h]},n[0],n[1],o.topLeftOuter,o.topLeftInner,o.topRightOuter,o.topRightInner);break;case 1:e=j+l-c[1].width,g=c[1].width,i=I({c1:[e+g,f],c2:[e+g,f+h+c[2].width],c3:[e,f+h],c4:[e,f+c[0].width]},n[1],n[2],o.topRightOuter,o.topRightInner,o.bottomRightOuter,o.bottomRightInner);break;case 2:f=f+m-c[2].width,h=c[2].width,i=I({c1:[e+g,f+h],c2:[e,f+h],c3:[e+c[3].width,f],c4:[e+g-c[2].width,f]},n[2],n[3],o.bottomRightOuter,o.bottomRightInner,o.bottomLeftOuter,o.bottomLeftInner);break;case 3:g=c[3].width,i=I({c1:[e,f+h+c[2].width],c2:[e,f],c3:[e+g,f+c[0].width],c4:[e+g,f+h]},n[3],n[0],o.bottomLeftOuter,o.bottomLeftInner,o.topLeftOuter,o.topLeftInner)}p.borders.push({args:i,color:c[d].color})}return p}function M(a,b){var c=a.drawShape();return b.forEach(function(a,b){c[0===b?"moveTo":a[0]+"To"].apply(null,a.slice(1))}),c}function N(a,b,c){"transparent"!==c&&(a.setVariable("fillStyle",c),M(a,b),a.fill(),ib+=1)}function O(a,b,c){var e,f,g=jb.createElement("valuewrap"),h=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];h.forEach(function(b){try{g.style[b]=nb(a,b)}catch(c){d("html2canvas: Parse: Exception caught in renderFormValue: "+c.message)}}),g.style.borderColor="black",g.style.borderStyle="solid",g.style.display="block",g.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(a.type)||"SELECT"===a.nodeName)&&(g.style.lineHeight=nb(a,"height")),g.style.top=b.top+"px",g.style.left=b.left+"px",e="SELECT"===a.nodeName?(a.options[a.selectedIndex]||0).text:a.value,e||(e=a.placeholder),f=jb.createTextNode(e),g.appendChild(f),mb.appendChild(g),v(a,f,c),mb.removeChild(g)}function P(a){a.drawImage.apply(a,Array.prototype.slice.call(arguments,1)),ib+=1}function Q(c,d){var e=a.getComputedStyle(c,d);if(e&&e.content&&"none"!==e.content&&"-moz-alt-content"!==e.content){var f=e.content+"",g=f.substr(0,1);g===f.substr(f.length-1)&&g.match(/'|"/)&&(f=f.substr(1,f.length-2));var h="url"===f.substr(0,3),i=b.createElement(h?"img":"span");return i.className=ob+"-before "+ob+"-after",i.style.cssText=R(c,d),h?i.src=j.Util.parseBackgroundImage(f)[0].args[0]:i.innerHTML=f,i}}function R(b,c){var d,e=a.getComputedStyle(b,c);if(""!=e.cssText)return e.cssText;d="";for(var f=0;f<e.length;f++)d+=e[f]+": "+e.getPropertyValue(e[f])+"; ";return d}function S(a,b){var c=Q(a,":before"),d=Q(a,":after");(c||d)&&(c&&(a.className+=" "+ob+"-before",a.parentNode.insertBefore(c,a),eb(c,b,!0),a.parentNode.removeChild(c),a.className=a.className.replace(ob+"-before","").trim()),d&&(a.className+=" "+ob+"-after",a.appendChild(d),eb(d,b,!0),a.removeChild(d),a.className=a.className.replace(ob+"-after","").trim()))}function T(a,b,c,d){var e=Math.round(d.left+c.left),f=Math.round(d.top+c.top);a.createPattern(b),a.translate(e,f),a.fill(),a.translate(-e,-f)}function U(a,b,c,d,e,f,g,h){var i=[];i.push(["line",Math.round(e),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(h+f)]),i.push(["line",Math.round(e),Math.round(h+f)]),M(a,i),a.save(),a.clip(),T(a,b,c,d),a.restore()}function V(a,b,c){m(a,b.left,b.top,b.width,b.height,c)}function W(a,b,c){if(c.length){var d=[];c.forEach(function(a,b){var e=1/(c.length-1)*b;d.push({point:e,color:a})}),a.drawLinearGradient({gradientStops:d,x0:b.left,y0:b.top,x1:b.left+b.width,y1:b.top+b.height}),ib+=1}}function X(a,b,c,d,e){var f=j.Util.BackgroundSize(a,b,d,e),g=j.Util.BackgroundPosition(a,b,d,e,f),h=nb(a,"backgroundRepeat").split(",").map(function(a){return a.trim()});switch(d=Z(d,f),h=h[e]||h[0]){case"repeat-x":U(c,d,g,b,b.left,b.top+g.top,99999,d.height);break;case"repeat-y":U(c,d,g,b,b.left+g.left,b.top,d.width,99999);break;case"no-repeat":U(c,d,g,b,b.left+g.left,b.top+g.top,d.width,d.height);break;default:T(c,d,g,{top:b.top,left:b.left,width:d.width,height:d.height})}}function Y(a,b,c){for(var e,f=nb(a,"backgroundImage"),g=j.Util.parseBackgroundImage(f),h=g.length;h--;)if(f=g[h],f.args&&0!==f.args.length){var i="url"===f.method?f.args[0]:f.value;e=A(i),e?X(a,b,c,e,h):d("html2canvas: Error loading background:",f)}}function Z(a,b){if(a.width===b.width&&a.height===b.height)return a;var c,d=jb.createElement("canvas");return d.width=b.width,d.height=b.height,c=d.getContext("2d"),P(c,a,0,0,a.width,a.height,0,0,b.width,b.height),d}function _(a,b,c){var d=nb(b,"opacity")*(c?c.opacity:1);return a.setVariable("globalAlpha",d),d}function ab(a,b,c){var d=f(b?c.width:i(),b?c.height:k()),e={ctx:d,zIndex:C(nb(a,"zIndex"),b?b.zIndex:null),opacity:_(d,a,b),cssPosition:nb(a,"position"),borders:E(a),clip:b&&b.clip?j.Util.Extend({},b.clip):null},g=/(hidden|scroll|auto)/.test(nb(a,"overflow"))||/(hidden|scroll|auto)/.test(nb(a,"overflow-x"))||/(hidden|scroll|auto)/.test(nb(a,"overflow-y"));return h.useOverflow===!0&&g&&/(BODY)/i.test(a.nodeName)===!1&&(e.clip=e.clip?B(e.clip,c):c),e.zIndex.children.push(e),e}function bb(a,b,c){var d={left:b.left+a[3].width,top:b.top+a[0].width,width:b.width-(a[1].width+a[3].width),height:b.height-(a[0].width+a[2].width)};return c&&(d=B(d,c)),d}function cb(a,b,c){function e(a){if(a&&-1!=a.search("linear-gradient")){var b=a.match(/linear-gradient\(.*(\)|(\#\d{3,6}))\)/g);if(b.length){var c=b[0].match(/(rgba?\([^/)]+\))|(\#\d{3,6})/g);return c}}return null}var f,g=j.Util.Bounds(a),h=lb.test(a.nodeName)?"#efefef":nb(a,"backgroundColor"),i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,k=-1!==navigator.userAgent.toLowerCase().indexOf("msie")||navigator.userAgent.match(/Trident\/7\./),l=e(nb(a,i||k?"backgroundImage":"background")),m=ab(a,b,g),n=m.borders,o=m.ctx,p=bb(n,g,m.clip),q=L(a,g,n);switch(M(o,q.clip),o.save(),o.clip(),g.height>0&&g.width>0&&(V(o,g,h),l&&W(o,g,l)),p.height>0&&p.width>0&&Y(a,p,o),o.restore(),q.borders.forEach(function(a){N(o,a.args,a.color)}),c||S(a,m),a.nodeName){case"IMG":(f=A(a.getAttribute("src")))?D(o,a,f,g,n):d("html2canvas: Error loading <img>:"+a.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(a.type)&&(a.value||a.placeholder).length>0&&O(a,g,m);break;case"TEXTAREA":(a.value||a.placeholder||"").length>0&&O(a,g,m);break;case"SELECT":(a.options||a.placeholder||"").length>0&&O(a,g,m);break;case"LI":z(a,m,p);break;case"CANVAS":D(o,a,a,g,n)}return m}function db(a){return"none"!==nb(a,"display")&&"hidden"!==nb(a,"visibility")&&!a.hasAttribute("data-html2canvas-ignore")}function eb(a,b,c){db(a)&&(b=cb(a,b,c)||b,lb.test(a.nodeName)||j.Util.Children(a).forEach(function(d){1===d.nodeType?eb(d,b,c):3===d.nodeType&&v(a,d,b)}))}function fb(a,b){function c(a){var b,d,e,f,h,i=j.Util.Children(a),k=i.length;for(h=0;k>h;h+=1)if(f=i[h],3===f.nodeType)g+=f.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;");else if(1===f.nodeType&&!/^(script|meta|title)$/.test(f.nodeName.toLowerCase())){if(g+="<"+f.nodeName.toLowerCase(),f.hasAttributes())for(b=f.attributes,e=b.length,d=0;e>d;d+=1)g+=" "+b[d].name+'="'+b[d].value+'"';g+=">",c(f),g+="</"+f.nodeName.toLowerCase()+">"}}var d=new Image,e=i(),f=k(),g="";c(a),d.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+e+"' height='"+f+"'>","<foreignObject width='"+e+"' height='"+f+"'>","<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>",g.replace(/\#/g,"%23"),"</html>","</foreignObject>","</svg>"].join(""),d.onload=function(){b.svgRender=d}}function gb(){var a=cb(hb,null);return kb.svgRendering&&fb(b.documentElement,a),Array.prototype.slice.call(hb.children,0).forEach(function(b){eb(b,a)}),a.backgroundColor=nb(b.documentElement,"backgroundColor"),mb.removeChild(pb),a}a.scroll(0,0);var hb=h.elements===c?b.body:h.elements[0],ib=0,jb=hb.ownerDocument,kb=j.Util.Support(h,jb),lb=new RegExp("("+h.ignoreElements+")"),mb=jb.body,nb=j.Util.getCSS,ob="___html2canvas___pseudoelement",pb=jb.createElement("style");pb.innerHTML="."+ob+'-before:before { content: "" !important; display: none !important; }.'+ob+'-after:after { content: "" !important; display: none !important; }',mb.appendChild(pb),e=e||{};var qb=function(a){return function(b,c,d,e){var f=d*a,g=e*a,h=b+d,i=c+e;return{topLeft:G({x:b,y:i},{x:b,y:i-g},{x:h-f,y:c},{x:h,y:c}),topRight:G({x:b,y:c},{x:b+f,y:c},{x:h,y:i-g},{x:h,y:i}),bottomRight:G({x:h,y:c},{x:h,y:c+g},{x:b+f,y:i},{x:b,y:i}),bottomLeft:G({x:h,y:i},{x:h-f,y:i},{x:b,y:c+g},{x:b,y:c})}}}(4*((Math.sqrt(2)-1)/3));return gb()},j.Preload=function(e){function f(a){A.href=a,A.href=A.href;var b=A.protocol+A.host;return b===q}function g(){d("html2canvas: start: images: "+u.numLoaded+" / "+u.numTotal+" (failed: "+u.numFailed+")"),!u.firstRun&&u.numLoaded>=u.numTotal&&(d("Finished loading images: # "+u.numTotal+" (failed: "+u.numFailed+")"),"function"==typeof e.complete&&e.complete(u))}function h(b,d,f){var h,i,j=e.proxy;A.href=b,b=A.href,h="html2canvas_"+v++,f.callbackname=h,j+=j.indexOf("?")>-1?"&":"?",j+="url="+encodeURIComponent(b)+"&callback="+h,i=x.createElement("script"),a[h]=function(b){"error:"===b.substring(0,6)?(f.succeeded=!1,u.numLoaded++,u.numFailed++,g()):(p(d,f),d.src=b),a[h]=c;try{delete a[h]}catch(e){}i.parentNode.removeChild(i),i=null,delete f.script,delete f.callbackname},i.setAttribute("type","text/javascript"),i.setAttribute("src",j),f.script=i,a.document.body.appendChild(i)}function i(b,c){var d=a.getComputedStyle(b,c),e=d.content;"url"===e.substr(0,3)&&r.loadImage(j.Util.parseBackgroundImage(e)[0].args[0]),n(d.backgroundImage,b)}function k(a){i(a,":before"),i(a,":after")}function l(a,b){var d=j.Generate.Gradient(a,b);d!==c&&(u[a]={img:d,succeeded:!0},u.numTotal++,u.numLoaded++,g())}function m(a){return a&&a.method&&a.args&&a.args.length>0}function n(a,b){var d;j.Util.parseBackgroundImage(a).filter(m).forEach(function(a){"url"===a.method?r.loadImage(a.args[0]):a.method.match(/\-?gradient$/)&&(d===c&&(d=j.Util.Bounds(b)),l(a.value,d))})}function o(a){var b=!1;try{j.Util.Children(a).forEach(function(a){o(a)})}catch(e){}try{b=a.nodeType}catch(f){b=!1,d("html2canvas: failed to access some element's nodeType - Exception: "+f.message)}if(1===b||b===c){k(a);try{n(j.Util.getCSS(a,"backgroundImage"),a)}catch(e){d("html2canvas: failed to get background-image - Exception: "+e.message)}n(a)}}function p(b,d){b.onload=function(){d.timer!==c&&a.clearTimeout(d.timer),u.numLoaded++,d.succeeded=!0,b.onerror=b.onload=null,g()},b.onerror=function(){if("anonymous"===b.crossOrigin&&(a.clearTimeout(d.timer),e.proxy)){var c=b.src;return b=new Image,d.img=b,b.src=c,void h(b.src,b,d)}u.numLoaded++,u.numFailed++,d.succeeded=!1,b.onerror=b.onload=null,g()}}var q,r,s,t,u={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},v=0,w=e.elements[0]||b.body,x=w.ownerDocument,y=x.images,z=y.length,A=x.createElement("a"),B=function(a){return a.crossOrigin!==c}(new Image);for(A.href=a.location.href,q=A.protocol+A.host,r={loadImage:function(b){var d,g;b&&u[b]===c&&(d=new Image,b.match(/data:image\/.*;base64,/i)?(d.src=b.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),g=u[b]={img:d},u.numTotal++,p(d,g)):f(b)||e.allowTaint===!0?(g=u[b]={img:d},u.numTotal++,p(d,g),d.src=b):B&&!e.allowTaint&&e.useCORS?(d.crossOrigin="anonymous",g=u[b]={img:d},u.numTotal++,p(d,g),d.src=b,d.customComplete=function(){this.img.complete?this.img.onerror():this.timer=a.setTimeout(this.img.customComplete,100)}.bind(g),d.customComplete()):e.proxy&&(g=u[b]={img:d},u.numTotal++,h(b,d,g)))},cleanupDOM:function(f){var h,i;if(!u.cleanupDone){d(f&&"string"==typeof f?"html2canvas: Cleanup because: "+f:"html2canvas: Cleanup after timeout: "+e.timeout+" ms.");for(i in u)if(u.hasOwnProperty(i)&&(h=u[i],"object"==typeof h&&h.callbackname&&h.succeeded===c)){a[h.callbackname]=c;try{delete a[h.callbackname]}catch(j){}h.script&&h.script.parentNode&&(h.script.setAttribute("src","about:blank"),h.script.parentNode.removeChild(h.script)),u.numLoaded++,u.numFailed++,d("html2canvas: Cleaned up failed img: '"+i+"' Steps: "+u.numLoaded+" / "+u.numTotal)}a.stop!==c?a.stop():b.execCommand!==c&&b.execCommand("Stop",!1),b.close!==c&&b.close(),u.cleanupDone=!0,f&&"string"==typeof f||g()}},renderingDone:function(){t&&a.clearTimeout(t)}},e.timeout>0&&(t=a.setTimeout(r.cleanupDOM,e.timeout)),d("html2canvas: Preload starts: finding background-images"),u.firstRun=!0,o(w),d("html2canvas: Preload: Finding images"),s=0;z>s;s+=1)r.loadImage(y[s].getAttribute("src"));return u.firstRun=!1,d("html2canvas: Preload: Done."),u.numTotal===u.numLoaded&&g(),r},j.Renderer=function(a,d){function e(a){var b=[],c=function(a){var d=[],e=[];a.children.forEach(function(a){a.children&&a.children.length>0?(d.push(a),e.push(a.zindex)):b.push(a)}),e.sort(function(a,b){return a-b}),e.forEach(function(a){var b;d.some(function(c,d){return b=d,c.zindex===a}),c(d.splice(b,1)[0])})};return c(a.zIndex),b}function f(a){var b;if("string"==typeof d.renderer&&j.Renderer[a]!==c)b=j.Renderer[a](d);else{if("function"!=typeof a)throw new Error("Unknown renderer");b=a(d)}if("function"!=typeof b)throw new Error("Invalid renderer defined");return b}return f(d.renderer)(a,d,b,e(a),j)},j.Util.Support=function(a,b){function e(){var a=new Image,e=b.createElement("canvas"),f=e.getContext===c?!1:e.getContext("2d");if(f===!1)return!1;e.width=e.height=10,a.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{f.drawImage(a,0,0),e.toDataURL()}catch(g){return!1}return d("html2canvas: Parse: SVG powered rendering available"),!0}function f(){var a,c,d,e,f=!1;return b.createRange&&(a=b.createRange(),a.getBoundingClientRect&&(c=b.createElement("boundtest"),c.style.height="123px",c.style.display="block",b.body.appendChild(c),a.selectNode(c),d=a.getBoundingClientRect(),e=d.height,123===e&&(f=!0),b.body.removeChild(c))),f}return{rangeBounds:f(),svgRendering:a.svgRendering&&e()}},a.html2canvas=function(b,c){b=b.length?b:[b];var e,f,g={logging:!1,elements:b,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return g=j.Util.Extend(c,g),j.logging=g.logging,g.complete=function(a){("function"!=typeof g.onpreloaded||g.onpreloaded(a)!==!1)&&(e=j.Parse(a,g),("function"!=typeof g.onparsed||g.onparsed(e)!==!1)&&(f=j.Renderer(e,g),"function"==typeof g.onrendered&&g.onrendered(f)))},a.setTimeout(function(){j.Preload(g)},0),{render:function(a,b){return j.Renderer(a,j.Util.Extend(b,g))},parse:function(a,b){return j.Parse(a,j.Util.Extend(b,g))},preload:function(a){return j.Preload(j.Util.Extend(a,g))},log:d}},a.html2canvas.log=d,a.html2canvas.Renderer={Canvas:c},j.Renderer.Canvas=function(a){function e(a,b){a.beginPath(),b.forEach(function(b){a[b.name].apply(a,b.arguments)}),a.closePath()}function f(a){if(-1===j.indexOf(a.arguments[0].src)){l.drawImage(a.arguments[0],0,0);try{l.getImageData(0,0,1,1)}catch(b){return k=i.createElement("canvas"),l=k.getContext("2d"),!1}j.push(a.arguments[0].src)}return!0}function g(a){return"transparent"===a||"rgba(0, 0, 0, 0)"===a}function h(b,c){switch(c.type){case"variable":b[c.name]=c.arguments;break;case"function":if("createPattern"===c.name){if(c.arguments[0].width>0&&c.arguments[0].height>0)try{b.fillStyle=b.createPattern(c.arguments[0],"repeat")}catch(g){d("html2canvas: Renderer: Error creating pattern",g.message)}}else if("drawShape"===c.name)e(b,c.arguments);else if("drawImage"===c.name)c.arguments[8]>0&&c.arguments[7]>0&&(!a.taintTest||a.taintTest&&f(c))&&b.drawImage.apply(b,c.arguments);else if("drawLinearGradient"===c.name){var h=c.arguments[0],i=h.gradientStops,j=b.createLinearGradient(h.x0,h.y0,h.x1,h.y1);i.forEach(function(a){j.addColorStop(a.point,a.color)}),b.fillStyle=j,b.fillRect(h.x0,h.y0,h.x1,h.y1)}else b[c.name].apply(b,c.arguments)}}a=a||{};var i=b,j=[],k=b.createElement("canvas"),l=k.getContext("2d"),m=a.canvas||i.createElement("canvas");return function(a,b,e,f,i){var j,k,l,n,o,p,q=m.getContext("2d");if(m.width=m.style.width=b.width||a.ctx.width,m.height=m.style.height=b.height||a.ctx.height,p=q.fillStyle,q.fillStyle=g(a.backgroundColor)&&b.background!==c?b.background:a.backgroundColor,q.fillRect(0,0,m.width,m.height),q.fillStyle=p,b.svgRendering&&a.svgRender!==c)q.drawImage(a.svgRender,0,0);else for(k=0,l=f.length;l>k;k+=1)j=f.splice(0,1)[0],j.canvasPosition=j.canvasPosition||{},q.textBaseline="bottom",j.clip&&j.clip.width>0&&j.clip.height>0&&(q.save(),q.beginPath(),q.rect(j.clip.left,j.clip.top,j.clip.width,j.clip.height),q.clip()),j.ctx.storage&&j.ctx.storage.forEach(h.bind(null,q)),j.clip&&q.restore();return d("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),l=b.elements.length,1===l&&"object"==typeof b.elements[0]&&"BODY"!==b.elements[0].nodeName?(o=i.Util.Bounds(b.elements[0]),n=e.createElement("canvas"),n.width=o.width,n.height=o.height,q=n.getContext("2d"),q.drawImage(m,o.left,o.top,o.width,o.height,0,0,o.width,o.height),m=null,n):m}}}(window,document),e("undefined"!=typeof html2canvas?html2canvas:window.html2canvas)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],95:[function(a,b){(function(c){jQuery=c.jQuery=a("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js"),a("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-ui-1.10.3.custom.min.js"),__browserify_shim_require__=a,function(){!function(a){"use strict";a.widget("ui.rangeSliderMouseTouch",a.ui.mouse,{enabled:!0,_mouseInit:function(){var b=this;a.ui.mouse.prototype._mouseInit.apply(this),this._mouseDownEvent=!1,this.element.bind("touchstart."+this.widgetName,function(a){return b._touchStart(a)})},_mouseDestroy:function(){a(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),a.ui.mouse.prototype._mouseDestroy.apply(this)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},destroy:function(){this._mouseDestroy(),a.ui.mouse.prototype.destroy.apply(this),this._mouseInit=null},_touchStart:function(b){if(!this.enabled)return!1;b.which=1,b.preventDefault(),this._fillTouchEvent(b);var c=this,d=this._mouseDownEvent;this._mouseDown(b),d!==this._mouseDownEvent&&(this._touchEndDelegate=function(a){c._touchEnd(a)},this._touchMoveDelegate=function(a){c._touchMove(a)},a(document).bind("touchmove."+this.widgetName,this._touchMoveDelegate).bind("touchend."+this.widgetName,this._touchEndDelegate))},_mouseDown:function(b){return this.enabled?a.ui.mouse.prototype._mouseDown.apply(this,[b]):!1},_touchEnd:function(b){this._fillTouchEvent(b),this._mouseUp(b),a(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),this._mouseDownEvent=!1,a(document).trigger("mouseup")},_touchMove:function(a){return a.preventDefault(),this._fillTouchEvent(a),this._mouseMove(a)},_fillTouchEvent:function(a){var b;b="undefined"==typeof a.targetTouches&&"undefined"==typeof a.changedTouches?a.originalEvent.targetTouches[0]||a.originalEvent.changedTouches[0]:a.targetTouches[0]||a.changedTouches[0],a.pageX=b.pageX,a.pageY=b.pageY}})}(jQuery),function(a){"use strict";a.widget("ui.rangeSliderDraggable",a.ui.rangeSliderMouseTouch,{cache:null,options:{containment:null},_create:function(){a.ui.rangeSliderMouseTouch.prototype._create.apply(this),setTimeout(a.proxy(this._initElementIfNotDestroyed,this),10)},destroy:function(){this.cache=null,a.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_initElementIfNotDestroyed:function(){this._mouseInit&&this._initElement()},_initElement:function(){this._mouseInit(),this._cache()},_setOption:function(b,c){"containment"===b&&(this.options.containment=null===c||0===a(c).length?null:a(c))},_mouseStart:function(a){return this._cache(),this.cache.click={left:a.pageX,top:a.pageY},this.cache.initialOffset=this.element.offset(),this._triggerMouseEvent("mousestart"),!0},_mouseDrag:function(a){var b=a.pageX-(this.cache.click?this.cache.click.left:0);return b=this._constraintPosition(b+(this.cache.initialOffset?this.cache.initialOffset.left:0)),this._applyPosition(b),this._triggerMouseEvent("sliderDrag"),!1},_mouseStop:function(){this._triggerMouseEvent("stop")},_constraintPosition:function(a){return 0!==this.element.parent().length&&null!==this.cache.parent.offset&&(a=Math.min(a,this.cache.parent.offset.left+this.cache.parent.width-this.cache.width.outer),a=Math.max(a,this.cache.parent.offset.left)),a},_applyPosition:function(a){var b={top:this.cache.offset.top,left:a};this.element.offset({left:a}),this.cache.offset=b},_cacheIfNecessary:function(){null===this.cache&&this._cache()},_cache:function(){this.cache={},this._cacheMargins(),this._cacheParent(),this._cacheDimensions(),this.cache.offset=this.element.offset()},_cacheMargins:function(){this.cache.margin={left:this._parsePixels(this.element,"marginLeft"),right:this._parsePixels(this.element,"marginRight"),top:this._parsePixels(this.element,"marginTop"),bottom:this._parsePixels(this.element,"marginBottom")}},_cacheParent:function(){if(null!==this.options.parent){var a=this.element.parent();this.cache.parent={offset:a.offset(),width:a.width()}}else this.cache.parent=null},_cacheDimensions:function(){this.cache.width={outer:this.element.outerWidth(),inner:this.element.width()}},_parsePixels:function(a,b){return parseInt(a.css(b),10)||0},_triggerMouseEvent:function(a){var b=this._prepareEventData();this.element.trigger(a,b)},_prepareEventData:function(){return{element:this.element,offset:this.cache.offset||null}}})}(jQuery),function(a,b){"use strict";a.widget("ui.rangeSlider",{options:{bounds:{min:0,max:100},defaultValues:{min:20,max:50},wheelMode:null,wheelSpeed:4,arrows:!0,valueLabels:"show",formatter:null,durationIn:0,durationOut:400,delayOut:200,range:{min:!1,max:!1},step:!1,scales:!1,enabled:!0},_values:null,_valuesChanged:!1,bar:null,leftHandle:null,rightHandle:null,innerBar:null,container:null,arrows:null,labels:null,changing:{min:!1,max:!1},changed:{min:!1,max:!1},ruler:null,_create:function(){this._setDefaultValues(),this.labels={left:null,right:null,leftDisplayed:!0,rightDisplayed:!0},this.arrows={left:null,right:null},this.changing={min:!1,max:!1},this.changed={min:!1,max:!1},this._createElements(),this._bindResize(),setTimeout(a.proxy(this.resize,this),1),setTimeout(a.proxy(this._initValues,this),1)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min,max:this.options.defaultValues.max}},_bindResize:function(){var b=this;this._resizeProxy=function(a){b.resize(a)},a(window).resize(this._resizeProxy)},_initWidth:function(){this.container.css("width",this.element.width()-this.container.outerWidth(!0)+this.container.width()),this.innerBar.css("width",this.container.width()-this.innerBar.outerWidth(!0)+this.innerBar.width())},_initValues:function(){this.values(this._values.min,this._values.max)},_setOption:function(a,b){this._setWheelOption(a,b),this._setArrowsOption(a,b),this._setLabelsOption(a,b),this._setLabelsDurations(a,b),this._setFormatterOption(a,b),this._setBoundsOption(a,b),this._setRangeOption(a,b),this._setStepOption(a,b),this._setScalesOption(a,b),this._setEnabledOption(a,b)
},_validProperty:function(a,b,c){return null===a||"undefined"==typeof a[b]?c:a[b]},_setStepOption:function(a,b){"step"===a&&(this.options.step=b,this._leftHandle("option","step",b),this._rightHandle("option","step",b),this._changed(!0))},_setScalesOption:function(a,b){"scales"===a&&(b===!1||null===b?(this.options.scales=!1,this._destroyRuler()):b instanceof Array&&(this.options.scales=b,this._updateRuler()))},_setRangeOption:function(a,b){"range"===a&&(this._bar("option","range",b),this.options.range=this._bar("option","range"),this._changed(!0))},_setBoundsOption:function(a,b){"bounds"===a&&"undefined"!=typeof b.min&&"undefined"!=typeof b.max&&this.bounds(b.min,b.max)},_setWheelOption:function(a,b){("wheelMode"===a||"wheelSpeed"===a)&&(this._bar("option",a,b),this.options[a]=this._bar("option",a))},_setLabelsOption:function(a,b){if("valueLabels"===a){if("hide"!==b&&"show"!==b&&"change"!==b)return;this.options.valueLabels=b,"hide"!==b?(this._createLabels(),this._leftLabel("update"),this._rightLabel("update")):this._destroyLabels()}},_setFormatterOption:function(a,b){"formatter"===a&&null!==b&&"function"==typeof b&&(this.options.formatter=b,"hide"!==this.options.valueLabels&&(this._destroyLabels(),this._createLabels()))},_setArrowsOption:function(a,b){"arrows"!==a||b!==!0&&b!==!1||b===this.options.arrows||(b===!0?(this.element.removeClass("ui-rangeSlider-noArrow").addClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","block"),this.arrows.right.css("display","block"),this.options.arrows=!0):b===!1&&(this.element.addClass("ui-rangeSlider-noArrow").removeClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.options.arrows=!1),this._initWidth())},_setLabelsDurations:function(a,b){if("durationIn"===a||"durationOut"===a||"delayOut"===a){if(parseInt(b,10)!==b)return;null!==this.labels.left&&this._leftLabel("option",a,b),null!==this.labels.right&&this._rightLabel("option",a,b),this.options[a]=b}},_setEnabledOption:function(a,b){"enabled"===a&&this.toggle(b)},_createElements:function(){"absolute"!==this.element.css("position")&&this.element.css("position","relative"),this.element.addClass("ui-rangeSlider"),this.container=a("<div class='ui-rangeSlider-container' />").css("position","absolute").appendTo(this.element),this.innerBar=a("<div class='ui-rangeSlider-innerBar' />").css("position","absolute").css("top",0).css("left",0),this._createHandles(),this._createBar(),this.container.prepend(this.innerBar),this._createArrows(),"hide"!==this.options.valueLabels?this._createLabels():this._destroyLabels(),this._updateRuler(),this.options.enabled||this._toggle(this.options.enabled)},_createHandle:function(b){return a("<div />")[this._handleType()](b).bind("sliderDrag",a.proxy(this._changing,this)).bind("stop",a.proxy(this._changed,this))},_createHandles:function(){this.leftHandle=this._createHandle({isLeft:!0,bounds:this.options.bounds,value:this._values.min,step:this.options.step}).appendTo(this.container),this.rightHandle=this._createHandle({isLeft:!1,bounds:this.options.bounds,value:this._values.max,step:this.options.step}).appendTo(this.container)},_createBar:function(){this.bar=a("<div />").prependTo(this.container).bind("sliderDrag scroll zoom",a.proxy(this._changing,this)).bind("stop",a.proxy(this._changed,this)),this._bar({leftHandle:this.leftHandle,rightHandle:this.rightHandle,values:{min:this._values.min,max:this._values.max},type:this._handleType(),range:this.options.range,wheelMode:this.options.wheelMode,wheelSpeed:this.options.wheelSpeed}),this.options.range=this._bar("option","range"),this.options.wheelMode=this._bar("option","wheelMode"),this.options.wheelSpeed=this._bar("option","wheelSpeed")},_createArrows:function(){this.arrows.left=this._createArrow("left"),this.arrows.right=this._createArrow("right"),this.options.arrows?this.element.addClass("ui-rangeSlider-withArrows"):(this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.element.addClass("ui-rangeSlider-noArrow"))},_createArrow:function(b){var c,d=a("<div class='ui-rangeSlider-arrow' />").append("<div class='ui-rangeSlider-arrow-inner' />").addClass("ui-rangeSlider-"+b+"Arrow").css("position","absolute").css(b,0).appendTo(this.element);return c="right"===b?a.proxy(this._scrollRightClick,this):a.proxy(this._scrollLeftClick,this),d.bind("mousedown touchstart",c),d},_proxy:function(a,b,c){var d=Array.prototype.slice.call(c);return a[b].apply(a,d)},_handleType:function(){return"rangeSliderHandle"},_barType:function(){return"rangeSliderBar"},_bar:function(){return this._proxy(this.bar,this._barType(),arguments)},_labelType:function(){return"rangeSliderLabel"},_leftLabel:function(){return this._proxy(this.labels.left,this._labelType(),arguments)},_rightLabel:function(){return this._proxy(this.labels.right,this._labelType(),arguments)},_leftHandle:function(){return this._proxy(this.leftHandle,this._handleType(),arguments)},_rightHandle:function(){return this._proxy(this.rightHandle,this._handleType(),arguments)},_getValue:function(a,b){return b===this.rightHandle&&(a-=b.outerWidth()),a*(this.options.bounds.max-this.options.bounds.min)/(this.container.innerWidth()-b.outerWidth(!0))+this.options.bounds.min},_trigger:function(a){var b=this;setTimeout(function(){b.element.trigger(a,{label:b.element,values:b.values()})},1)},_changing:function(){this._updateValues()&&(this._trigger("valuesChanging"),this._valuesChanged=!0)},_deactivateLabels:function(){"change"===this.options.valueLabels&&(this._leftLabel("option","show","hide"),this._rightLabel("option","show","hide"))},_reactivateLabels:function(){"change"===this.options.valueLabels&&(this._leftLabel("option","show","change"),this._rightLabel("option","show","change"))},_changed:function(a){a===!0&&this._deactivateLabels(),(this._updateValues()||this._valuesChanged)&&(this._trigger("valuesChanged"),a!==!0&&this._trigger("userValuesChanged"),this._valuesChanged=!1),a===!0&&this._reactivateLabels()},_updateValues:function(){var a=this._leftHandle("value"),b=this._rightHandle("value"),c=this._min(a,b),d=this._max(a,b),e=c!==this._values.min||d!==this._values.max;return this._values.min=this._min(a,b),this._values.max=this._max(a,b),e},_min:function(a,b){return Math.min(a,b)},_max:function(a,b){return Math.max(a,b)},_createLabel:function(b,c){var d;return null===b?(d=this._getLabelConstructorParameters(b,c),b=a("<div />").appendTo(this.element)[this._labelType()](d)):(d=this._getLabelRefreshParameters(b,c),b[this._labelType()](d)),b},_getLabelConstructorParameters:function(a,b){return{handle:b,handleType:this._handleType(),formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getLabelRefreshParameters:function(){return{formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getFormatter:function(){return this.options.formatter===!1||null===this.options.formatter?this._defaultFormatter:this.options.formatter},_defaultFormatter:function(a){return Math.round(a)},_destroyLabel:function(a){return null!==a&&(a[this._labelType()]("destroy"),a.remove(),a=null),a},_createLabels:function(){this.labels.left=this._createLabel(this.labels.left,this.leftHandle),this.labels.right=this._createLabel(this.labels.right,this.rightHandle),this._leftLabel("pair",this.labels.right)},_destroyLabels:function(){this.labels.left=this._destroyLabel(this.labels.left),this.labels.right=this._destroyLabel(this.labels.right)},_stepRatio:function(){return this._leftHandle("stepRatio")},_scrollRightClick:function(a){return this.options.enabled?(a.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),void this._continueScrolling("scrollRight",4*this._stepRatio(),1)):!1},_continueScrolling:function(a,b,c,d){if(!this.options.enabled)return!1;this._bar(a,c),d=d||5,d--;var e=this,f=16,g=Math.max(1,4/this._stepRatio());this._scrollTimeout=setTimeout(function(){0===d&&(b>f?b=Math.max(f,b/1.5):c=Math.min(g,2*c),d=5),e._continueScrolling(a,b,c,d)},b)},_scrollLeftClick:function(a){return this.options.enabled?(a.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),void this._continueScrolling("scrollLeft",4*this._stepRatio(),1)):!1},_bindStopScroll:function(){var b=this;this._stopScrollHandle=function(a){a.preventDefault(),b._stopScroll()},a(document).bind("mouseup touchend",this._stopScrollHandle)},_stopScroll:function(){a(document).unbind("mouseup touchend",this._stopScrollHandle),this._stopScrollHandle=null,this._bar("stopScroll"),clearTimeout(this._scrollTimeout)},_createRuler:function(){this.ruler=a("<div class='ui-rangeSlider-ruler' />").appendTo(this.innerBar)},_setRulerParameters:function(){this.ruler.ruler({min:this.options.bounds.min,max:this.options.bounds.max,scales:this.options.scales})},_destroyRuler:function(){null!==this.ruler&&a.fn.ruler&&(this.ruler.ruler("destroy"),this.ruler.remove(),this.ruler=null)},_updateRuler:function(){this._destroyRuler(),this.options.scales!==!1&&a.fn.ruler&&(this._createRuler(),this._setRulerParameters())},values:function(a,b){var c;return"undefined"!=typeof a&&"undefined"!=typeof b?(this._deactivateLabels(),c=this._bar("values",a,b),this._changed(!0),this._reactivateLabels()):c=this._bar("values",a,b),c},min:function(a){return this._values.min=this.values(a,this._values.max).min,this._values.min},max:function(a){return this._values.max=this.values(this._values.min,a).max,this._values.max},bounds:function(a,b){return this._isValidValue(a)&&this._isValidValue(b)&&b>a&&(this._setBounds(a,b),this._updateRuler(),this._changed(!0)),this.options.bounds},_isValidValue:function(a){return"undefined"!=typeof a&&parseFloat(a)===a},_setBounds:function(a,b){this.options.bounds={min:a,max:b},this._leftHandle("option","bounds",this.options.bounds),this._rightHandle("option","bounds",this.options.bounds),this._bar("option","bounds",this.options.bounds)},zoomIn:function(a){this._bar("zoomIn",a)},zoomOut:function(a){this._bar("zoomOut",a)},scrollLeft:function(a){this._bar("startScroll"),this._bar("scrollLeft",a),this._bar("stopScroll")},scrollRight:function(a){this._bar("startScroll"),this._bar("scrollRight",a),this._bar("stopScroll")},resize:function(){this._initWidth(),this._leftHandle("update"),this._rightHandle("update"),this._bar("update")},enable:function(){this.toggle(!0)},disable:function(){this.toggle(!1)},toggle:function(a){a===b&&(a=!this.options.enabled),this.options.enabled!==a&&this._toggle(a)},_toggle:function(a){this.options.enabled=a,this.element.toggleClass("ui-rangeSlider-disabled",!a);var b=a?"enable":"disable";this._bar(b),this._leftHandle(b),this._rightHandle(b),this._leftLabel(b),this._rightLabel(b)},destroy:function(){this.element.removeClass("ui-rangeSlider-withArrows ui-rangeSlider-noArrow ui-rangeSlider-disabled"),this._destroyWidgets(),this._destroyElements(),this.element.removeClass("ui-rangeSlider"),this.options=null,a(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this._bindResize=null,a.Widget.prototype.destroy.apply(this,arguments)},_destroyWidget:function(a){this["_"+a]("destroy"),this[a].remove(),this[a]=null},_destroyWidgets:function(){this._destroyWidget("bar"),this._destroyWidget("leftHandle"),this._destroyWidget("rightHandle"),this._destroyRuler(),this._destroyLabels()},_destroyElements:function(){this.container.remove(),this.container=null,this.innerBar.remove(),this.innerBar=null,this.arrows.left.remove(),this.arrows.right.remove(),this.arrows=null}})}(jQuery),function(a){"use strict";a.widget("ui.rangeSliderHandle",a.ui.rangeSliderDraggable,{currentMove:null,margin:0,parentElement:null,options:{isLeft:!0,bounds:{min:0,max:100},range:!1,value:0,step:!1},_value:0,_left:0,_create:function(){a.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-handle").toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this.element.append("<div class='ui-rangeSlider-handle-inner' />"),this._value=this._constraintValue(this.options.value)},destroy:function(){this.element.empty(),a.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(b,c){"isLeft"!==b||c!==!0&&c!==!1||c===this.options.isLeft?"step"===b&&this._checkStep(c)?(this.options.step=c,this.update()):"bounds"===b?(this.options.bounds=c,this.update()):"range"===b&&this._checkRange(c)&&(this.options.range=c,this.update()):(this.options.isLeft=c,this.element.toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this._position(this._value),this.element.trigger("switch",this.options.isLeft)),a.ui.rangeSliderDraggable.prototype._setOption.apply(this,[b,c])},_checkRange:function(a){return a===!1||!this._isValidValue(a.min)&&!this._isValidValue(a.max)},_isValidValue:function(a){return"undefined"!=typeof a&&a!==!1&&parseFloat(a)!==a},_checkStep:function(a){return a===!1||parseFloat(a)===a},_initElement:function(){a.ui.rangeSliderDraggable.prototype._initElement.apply(this),0===this.cache.parent.width||null===this.cache.parent.width?setTimeout(a.proxy(this._initElementIfNotDestroyed,this),500):(this._position(this._value),this._triggerMouseEvent("initialize"))},_bounds:function(){return this.options.bounds},_cache:function(){a.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheParent()},_cacheParent:function(){var a=this.element.parent();this.cache.parent={element:a,offset:a.offset(),padding:{left:this._parsePixels(a,"paddingLeft")},width:a.width()}},_position:function(a){var b=this._getPositionForValue(a);this._applyPosition(b)},_constraintPosition:function(a){var b=this._getValueForPosition(a);return this._getPositionForValue(b)},_applyPosition:function(b){a.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[b]),this._left=b,this._setValue(this._getValueForPosition(b)),this._triggerMouseEvent("moving")},_prepareEventData:function(){var b=a.ui.rangeSliderDraggable.prototype._prepareEventData.apply(this);return b.value=this._value,b},_setValue:function(a){a!==this._value&&(this._value=a)},_constraintValue:function(a){if(a=Math.min(a,this._bounds().max),a=Math.max(a,this._bounds().min),a=this._round(a),this.options.range!==!1){var b=this.options.range.min||!1,c=this.options.range.max||!1;b!==!1&&(a=Math.max(a,this._round(b))),c!==!1&&(a=Math.min(a,this._round(c))),a=Math.min(a,this._bounds().max),a=Math.max(a,this._bounds().min)}return a},_round:function(a){return this.options.step!==!1&&this.options.step>0?Math.round(a/this.options.step)*this.options.step:a},_getPositionForValue:function(a){if(!this.cache||!this.cache.parent||null===this.cache.parent.offset)return 0;a=this._constraintValue(a);var b=(a-this.options.bounds.min)/(this.options.bounds.max-this.options.bounds.min),c=this.cache.parent.width-this.cache.width.outer,d=this.cache.parent.offset.left;return b*c+d},_getValueForPosition:function(a){var b=this._getRawValueForPositionAndBounds(a,this.options.bounds.min,this.options.bounds.max);return this._constraintValue(b)},_getRawValueForPositionAndBounds:function(a,b,c){var d=null===this.cache.parent.offset?0:this.cache.parent.offset.left,e=this.cache.parent.width-this.cache.width.outer,f=(a-d)/e;return f*(c-b)+b},value:function(a){return"undefined"!=typeof a&&(this._cache(),a=this._constraintValue(a),this._position(a)),this._value},update:function(){this._cache();var a=this._constraintValue(this._value),b=this._getPositionForValue(a);a!==this._value?(this._triggerMouseEvent("updating"),this._position(a),this._triggerMouseEvent("update")):b!==this.cache.offset.left&&(this._triggerMouseEvent("updating"),this._position(a),this._triggerMouseEvent("update"))},position:function(a){return"undefined"!=typeof a&&(this._cache(),a=this._constraintPosition(a),this._applyPosition(a)),this._left},add:function(a,b){return a+b},substract:function(a,b){return a-b},stepsBetween:function(a,b){return this.options.step===!1?b-a:(b-a)/this.options.step},multiplyStep:function(a,b){return a*b},moveRight:function(a){var b;return this.options.step===!1?(b=this._left,this.position(this._left+a),this._left-b):(b=this._value,this.value(this.add(b,this.multiplyStep(this.options.step,a))),this.stepsBetween(b,this._value))},moveLeft:function(a){return-this.moveRight(-a)},stepRatio:function(){if(this.options.step===!1)return 1;var a=(this.options.bounds.max-this.options.bounds.min)/this.options.step;return this.cache.parent.width/a}})}(jQuery),function(a){"use strict";function b(a,b){return"undefined"==typeof a?b||!1:a}a.widget("ui.rangeSliderBar",a.ui.rangeSliderDraggable,{options:{leftHandle:null,rightHandle:null,bounds:{min:0,max:100},type:"rangeSliderHandle",range:!1,drag:function(){},stop:function(){},values:{min:0,max:20},wheelSpeed:4,wheelMode:null},_values:{min:0,max:20},_waitingToInit:2,_wheelTimeout:!1,_create:function(){a.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-bar"),this.options.leftHandle.bind("initialize",a.proxy(this._onInitialized,this)).bind("mousestart",a.proxy(this._cache,this)).bind("stop",a.proxy(this._onHandleStop,this)),this.options.rightHandle.bind("initialize",a.proxy(this._onInitialized,this)).bind("mousestart",a.proxy(this._cache,this)).bind("stop",a.proxy(this._onHandleStop,this)),this._bindHandles(),this._values=this.options.values,this._setWheelModeOption(this.options.wheelMode)},destroy:function(){this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this.options=null,a.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(a,b){"range"===a?this._setRangeOption(b):"wheelSpeed"===a?this._setWheelSpeedOption(b):"wheelMode"===a&&this._setWheelModeOption(b)},_setRangeOption:function(a){if(("object"!=typeof a||null===a)&&(a=!1),a!==!1||this.options.range!==!1){if(a!==!1){var c=b(a.min,this.options.range.min),d=b(a.max,this.options.range.max);this.options.range={min:c,max:d}}else this.options.range=!1;this._setLeftRange(),this._setRightRange()}},_setWheelSpeedOption:function(a){"number"==typeof a&&a>0&&(this.options.wheelSpeed=a)},_setWheelModeOption:function(a){(null===a||a===!1||"zoom"===a||"scroll"===a)&&(this.options.wheelMode!==a&&this.element.parent().unbind("mousewheel.bar"),this._bindMouseWheel(a),this.options.wheelMode=a)},_bindMouseWheel:function(b){"zoom"===b?this.element.parent().bind("mousewheel.bar",a.proxy(this._mouseWheelZoom,this)):"scroll"===b&&this.element.parent().bind("mousewheel.bar",a.proxy(this._mouseWheelScroll,this))},_setLeftRange:function(){if(this.options.range===!1)return!1;var a=this._values.max,b={min:!1,max:!1};b.max=(this.options.range.min||!1)!==!1?this._leftHandle("substract",a,this.options.range.min):!1,b.min=(this.options.range.max||!1)!==!1?this._leftHandle("substract",a,this.options.range.max):!1,this._leftHandle("option","range",b)},_setRightRange:function(){var a=this._values.min,b={min:!1,max:!1};b.min=(this.options.range.min||!1)!==!1?this._rightHandle("add",a,this.options.range.min):!1,b.max=(this.options.range.max||!1)!==!1?this._rightHandle("add",a,this.options.range.max):!1,this._rightHandle("option","range",b)},_deactivateRange:function(){this._leftHandle("option","range",!1),this._rightHandle("option","range",!1)},_reactivateRange:function(){this._setRangeOption(this.options.range)},_onInitialized:function(){this._waitingToInit--,0===this._waitingToInit&&this._initMe()},_initMe:function(){this._cache(),this.min(this._values.min),this.max(this._values.max);var a=this._leftHandle("position"),b=this._rightHandle("position")+this.options.rightHandle.width();this.element.offset({left:a}),this.element.css("width",b-a)},_leftHandle:function(){return this._handleProxy(this.options.leftHandle,arguments)},_rightHandle:function(){return this._handleProxy(this.options.rightHandle,arguments)},_handleProxy:function(a,b){var c=Array.prototype.slice.call(b);return a[this.options.type].apply(a,c)},_cache:function(){a.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheHandles()},_cacheHandles:function(){this.cache.rightHandle={},this.cache.rightHandle.width=this.options.rightHandle.width(),this.cache.rightHandle.offset=this.options.rightHandle.offset(),this.cache.leftHandle={},this.cache.leftHandle.offset=this.options.leftHandle.offset()},_mouseStart:function(b){a.ui.rangeSliderDraggable.prototype._mouseStart.apply(this,[b]),this._deactivateRange()},_mouseStop:function(b){a.ui.rangeSliderDraggable.prototype._mouseStop.apply(this,[b]),this._cacheHandles(),this._values.min=this._leftHandle("value"),this._values.max=this._rightHandle("value"),this._reactivateRange(),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},_onDragLeftHandle:function(a,b){if(this._cacheIfNecessary(),b.element[0]===this.options.leftHandle[0]){if(this._switchedValues())return this._switchHandles(),void this._onDragRightHandle(a,b);this._values.min=b.value,this.cache.offset.left=b.offset.left,this.cache.leftHandle.offset=b.offset,this._positionBar()}},_onDragRightHandle:function(a,b){if(this._cacheIfNecessary(),b.element[0]===this.options.rightHandle[0]){if(this._switchedValues())return this._switchHandles(),void this._onDragLeftHandle(a,b);this._values.max=b.value,this.cache.rightHandle.offset=b.offset,this._positionBar()}},_positionBar:function(){var a=this.cache.rightHandle.offset.left+this.cache.rightHandle.width-this.cache.leftHandle.offset.left;this.cache.width.inner=a,this.element.css("width",a).offset({left:this.cache.leftHandle.offset.left})},_onHandleStop:function(){this._setLeftRange(),this._setRightRange()},_switchedValues:function(){if(this.min()>this.max()){var a=this._values.min;return this._values.min=this._values.max,this._values.max=a,!0}return!1},_switchHandles:function(){var a=this.options.leftHandle;this.options.leftHandle=this.options.rightHandle,this.options.rightHandle=a,this._leftHandle("option","isLeft",!0),this._rightHandle("option","isLeft",!1),this._bindHandles(),this._cacheHandles()},_bindHandles:function(){this.options.leftHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",a.proxy(this._onDragLeftHandle,this)),this.options.rightHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",a.proxy(this._onDragRightHandle,this))},_constraintPosition:function(b){var c,d={};return d.left=a.ui.rangeSliderDraggable.prototype._constraintPosition.apply(this,[b]),d.left=this._leftHandle("position",d.left),c=this._rightHandle("position",d.left+this.cache.width.outer-this.cache.rightHandle.width),d.width=c-d.left+this.cache.rightHandle.width,d},_applyPosition:function(b){a.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[b.left]),this.element.width(b.width)},_mouseWheelZoom:function(b,c,d,e){if(!this.enabled)return!1;var f=this._values.min+(this._values.max-this._values.min)/2,g={},h={};return this.options.range===!1||this.options.range.min===!1?(g.max=f,h.min=f):(g.max=f-this.options.range.min/2,h.min=f+this.options.range.min/2),this.options.range!==!1&&this.options.range.max!==!1&&(g.min=f-this.options.range.max/2,h.max=f+this.options.range.max/2),this._leftHandle("option","range",g),this._rightHandle("option","range",h),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(a.proxy(this._wheelStop,this),200),this.zoomOut(e*this.options.wheelSpeed),!1},_mouseWheelScroll:function(b,c,d,e){return this.enabled?(this._wheelTimeout===!1?this.startScroll():clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(a.proxy(this._wheelStop,this),200),this.scrollLeft(e*this.options.wheelSpeed),!1):!1},_wheelStop:function(){this.stopScroll(),this._wheelTimeout=!1},min:function(a){return this._leftHandle("value",a)},max:function(a){return this._rightHandle("value",a)},startScroll:function(){this._deactivateRange()},stopScroll:function(){this._reactivateRange(),this._triggerMouseEvent("stop"),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},scrollLeft:function(a){return a=a||1,0>a?this.scrollRight(-a):(a=this._leftHandle("moveLeft",a),this._rightHandle("moveLeft",a),this.update(),void this._triggerMouseEvent("scroll"))},scrollRight:function(a){return a=a||1,0>a?this.scrollLeft(-a):(a=this._rightHandle("moveRight",a),this._leftHandle("moveRight",a),this.update(),void this._triggerMouseEvent("scroll"))},zoomIn:function(a){if(a=a||1,0>a)return this.zoomOut(-a);var b=this._rightHandle("moveLeft",a);a>b&&(b/=2,this._rightHandle("moveRight",b)),this._leftHandle("moveRight",b),this.update(),this._triggerMouseEvent("zoom")},zoomOut:function(a){if(a=a||1,0>a)return this.zoomIn(-a);var b=this._rightHandle("moveRight",a);a>b&&(b/=2,this._rightHandle("moveLeft",b)),this._leftHandle("moveLeft",b),this.update(),this._triggerMouseEvent("zoom")},values:function(a,b){if("undefined"!=typeof a&&"undefined"!=typeof b){var c=Math.min(a,b),d=Math.max(a,b);this._deactivateRange(),this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this._values.min=this._leftHandle("value",c),this._values.max=this._rightHandle("value",d),this._bindHandles(),this._reactivateRange(),this.update()}return{min:this._values.min,max:this._values.max}},update:function(){this._values.min=this.min(),this._values.max=this.max(),this._cache(),this._positionBar()}})}(jQuery),function(a){"use strict";function b(b,c,d,e){this.label1=b,this.label2=c,this.type=d,this.options=e,this.handle1=this.label1[this.type]("option","handle"),this.handle2=this.label2[this.type]("option","handle"),this.cache=null,this.left=b,this.right=c,this.moving=!1,this.initialized=!1,this.updating=!1,this.Init=function(){this.BindHandle(this.handle1),this.BindHandle(this.handle2),"show"===this.options.show?(setTimeout(a.proxy(this.PositionLabels,this),1),this.initialized=!0):setTimeout(a.proxy(this.AfterInit,this),1e3),this._resizeProxy=a.proxy(this.onWindowResize,this),a(window).resize(this._resizeProxy)},this.Destroy=function(){this._resizeProxy&&(a(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this.handle1.unbind(".positionner"),this.handle1=null,this.handle2.unbind(".positionner"),this.handle2=null,this.label1=null,this.label2=null,this.left=null,this.right=null),this.cache=null},this.AfterInit=function(){this.initialized=!0},this.Cache=function(){this.label1&&"none"!==this.label1.css("display")&&(this.cache={},this.cache.label1={},this.cache.label2={},this.cache.handle1={},this.cache.handle2={},this.cache.offsetParent={},this.CacheElement(this.label1,this.cache.label1),this.CacheElement(this.label2,this.cache.label2),this.CacheElement(this.handle1,this.cache.handle1),this.CacheElement(this.handle2,this.cache.handle2),this.CacheElement(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheIfNecessary=function(){null===this.cache?this.Cache():(this.CacheWidth(this.label1,this.cache.label1),this.CacheWidth(this.label2,this.cache.label2),this.CacheHeight(this.label1,this.cache.label1),this.CacheHeight(this.label2,this.cache.label2),this.CacheWidth(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheElement=function(a,b){this.CacheWidth(a,b),this.CacheHeight(a,b),b.offset=a.offset(),b.margin={left:this.ParsePixels("marginLeft",a),right:this.ParsePixels("marginRight",a)},b.border={left:this.ParsePixels("borderLeftWidth",a),right:this.ParsePixels("borderRightWidth",a)}},this.CacheWidth=function(a,b){b.width=a.width(),b.outerWidth=a.outerWidth()},this.CacheHeight=function(a,b){b.outerHeightMargin=a.outerHeight(!0)},this.ParsePixels=function(a,b){return parseInt(b.css(a),10)||0},this.BindHandle=function(b){b.bind("updating.positionner",a.proxy(this.onHandleUpdating,this)),b.bind("update.positionner",a.proxy(this.onHandleUpdated,this)),b.bind("moving.positionner",a.proxy(this.onHandleMoving,this)),b.bind("stop.positionner",a.proxy(this.onHandleStop,this))},this.PositionLabels=function(){if(this.CacheIfNecessary(),null!==this.cache){var a=this.GetRawPosition(this.cache.label1,this.cache.handle1),b=this.GetRawPosition(this.cache.label2,this.cache.handle2);this.ConstraintPositions(a,b),this.PositionLabel(this.label1,a.left,this.cache.label1),this.PositionLabel(this.label2,b.left,this.cache.label2)}},this.PositionLabel=function(a,b,c){var d,e,f,g=this.cache.offsetParent.offset.left+this.cache.offsetParent.border.left;g-b>=0?(a.css("right",""),a.offset({left:b})):(d=g+this.cache.offsetParent.width,e=b+c.margin.left+c.outerWidth+c.margin.right,f=d-e,a.css("left",""),a.css("right",f))},this.ConstraintPositions=function(a,b){a.center<b.center&&a.outerRight>b.outerLeft?(a=this.getLeftPosition(a,b),b=this.getRightPosition(a,b)):a.center>b.center&&b.outerRight>a.outerLeft&&(b=this.getLeftPosition(b,a),a=this.getRightPosition(b,a))},this.getLeftPosition=function(a,b){var c=(b.center+a.center)/2,d=c-a.cache.outerWidth-a.cache.margin.right+a.cache.border.left;return a.left=d,a},this.getRightPosition=function(a,b){var c=(b.center+a.center)/2;return b.left=c+b.cache.margin.left+b.cache.border.left,b},this.ShowIfNecessary=function(){"show"===this.options.show||this.moving||!this.initialized||this.updating||(this.label1.stop(!0,!0).fadeIn(this.options.durationIn||0),this.label2.stop(!0,!0).fadeIn(this.options.durationIn||0),this.moving=!0)},this.HideIfNeeded=function(){this.moving===!0&&(this.label1.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.label2.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.moving=!1)},this.onHandleMoving=function(a,b){this.ShowIfNecessary(),this.CacheIfNecessary(),this.UpdateHandlePosition(b),this.PositionLabels()},this.onHandleUpdating=function(){this.updating=!0},this.onHandleUpdated=function(){this.updating=!1,this.cache=null},this.onHandleStop=function(){this.HideIfNeeded()},this.onWindowResize=function(){this.cache=null},this.UpdateHandlePosition=function(a){null!==this.cache&&(a.element[0]===this.handle1[0]?this.UpdatePosition(a,this.cache.handle1):this.UpdatePosition(a,this.cache.handle2))},this.UpdatePosition=function(a,b){b.offset=a.offset},this.GetRawPosition=function(a,b){var c=b.offset.left+b.outerWidth/2,d=c-a.outerWidth/2,e=d+a.outerWidth-a.border.left-a.border.right,f=d-a.margin.left-a.border.left,g=b.offset.top-a.outerHeightMargin;return{left:d,outerLeft:f,top:g,right:e,outerRight:f+a.outerWidth+a.margin.left+a.margin.right,cache:a,center:c}},this.Init()}a.widget("ui.rangeSliderLabel",a.ui.rangeSliderMouseTouch,{options:{handle:null,formatter:!1,handleType:"rangeSliderHandle",show:"show",durationIn:0,durationOut:500,delayOut:500,isLeft:!1},cache:null,_positionner:null,_valueContainer:null,_innerElement:null,_create:function(){this.options.isLeft=this._handle("option","isLeft"),this.element.addClass("ui-rangeSlider-label").css("position","absolute").css("display","block"),this._createElements(),this._toggleClass(),this.options.handle.bind("moving.label",a.proxy(this._onMoving,this)).bind("update.label",a.proxy(this._onUpdate,this)).bind("switch.label",a.proxy(this._onSwitch,this)),"show"!==this.options.show&&this.element.hide(),this._mouseInit()},destroy:function(){this.options.handle.unbind(".label"),this.options.handle=null,this._valueContainer=null,this._innerElement=null,this.element.empty(),this._positionner&&(this._positionner.Destroy(),this._positionner=null),a.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_createElements:function(){this._valueContainer=a("<div class='ui-rangeSlider-label-value' />").appendTo(this.element),this._innerElement=a("<div class='ui-rangeSlider-label-inner' />").appendTo(this.element)},_handle:function(){var a=Array.prototype.slice.apply(arguments);return this.options.handle[this.options.handleType].apply(this.options.handle,a)},_setOption:function(a,b){"show"===a?this._updateShowOption(b):("durationIn"===a||"durationOut"===a||"delayOut"===a)&&this._updateDurations(a,b)
},_updateShowOption:function(a){this.options.show=a,"show"!==this.options.show?this.element.hide():(this.element.show(),this._display(this.options.handle[this.options.handleType]("value")),this._positionner.PositionLabels()),this._positionner.options.show=this.options.show},_updateDurations:function(a,b){parseInt(b,10)===b&&(this._positionner.options[a]=b,this.options[a]=b)},_display:function(a){this._displayText(this.options.formatter===!1?Math.round(a):this.options.formatter(a))},_displayText:function(a){this._valueContainer.text(a)},_toggleClass:function(){this.element.toggleClass("ui-rangeSlider-leftLabel",this.options.isLeft).toggleClass("ui-rangeSlider-rightLabel",!this.options.isLeft)},_mouseDown:function(a){this.options.handle.trigger(a)},_mouseUp:function(a){this.options.handle.trigger(a)},_mouseMove:function(a){this.options.handle.trigger(a)},_onMoving:function(a,b){this._display(b.value)},_onUpdate:function(){"show"===this.options.show&&this.update()},_onSwitch:function(a,b){this.options.isLeft=b,this._toggleClass(),this._positionner.PositionLabels()},pair:function(a){null===this._positionner&&(this._positionner=new b(this.element,a,this.widgetName,{show:this.options.show,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}),a[this.widgetName]("positionner",this._positionner))},positionner:function(a){return"undefined"!=typeof a&&(this._positionner=a),this._positionner},update:function(){this._positionner.cache=null,this._display(this._handle("value")),"show"===this.options.show&&this._positionner.PositionLabels()}})}(jQuery),function(a){"use strict";a.widget("ui.dateRangeSlider",a.ui.rangeSlider,{options:{bounds:{min:new Date(2010,0,1).valueOf(),max:new Date(2012,0,1).valueOf()},defaultValues:{min:new Date(2010,1,11).valueOf(),max:new Date(2011,1,11).valueOf()}},_create:function(){a.ui.rangeSlider.prototype._create.apply(this),this.element.addClass("ui-dateRangeSlider")},destroy:function(){this.element.removeClass("ui-dateRangeSlider"),a.ui.rangeSlider.prototype.destroy.apply(this)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min.valueOf(),max:this.options.defaultValues.max.valueOf()}},_setRulerParameters:function(){this.ruler.ruler({min:new Date(this.options.bounds.min),max:new Date(this.options.bounds.max),scales:this.options.scales})},_setOption:function(b,c){("defaultValues"===b||"bounds"===b)&&"undefined"!=typeof c&&null!==c&&this._isValidDate(c.min)&&this._isValidDate(c.max)?a.ui.rangeSlider.prototype._setOption.apply(this,[b,{min:c.min.valueOf(),max:c.max.valueOf()}]):a.ui.rangeSlider.prototype._setOption.apply(this,this._toArray(arguments))},_handleType:function(){return"dateRangeSliderHandle"},option:function(b){if("bounds"===b||"defaultValues"===b){var c=a.ui.rangeSlider.prototype.option.apply(this,arguments);return{min:new Date(c.min),max:new Date(c.max)}}return a.ui.rangeSlider.prototype.option.apply(this,this._toArray(arguments))},_defaultFormatter:function(a){var b=a.getMonth()+1,c=a.getDate();return""+a.getFullYear()+"-"+(10>b?"0"+b:b)+"-"+(10>c?"0"+c:c)},_getFormatter:function(){var a=this.options.formatter;return(this.options.formatter===!1||null===this.options.formatter)&&(a=this._defaultFormatter),function(a){return function(b){return a(new Date(b))}}(a)},values:function(b,c){var d=null;return d=this._isValidDate(b)&&this._isValidDate(c)?a.ui.rangeSlider.prototype.values.apply(this,[b.valueOf(),c.valueOf()]):a.ui.rangeSlider.prototype.values.apply(this,this._toArray(arguments)),{min:new Date(d.min),max:new Date(d.max)}},min:function(b){return new Date(this._isValidDate(b)?a.ui.rangeSlider.prototype.min.apply(this,[b.valueOf()]):a.ui.rangeSlider.prototype.min.apply(this))},max:function(b){return new Date(this._isValidDate(b)?a.ui.rangeSlider.prototype.max.apply(this,[b.valueOf()]):a.ui.rangeSlider.prototype.max.apply(this))},bounds:function(b,c){var d;return d=this._isValidDate(b)&&this._isValidDate(c)?a.ui.rangeSlider.prototype.bounds.apply(this,[b.valueOf(),c.valueOf()]):a.ui.rangeSlider.prototype.bounds.apply(this,this._toArray(arguments)),{min:new Date(d.min),max:new Date(d.max)}},_isValidDate:function(a){return"undefined"!=typeof a&&a instanceof Date},_toArray:function(a){return Array.prototype.slice.call(a)}})}(jQuery),function(a){"use strict";a.widget("ui.dateRangeSliderHandle",a.ui.rangeSliderHandle,{_steps:!1,_boundsValues:{},_create:function(){this._createBoundsValues(),a.ui.rangeSliderHandle.prototype._create.apply(this)},_getValueForPosition:function(a){var b=this._getRawValueForPositionAndBounds(a,this.options.bounds.min.valueOf(),this.options.bounds.max.valueOf());return this._constraintValue(new Date(b))},_setOption:function(b,c){return"step"===b?(this.options.step=c,this._createSteps(),void this.update()):(a.ui.rangeSliderHandle.prototype._setOption.apply(this,[b,c]),void("bounds"===b&&this._createBoundsValues()))},_createBoundsValues:function(){this._boundsValues={min:this.options.bounds.min.valueOf(),max:this.options.bounds.max.valueOf()}},_bounds:function(){return this._boundsValues},_createSteps:function(){if(this.options.step===!1||!this._isValidStep())return void(this._steps=!1);var a=new Date(this.options.bounds.min),b=new Date(this.options.bounds.max),c=a,d=0,e=new Date;for(this._steps=[];b>=c&&(1===d||e.valueOf()!==c.valueOf());)e=c,this._steps.push(c.valueOf()),c=this._addStep(a,d,this.options.step),d++;e.valueOf()===c.valueOf()&&(this._steps=!1)},_isValidStep:function(){return"object"==typeof this.options.step},_addStep:function(a,b,c){var d=new Date(a.valueOf());return d=this._addThing(d,"FullYear",b,c.years),d=this._addThing(d,"Month",b,c.months),d=this._addThing(d,"Date",b,7*c.weeks),d=this._addThing(d,"Date",b,c.days),d=this._addThing(d,"Hours",b,c.hours),d=this._addThing(d,"Minutes",b,c.minutes),d=this._addThing(d,"Seconds",b,c.seconds)},_addThing:function(a,b,c,d){return 0===c||0===(d||0)?a:(a["set"+b](a["get"+b]()+c*(d||0)),a)},_round:function(a){if(this._steps===!1)return a;for(var b,c,d=this.options.bounds.max.valueOf(),e=this.options.bounds.min.valueOf(),f=Math.max(0,(a-e)/(d-e)),g=Math.floor(this._steps.length*f);this._steps[g]>a;)g--;for(;g+1<this._steps.length&&this._steps[g+1]<=a;)g++;return g>=this._steps.length-1?this._steps[this._steps.length-1]:0===g?this._steps[0]:(b=this._steps[g],c=this._steps[g+1],c-a>a-b?b:c)},update:function(){this._createBoundsValues(),this._createSteps(),a.ui.rangeSliderHandle.prototype.update.apply(this)},add:function(a,b){return this._addStep(new Date(a),1,b).valueOf()},substract:function(a,b){return this._addStep(new Date(a),-1,b).valueOf()},stepsBetween:function(a,b){if(this.options.step===!1)return b-a;var c=Math.min(a,b),d=Math.max(a,b),e=0,f=!1,g=a>b;for(this.add(c,this.options.step)-c<0&&(f=!0);d>c;)f?d=this.add(d,this.options.step):c=this.add(c,this.options.step),e++;return g?-e:e},multiplyStep:function(a,b){var c={};for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d]*b);return c},stepRatio:function(){if(this.options.step===!1)return 1;var a=this._steps.length;return this.cache.parent.width/a}})}(jQuery)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js":98,"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-ui-1.10.3.custom.min.js":99}],96:[function(require,module,exports){(function(global){$=global.$=require("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=require,function browserifyShim(module,define,require){!function(window,document,undefined){!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.dataTable&&a(jQuery)}(function($){"use strict";var DataTable=function(oInit){function _fnAddColumn(a,b){var c=DataTable.defaults.columns,d=a.aoColumns.length,e=$.extend({},DataTable.models.oColumn,c,{sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,nTh:b?b:document.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.oDefaults:d});if(a.aoColumns.push(e),a.aoPreSearchCols[d]===undefined||null===a.aoPreSearchCols[d])a.aoPreSearchCols[d]=$.extend({},DataTable.models.oSearch);else{var f=a.aoPreSearchCols[d];f.bRegex===undefined&&(f.bRegex=!0),f.bSmart===undefined&&(f.bSmart=!0),f.bCaseInsensitive===undefined&&(f.bCaseInsensitive=!0)}_fnColumnOptions(a,d,null)}function _fnColumnOptions(a,b,c){var d=a.aoColumns[b];c!==undefined&&null!==c&&(c.mDataProp&&!c.mData&&(c.mData=c.mDataProp),c.sType!==undefined&&(d.sType=c.sType,d._bAutoType=!1),$.extend(d,c),_fnMap(d,c,"sWidth","sWidthOrig"),c.iDataSort!==undefined&&(d.aDataSort=[c.iDataSort]),_fnMap(d,c,"aDataSort"));var e=d.mRender?_fnGetObjectDataFn(d.mRender):null,f=_fnGetObjectDataFn(d.mData);d.fnGetData=function(a,b){var c=f(a,b);return d.mRender&&b&&""!==b?e(c,b,a):c},d.fnSetData=_fnSetObjectDataFn(d.mData),a.oFeatures.bSort||(d.bSortable=!1),!d.bSortable||-1==$.inArray("asc",d.asSorting)&&-1==$.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortableNone,d.sSortingClassJUI=""):-1==$.inArray("asc",d.asSorting)&&-1==$.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortable,d.sSortingClassJUI=a.oClasses.sSortJUI):-1!=$.inArray("asc",d.asSorting)&&-1==$.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortableAsc,d.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed):-1==$.inArray("asc",d.asSorting)&&-1!=$.inArray("desc",d.asSorting)&&(d.sSortingClass=a.oClasses.sSortableDesc,d.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed)}function _fnAdjustColumnSizing(a){if(a.oFeatures.bAutoWidth===!1)return!1;_fnCalculateColumnWidths(a);for(var b=0,c=a.aoColumns.length;c>b;b++)a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}function _fnVisibleToColumnIndex(a,b){var c=_fnGetColumns(a,"bVisible");return"number"==typeof c[b]?c[b]:null}function _fnColumnIndexToVisible(a,b){var c=_fnGetColumns(a,"bVisible"),d=$.inArray(b,c);return-1!==d?d:null}function _fnVisbleColumns(a){return _fnGetColumns(a,"bVisible").length}function _fnGetColumns(a,b){var c=[];return $.map(a.aoColumns,function(a,d){a[b]&&c.push(d)}),c}function _fnDetectType(a){for(var b=DataTable.ext.aTypes,c=b.length,d=0;c>d;d++){var e=b[d](a);if(null!==e)return e}return"string"}function _fnReOrderIndex(a,b){for(var c=b.split(","),d=[],e=0,f=a.aoColumns.length;f>e;e++)for(var g=0;f>g;g++)if(a.aoColumns[e].sName==c[g]){d.push(g);break}return d}function _fnColumnOrdering(a){for(var b="",c=0,d=a.aoColumns.length;d>c;c++)b+=a.aoColumns[c].sName+",";return b.length==d?"":b.slice(0,-1)}function _fnApplyColumnDefs(a,b,c,d){var e,f,g,h,i,j;if(b)for(e=b.length-1;e>=0;e--){var k=b[e].aTargets;for($.isArray(k)||_fnLog(a,1,"aTargets must be an array of targets, not a "+typeof k),g=0,h=k.length;h>g;g++)if("number"==typeof k[g]&&k[g]>=0){for(;a.aoColumns.length<=k[g];)_fnAddColumn(a);d(k[g],b[e])}else if("number"==typeof k[g]&&k[g]<0)d(a.aoColumns.length+k[g],b[e]);else if("string"==typeof k[g])for(i=0,j=a.aoColumns.length;j>i;i++)("_all"==k[g]||$(a.aoColumns[i].nTh).hasClass(k[g]))&&d(i,b[e])}if(c)for(e=0,f=c.length;f>e;e++)d(e,c[e])}function _fnAddData(a,b){var c,d=$.isArray(b)?b.slice():$.extend(!0,{},b),e=a.aoData.length,f=$.extend(!0,{},DataTable.models.oRow);f._aData=d,a.aoData.push(f);for(var g,h=0,i=a.aoColumns.length;i>h;h++)if(c=a.aoColumns[h],"function"==typeof c.fnRender&&c.bUseRendered&&null!==c.mData?_fnSetCellData(a,e,h,_fnRender(a,e,h)):_fnSetCellData(a,e,h,_fnGetCellData(a,e,h)),c._bAutoType&&"string"!=c.sType){var j=_fnGetCellData(a,e,h,"type");null!==j&&""!==j&&(g=_fnDetectType(j),null===c.sType?c.sType=g:c.sType!=g&&"html"!=c.sType&&(c.sType="string"))}return a.aiDisplayMaster.push(e),a.oFeatures.bDeferRender||_fnCreateTr(a,e),e}function _fnGatherData(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(a.bDeferLoading||null===a.sAjaxSource)for(h=a.nTBody.firstChild;h;){if("TR"==h.nodeName.toUpperCase())for(i=a.aoData.length,h._DT_RowIndex=i,a.aoData.push($.extend(!0,{},DataTable.models.oRow,{nTr:h})),a.aiDisplayMaster.push(i),g=h.firstChild,d=0;g;)n=g.nodeName.toUpperCase(),("TD"==n||"TH"==n)&&(_fnSetCellData(a,i,d,$.trim(g.innerHTML)),d++),g=g.nextSibling;h=h.nextSibling}for(f=_fnGetTrNodes(a),e=[],b=0,c=f.length;c>b;b++)for(g=f[b].firstChild;g;)n=g.nodeName.toUpperCase(),("TD"==n||"TH"==n)&&e.push(g),g=g.nextSibling;for(l=0,m=a.aoColumns.length;m>l;l++){o=a.aoColumns[l],null===o.sTitle&&(o.sTitle=o.nTh.innerHTML);var q,r,s,t,u=o._bAutoType,v="function"==typeof o.fnRender,w=null!==o.sClass,x=o.bVisible;if(u||v||w||!x)for(j=0,k=a.aoData.length;k>j;j++)p=a.aoData[j],q=e[j*m+l],u&&"string"!=o.sType&&(t=_fnGetCellData(a,j,l,"type"),""!==t&&(r=_fnDetectType(t),null===o.sType?o.sType=r:o.sType!=r&&"html"!=o.sType&&(o.sType="string"))),o.mRender?q.innerHTML=_fnGetCellData(a,j,l,"display"):o.mData!==l&&(q.innerHTML=_fnGetCellData(a,j,l,"display")),v&&(s=_fnRender(a,j,l),q.innerHTML=s,o.bUseRendered&&_fnSetCellData(a,j,l,s)),w&&(q.className+=" "+o.sClass),x?p._anHidden[l]=null:(p._anHidden[l]=q,q.parentNode.removeChild(q)),o.fnCreatedCell&&o.fnCreatedCell.call(a.oInstance,q,_fnGetCellData(a,j,l,"display"),p._aData,j,l)}if(0!==a.aoRowCreatedCallback.length)for(b=0,c=a.aoData.length;c>b;b++)p=a.aoData[b],_fnCallbackFire(a,"aoRowCreatedCallback",null,[p.nTr,p._aData,b])}function _fnNodeToDataIndex(a,b){return b._DT_RowIndex!==undefined?b._DT_RowIndex:null}function _fnNodeToColumnIndex(a,b,c){for(var d=_fnGetTdNodes(a,b),e=0,f=a.aoColumns.length;f>e;e++)if(d[e]===c)return e;return-1}function _fnGetRowData(a,b,c,d){for(var e=[],f=0,g=d.length;g>f;f++)e.push(_fnGetCellData(a,b,d[f],c));return e}function _fnGetCellData(a,b,c,d){var e,f=a.aoColumns[c],g=a.aoData[b]._aData;if((e=f.fnGetData(g,d))===undefined)return a.iDrawError!=a.iDraw&&null===f.sDefaultContent&&(_fnLog(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{mData function}":"'"+f.mData+"'")+" from the data source for row "+b),a.iDrawError=a.iDraw),f.sDefaultContent;if(null===e&&null!==f.sDefaultContent)e=f.sDefaultContent;else if("function"==typeof e)return e();return"display"==d&&null===e?"":e}function _fnSetCellData(a,b,c,d){var e=a.aoColumns[c],f=a.aoData[b]._aData;e.fnSetData(f,d)}function _fnGetObjectDataFn(a){if(null===a)return function(){return null};if("function"==typeof a)return function(b,c,d){return a(b,c,d)};if("string"!=typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b){return b[a]};var b=function(a,c,d){var e,f,g,h=d.split(".");if(""!==d)for(var i=0,j=h.length;j>i;i++){if(e=h[i].match(__reArray)){h[i]=h[i].replace(__reArray,""),""!==h[i]&&(a=a[h[i]]),f=[],h.splice(0,i+1),g=h.join(".");for(var k=0,l=a.length;l>k;k++)f.push(b(a[k],c,g));var m=e[0].substring(1,e[0].length-1);a=""===m?f:f.join(m);break}if(null===a||a[h[i]]===undefined)return undefined;a=a[h[i]]}return a};return function(c,d){return b(c,d,a)}}function _fnSetObjectDataFn(a){if(null===a)return function(){};if("function"==typeof a)return function(b,c){a(b,"set",c)};if("string"!=typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,c){b[a]=c};var b=function(a,c,d){for(var e,f,g,h,i=d.split("."),j=0,k=i.length-1;k>j;j++){if(f=i[j].match(__reArray)){i[j]=i[j].replace(__reArray,""),a[i[j]]=[],e=i.slice(),e.splice(0,j+1),h=e.join(".");for(var l=0,m=c.length;m>l;l++)g={},b(g,c[l],h),a[i[j]].push(g);return}(null===a[i[j]]||a[i[j]]===undefined)&&(a[i[j]]={}),a=a[i[j]]}a[i[i.length-1].replace(__reArray,"")]=c};return function(c,d){return b(c,d,a)}}function _fnGetDataMaster(a){for(var b=[],c=a.aoData.length,d=0;c>d;d++)b.push(a.aoData[d]._aData);return b}function _fnClearTable(a){a.aoData.splice(0,a.aoData.length),a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length),a.aiDisplay.splice(0,a.aiDisplay.length),_fnCalculateEnd(a)}function _fnDeleteIndex(a,b){for(var c=-1,d=0,e=a.length;e>d;d++)a[d]==b?c=d:a[d]>b&&a[d]--;-1!=c&&a.splice(c,1)}function _fnRender(a,b,c){var d=a.aoColumns[c];return d.fnRender({iDataRow:b,iDataColumn:c,oSettings:a,aData:a.aoData[b]._aData,mDataProp:d.mData},_fnGetCellData(a,b,c,"display"))}function _fnCreateTr(a,b){var c,d=a.aoData[b];if(null===d.nTr){d.nTr=document.createElement("tr"),d.nTr._DT_RowIndex=b,d._aData.DT_RowId&&(d.nTr.id=d._aData.DT_RowId),d._aData.DT_RowClass&&(d.nTr.className=d._aData.DT_RowClass);for(var e=0,f=a.aoColumns.length;f>e;e++){var g=a.aoColumns[e];c=document.createElement(g.sCellType),c.innerHTML="function"!=typeof g.fnRender||g.bUseRendered&&null!==g.mData?_fnGetCellData(a,b,e,"display"):_fnRender(a,b,e),null!==g.sClass&&(c.className=g.sClass),g.bVisible?(d.nTr.appendChild(c),d._anHidden[e]=null):d._anHidden[e]=c,g.fnCreatedCell&&g.fnCreatedCell.call(a.oInstance,c,_fnGetCellData(a,b,e,"display"),d._aData,b,e)}_fnCallbackFire(a,"aoRowCreatedCallback",null,[d.nTr,d._aData,b])}}function _fnBuildHead(a){var b,c,d,e=$("th, td",a.nTHead).length;if(0!==e)for(b=0,d=a.aoColumns.length;d>b;b++)c=a.aoColumns[b].nTh,c.setAttribute("role","columnheader"),a.aoColumns[b].bSortable&&(c.setAttribute("tabindex",a.iTabIndex),c.setAttribute("aria-controls",a.sTableId)),null!==a.aoColumns[b].sClass&&$(c).addClass(a.aoColumns[b].sClass),a.aoColumns[b].sTitle!=c.innerHTML&&(c.innerHTML=a.aoColumns[b].sTitle);else{var f=document.createElement("tr");for(b=0,d=a.aoColumns.length;d>b;b++)c=a.aoColumns[b].nTh,c.innerHTML=a.aoColumns[b].sTitle,c.setAttribute("tabindex","0"),null!==a.aoColumns[b].sClass&&$(c).addClass(a.aoColumns[b].sClass),f.appendChild(c);$(a.nTHead).html("")[0].appendChild(f),_fnDetectHeader(a.aoHeader,a.nTHead)}if($(a.nTHead).children("tr").attr("role","row"),a.bJUI)for(b=0,d=a.aoColumns.length;d>b;b++){c=a.aoColumns[b].nTh;var g=document.createElement("div");g.className=a.oClasses.sSortJUIWrapper,$(c).contents().appendTo(g);var h=document.createElement("span");h.className=a.oClasses.sSortIcon,g.appendChild(h),c.appendChild(g)}if(a.oFeatures.bSort)for(b=0;b<a.aoColumns.length;b++)a.aoColumns[b].bSortable!==!1?_fnSortAttachListener(a,a.aoColumns[b].nTh,b):$(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone);if(""!==a.oClasses.sFooterTH&&$(a.nTFoot).children("tr").children("th").addClass(a.oClasses.sFooterTH),null!==a.nTFoot){var i=_fnGetUniqueThs(a,null,a.aoFooter);for(b=0,d=a.aoColumns.length;d>b;b++)i[b]&&(a.aoColumns[b].nTf=i[b],a.aoColumns[b].sClass&&$(i[b]).addClass(a.aoColumns[b].sClass))}}function _fnDrawHead(a,b,c){var d,e,f,g,h,i,j,k,l,m=[],n=[],o=a.aoColumns.length;for(c===undefined&&(c=!1),d=0,e=b.length;e>d;d++){for(m[d]=b[d].slice(),m[d].nTr=b[d].nTr,f=o-1;f>=0;f--)a.aoColumns[f].bVisible||c||m[d].splice(f,1);n.push([])}for(d=0,e=m.length;e>d;d++){if(j=m[d].nTr)for(;i=j.firstChild;)j.removeChild(i);for(f=0,g=m[d].length;g>f;f++)if(k=1,l=1,n[d][f]===undefined){for(j.appendChild(m[d][f].cell),n[d][f]=1;m[d+k]!==undefined&&m[d][f].cell==m[d+k][f].cell;)n[d+k][f]=1,k++;for(;m[d][f+l]!==undefined&&m[d][f].cell==m[d][f+l].cell;){for(h=0;k>h;h++)n[d+h][f+l]=1;l++}m[d][f].cell.rowSpan=k,m[d][f].cell.colSpan=l}}}function _fnDraw(a){var b=_fnCallbackFire(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==$.inArray(!1,b))return void _fnProcessingDisplay(a,!1);var c,d,e,f=[],g=0,h=a.asStripeClasses.length,i=a.aoOpenRows.length;if(a.bDrawing=!0,a.iInitDisplayStart!==undefined&&-1!=a.iInitDisplayStart&&(a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,_fnCalculateEnd(a)),a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++;else if(a.oFeatures.bServerSide){if(!a.bDestroying&&!_fnAjaxUpdate(a))return}else a.iDraw++;if(0!==a.aiDisplay.length){var j=a._iDisplayStart,k=a._iDisplayEnd;a.oFeatures.bServerSide&&(j=0,k=a.aoData.length);for(var l=j;k>l;l++){var m=a.aoData[a.aiDisplay[l]];null===m.nTr&&_fnCreateTr(a,a.aiDisplay[l]);var n=m.nTr;if(0!==h){var o=a.asStripeClasses[g%h];m._sRowStripe!=o&&($(n).removeClass(m._sRowStripe).addClass(o),m._sRowStripe=o)}if(_fnCallbackFire(a,"aoRowCallback",null,[n,a.aoData[a.aiDisplay[l]]._aData,g,l]),f.push(n),g++,0!==i)for(var p=0;i>p;p++)if(n==a.aoOpenRows[p].nParent){f.push(a.aoOpenRows[p].nTr);break}}}else{f[0]=document.createElement("tr"),a.asStripeClasses[0]&&(f[0].className=a.asStripeClasses[0]);var q=a.oLanguage,r=q.sZeroRecords;1!=a.iDraw||null===a.sAjaxSource||a.oFeatures.bServerSide?q.sEmptyTable&&0===a.fnRecordsTotal()&&(r=q.sEmptyTable):r=q.sLoadingRecords;var s=document.createElement("td");s.setAttribute("valign","top"),s.colSpan=_fnVisbleColumns(a),s.className=a.oClasses.sRowEmpty,s.innerHTML=_fnInfoMacros(a,r),f[g].appendChild(s)}_fnCallbackFire(a,"aoHeaderCallback","header",[$(a.nTHead).children("tr")[0],_fnGetDataMaster(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]),_fnCallbackFire(a,"aoFooterCallback","footer",[$(a.nTFoot).children("tr")[0],_fnGetDataMaster(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);var t,u=document.createDocumentFragment(),v=document.createDocumentFragment();if(a.nTBody){if(t=a.nTBody.parentNode,v.appendChild(a.nTBody),!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered)for(;e=a.nTBody.firstChild;)a.nTBody.removeChild(e);for(c=0,d=f.length;d>c;c++)u.appendChild(f[c]);a.nTBody.appendChild(u),null!==t&&t.appendChild(a.nTBody)}_fnCallbackFire(a,"aoDrawCallback","draw",[a]),a.bSorted=!1,a.bFiltered=!1,a.bDrawing=!1,a.oFeatures.bServerSide&&(_fnProcessingDisplay(a,!1),a._bInitComplete||_fnInitComplete(a))}function _fnReDraw(a){a.oFeatures.bSort?_fnSort(a,a.oPreviousSearch):a.oFeatures.bFilter?_fnFilterComplete(a,a.oPreviousSearch):(_fnCalculateEnd(a),_fnDraw(a))}function _fnAddOptionsHtml(a){var b=$("<div></div>")[0];a.nTable.parentNode.insertBefore(b,a.nTable),a.nTableWrapper=$('<div id="'+a.sTableId+'_wrapper" class="'+a.oClasses.sWrapper+'" role="grid"></div>')[0],a.nTableReinsertBefore=a.nTable.nextSibling;for(var c,d,e,f,g,h,i,j=a.nTableWrapper,k=a.sDom.split(""),l=0;l<k.length;l++){if(d=0,e=k[l],"<"==e){if(f=$("<div></div>")[0],g=k[l+1],"'"==g||'"'==g){for(h="",i=2;k[l+i]!=g;)h+=k[l+i],i++;if("H"==h?h=a.oClasses.sJUIHeader:"F"==h&&(h=a.oClasses.sJUIFooter),-1!=h.indexOf(".")){var m=h.split(".");f.id=m[0].substr(1,m[0].length-1),f.className=m[1]}else"#"==h.charAt(0)?f.id=h.substr(1,h.length-1):f.className=h;l+=i}j.appendChild(f),j=f}else if(">"==e)j=j.parentNode;else if("l"==e&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange)c=_fnFeatureHtmlLength(a),d=1;else if("f"==e&&a.oFeatures.bFilter)c=_fnFeatureHtmlFilter(a),d=1;else if("r"==e&&a.oFeatures.bProcessing)c=_fnFeatureHtmlProcessing(a),d=1;else if("t"==e)c=_fnFeatureHtmlTable(a),d=1;else if("i"==e&&a.oFeatures.bInfo)c=_fnFeatureHtmlInfo(a),d=1;else if("p"==e&&a.oFeatures.bPaginate)c=_fnFeatureHtmlPaginate(a),d=1;else if(0!==DataTable.ext.aoFeatures.length)for(var n=DataTable.ext.aoFeatures,o=0,p=n.length;p>o;o++)if(e==n[o].cFeature){c=n[o].fnInit(a),c&&(d=1);break}1==d&&null!==c&&("object"!=typeof a.aanFeatures[e]&&(a.aanFeatures[e]=[]),a.aanFeatures[e].push(c),j.appendChild(c))}b.parentNode.replaceChild(a.nTableWrapper,b)}function _fnDetectHeader(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=$(b).children("tr"),o=function(a,b,c){for(var d=a[b];d[c];)c++;return c};for(a.splice(0,a.length),e=0,h=n.length;h>e;e++)a.push([]);for(e=0,h=n.length;h>e;e++)for(c=n[e],j=0,d=c.firstChild;d;){if("TD"==d.nodeName.toUpperCase()||"TH"==d.nodeName.toUpperCase())for(k=1*d.getAttribute("colspan"),l=1*d.getAttribute("rowspan"),k=k&&0!==k&&1!==k?k:1,l=l&&0!==l&&1!==l?l:1,i=o(a,e,j),m=1===k?!0:!1,g=0;k>g;g++)for(f=0;l>f;f++)a[e+f][i+g]={cell:d,unique:m},a[e+f].nTr=c;d=d.nextSibling}}function _fnGetUniqueThs(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],_fnDetectHeader(c,b)));for(var e=0,f=c.length;f>e;e++)for(var g=0,h=c[e].length;h>g;g++)!c[e][g].unique||d[g]&&a.bSortCellsTop||(d[g]=c[e][g].cell);return d}function _fnAjaxUpdate(a){if(a.bAjaxDataGet){a.iDraw++,_fnProcessingDisplay(a,!0);var b=(a.aoColumns.length,_fnAjaxParameters(a));return _fnServerParams(a,b),a.fnServerData.call(a.oInstance,a.sAjaxSource,b,function(b){_fnAjaxUpdateDraw(a,b)},a),!1}return!0}function _fnAjaxParameters(a){var b,c,d,e,f,g=a.aoColumns.length,h=[];for(h.push({name:"sEcho",value:a.iDraw}),h.push({name:"iColumns",value:g}),h.push({name:"sColumns",value:_fnColumnOrdering(a)}),h.push({name:"iDisplayStart",value:a._iDisplayStart}),h.push({name:"iDisplayLength",value:a.oFeatures.bPaginate!==!1?a._iDisplayLength:-1}),e=0;g>e;e++)b=a.aoColumns[e].mData,h.push({name:"mDataProp_"+e,value:"function"==typeof b?"function":b});if(a.oFeatures.bFilter!==!1)for(h.push({name:"sSearch",value:a.oPreviousSearch.sSearch}),h.push({name:"bRegex",value:a.oPreviousSearch.bRegex}),e=0;g>e;e++)h.push({name:"sSearch_"+e,value:a.aoPreSearchCols[e].sSearch}),h.push({name:"bRegex_"+e,value:a.aoPreSearchCols[e].bRegex}),h.push({name:"bSearchable_"+e,value:a.aoColumns[e].bSearchable});if(a.oFeatures.bSort!==!1){var i=0;for(c=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice(),e=0;e<c.length;e++)for(d=a.aoColumns[c[e][0]].aDataSort,f=0;f<d.length;f++)h.push({name:"iSortCol_"+i,value:d[f]}),h.push({name:"sSortDir_"+i,value:c[e][1]}),i++;for(h.push({name:"iSortingCols",value:i}),e=0;g>e;e++)h.push({name:"bSortable_"+e,value:a.aoColumns[e].bSortable})}return h}function _fnServerParams(a,b){_fnCallbackFire(a,"aoServerParams","serverParams",[b])}function _fnAjaxUpdateDraw(a,b){if(b.sEcho!==undefined){if(1*b.sEcho<a.iDraw)return;a.iDraw=1*b.sEcho}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&_fnClearTable(a),a._iRecordsTotal=parseInt(b.iTotalRecords,10),a._iRecordsDisplay=parseInt(b.iTotalDisplayRecords,10);var c,d=_fnColumnOrdering(a),e=b.sColumns!==undefined&&""!==d&&b.sColumns!=d;e&&(c=_fnReOrderIndex(a,b.sColumns));for(var f=_fnGetObjectDataFn(a.sAjaxDataProp)(b),g=0,h=f.length;h>g;g++)if(e){for(var i=[],j=0,k=a.aoColumns.length;k>j;j++)i.push(f[g][c[j]]);_fnAddData(a,i)}else _fnAddData(a,f[g]);a.aiDisplay=a.aiDisplayMaster.slice(),a.bAjaxDataGet=!1,_fnDraw(a),a.bAjaxDataGet=!0,_fnProcessingDisplay(a,!1)}function _fnFeatureHtmlFilter(a){var b=a.oPreviousSearch,c=a.oLanguage.sSearch;c=-1!==c.indexOf("_INPUT_")?c.replace("_INPUT_",'<input type="text" />'):""===c?'<input type="text" />':c+' <input type="text" />';var d=document.createElement("div");d.className=a.oClasses.sFilter,d.innerHTML="<label>"+c+"</label>",a.aanFeatures.f||(d.id=a.sTableId+"_filter");var e=$('input[type="text"]',d);return d._DT_Input=e[0],e.val(b.sSearch.replace('"',"&quot;")),e.bind("keyup.DT",function(){for(var c=a.aanFeatures.f,d=""===this.value?"":this.value,e=0,f=c.length;f>e;e++)c[e]!=$(this).parents("div.dataTables_filter")[0]&&$(c[e]._DT_Input).val(d);d!=b.sSearch&&_fnFilterComplete(a,{sSearch:d,bRegex:b.bRegex,bSmart:b.bSmart,bCaseInsensitive:b.bCaseInsensitive})}),e.attr("aria-controls",a.sTableId).bind("keypress.DT",function(a){return 13==a.keyCode?!1:void 0}),d}function _fnFilterComplete(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch,d.bRegex=a.bRegex,d.bSmart=a.bSmart,d.bCaseInsensitive=a.bCaseInsensitive};if(a.oFeatures.bServerSide)f(b);else{_fnFilter(a,b.sSearch,c,b.bRegex,b.bSmart,b.bCaseInsensitive),f(b);for(var g=0;g<a.aoPreSearchCols.length;g++)_fnFilterColumn(a,e[g].sSearch,g,e[g].bRegex,e[g].bSmart,e[g].bCaseInsensitive);_fnFilterCustom(a)}a.bFiltered=!0,$(a.oInstance).trigger("filter",a),a._iDisplayStart=0,_fnCalculateEnd(a),_fnDraw(a),_fnBuildSearchArray(a,0)}function _fnFilterCustom(a){for(var b=DataTable.ext.afnFiltering,c=_fnGetColumns(a,"bSearchable"),d=0,e=b.length;e>d;d++)for(var f=0,g=0,h=a.aiDisplay.length;h>g;g++){var i=a.aiDisplay[g-f],j=b[d](a,_fnGetRowData(a,i,"filter",c),i);j||(a.aiDisplay.splice(g-f,1),f++)}}function _fnFilterColumn(a,b,c,d,e,f){if(""!==b)for(var g=0,h=_fnFilterCreateSearch(b,d,e,f),i=a.aiDisplay.length-1;i>=0;i--){var j=_fnDataToSearch(_fnGetCellData(a,a.aiDisplay[i],c,"filter"),a.aoColumns[c].sType);h.test(j)||(a.aiDisplay.splice(i,1),g++)}}function _fnFilter(a,b,c,d,e,f){var g,h=_fnFilterCreateSearch(b,d,e,f),i=a.oPreviousSearch;if(c||(c=0),0!==DataTable.ext.afnFiltering.length&&(c=1),b.length<=0)a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice();else if(a.aiDisplay.length==a.aiDisplayMaster.length||i.sSearch.length>b.length||1==c||0!==b.indexOf(i.sSearch))for(a.aiDisplay.splice(0,a.aiDisplay.length),_fnBuildSearchArray(a,1),g=0;g<a.aiDisplayMaster.length;g++)h.test(a.asDataSearch[g])&&a.aiDisplay.push(a.aiDisplayMaster[g]);else{var j=0;for(g=0;g<a.asDataSearch.length;g++)h.test(a.asDataSearch[g])||(a.aiDisplay.splice(g-j,1),j++)}}function _fnBuildSearchArray(a,b){if(!a.oFeatures.bServerSide){a.asDataSearch=[];for(var c=_fnGetColumns(a,"bSearchable"),d=1===b?a.aiDisplayMaster:a.aiDisplay,e=0,f=d.length;f>e;e++)a.asDataSearch[e]=_fnBuildSearchRow(a,_fnGetRowData(a,d[e],"filter",c))}}function _fnBuildSearchRow(a,b){var c=b.join("  ");return-1!==c.indexOf("&")&&(c=$("<div>").html(c).text()),c.replace(/[\n\r]/g," ")}function _fnFilterCreateSearch(a,b,c,d){var e,f;return c?(e=b?a.split(" "):_fnEscapeRegex(a).split(" "),f="^(?=.*?"+e.join(")(?=.*?")+").*$",new RegExp(f,d?"i":"")):(a=b?a:_fnEscapeRegex(a),new RegExp(a,d?"i":""))}function _fnDataToSearch(a,b){return"function"==typeof DataTable.ext.ofnSearch[b]?DataTable.ext.ofnSearch[b](a):null===a?"":"html"==b?a.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"==typeof a?a.replace(/[\r\n]/g," "):a}function _fnEscapeRegex(a){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"],c=new RegExp("(\\"+b.join("|\\")+")","g");return a.replace(c,"\\$1")}function _fnFeatureHtmlInfo(a){var b=document.createElement("div");return b.className=a.oClasses.sInfo,a.aanFeatures.i||(a.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"}),b.id=a.sTableId+"_info"),a.nTable.setAttribute("aria-describedby",a.sTableId+"_info"),b}function _fnUpdateInfo(a){if(a.oFeatures.bInfo&&0!==a.aanFeatures.i.length){var b,c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay();b=0===g?c.sInfoEmpty:c.sInfo,g!=f&&(b+=" "+c.sInfoFiltered),b+=c.sInfoPostFix,b=_fnInfoMacros(a,b),null!==c.fnInfoCallback&&(b=c.fnInfoCallback.call(a.oInstance,a,d,e,f,g,b));for(var h=a.aanFeatures.i,i=0,j=h.length;j>i;i++)$(h[i]).html(b)}}function _fnInfoMacros(a,b){var c=a._iDisplayStart+1,d=a.fnFormatNumber(c),e=a.fnDisplayEnd(),f=a.fnFormatNumber(e),g=a.fnRecordsDisplay(),h=a.fnFormatNumber(g),i=a.fnRecordsTotal(),j=a.fnFormatNumber(i);return a.oScroll.bInfinite&&(d=a.fnFormatNumber(1)),b.replace(/_START_/g,d).replace(/_END_/g,f).replace(/_TOTAL_/g,h).replace(/_MAX_/g,j)}function _fnInitialise(a){var b,c,d=a.iInitDisplayStart;if(a.bInitialised===!1)return void setTimeout(function(){_fnInitialise(a)},200);for(_fnAddOptionsHtml(a),_fnBuildHead(a),_fnDrawHead(a,a.aoHeader),a.nTFoot&&_fnDrawHead(a,a.aoFooter),_fnProcessingDisplay(a,!0),a.oFeatures.bAutoWidth&&_fnCalculateColumnWidths(a),b=0,c=a.aoColumns.length;c>b;b++)null!==a.aoColumns[b].sWidth&&(a.aoColumns[b].nTh.style.width=_fnStringToCss(a.aoColumns[b].sWidth));if(a.oFeatures.bSort?_fnSort(a):a.oFeatures.bFilter?_fnFilterComplete(a,a.oPreviousSearch):(a.aiDisplay=a.aiDisplayMaster.slice(),_fnCalculateEnd(a),_fnDraw(a)),null!==a.sAjaxSource&&!a.oFeatures.bServerSide){var e=[];return _fnServerParams(a,e),void a.fnServerData.call(a.oInstance,a.sAjaxSource,e,function(c){var e=""!==a.sAjaxDataProp?_fnGetObjectDataFn(a.sAjaxDataProp)(c):c;for(b=0;b<e.length;b++)_fnAddData(a,e[b]);a.iInitDisplayStart=d,a.oFeatures.bSort?_fnSort(a):(a.aiDisplay=a.aiDisplayMaster.slice(),_fnCalculateEnd(a),_fnDraw(a)),_fnProcessingDisplay(a,!1),_fnInitComplete(a,c)},a)}a.oFeatures.bServerSide||(_fnProcessingDisplay(a,!1),_fnInitComplete(a))}function _fnInitComplete(a,b){a._bInitComplete=!0,_fnCallbackFire(a,"aoInitComplete","init",[a,b])
}function _fnLanguageCompat(a){var b=DataTable.defaults.oLanguage;!a.sEmptyTable&&a.sZeroRecords&&"No data available in table"===b.sEmptyTable&&_fnMap(a,a,"sZeroRecords","sEmptyTable"),!a.sLoadingRecords&&a.sZeroRecords&&"Loading..."===b.sLoadingRecords&&_fnMap(a,a,"sZeroRecords","sLoadingRecords")}function _fnFeatureHtmlLength(a){if(a.oScroll.bInfinite)return null;var b,c,d='name="'+a.sTableId+'_length"',e='<select size="1" '+d+">",f=a.aLengthMenu;if(2==f.length&&"object"==typeof f[0]&&"object"==typeof f[1])for(b=0,c=f[0].length;c>b;b++)e+='<option value="'+f[0][b]+'">'+f[1][b]+"</option>";else for(b=0,c=f.length;c>b;b++)e+='<option value="'+f[b]+'">'+f[b]+"</option>";e+="</select>";var g=document.createElement("div");return a.aanFeatures.l||(g.id=a.sTableId+"_length"),g.className=a.oClasses.sLength,g.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",e)+"</label>",$('select option[value="'+a._iDisplayLength+'"]',g).attr("selected",!0),$("select",g).bind("change.DT",function(){var d=$(this).val(),e=a.aanFeatures.l;for(b=0,c=e.length;c>b;b++)e[b]!=this.parentNode&&$("select",e[b]).val(d);a._iDisplayLength=parseInt(d,10),_fnCalculateEnd(a),a.fnDisplayEnd()==a.fnRecordsDisplay()&&(a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength,a._iDisplayStart<0&&(a._iDisplayStart=0)),-1==a._iDisplayLength&&(a._iDisplayStart=0),_fnDraw(a)}),$("select",g).attr("aria-controls",a.sTableId),g}function _fnCalculateEnd(a){a._iDisplayEnd=a.oFeatures.bPaginate===!1?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||-1==a._iDisplayLength?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function _fnFeatureHtmlPaginate(a){if(a.oScroll.bInfinite)return null;var b=document.createElement("div");return b.className=a.oClasses.sPaging+a.sPaginationType,DataTable.ext.oPagination[a.sPaginationType].fnInit(a,b,function(a){_fnCalculateEnd(a),_fnDraw(a)}),a.aanFeatures.p||a.aoDrawCallback.push({fn:function(a){DataTable.ext.oPagination[a.sPaginationType].fnUpdate(a,function(a){_fnCalculateEnd(a),_fnDraw(a)})},sName:"pagination"}),b}function _fnPageChange(a,b){var c=a._iDisplayStart;if("number"==typeof b)a._iDisplayStart=b*a._iDisplayLength,a._iDisplayStart>a.fnRecordsDisplay()&&(a._iDisplayStart=0);else if("first"==b)a._iDisplayStart=0;else if("previous"==b)a._iDisplayStart=a._iDisplayLength>=0?a._iDisplayStart-a._iDisplayLength:0,a._iDisplayStart<0&&(a._iDisplayStart=0);else if("next"==b)a._iDisplayLength>=0?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0;else if("last"==b)if(a._iDisplayLength>=0){var d=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(d-1)*a._iDisplayLength}else a._iDisplayStart=0;else _fnLog(a,0,"Unknown paging action: "+b);return $(a.oInstance).trigger("page",a),c!=a._iDisplayStart}function _fnFeatureHtmlProcessing(a){var b=document.createElement("div");return a.aanFeatures.r||(b.id=a.sTableId+"_processing"),b.innerHTML=a.oLanguage.sProcessing,b.className=a.oClasses.sProcessing,a.nTable.parentNode.insertBefore(b,a.nTable),b}function _fnProcessingDisplay(a,b){if(a.oFeatures.bProcessing)for(var c=a.aanFeatures.r,d=0,e=c.length;e>d;d++)c[d].style.visibility=b?"visible":"hidden";$(a.oInstance).trigger("processing",[a,b])}function _fnFeatureHtmlTable(a){if(""===a.oScroll.sX&&""===a.oScroll.sY)return a.nTable;var b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),h=a.nTable.cloneNode(!1),i=a.nTable.cloneNode(!1),j=a.nTable.getElementsByTagName("thead")[0],k=0===a.nTable.getElementsByTagName("tfoot").length?null:a.nTable.getElementsByTagName("tfoot")[0],l=a.oClasses;c.appendChild(d),f.appendChild(g),e.appendChild(a.nTable),b.appendChild(c),b.appendChild(e),d.appendChild(h),h.appendChild(j),null!==k&&(b.appendChild(f),g.appendChild(i),i.appendChild(k)),b.className=l.sScrollWrapper,c.className=l.sScrollHead,d.className=l.sScrollHeadInner,e.className=l.sScrollBody,f.className=l.sScrollFoot,g.className=l.sScrollFootInner,a.oScroll.bAutoCss&&(c.style.overflow="hidden",c.style.position="relative",f.style.overflow="hidden",e.style.overflow="auto"),c.style.border="0",c.style.width="100%",f.style.border="0",d.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%",h.removeAttribute("id"),h.style.marginLeft="0",a.nTable.style.marginLeft="0",null!==k&&(i.removeAttribute("id"),i.style.marginLeft="0");var m=$(a.nTable).children("caption");return m.length>0&&(m=m[0],"top"===m._captionSide?h.appendChild(m):"bottom"===m._captionSide&&k&&i.appendChild(m)),""!==a.oScroll.sX&&(c.style.width=_fnStringToCss(a.oScroll.sX),e.style.width=_fnStringToCss(a.oScroll.sX),null!==k&&(f.style.width=_fnStringToCss(a.oScroll.sX)),$(e).scroll(function(){c.scrollLeft=this.scrollLeft,null!==k&&(f.scrollLeft=this.scrollLeft)})),""!==a.oScroll.sY&&(e.style.height=_fnStringToCss(a.oScroll.sY)),a.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"}),a.oScroll.bInfinite&&$(e).scroll(function(){a.bDrawing||0===$(this).scrollTop()||$(this).scrollTop()+$(this).height()>$(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&(_fnPageChange(a,"next"),_fnCalculateEnd(a),_fnDraw(a))}),a.nScrollHead=c,a.nScrollFoot=f,b}function _fnScrollDraw(a){var b,c,d,e,f,g,h,i,j,k,l,m=a.nScrollHead.getElementsByTagName("div")[0],n=m.getElementsByTagName("table")[0],o=a.nTable.parentNode,p=[],q=[],r=null!==a.nTFoot?a.nScrollFoot.getElementsByTagName("div")[0]:null,s=null!==a.nTFoot?r.getElementsByTagName("table")[0]:null,t=a.oBrowser.bScrollOversize,u=function(a){h=a.style,h.paddingTop="0",h.paddingBottom="0",h.borderTopWidth="0",h.borderBottomWidth="0",h.height=0};$(a.nTable).children("thead, tfoot").remove(),j=$(a.nTHead).clone()[0],a.nTable.insertBefore(j,a.nTable.childNodes[0]),d=a.nTHead.getElementsByTagName("tr"),e=j.getElementsByTagName("tr"),null!==a.nTFoot&&(k=$(a.nTFoot).clone()[0],a.nTable.insertBefore(k,a.nTable.childNodes[1]),g=a.nTFoot.getElementsByTagName("tr"),f=k.getElementsByTagName("tr")),""===a.oScroll.sX&&(o.style.width="100%",m.parentNode.style.width="100%");var v=_fnGetUniqueThs(a,j);for(b=0,c=v.length;c>b;b++)i=_fnVisibleToColumnIndex(a,b),v[b].style.width=a.aoColumns[i].sWidth;if(null!==a.nTFoot&&_fnApplyToChildren(function(a){a.style.width=""},f),a.oScroll.bCollapse&&""!==a.oScroll.sY&&(o.style.height=o.offsetHeight+a.nTHead.offsetHeight+"px"),l=$(a.nTable).outerWidth(),""===a.oScroll.sX?(a.nTable.style.width="100%",t&&($("tbody",o).height()>o.offsetHeight||"scroll"==$(o).css("overflow-y"))&&(a.nTable.style.width=_fnStringToCss($(a.nTable).outerWidth()-a.oScroll.iBarWidth))):""!==a.oScroll.sXInner?a.nTable.style.width=_fnStringToCss(a.oScroll.sXInner):l==$(o).width()&&$(o).height()<$(a.nTable).height()?(a.nTable.style.width=_fnStringToCss(l-a.oScroll.iBarWidth),$(a.nTable).outerWidth()>l-a.oScroll.iBarWidth&&(a.nTable.style.width=_fnStringToCss(l))):a.nTable.style.width=_fnStringToCss(l),l=$(a.nTable).outerWidth(),_fnApplyToChildren(u,e),_fnApplyToChildren(function(a){p.push(_fnStringToCss($(a).width()))},e),_fnApplyToChildren(function(a,b){a.style.width=p[b]},d),$(e).height(0),null!==a.nTFoot&&(_fnApplyToChildren(u,f),_fnApplyToChildren(function(a){q.push(_fnStringToCss($(a).width()))},f),_fnApplyToChildren(function(a,b){a.style.width=q[b]},g),$(f).height(0)),_fnApplyToChildren(function(a,b){a.innerHTML="",a.style.width=p[b]},e),null!==a.nTFoot&&_fnApplyToChildren(function(a,b){a.innerHTML="",a.style.width=q[b]},f),$(a.nTable).outerWidth()<l){var w=o.scrollHeight>o.offsetHeight||"scroll"==$(o).css("overflow-y")?l+a.oScroll.iBarWidth:l;t&&(o.scrollHeight>o.offsetHeight||"scroll"==$(o).css("overflow-y"))&&(a.nTable.style.width=_fnStringToCss(w-a.oScroll.iBarWidth)),o.style.width=_fnStringToCss(w),a.nScrollHead.style.width=_fnStringToCss(w),null!==a.nTFoot&&(a.nScrollFoot.style.width=_fnStringToCss(w)),""===a.oScroll.sX?_fnLog(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&_fnLog(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")}else o.style.width=_fnStringToCss("100%"),a.nScrollHead.style.width=_fnStringToCss("100%"),null!==a.nTFoot&&(a.nScrollFoot.style.width=_fnStringToCss("100%"));if(""===a.oScroll.sY&&t&&(o.style.height=_fnStringToCss(a.nTable.offsetHeight+a.oScroll.iBarWidth)),""!==a.oScroll.sY&&a.oScroll.bCollapse){o.style.height=_fnStringToCss(a.oScroll.sY);var x=""!==a.oScroll.sX&&a.nTable.offsetWidth>o.offsetWidth?a.oScroll.iBarWidth:0;a.nTable.offsetHeight<o.offsetHeight&&(o.style.height=_fnStringToCss(a.nTable.offsetHeight+x))}var y=$(a.nTable).outerWidth();n.style.width=_fnStringToCss(y),m.style.width=_fnStringToCss(y);var z=$(a.nTable).height()>o.clientHeight||"scroll"==$(o).css("overflow-y");m.style.paddingRight=z?a.oScroll.iBarWidth+"px":"0px",null!==a.nTFoot&&(s.style.width=_fnStringToCss(y),r.style.width=_fnStringToCss(y),r.style.paddingRight=z?a.oScroll.iBarWidth+"px":"0px"),$(o).scroll(),(a.bSorted||a.bFiltered)&&(o.scrollTop=0)}function _fnApplyToChildren(a,b,c){for(var d,e,f=0,g=0,h=b.length;h>g;){for(d=b[g].firstChild,e=c?c[g].firstChild:null;d;)1===d.nodeType&&(c?a(d,e,f):a(d,f),f++),d=d.nextSibling,e=c?e.nextSibling:null;g++}}function _fnConvertToWidth(a,b){if(!a||null===a||""===a)return 0;b||(b=document.body);var c,d=document.createElement("div");return d.style.width=_fnStringToCss(a),b.appendChild(d),c=d.offsetWidth,b.removeChild(d),c}function _fnCalculateColumnWidths(a){var b,c,d,e,f=(a.nTable.offsetWidth,0),g=0,h=a.aoColumns.length,i=$("th",a.nTHead),j=a.nTable.getAttribute("width"),k=a.nTable.parentNode;for(c=0;h>c;c++)a.aoColumns[c].bVisible&&(g++,null!==a.aoColumns[c].sWidth&&(b=_fnConvertToWidth(a.aoColumns[c].sWidthOrig,k),null!==b&&(a.aoColumns[c].sWidth=_fnStringToCss(b)),f++));if(h==i.length&&0===f&&g==h&&""===a.oScroll.sX&&""===a.oScroll.sY)for(c=0;c<a.aoColumns.length;c++)b=$(i[c]).width(),null!==b&&(a.aoColumns[c].sWidth=_fnStringToCss(b));else{var l=a.nTable.cloneNode(!1),m=a.nTHead.cloneNode(!0),n=document.createElement("tbody"),o=document.createElement("tr");l.removeAttribute("id"),l.appendChild(m),null!==a.nTFoot&&(l.appendChild(a.nTFoot.cloneNode(!0)),_fnApplyToChildren(function(a){a.style.width=""},l.getElementsByTagName("tr"))),l.appendChild(n),n.appendChild(o);var p=$("thead th",l);0===p.length&&(p=$("tbody tr:eq(0)>td",l));var q=_fnGetUniqueThs(a,m);for(d=0,c=0;h>c;c++){var r=a.aoColumns[c];r.bVisible&&null!==r.sWidthOrig&&""!==r.sWidthOrig?q[c-d].style.width=_fnStringToCss(r.sWidthOrig):r.bVisible?q[c-d].style.width="":d++}for(c=0;h>c;c++)if(a.aoColumns[c].bVisible){var s=_fnGetWidestNode(a,c);null!==s&&(s=s.cloneNode(!0),""!==a.aoColumns[c].sContentPadding&&(s.innerHTML+=a.aoColumns[c].sContentPadding),o.appendChild(s))}k.appendChild(l),""!==a.oScroll.sX&&""!==a.oScroll.sXInner?l.style.width=_fnStringToCss(a.oScroll.sXInner):""!==a.oScroll.sX?(l.style.width="",$(l).width()<k.offsetWidth&&(l.style.width=_fnStringToCss(k.offsetWidth))):""!==a.oScroll.sY?l.style.width=_fnStringToCss(k.offsetWidth):j&&(l.style.width=_fnStringToCss(j)),l.style.visibility="hidden",_fnScrollingWidthAdjust(a,l);var t=$("tbody tr:eq(0)",l).children();if(0===t.length&&(t=_fnGetUniqueThs(a,$("thead",l)[0])),""!==a.oScroll.sX){var u=0;for(d=0,c=0;c<a.aoColumns.length;c++)a.aoColumns[c].bVisible&&(u+=null===a.aoColumns[c].sWidthOrig?$(t[d]).outerWidth():parseInt(a.aoColumns[c].sWidth.replace("px",""),10)+($(t[d]).outerWidth()-$(t[d]).width()),d++);l.style.width=_fnStringToCss(u),a.nTable.style.width=_fnStringToCss(u)}for(d=0,c=0;c<a.aoColumns.length;c++)a.aoColumns[c].bVisible&&(e=$(t[d]).width(),null!==e&&e>0&&(a.aoColumns[c].sWidth=_fnStringToCss(e)),d++);var v=$(l).css("width");a.nTable.style.width=-1!==v.indexOf("%")?v:_fnStringToCss($(l).outerWidth()),l.parentNode.removeChild(l)}j&&(a.nTable.style.width=_fnStringToCss(j))}function _fnScrollingWidthAdjust(a,b){if(""===a.oScroll.sX&&""!==a.oScroll.sY){{$(b).width()}b.style.width=_fnStringToCss($(b).outerWidth()-a.oScroll.iBarWidth)}else""!==a.oScroll.sX&&(b.style.width=_fnStringToCss($(b).outerWidth()))}function _fnGetWidestNode(a,b){var c=_fnGetMaxLenString(a,b);if(0>c)return null;if(null===a.aoData[c].nTr){var d=document.createElement("td");return d.innerHTML=_fnGetCellData(a,c,b,""),d}return _fnGetTdNodes(a,c)[b]}function _fnGetMaxLenString(a,b){for(var c=-1,d=-1,e=0;e<a.aoData.length;e++){var f=_fnGetCellData(a,e,b,"display")+"";f=f.replace(/<.*?>/g,""),f.length>c&&(c=f.length,d=e)}return d}function _fnStringToCss(a){if(null===a)return"0px";if("number"==typeof a)return 0>a?"0px":a+"px";var b=a.charCodeAt(a.length-1);return 48>b||b>57?a:a+"px"}function _fnScrollBarWidth(){var a=document.createElement("p"),b=a.style;b.width="100%",b.height="200px",b.padding="0px";var c=document.createElement("div");b=c.style,b.position="absolute",b.top="0px",b.left="0px",b.visibility="hidden",b.width="200px",b.height="150px",b.padding="0px",b.overflow="hidden",c.appendChild(a),document.body.appendChild(c);var d=a.offsetWidth;c.style.overflow="scroll";var e=a.offsetWidth;return d==e&&(e=c.clientWidth),document.body.removeChild(c),d-e}function _fnSort(a,b){var c,d,e,f,g,h,i,j,k=[],l=[],m=DataTable.ext.oSort,n=a.aoData,o=a.aoColumns,p=a.oLanguage.oAria;if(!a.oFeatures.bServerSide&&(0!==a.aaSorting.length||null!==a.aaSortingFixed)){for(k=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice(),c=0;c<k.length;c++){var q=k[c][0],r=_fnColumnIndexToVisible(a,q);if(i=a.aoColumns[q].sSortDataType,DataTable.ext.afnSortData[i]){var s=DataTable.ext.afnSortData[i].call(a.oInstance,a,q,r);if(s.length===n.length)for(e=0,f=n.length;f>e;e++)_fnSetCellData(a,e,q,s[e]);else _fnLog(a,0,"Returned data sort array (col "+q+") is the wrong length")}}for(c=0,d=a.aiDisplayMaster.length;d>c;c++)l[a.aiDisplayMaster[c]]=c;var t,u,v=k.length;for(c=0,d=n.length;d>c;c++)for(e=0;v>e;e++)for(u=o[k[e][0]].aDataSort,g=0,h=u.length;h>g;g++)i=o[u[g]].sType,t=m[(i?i:"string")+"-pre"],n[c]._aSortData[u[g]]=t?t(_fnGetCellData(a,c,u[g],"sort")):_fnGetCellData(a,c,u[g],"sort");a.aiDisplayMaster.sort(function(a,b){var c,d,e,f,g,h;for(c=0;v>c;c++)for(g=o[k[c][0]].aDataSort,d=0,e=g.length;e>d;d++)if(h=o[g[d]].sType,f=m[(h?h:"string")+"-"+k[c][1]](n[a]._aSortData[g[d]],n[b]._aSortData[g[d]]),0!==f)return f;return m["numeric-asc"](l[a],l[b])})}for(b!==undefined&&!b||a.oFeatures.bDeferRender||_fnSortingClasses(a),c=0,d=a.aoColumns.length;d>c;c++){var w=o[c].sTitle.replace(/<.*?>/g,"");if(j=o[c].nTh,j.removeAttribute("aria-sort"),j.removeAttribute("aria-label"),o[c].bSortable)if(k.length>0&&k[0][0]==c){j.setAttribute("aria-sort","asc"==k[0][1]?"ascending":"descending");var x=o[c].asSorting[k[0][2]+1]?o[c].asSorting[k[0][2]+1]:o[c].asSorting[0];j.setAttribute("aria-label",w+("asc"==x?p.sSortAscending:p.sSortDescending))}else j.setAttribute("aria-label",w+("asc"==o[c].asSorting[0]?p.sSortAscending:p.sSortDescending));else j.setAttribute("aria-label",w)}a.bSorted=!0,$(a.oInstance).trigger("sort",a),a.oFeatures.bFilter?_fnFilterComplete(a,a.oPreviousSearch,1):(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,_fnCalculateEnd(a),_fnDraw(a))}function _fnSortAttachListener(a,b,c,d){_fnBindAction(b,{},function(b){if(a.aoColumns[c].bSortable!==!1){var e=function(){var d,e;if(b.shiftKey){for(var f=!1,g=0;g<a.aaSorting.length;g++)if(a.aaSorting[g][0]==c){f=!0,d=a.aaSorting[g][0],e=a.aaSorting[g][2]+1,a.aoColumns[d].asSorting[e]?(a.aaSorting[g][1]=a.aoColumns[d].asSorting[e],a.aaSorting[g][2]=e):a.aaSorting.splice(g,1);break}f===!1&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else 1==a.aaSorting.length&&a.aaSorting[0][0]==c?(d=a.aaSorting[0][0],e=a.aaSorting[0][2]+1,a.aoColumns[d].asSorting[e]||(e=0),a.aaSorting[0][1]=a.aoColumns[d].asSorting[e],a.aaSorting[0][2]=e):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0]));_fnSort(a)};a.oFeatures.bProcessing?(_fnProcessingDisplay(a,!0),setTimeout(function(){e(),a.oFeatures.bServerSide||_fnProcessingDisplay(a,!1)},0)):e(),"function"==typeof d&&d(a)}})}function _fnSortingClasses(a){var b,c,d,e,f,g,h=a.aoColumns.length,i=a.oClasses;for(b=0;h>b;b++)a.aoColumns[b].bSortable&&$(a.aoColumns[b].nTh).removeClass(i.sSortAsc+" "+i.sSortDesc+" "+a.aoColumns[b].sSortingClass);for(f=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice(),b=0;b<a.aoColumns.length;b++)if(a.aoColumns[b].bSortable){for(g=a.aoColumns[b].sSortingClass,e=-1,d=0;d<f.length;d++)if(f[d][0]==b){g="asc"==f[d][1]?i.sSortAsc:i.sSortDesc,e=d;break}if($(a.aoColumns[b].nTh).addClass(g),a.bJUI){var j=$("span."+i.sSortIcon,a.aoColumns[b].nTh);j.removeClass(i.sSortJUIAsc+" "+i.sSortJUIDesc+" "+i.sSortJUI+" "+i.sSortJUIAscAllowed+" "+i.sSortJUIDescAllowed);var k;k=-1==e?a.aoColumns[b].sSortingClassJUI:"asc"==f[e][1]?i.sSortJUIAsc:i.sSortJUIDesc,j.addClass(k)}}else $(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass);if(g=i.sSortColumn,a.oFeatures.bSort&&a.oFeatures.bSortClasses){var l,m,n=_fnGetTdNodes(a),o=[];for(b=0;h>b;b++)o.push("");for(b=0,l=1;b<f.length;b++)m=parseInt(f[b][0],10),o[m]=g+l,3>l&&l++;var p,q,r,s=new RegExp(g+"[123]");for(b=0,c=n.length;c>b;b++)m=b%h,q=n[b].className,r=o[m],p=q.replace(s,r),p!=q?n[b].className=$.trim(p):r.length>0&&-1==q.indexOf(r)&&(n[b].className=q+" "+r)}}function _fnSaveState(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b,c,d=a.oScroll.bInfinite,e={iCreate:(new Date).getTime(),iStart:d?0:a._iDisplayStart,iEnd:d?a._iDisplayLength:a._iDisplayEnd,iLength:a._iDisplayLength,aaSorting:$.extend(!0,[],a.aaSorting),oSearch:$.extend(!0,{},a.oPreviousSearch),aoSearchCols:$.extend(!0,[],a.aoPreSearchCols),abVisCols:[]};for(b=0,c=a.aoColumns.length;c>b;b++)e.abVisCols.push(a.aoColumns[b].bVisible);_fnCallbackFire(a,"aoStateSaveParams","stateSaveParams",[a,e]),a.fnStateSave.call(a.oInstance,a,e)}}function _fnLoadState(a,b){if(a.oFeatures.bStateSave){var c=a.fnStateLoad.call(a.oInstance,a);if(c){var d=_fnCallbackFire(a,"aoStateLoadParams","stateLoadParams",[a,c]);if(-1===$.inArray(!1,d)){a.oLoadedState=$.extend(!0,{},c),a._iDisplayStart=c.iStart,a.iInitDisplayStart=c.iStart,a._iDisplayEnd=c.iEnd,a._iDisplayLength=c.iLength,a.aaSorting=c.aaSorting.slice(),a.saved_aaSorting=c.aaSorting.slice(),$.extend(a.oPreviousSearch,c.oSearch),$.extend(!0,a.aoPreSearchCols,c.aoSearchCols),b.saved_aoColumns=[];for(var e=0;e<c.abVisCols.length;e++)b.saved_aoColumns[e]={},b.saved_aoColumns[e].bVisible=c.abVisCols[e];_fnCallbackFire(a,"aoStateLoaded","stateLoaded",[a,c])}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date;date.setTime(date.getTime()+1e3*iSecs);var aParts=window.location.pathname.split("/"),sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase(),sFullCookie,oData;null!==fnCallback?(oData="function"==typeof $.parseJSON?$.parseJSON(sValue):eval("("+sValue+")"),sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")):sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/";var aCookies=document.cookie.split(";"),iNewCookieLen=sFullCookie.split(";")[0].length,aOldCookies=[];if(iNewCookieLen+document.cookie.length+10>4096){for(var i=0,iLen=aCookies.length;iLen>i;i++)if(-1!=aCookies[i].indexOf(sBaseName)){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")"),oData&&oData.iCreate&&aOldCookies.push({name:aSplitCookie[0],time:oData.iCreate})}catch(e){}}for(aOldCookies.sort(function(a,b){return b.time-a.time});iNewCookieLen+document.cookie.length+10>4096;){if(0===aOldCookies.length)return;var old=aOldCookies.pop();document.cookie=old.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(a){for(var b=window.location.pathname.split("/"),c=a+"_"+b[b.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",d=document.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1,f.length);if(0===f.indexOf(c))return decodeURIComponent(f.substring(c.length,f.length))}return null}function _fnSettingsFromNode(a){for(var b=0;b<DataTable.settings.length;b++)if(DataTable.settings[b].nTable===a)return DataTable.settings[b];return null}function _fnGetTrNodes(a){for(var b=[],c=a.aoData,d=0,e=c.length;e>d;d++)null!==c[d].nTr&&b.push(c[d].nTr);return b}function _fnGetTdNodes(a,b){var c,d,e,f,g,h,i,j,k=[],l=a.aoData.length,m=0,n=l;for(b!==undefined&&(m=b,n=b+1),f=m;n>f;f++)if(i=a.aoData[f],null!==i.nTr){for(d=[],e=i.nTr.firstChild;e;)j=e.nodeName.toLowerCase(),("td"==j||"th"==j)&&d.push(e),e=e.nextSibling;for(c=0,g=0,h=a.aoColumns.length;h>g;g++)a.aoColumns[g].bVisible?k.push(d[g-c]):(k.push(i._anHidden[g]),c++)}return k}function _fnLog(a,b,c){var d=null===a?"DataTables warning: "+c:"DataTables warning (table id = '"+a.sTableId+"'): "+c;if(0===b){if("alert"!=DataTable.ext.sErrMode)throw new Error(d);return void alert(d)}window.console&&console.log&&console.log(d)}function _fnMap(a,b,c,d){d===undefined&&(d=c),b[c]!==undefined&&(a[d]=b[c])}function _fnExtend(a,b){var c;for(var d in b)b.hasOwnProperty(d)&&(c=b[d],"object"==typeof oInit[d]&&null!==c&&$.isArray(c)===!1?$.extend(!0,a[d],c):a[d]=c);return a}function _fnBindAction(a,b,c){$(a).bind("click.DT",b,function(b){a.blur(),c(b)}).bind("keypress.DT",b,function(a){13===a.which&&c(a)}).bind("selectstart.DT",function(){return!1})}function _fnCallbackReg(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function _fnCallbackFire(a,b,c,d){for(var e=a[b],f=[],g=e.length-1;g>=0;g--)f.push(e[g].fn.apply(a.oInstance,d));return null!==c&&$(a.oInstance).trigger(c,d),f}function _fnBrowserDetect(a){var b=$('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];document.body.appendChild(b),a.oBrowser.bScrollOversize=100===$("#DT_BrowserTest",b)[0].offsetWidth?!0:!1,document.body.removeChild(b)}function _fnExternApiFunc(a){return function(){var b=[_fnSettingsFromNode(this[DataTable.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return DataTable.ext.oApi[a].apply(this,b)}}var __reArray=/\[.*?\]$/,_fnJsonString=window.JSON?JSON.stringify:function(a){var b=typeof a;if("object"!==b||null===a)return"string"===b&&(a='"'+a+'"'),a+"";var c,d,e=[],f=$.isArray(a);for(c in a)d=a[c],b=typeof d,"string"===b?d='"'+d+'"':"object"===b&&null!==d&&(d=_fnJsonString(d)),e.push((f?"":'"'+c+'":')+d);return(f?"[":"{")+e+(f?"]":"}")};this.$=function(a,b){var c,d,e,f=[],g=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),h=g.aoData,i=g.aiDisplay,j=g.aiDisplayMaster;if(b||(b={}),b=$.extend({},{filter:"none",order:"current",page:"all"},b),"current"==b.page)for(c=g._iDisplayStart,d=g.fnDisplayEnd();d>c;c++)e=h[i[c]].nTr,e&&f.push(e);else if("current"==b.order&&"none"==b.filter)for(c=0,d=j.length;d>c;c++)e=h[j[c]].nTr,e&&f.push(e);else if("current"==b.order&&"applied"==b.filter)for(c=0,d=i.length;d>c;c++)e=h[i[c]].nTr,e&&f.push(e);else if("original"==b.order&&"none"==b.filter)for(c=0,d=h.length;d>c;c++)e=h[c].nTr,e&&f.push(e);else if("original"==b.order&&"applied"==b.filter)for(c=0,d=h.length;d>c;c++)e=h[c].nTr,-1!==$.inArray(c,i)&&e&&f.push(e);else _fnLog(g,1,"Unknown selection options");var k=$(f),l=k.filter(a),m=k.find(a);return $([].concat($.makeArray(l),$.makeArray(m)))},this._=function(a,b){var c,d,e=[],f=this.$(a,b);for(c=0,d=f.length;d>c;c++)e.push(this.fnGetData(f[c]));return e},this.fnAddData=function(a,b){if(0===a.length)return[];var c,d=[],e=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if("object"==typeof a[0]&&null!==a[0])for(var f=0;f<a.length;f++){if(c=_fnAddData(e,a[f]),-1==c)return d;d.push(c)}else{if(c=_fnAddData(e,a),-1==c)return d;d.push(c)}return e.aiDisplay=e.aiDisplayMaster.slice(),(b===undefined||b)&&_fnReDraw(e),d},this.fnAdjustColumnSizing=function(a){var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnAdjustColumnSizing(b),a===undefined||a?this.fnDraw(!1):(""!==b.oScroll.sX||""!==b.oScroll.sY)&&this.oApi._fnScrollDraw(b)},this.fnClearTable=function(a){var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnClearTable(b),(a===undefined||a)&&_fnDraw(b)},this.fnClose=function(a){for(var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a){var d=b.aoOpenRows[c].nTr.parentNode;return d&&d.removeChild(b.aoOpenRows[c].nTr),b.aoOpenRows.splice(c,1),0}return 1},this.fnDeleteRow=function(a,b,c){var d,e,f,g=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);f="object"==typeof a?_fnNodeToDataIndex(g,a):a;var h=g.aoData.splice(f,1);for(d=0,e=g.aoData.length;e>d;d++)null!==g.aoData[d].nTr&&(g.aoData[d].nTr._DT_RowIndex=d);var i=$.inArray(f,g.aiDisplay);return g.asDataSearch.splice(i,1),_fnDeleteIndex(g.aiDisplayMaster,f),_fnDeleteIndex(g.aiDisplay,f),"function"==typeof b&&b.call(this,g,h),g._iDisplayStart>=g.fnRecordsDisplay()&&(g._iDisplayStart-=g._iDisplayLength,g._iDisplayStart<0&&(g._iDisplayStart=0)),(c===undefined||c)&&(_fnCalculateEnd(g),_fnDraw(g)),h},this.fnDestroy=function(a){var b,c,d=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),e=d.nTableWrapper.parentNode,f=d.nTBody;if(a=a===undefined?!1:a,d.bDestroying=!0,_fnCallbackFire(d,"aoDestroyCallback","destroy",[d]),!a)for(b=0,c=d.aoColumns.length;c>b;b++)d.aoColumns[b].bVisible===!1&&this.fnSetColumnVis(b,!0);for($(d.nTableWrapper).find("*").andSelf().unbind(".DT"),$("tbody>tr>td."+d.oClasses.sRowEmpty,d.nTable).parent().remove(),d.nTable!=d.nTHead.parentNode&&($(d.nTable).children("thead").remove(),d.nTable.appendChild(d.nTHead)),d.nTFoot&&d.nTable!=d.nTFoot.parentNode&&($(d.nTable).children("tfoot").remove(),d.nTable.appendChild(d.nTFoot)),d.nTable.parentNode.removeChild(d.nTable),$(d.nTableWrapper).remove(),d.aaSorting=[],d.aaSortingFixed=[],_fnSortingClasses(d),$(_fnGetTrNodes(d)).removeClass(d.asStripeClasses.join(" ")),$("th, td",d.nTHead).removeClass([d.oClasses.sSortable,d.oClasses.sSortableAsc,d.oClasses.sSortableDesc,d.oClasses.sSortableNone].join(" ")),d.bJUI&&($("th span."+d.oClasses.sSortIcon+", td span."+d.oClasses.sSortIcon,d.nTHead).remove(),$("th, td",d.nTHead).each(function(){var a=$("div."+d.oClasses.sSortJUIWrapper,this),b=a.contents();$(this).append(b),a.remove()})),!a&&d.nTableReinsertBefore?e.insertBefore(d.nTable,d.nTableReinsertBefore):a||e.appendChild(d.nTable),b=0,c=d.aoData.length;c>b;b++)null!==d.aoData[b].nTr&&f.appendChild(d.aoData[b].nTr);if(d.oFeatures.bAutoWidth===!0&&(d.nTable.style.width=_fnStringToCss(d.sDestroyWidth)),c=d.asDestroyStripes.length){var g=$(f).children("tr");for(b=0;c>b;b++)g.filter(":nth-child("+c+"n + "+b+")").addClass(d.asDestroyStripes[b])}for(b=0,c=DataTable.settings.length;c>b;b++)DataTable.settings[b]==d&&DataTable.settings.splice(b,1);d=null,oInit=null},this.fnDraw=function(a){var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);a===!1?(_fnCalculateEnd(b),_fnDraw(b)):_fnReDraw(b)},this.fnFilter=function(a,b,c,d,e,f){var g=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(g.oFeatures.bFilter)if((c===undefined||null===c)&&(c=!1),(d===undefined||null===d)&&(d=!0),(e===undefined||null===e)&&(e=!0),(f===undefined||null===f)&&(f=!0),b===undefined||null===b){if(_fnFilterComplete(g,{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:f},1),e&&g.aanFeatures.f)for(var h=g.aanFeatures.f,i=0,j=h.length;j>i;i++)try{h[i]._DT_Input!=document.activeElement&&$(h[i]._DT_Input).val(a)}catch(k){$(h[i]._DT_Input).val(a)}}else $.extend(g.aoPreSearchCols[b],{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:f}),_fnFilterComplete(g,g.oPreviousSearch,1)},this.fnGetData=function(a,b){var c=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(a!==undefined){var d=a;if("object"==typeof a){var e=a.nodeName.toLowerCase();"tr"===e?d=_fnNodeToDataIndex(c,a):"td"===e&&(d=_fnNodeToDataIndex(c,a.parentNode),b=_fnNodeToColumnIndex(c,d,a))}return b!==undefined?_fnGetCellData(c,d,b,""):c.aoData[d]!==undefined?c.aoData[d]._aData:null}return _fnGetDataMaster(c)},this.fnGetNodes=function(a){var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);return a!==undefined?b.aoData[a]!==undefined?b.aoData[a].nTr:null:_fnGetTrNodes(b)},this.fnGetPosition=function(a){var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),c=a.nodeName.toUpperCase();if("TR"==c)return _fnNodeToDataIndex(b,a);if("TD"==c||"TH"==c){var d=_fnNodeToDataIndex(b,a.parentNode),e=_fnNodeToColumnIndex(b,d,a);return[d,_fnColumnIndexToVisible(b,e),e]}return null},this.fnIsOpen=function(a){for(var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),c=(b.aoOpenRows,0);c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return!0;return!1},this.fnOpen=function(a,b,c){var d=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),e=_fnGetTrNodes(d);if(-1!==$.inArray(a,e)){this.fnClose(a);var f=document.createElement("tr"),g=document.createElement("td");f.appendChild(g),g.className=c,g.colSpan=_fnVisbleColumns(d),"string"==typeof b?g.innerHTML=b:$(g).html(b);var h=$("tr",d.nTBody);return-1!=$.inArray(a,h)&&$(f).insertAfter(a),d.aoOpenRows.push({nTr:f,nParent:a}),f}},this.fnPageChange=function(a,b){var c=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnPageChange(c,a),_fnCalculateEnd(c),(b===undefined||b)&&_fnDraw(c)},this.fnSetColumnVis=function(a,b,c){var d,e,f,g,h,i=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),j=i.aoColumns,k=i.aoData;if(j[a].bVisible!=b){if(b){var l=0;for(d=0;a>d;d++)j[d].bVisible&&l++;if(g=l>=_fnVisbleColumns(i),!g)for(d=a;d<j.length;d++)if(j[d].bVisible){h=d;break}for(d=0,e=k.length;e>d;d++)null!==k[d].nTr&&(g?k[d].nTr.appendChild(k[d]._anHidden[a]):k[d].nTr.insertBefore(k[d]._anHidden[a],_fnGetTdNodes(i,d)[h]))}else for(d=0,e=k.length;e>d;d++)null!==k[d].nTr&&(f=_fnGetTdNodes(i,d)[a],k[d]._anHidden[a]=f,f.parentNode.removeChild(f));for(j[a].bVisible=b,_fnDrawHead(i,i.aoHeader),i.nTFoot&&_fnDrawHead(i,i.aoFooter),d=0,e=i.aoOpenRows.length;e>d;d++)i.aoOpenRows[d].nTr.colSpan=_fnVisbleColumns(i);(c===undefined||c)&&(_fnAdjustColumnSizing(i),_fnDraw(i)),_fnSaveState(i)}},this.fnSettings=function(){return _fnSettingsFromNode(this[DataTable.ext.iApiIndex])},this.fnSort=function(a){var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);b.aaSorting=a,_fnSort(b)},this.fnSortListener=function(a,b,c){_fnSortAttachListener(_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),a,b,c)},this.fnUpdate=function(a,b,c,d,e){var f,g,h=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),i="object"==typeof b?_fnNodeToDataIndex(h,b):b;if($.isArray(a)&&c===undefined)for(h.aoData[i]._aData=a.slice(),f=0;f<h.aoColumns.length;f++)this.fnUpdate(_fnGetCellData(h,i,f),i,f,!1,!1);else if($.isPlainObject(a)&&c===undefined)for(h.aoData[i]._aData=$.extend(!0,{},a),f=0;f<h.aoColumns.length;f++)this.fnUpdate(_fnGetCellData(h,i,f),i,f,!1,!1);else{_fnSetCellData(h,i,c,a),g=_fnGetCellData(h,i,c,"display");var j=h.aoColumns[c];null!==j.fnRender&&(g=_fnRender(h,i,c),j.bUseRendered&&_fnSetCellData(h,i,c,g)),null!==h.aoData[i].nTr&&(_fnGetTdNodes(h,i)[c].innerHTML=g)}var k=$.inArray(i,h.aiDisplay);return h.asDataSearch[k]=_fnBuildSearchRow(h,_fnGetRowData(h,i,"filter",_fnGetColumns(h,"bSearchable"))),(e===undefined||e)&&_fnAdjustColumnSizing(h),(d===undefined||d)&&_fnReDraw(h),0},this.fnVersionCheck=DataTable.ext.fnVersionCheck,this.oApi={_fnExternApiFunc:_fnExternApiFunc,_fnInitialise:_fnInitialise,_fnInitComplete:_fnInitComplete,_fnLanguageCompat:_fnLanguageCompat,_fnAddColumn:_fnAddColumn,_fnColumnOptions:_fnColumnOptions,_fnAddData:_fnAddData,_fnCreateTr:_fnCreateTr,_fnGatherData:_fnGatherData,_fnBuildHead:_fnBuildHead,_fnDrawHead:_fnDrawHead,_fnDraw:_fnDraw,_fnReDraw:_fnReDraw,_fnAjaxUpdate:_fnAjaxUpdate,_fnAjaxParameters:_fnAjaxParameters,_fnAjaxUpdateDraw:_fnAjaxUpdateDraw,_fnServerParams:_fnServerParams,_fnAddOptionsHtml:_fnAddOptionsHtml,_fnFeatureHtmlTable:_fnFeatureHtmlTable,_fnScrollDraw:_fnScrollDraw,_fnAdjustColumnSizing:_fnAdjustColumnSizing,_fnFeatureHtmlFilter:_fnFeatureHtmlFilter,_fnFilterComplete:_fnFilterComplete,_fnFilterCustom:_fnFilterCustom,_fnFilterColumn:_fnFilterColumn,_fnFilter:_fnFilter,_fnBuildSearchArray:_fnBuildSearchArray,_fnBuildSearchRow:_fnBuildSearchRow,_fnFilterCreateSearch:_fnFilterCreateSearch,_fnDataToSearch:_fnDataToSearch,_fnSort:_fnSort,_fnSortAttachListener:_fnSortAttachListener,_fnSortingClasses:_fnSortingClasses,_fnFeatureHtmlPaginate:_fnFeatureHtmlPaginate,_fnPageChange:_fnPageChange,_fnFeatureHtmlInfo:_fnFeatureHtmlInfo,_fnUpdateInfo:_fnUpdateInfo,_fnFeatureHtmlLength:_fnFeatureHtmlLength,_fnFeatureHtmlProcessing:_fnFeatureHtmlProcessing,_fnProcessingDisplay:_fnProcessingDisplay,_fnVisibleToColumnIndex:_fnVisibleToColumnIndex,_fnColumnIndexToVisible:_fnColumnIndexToVisible,_fnNodeToDataIndex:_fnNodeToDataIndex,_fnVisbleColumns:_fnVisbleColumns,_fnCalculateEnd:_fnCalculateEnd,_fnConvertToWidth:_fnConvertToWidth,_fnCalculateColumnWidths:_fnCalculateColumnWidths,_fnScrollingWidthAdjust:_fnScrollingWidthAdjust,_fnGetWidestNode:_fnGetWidestNode,_fnGetMaxLenString:_fnGetMaxLenString,_fnStringToCss:_fnStringToCss,_fnDetectType:_fnDetectType,_fnSettingsFromNode:_fnSettingsFromNode,_fnGetDataMaster:_fnGetDataMaster,_fnGetTrNodes:_fnGetTrNodes,_fnGetTdNodes:_fnGetTdNodes,_fnEscapeRegex:_fnEscapeRegex,_fnDeleteIndex:_fnDeleteIndex,_fnReOrderIndex:_fnReOrderIndex,_fnColumnOrdering:_fnColumnOrdering,_fnLog:_fnLog,_fnClearTable:_fnClearTable,_fnSaveState:_fnSaveState,_fnLoadState:_fnLoadState,_fnCreateCookie:_fnCreateCookie,_fnReadCookie:_fnReadCookie,_fnDetectHeader:_fnDetectHeader,_fnGetUniqueThs:_fnGetUniqueThs,_fnScrollBarWidth:_fnScrollBarWidth,_fnApplyToChildren:_fnApplyToChildren,_fnMap:_fnMap,_fnGetRowData:_fnGetRowData,_fnGetCellData:_fnGetCellData,_fnSetCellData:_fnSetCellData,_fnGetObjectDataFn:_fnGetObjectDataFn,_fnSetObjectDataFn:_fnSetObjectDataFn,_fnApplyColumnDefs:_fnApplyColumnDefs,_fnBindAction:_fnBindAction,_fnExtend:_fnExtend,_fnCallbackReg:_fnCallbackReg,_fnCallbackFire:_fnCallbackFire,_fnJsonString:_fnJsonString,_fnRender:_fnRender,_fnNodeToColumnIndex:_fnNodeToColumnIndex,_fnInfoMacros:_fnInfoMacros,_fnBrowserDetect:_fnBrowserDetect,_fnGetColumns:_fnGetColumns},$.extend(DataTable.ext.oApi,this.oApi);
for(var sFunc in DataTable.ext.oApi)sFunc&&(this[sFunc]=_fnExternApiFunc(sFunc));var _that=this;return this.each(function(){var a,b,c,d=0,e=this.getAttribute("id"),f=!1,g=!1;if("table"!=this.nodeName.toLowerCase())return void _fnLog(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);for(d=0,a=DataTable.settings.length;a>d;d++){if(DataTable.settings[d].nTable==this){if(oInit===undefined||oInit.bRetrieve)return DataTable.settings[d].oInstance;if(oInit.bDestroy){DataTable.settings[d].oInstance.fnDestroy();break}return void _fnLog(DataTable.settings[d],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy")}if(DataTable.settings[d].sTableId==this.id){DataTable.settings.splice(d,1);break}}(null===e||""===e)&&(e="DataTables_Table_"+DataTable.ext._oExternConfig.iNextUnique++,this.id=e);var h=$.extend(!0,{},DataTable.models.oSettings,{nTable:this,oApi:_that.oApi,oInit:oInit,sDestroyWidth:$(this).width(),sInstance:e,sTableId:e});if(DataTable.settings.push(h),h.oInstance=1===_that.length?_that:$(this).dataTable(),oInit||(oInit={}),oInit.oLanguage&&_fnLanguageCompat(oInit.oLanguage),oInit=_fnExtend($.extend(!0,{},DataTable.defaults),oInit),_fnMap(h.oFeatures,oInit,"bPaginate"),_fnMap(h.oFeatures,oInit,"bLengthChange"),_fnMap(h.oFeatures,oInit,"bFilter"),_fnMap(h.oFeatures,oInit,"bSort"),_fnMap(h.oFeatures,oInit,"bInfo"),_fnMap(h.oFeatures,oInit,"bProcessing"),_fnMap(h.oFeatures,oInit,"bAutoWidth"),_fnMap(h.oFeatures,oInit,"bSortClasses"),_fnMap(h.oFeatures,oInit,"bServerSide"),_fnMap(h.oFeatures,oInit,"bDeferRender"),_fnMap(h.oScroll,oInit,"sScrollX","sX"),_fnMap(h.oScroll,oInit,"sScrollXInner","sXInner"),_fnMap(h.oScroll,oInit,"sScrollY","sY"),_fnMap(h.oScroll,oInit,"bScrollCollapse","bCollapse"),_fnMap(h.oScroll,oInit,"bScrollInfinite","bInfinite"),_fnMap(h.oScroll,oInit,"iScrollLoadGap","iLoadGap"),_fnMap(h.oScroll,oInit,"bScrollAutoCss","bAutoCss"),_fnMap(h,oInit,"asStripeClasses"),_fnMap(h,oInit,"asStripClasses","asStripeClasses"),_fnMap(h,oInit,"fnServerData"),_fnMap(h,oInit,"fnFormatNumber"),_fnMap(h,oInit,"sServerMethod"),_fnMap(h,oInit,"aaSorting"),_fnMap(h,oInit,"aaSortingFixed"),_fnMap(h,oInit,"aLengthMenu"),_fnMap(h,oInit,"sPaginationType"),_fnMap(h,oInit,"sAjaxSource"),_fnMap(h,oInit,"sAjaxDataProp"),_fnMap(h,oInit,"iCookieDuration"),_fnMap(h,oInit,"sCookiePrefix"),_fnMap(h,oInit,"sDom"),_fnMap(h,oInit,"bSortCellsTop"),_fnMap(h,oInit,"iTabIndex"),_fnMap(h,oInit,"oSearch","oPreviousSearch"),_fnMap(h,oInit,"aoSearchCols","aoPreSearchCols"),_fnMap(h,oInit,"iDisplayLength","_iDisplayLength"),_fnMap(h,oInit,"bJQueryUI","bJUI"),_fnMap(h,oInit,"fnCookieCallback"),_fnMap(h,oInit,"fnStateLoad"),_fnMap(h,oInit,"fnStateSave"),_fnMap(h.oLanguage,oInit,"fnInfoCallback"),_fnCallbackReg(h,"aoDrawCallback",oInit.fnDrawCallback,"user"),_fnCallbackReg(h,"aoServerParams",oInit.fnServerParams,"user"),_fnCallbackReg(h,"aoStateSaveParams",oInit.fnStateSaveParams,"user"),_fnCallbackReg(h,"aoStateLoadParams",oInit.fnStateLoadParams,"user"),_fnCallbackReg(h,"aoStateLoaded",oInit.fnStateLoaded,"user"),_fnCallbackReg(h,"aoRowCallback",oInit.fnRowCallback,"user"),_fnCallbackReg(h,"aoRowCreatedCallback",oInit.fnCreatedRow,"user"),_fnCallbackReg(h,"aoHeaderCallback",oInit.fnHeaderCallback,"user"),_fnCallbackReg(h,"aoFooterCallback",oInit.fnFooterCallback,"user"),_fnCallbackReg(h,"aoInitComplete",oInit.fnInitComplete,"user"),_fnCallbackReg(h,"aoPreDrawCallback",oInit.fnPreDrawCallback,"user"),h.oFeatures.bServerSide&&h.oFeatures.bSort&&h.oFeatures.bSortClasses?_fnCallbackReg(h,"aoDrawCallback",_fnSortingClasses,"server_side_sort_classes"):h.oFeatures.bDeferRender&&_fnCallbackReg(h,"aoDrawCallback",_fnSortingClasses,"defer_sort_classes"),oInit.bJQueryUI?($.extend(h.oClasses,DataTable.ext.oJUIClasses),oInit.sDom===DataTable.defaults.sDom&&"lfrtip"===DataTable.defaults.sDom&&(h.sDom='<"H"lfr>t<"F"ip>')):$.extend(h.oClasses,DataTable.ext.oStdClasses),$(this).addClass(h.oClasses.sTable),(""!==h.oScroll.sX||""!==h.oScroll.sY)&&(h.oScroll.iBarWidth=_fnScrollBarWidth()),h.iInitDisplayStart===undefined&&(h.iInitDisplayStart=oInit.iDisplayStart,h._iDisplayStart=oInit.iDisplayStart),oInit.bStateSave&&(h.oFeatures.bStateSave=!0,_fnLoadState(h,oInit),_fnCallbackReg(h,"aoDrawCallback",_fnSaveState,"state_save")),null!==oInit.iDeferLoading){h.bDeferLoading=!0;var i=$.isArray(oInit.iDeferLoading);h._iRecordsDisplay=i?oInit.iDeferLoading[0]:oInit.iDeferLoading,h._iRecordsTotal=i?oInit.iDeferLoading[1]:oInit.iDeferLoading}if(null!==oInit.aaData&&(g=!0),""!==oInit.oLanguage.sUrl?(h.oLanguage.sUrl=oInit.oLanguage.sUrl,$.getJSON(h.oLanguage.sUrl,null,function(a){_fnLanguageCompat(a),$.extend(!0,h.oLanguage,oInit.oLanguage,a),_fnInitialise(h)}),f=!0):$.extend(!0,h.oLanguage,oInit.oLanguage),null===oInit.asStripeClasses&&(h.asStripeClasses=[h.oClasses.sStripeOdd,h.oClasses.sStripeEven]),a=h.asStripeClasses.length,h.asDestroyStripes=[],a){var j=!1,k=$(this).children("tbody").children("tr:lt("+a+")");for(d=0;a>d;d++)k.hasClass(h.asStripeClasses[d])&&(j=!0,h.asDestroyStripes.push(h.asStripeClasses[d]));j&&k.removeClass(h.asStripeClasses.join(" "))}var l,m=[],n=this.getElementsByTagName("thead");if(0!==n.length&&(_fnDetectHeader(h.aoHeader,n[0]),m=_fnGetUniqueThs(h)),null===oInit.aoColumns)for(l=[],d=0,a=m.length;a>d;d++)l.push(null);else l=oInit.aoColumns;for(d=0,a=l.length;a>d;d++)oInit.saved_aoColumns!==undefined&&oInit.saved_aoColumns.length==a&&(null===l[d]&&(l[d]={}),l[d].bVisible=oInit.saved_aoColumns[d].bVisible),_fnAddColumn(h,m?m[d]:null);for(_fnApplyColumnDefs(h,oInit.aoColumnDefs,l,function(a,b){_fnColumnOptions(h,a,b)}),d=0,a=h.aaSorting.length;a>d;d++){h.aaSorting[d][0]>=h.aoColumns.length&&(h.aaSorting[d][0]=0);var o=h.aoColumns[h.aaSorting[d][0]];for(h.aaSorting[d][2]===undefined&&(h.aaSorting[d][2]=0),oInit.aaSorting===undefined&&h.saved_aaSorting===undefined&&(h.aaSorting[d][1]=o.asSorting[0]),b=0,c=o.asSorting.length;c>b;b++)if(h.aaSorting[d][1]==o.asSorting[b]){h.aaSorting[d][2]=b;break}}_fnSortingClasses(h),_fnBrowserDetect(h);var p=$(this).children("caption").each(function(){this._captionSide=$(this).css("caption-side")}),q=$(this).children("thead");0===q.length&&(q=[document.createElement("thead")],this.appendChild(q[0])),h.nTHead=q[0];var r=$(this).children("tbody");0===r.length&&(r=[document.createElement("tbody")],this.appendChild(r[0])),h.nTBody=r[0],h.nTBody.setAttribute("role","alert"),h.nTBody.setAttribute("aria-live","polite"),h.nTBody.setAttribute("aria-relevant","all");var s=$(this).children("tfoot");if(0===s.length&&p.length>0&&(""!==h.oScroll.sX||""!==h.oScroll.sY)&&(s=[document.createElement("tfoot")],this.appendChild(s[0])),s.length>0&&(h.nTFoot=s[0],_fnDetectHeader(h.aoFooter,h.nTFoot)),g)for(d=0;d<oInit.aaData.length;d++)_fnAddData(h,oInit.aaData[d]);else _fnGatherData(h);h.aiDisplay=h.aiDisplayMaster.slice(),h.bInitialised=!0,f===!1&&_fnInitialise(h)}),_that=null,this};DataTable.fnVersionCheck=function(a){for(var b=function(a,b){for(;a.length<b;)a+="0";return a},c=DataTable.ext.sVersion.split("."),d=a.split("."),e="",f="",g=0,h=d.length;h>g;g++)e+=b(c[g],3),f+=b(d[g],3);return parseInt(e,10)>=parseInt(f,10)},DataTable.fnIsDataTable=function(a){for(var b=DataTable.settings,c=0;c<b.length;c++)if(b[c].nTable===a||b[c].nScrollHead===a||b[c].nScrollFoot===a)return!0;return!1},DataTable.fnTables=function(a){var b=[];return jQuery.each(DataTable.settings,function(c,d){(!a||a===!0&&$(d.nTable).is(":visible"))&&b.push(d.nTable)}),b},DataTable.version="1.9.4",DataTable.settings=[],DataTable.models={},DataTable.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:DataTable.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:DataTable.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}},DataTable.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},DataTable.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""},DataTable.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},DataTable.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){if(1e3>a)return a;for(var b=a+"",c=b.split(""),d="",e=b.length,f=0;e>f;f++)f%3===0&&0!==f&&(d=this.oLanguage.sInfoThousands+d),d=c[e-f-1]+d;return d},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(a,b,c,d){d.jqXHR=$.ajax({url:a,data:b,success:function(a){a.sError&&d.oApi._fnLog(d,0,a.sError),$(d.oInstance).trigger("xhr",[d,a]),c(a)},dataType:"json",cache:!1,type:d.sServerMethod,error:function(a,b){"parsererror"==b&&d.oApi._fnLog(d,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(oSettings){var sData=this.oApi._fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance),oData;try{oData="function"==typeof $.parseJSON?$.parseJSON(sData):eval("("+sData+")")}catch(e){oData=null}return oData},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(a,b){this.oApi._fnCreateCookie(a.sCookiePrefix+a.sInstance,this.oApi._fnJsonString(b),a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:$.extend({},DataTable.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"},DataTable.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},DataTable.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?this.oFeatures.bPaginate===!1||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null},DataTable.ext=$.extend(!0,{},DataTable.models.ext),$.extend(DataTable.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""}),$.extend(DataTable.ext.oJUIClasses,DataTable.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}),$.extend(DataTable.ext.oPagination,{two_button:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,e=(a.oClasses,function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)}),f=a.bJUI?'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUIPrev+'"></span></a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUINext+'"></span></a>':'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+d.sPrevious+'</a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+d.sNext+"</a>";$(b).append(f);var g=$("a",b),h=g[0],i=g[1];a.oApi._fnBindAction(h,{action:"previous"},e),a.oApi._fnBindAction(i,{action:"next"},e),a.aanFeatures.p||(b.id=a.sTableId+"_paginate",h.id=a.sTableId+"_previous",i.id=a.sTableId+"_next",h.setAttribute("aria-controls",a.sTableId),i.setAttribute("aria-controls",a.sTableId))},fnUpdate:function(a){if(a.aanFeatures.p)for(var b,c=a.oClasses,d=a.aanFeatures.p,e=0,f=d.length;f>e;e++)b=d[e].firstChild,b&&(b.className=0===a._iDisplayStart?c.sPagePrevDisabled:c.sPagePrevEnabled,b=b.nextSibling,b.className=a.fnDisplayEnd()==a.fnRecordsDisplay()?c.sPageNextDisabled:c.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,e=a.oClasses,f=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)};$(b).append('<a  tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPageFirst+'">'+d.sFirst+'</a><a  tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPagePrevious+'">'+d.sPrevious+'</a><span></span><a tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPageNext+'">'+d.sNext+'</a><a tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPageLast+'">'+d.sLast+"</a>");var g=$("a",b),h=g[0],i=g[1],j=g[2],k=g[3];a.oApi._fnBindAction(h,{action:"first"},f),a.oApi._fnBindAction(i,{action:"previous"},f),a.oApi._fnBindAction(j,{action:"next"},f),a.oApi._fnBindAction(k,{action:"last"},f),a.aanFeatures.p||(b.id=a.sTableId+"_paginate",h.id=a.sTableId+"_first",i.id=a.sTableId+"_previous",j.id=a.sTableId+"_next",k.id=a.sTableId+"_last")},fnUpdate:function(a,b){if(a.aanFeatures.p){var c,d,e,f,g,h,i,j=DataTable.ext.oPagination.iFullNumbersShowPages,k=Math.floor(j/2),l=Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength),m=Math.ceil(a._iDisplayStart/a._iDisplayLength)+1,n="",o=a.oClasses,p=a.aanFeatures.p,q=function(d){a.oApi._fnBindAction(this,{page:d+c-1},function(c){a.oApi._fnPageChange(a,c.data.page),b(a),c.preventDefault()})};for(-1===a._iDisplayLength?(c=1,d=1,m=1):j>l?(c=1,d=l):k>=m?(c=1,d=j):m>=l-k?(c=l-j+1,d=l):(c=m-Math.ceil(j/2)+1,d=c+j-1),e=c;d>=e;e++)n+=m!==e?'<a tabindex="'+a.iTabIndex+'" class="'+o.sPageButton+'">'+a.fnFormatNumber(e)+"</a>":'<a tabindex="'+a.iTabIndex+'" class="'+o.sPageButtonActive+'">'+a.fnFormatNumber(e)+"</a>";for(e=0,f=p.length;f>e;e++)i=p[e],i.hasChildNodes()&&($("span:eq(0)",i).html(n).children("a").each(q),g=i.getElementsByTagName("a"),h=[g[0],g[1],g[g.length-2],g[g.length-1]],$(h).removeClass(o.sPageButton+" "+o.sPageButtonActive+" "+o.sPageButtonStaticDisabled),$([h[0],h[1]]).addClass(1==m?o.sPageButtonStaticDisabled:o.sPageButton),$([h[2],h[3]]).addClass(0===l||m===l||-1===a._iDisplayLength?o.sPageButtonStaticDisabled:o.sPageButton))}}}}),$.extend(DataTable.ext.oSort,{"string-pre":function(a){return"string"!=typeof a&&(a=null!==a&&a.toString?a.toString():""),a.toLowerCase()},"string-asc":function(a,b){return b>a?-1:a>b?1:0},"string-desc":function(a,b){return b>a?1:a>b?-1:0},"html-pre":function(a){return a.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(a,b){return b>a?-1:a>b?1:0},"html-desc":function(a,b){return b>a?1:a>b?-1:0},"date-pre":function(a){var b=Date.parse(a);return(isNaN(b)||""===b)&&(b=Date.parse("01/01/1970 00:00:00")),b},"date-asc":function(a,b){return a-b},"date-desc":function(a,b){return b-a},"numeric-pre":function(a){return"-"==a||""===a?0:1*a},"numeric-asc":function(a,b){return a-b},"numeric-desc":function(a,b){return b-a}}),$.extend(DataTable.ext.aTypes,[function(a){if("number"==typeof a)return"numeric";if("string"!=typeof a)return null;var b,c="0123456789-",d="0123456789.",e=!1;if(b=a.charAt(0),-1==c.indexOf(b))return null;for(var f=1;f<a.length;f++){if(b=a.charAt(f),-1==d.indexOf(b))return null;if("."==b){if(e)return null;e=!0}}return"numeric"},function(a){var b=Date.parse(a);return null!==b&&!isNaN(b)||"string"==typeof a&&0===a.length?"date":null},function(a){return"string"==typeof a&&-1!=a.indexOf("<")&&-1!=a.indexOf(">")?"html":null}]),$.fn.DataTable=DataTable,$.fn.dataTable=DataTable,$.fn.dataTableSettings=DataTable.settings,$.fn.dataTableExt=DataTable.ext})}(window,document)}.call(global,module,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js":98}],97:[function(a,b){(function(c){$=c.$=a("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js"),a("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery.tablesorter.min.js"),__browserify_shim_require__=a,function(){!function(a){"use strict";function b(a,b){b=b||{},this.$elem=a,this.$parent=this.$elem.parent(),this.$scrollParent=b.scrollParent?this.$elem.closest(b.scrollParent):this.$parent,this.$thead=this.$elem.find("thead"),this.$theadClone=this.$elem.find("thead").clone(),this.$thead.after(this.$theadClone),this.$theadCloneCells=this.$theadClone.find("tr > th"),this.$theadCloneCells.length&&(this.applyStyles(),this.initCellsWidth(),this.initEvents())}a.fn.fixTableHeader=function(c){return this.each(function(d,e){return new b(a(e),c)}),this},b.prototype.initCellsWidth=function(){{var b=this;parseInt(this.$theadCloneCells.eq(0).css("padding-left"),10)||0}this.$thead.find("tr > th").each(function(c,d){a(d).width(b.$theadCloneCells.eq(c).width())})},b.prototype.applyStyles=function(){this.borderTopWidth=parseInt(this.$elem.css("border-top-width"),10)||0,this.minTop=-this.borderTopWidth,this.$elem.css({position:"relative"}),this.$thead.css({position:"absolute","z-index":"1",top:this.minTop+"px"})},b.prototype.initEvents=function(){var b=this;this.$scrollParent.on("scroll.fixTableHeader",function(){b.onScroll()}),a(window).on("resize.fixTableHeader",function(){b.initCellsWidth(),b.onScroll()}),this.$elem.on("resize.fixTableHeader",function(){b.initCellsWidth()})},b.prototype.onScroll=function(){var a;this.maxTop=this.$elem.innerHeight()-this.$theadClone.outerHeight(),this.tablePositionTop=this.$scrollParent.scrollTop()+this.$elem.offset().top-this.$scrollParent.offset().top,a=this.$scrollParent.scrollTop()-this.tablePositionTop-this.borderTopWidth||this.minTop,this.$thead.css(a>this.maxTop||a<this.minTop?{position:"absolute",top:this.minTop+"px"}:{position:"fixed",top:this.$scrollParent.offset().top+"px"})}}(jQuery)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js":98,"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery.tablesorter.min.js":101}],98:[function(a,b){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(b,c){"object"==typeof a&&"object"==typeof a.exports?a.exports=b.document?c(b,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return c(a)}:c(b)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,c=bb.type(a);return"function"===c||bb.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function e(a,b,c){if(bb.isFunction(b))return bb.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return bb.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ib.test(b))return bb.filter(b,a,c);b=bb.filter(b,a)}return bb.grep(a,function(a){return V.call(b,a)>=0!==c})}function f(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function g(a){var b=pb[a]={};return bb.each(a.match(ob)||[],function(a,c){b[c]=!0}),b}function h(){_.removeEventListener("DOMContentLoaded",h,!1),a.removeEventListener("load",h,!1),bb.ready()}function i(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=bb.expando+Math.random()}function j(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(vb,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:ub.test(c)?bb.parseJSON(c):c}catch(e){}tb.set(a,b,c)}else c=void 0;return c}function k(){return!0}function l(){return!1}function m(){try{return _.activeElement}catch(a){}}function n(a,b){return bb.nodeName(a,"table")&&bb.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function o(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function p(a){var b=Lb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function q(a,b){for(var c=0,d=a.length;d>c;c++)sb.set(a[c],"globalEval",!b||sb.get(b[c],"globalEval"))}function r(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(sb.hasData(a)&&(f=sb.access(a),g=sb.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)bb.event.add(b,e,j[e][c])}tb.hasData(a)&&(h=tb.access(a),i=bb.extend({},h),tb.set(b,i))}}function s(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&bb.nodeName(a,b)?bb.merge([a],c):c}function t(a,b){var c=b.nodeName.toLowerCase();"input"===c&&zb.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function u(b,c){var d=bb(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:bb.css(d[0],"display");return d.detach(),e}function v(a){var b=_,c=Pb[a];return c||(c=u(a,b),"none"!==c&&c||(Ob=(Ob||bb("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Ob[0].contentDocument,b.write(),b.close(),c=u(a,b),Ob.detach()),Pb[a]=c),c}function w(a,b,c){var d,e,f,g,h=a.style;return c=c||Sb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||bb.contains(a.ownerDocument,a)||(g=bb.style(a,b)),Rb.test(g)&&Qb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function x(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function y(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Yb.length;e--;)if(b=Yb[e]+c,b in a)return b;return d}function z(a,b,c){var d=Ub.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function A(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=bb.css(a,c+xb[f],!0,e)),d?("content"===c&&(g-=bb.css(a,"padding"+xb[f],!0,e)),"margin"!==c&&(g-=bb.css(a,"border"+xb[f]+"Width",!0,e))):(g+=bb.css(a,"padding"+xb[f],!0,e),"padding"!==c&&(g+=bb.css(a,"border"+xb[f]+"Width",!0,e)));return g}function B(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Sb(a),g="border-box"===bb.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=w(a,b,f),(0>e||null==e)&&(e=a.style[b]),Rb.test(e))return e;d=g&&($.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+A(a,b,c||(g?"border":"content"),d,f)+"px"}function C(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=sb.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&yb(d)&&(f[g]=sb.access(d,"olddisplay",v(d.nodeName)))):f[g]||(e=yb(d),(c&&"none"!==c||!e)&&sb.set(d,"olddisplay",e?c:bb.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function D(a,b,c,d,e){return new D.prototype.init(a,b,c,d,e)}function E(){return setTimeout(function(){Zb=void 0}),Zb=bb.now()}function F(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=xb[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function G(a,b,c){for(var d,e=(dc[b]||[]).concat(dc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function H(a,b,c){var d,e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&yb(a),o=sb.get(a,"fxshow");c.queue||(h=bb._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,k.always(function(){k.always(function(){h.unqueued--,bb.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],j=bb.css(a,"display"),"none"===j&&(j=v(a.nodeName)),"inline"===j&&"none"===bb.css(a,"float")&&(m.display="inline-block")),c.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],_b.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(n?"hide":"show")){if("show"!==e||!o||void 0===o[d])continue;n=!0}l[d]=o&&o[d]||bb.style(a,d)}if(!bb.isEmptyObject(l)){o?"hidden"in o&&(n=o.hidden):o=sb.access(a,"fxshow",{}),f&&(o.hidden=!n),n?bb(a).show():k.done(function(){bb(a).hide()}),k.done(function(){var b;sb.remove(a,"fxshow");for(b in l)bb.style(a,b,l[b])});for(d in l)g=G(n?o[d]:0,d,k),d in o||(o[d]=g.start,n&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function I(a,b){var c,d,e,f,g;for(c in a)if(d=bb.camelCase(c),e=b[d],f=a[c],bb.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=bb.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function J(a,b,c){var d,e,f=0,g=cc.length,h=bb.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Zb||E(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:bb.extend({},b),opts:bb.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Zb||E(),duration:c.duration,tweens:[],createTween:function(b,c){var d=bb.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(I(k,j.opts.specialEasing);g>f;f++)if(d=cc[f].call(j,a,k,j.opts))return d;return bb.map(k,G,j),bb.isFunction(j.opts.start)&&j.opts.start.call(a,j),bb.fx.timer(bb.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function K(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ob)||[];if(bb.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function L(a,b,c,d){function e(h){var i;return f[h]=!0,bb.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)
}),i}var f={},g=a===wc;return e(b.dataTypes[0])||!f["*"]&&e("*")}function M(a,b){var c,d,e=bb.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&bb.extend(!0,a,d),a}function N(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function O(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function P(a,b,c,d){var e;if(bb.isArray(b))bb.each(b,function(b,e){c||Ac.test(a)?d(a,e):P(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==bb.type(b))d(a,b);else for(e in b)P(a+"["+e+"]",b[e],c,d)}function Q(a){return bb.isWindow(a)?a:9===a.nodeType&&a.defaultView}var R=[],S=R.slice,T=R.concat,U=R.push,V=R.indexOf,W={},X=W.toString,Y=W.hasOwnProperty,Z="".trim,$={},_=a.document,ab="2.1.0",bb=function(a,b){return new bb.fn.init(a,b)},cb=/^-ms-/,db=/-([\da-z])/gi,eb=function(a,b){return b.toUpperCase()};bb.fn=bb.prototype={jquery:ab,constructor:bb,selector:"",length:0,toArray:function(){return S.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:S.call(this)},pushStack:function(a){var b=bb.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return bb.each(this,a,b)},map:function(a){return this.pushStack(bb.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(S.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:R.sort,splice:R.splice},bb.extend=bb.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||bb.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(bb.isPlainObject(d)||(e=bb.isArray(d)))?(e?(e=!1,f=c&&bb.isArray(c)?c:[]):f=c&&bb.isPlainObject(c)?c:{},g[b]=bb.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},bb.extend({expando:"jQuery"+(ab+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===bb.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isPlainObject:function(a){if("object"!==bb.type(a)||a.nodeType||bb.isWindow(a))return!1;try{if(a.constructor&&!Y.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?W[X.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=bb.trim(a),a&&(1===a.indexOf("use strict")?(b=_.createElement("script"),b.text=a,_.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(cb,"ms-").replace(db,eb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":Z.call(a)},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?bb.merge(d,"string"==typeof a?[a]:a):U.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:V.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return T.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),bb.isFunction(a)?(d=S.call(arguments,2),e=function(){return a.apply(b||this,d.concat(S.call(arguments)))},e.guid=a.guid=a.guid||bb.guid++,e):void 0},now:Date.now,support:$}),bb.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){W["[object "+b+"]"]=b.toLowerCase()});var fb=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,o,p,q;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=sb.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return _.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&x.getElementsByClassName&&b.getElementsByClassName)return _.apply(c,b.getElementsByClassName(g)),c}if(x.qsa&&(!J||!J.test(a))){if(o=l=N,p=b,q=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=m(a),(l=b.getAttribute("id"))?o=l.replace(ub,"\\$&"):b.setAttribute("id",o),o="[id='"+o+"'] ",i=j.length;i--;)j[i]=o+n(j[i]);p=tb.test(a)&&k(b.parentNode)||b,q=j.join(",")}if(q)try{return _.apply(c,p.querySelectorAll(q)),c}catch(r){}finally{l||b.removeAttribute("id")}}}return v(a.replace(ib,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>y.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)y.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&typeof a.getElementsByTagName!==V&&a}function l(){}function m(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){(!d||(e=jb.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=kb.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ib," ")}),h=h.slice(d.length));for(g in y.filter)!(e=ob[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)}function n(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||u(b||"*",h.nodeType?[h]:h,[]),r=!a||!d&&b?p:q(p,m,a,h,i),s=c?f||(d?a:o||e)?[]:g:r;if(c&&c(r,s,h,i),e)for(j=q(s,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?bb.call(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else s=q(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):_.apply(g,s)})}function s(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return bb.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=y.relative[a[h].type])k=[o(p(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!y.relative[a[d].type];d++);return r(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ib,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&n(a))}k.push(c)}return p(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&y.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Z.call(i));r=q(r)}_.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}function u(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function v(a,b,c,d){var e,f,g,h,i,j=m(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&x.getById&&9===b.nodeType&&I&&y.relative[f[1].type]){if(b=(y.find.ID(g.matches[0].replace(vb,wb),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=ob.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(vb,wb),tb.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return _.apply(c,d),c;break}}return B(a,j)(d,b,!I,c,tb.test(a)&&k(b.parentNode)||b),c}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V="undefined",W=1<<31,X={}.hasOwnProperty,Y=[],Z=Y.pop,$=Y.push,_=Y.push,ab=Y.slice,bb=Y.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},cb="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",db="[\\x20\\t\\r\\n\\f]",eb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",fb=eb.replace("w","w#"),gb="\\["+db+"*("+eb+")"+db+"*(?:([*^$|!~]?=)"+db+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+fb+")|)|)"+db+"*\\]",hb=":("+eb+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+gb.replace(3,8)+")*)|.*)\\)|)",ib=new RegExp("^"+db+"+|((?:^|[^\\\\])(?:\\\\.)*)"+db+"+$","g"),jb=new RegExp("^"+db+"*,"+db+"*"),kb=new RegExp("^"+db+"*([>+~]|"+db+")"+db+"*"),lb=new RegExp("="+db+"*([^\\]'\"]*?)"+db+"*\\]","g"),mb=new RegExp(hb),nb=new RegExp("^"+fb+"$"),ob={ID:new RegExp("^#("+eb+")"),CLASS:new RegExp("^\\.("+eb+")"),TAG:new RegExp("^("+eb.replace("w","w*")+")"),ATTR:new RegExp("^"+gb),PSEUDO:new RegExp("^"+hb),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+db+"*(even|odd|(([+-]|)(\\d*)n|)"+db+"*(?:([+-]|)"+db+"*(\\d+)|))"+db+"*\\)|)","i"),bool:new RegExp("^(?:"+cb+")$","i"),needsContext:new RegExp("^"+db+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+db+"*((?:-\\d)?\\d*)"+db+"*\\)|)(?=[^-]|$)","i")},pb=/^(?:input|select|textarea|button)$/i,qb=/^h\d$/i,rb=/^[^{]+\{\s*\[native \w/,sb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tb=/[+~]/,ub=/'|\\/g,vb=new RegExp("\\\\([\\da-f]{1,6}"+db+"?|("+db+")|.)","ig"),wb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{_.apply(Y=ab.call(O.childNodes),O.childNodes),Y[O.childNodes.length].nodeType}catch(xb){_={apply:Y.length?function(a,b){$.apply(a,ab.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}x=b.support={},A=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c=a?a.ownerDocument||a:O,d=c.defaultView;return c!==G&&9===c.nodeType&&c.documentElement?(G=c,H=c.documentElement,I=!A(c),d&&d!==d.top&&(d.addEventListener?d.addEventListener("unload",function(){F()},!1):d.attachEvent&&d.attachEvent("onunload",function(){F()})),x.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=e(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=rb.test(c.getElementsByClassName)&&e(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),x.getById=e(function(a){return H.appendChild(a).id=N,!c.getElementsByName||!c.getElementsByName(N).length}),x.getById?(y.find.ID=function(a,b){if(typeof b.getElementById!==V&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){return a.getAttribute("id")===b}}):(delete y.find.ID,y.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),y.find.TAG=x.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==V?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.CLASS=x.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==V&&I?b.getElementsByClassName(a):void 0},K=[],J=[],(x.qsa=rb.test(c.querySelectorAll))&&(e(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&J.push("[*^$]="+db+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+db+"*(?:value|"+cb+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),e(function(a){var b=c.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+db+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(x.matchesSelector=rb.test(L=H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){x.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",hb)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=rb.test(H.compareDocumentPosition),M=b||rb.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!x.sortDetached&&b.compareDocumentPosition(a)===d?a===c||a.ownerDocument===O&&M(O,a)?-1:b===c||b.ownerDocument===O&&M(O,b)?1:D?bb.call(D,a)-bb.call(D,b):0:4&d?-1:1)}:function(a,b){if(a===b)return E=!0,0;var d,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===c?-1:b===c?1:f?-1:h?1:D?bb.call(D,a)-bb.call(D,b):0;if(f===h)return g(a,b);for(d=a;d=d.parentNode;)i.unshift(d);for(d=b;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},c):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(lb,"='$1']"),!(!x.matchesSelector||!I||K&&K.test(c)||J&&J.test(c)))try{var d=L.call(a,c);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=y.attrHandle[b.toLowerCase()],d=c&&X.call(y.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:x.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!x.detectDuplicates,D=!x.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},z=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=z(b);return c},y=b.selectors={cacheLength:50,createPseudo:d,match:ob,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(vb,wb),a[3]=(a[4]||a[5]||"").replace(vb,wb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return ob.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&mb.test(c)&&(b=m(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(vb,wb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+db+")"+a+"("+db+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=y.pseudos[a]||y.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],y.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=bb.call(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ib,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:d(function(a){return nb.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(vb,wb).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return qb.test(a.nodeName)},input:function(a){return pb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},y.pseudos.nth=y.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=h(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=i(w);return l.prototype=y.filters=y.pseudos,y.setFilters=new l,B=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=m(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d))}return f},x.sortStable=N.split("").sort(U).join("")===N,x.detectDuplicates=!!E,F(),x.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),x.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(cb,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);bb.find=fb,bb.expr=fb.selectors,bb.expr[":"]=bb.expr.pseudos,bb.unique=fb.uniqueSort,bb.text=fb.getText,bb.isXMLDoc=fb.isXML,bb.contains=fb.contains;var gb=bb.expr.match.needsContext,hb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ib=/^.[^:#\[\.,]*$/;bb.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?bb.find.matchesSelector(d,a)?[d]:[]:bb.find.matches(a,bb.grep(b,function(a){return 1===a.nodeType}))},bb.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(bb(a).filter(function(){for(b=0;c>b;b++)if(bb.contains(e[b],this))return!0}));for(b=0;c>b;b++)bb.find(a,e[b],d);return d=this.pushStack(c>1?bb.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(e(this,a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"==typeof a&&gb.test(a)?bb(a):a||[],!1).length}});var jb,kb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,lb=bb.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:kb.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||jb).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof bb?b[0]:b,bb.merge(this,bb.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:_,!0)),hb.test(c[1])&&bb.isPlainObject(b))for(c in b)bb.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=_.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=_,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):bb.isFunction(a)?"undefined"!=typeof jb.ready?jb.ready(a):a(bb):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),bb.makeArray(a,this))};lb.prototype=bb.fn,jb=bb(_);var mb=/^(?:parents|prev(?:Until|All))/,nb={children:!0,contents:!0,next:!0,prev:!0};bb.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&bb(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),bb.fn.extend({has:function(a){var b=bb(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(bb.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=gb.test(a)||"string"!=typeof a?bb(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&bb.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?bb.unique(f):f)},index:function(a){return a?"string"==typeof a?V.call(bb(a),this[0]):V.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(bb.unique(bb.merge(this.get(),bb(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),bb.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return bb.dir(a,"parentNode")},parentsUntil:function(a,b,c){return bb.dir(a,"parentNode",c)},next:function(a){return f(a,"nextSibling")},prev:function(a){return f(a,"previousSibling")},nextAll:function(a){return bb.dir(a,"nextSibling")},prevAll:function(a){return bb.dir(a,"previousSibling")},nextUntil:function(a,b,c){return bb.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return bb.dir(a,"previousSibling",c)},siblings:function(a){return bb.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return bb.sibling(a.firstChild)},contents:function(a){return a.contentDocument||bb.merge([],a.childNodes)}},function(a,b){bb.fn[a]=function(c,d){var e=bb.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=bb.filter(d,e)),this.length>1&&(nb[a]||bb.unique(e),mb.test(a)&&e.reverse()),this.pushStack(e)}});var ob=/\S+/g,pb={};bb.Callbacks=function(a){a="string"==typeof a?pb[a]||g(a):bb.extend({},a);var b,c,d,e,f,h,i=[],j=!a.once&&[],k=function(g){for(b=a.memory&&g,c=!0,h=e||0,e=0,f=i.length,d=!0;i&&f>h;h++)if(i[h].apply(g[0],g[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,i&&(j?j.length&&k(j.shift()):b?i=[]:l.disable())},l={add:function(){if(i){var c=i.length;!function g(b){bb.each(b,function(b,c){var d=bb.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=i.length:b&&(e=c,k(b))}return this},remove:function(){return i&&bb.each(arguments,function(a,b){for(var c;(c=bb.inArray(b,i,c))>-1;)i.splice(c,1),d&&(f>=c&&f--,h>=c&&h--)}),this},has:function(a){return a?bb.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],f=0,this},disable:function(){return i=j=b=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,b||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return!i||c&&!j||(b=b||[],b=[a,b.slice?b.slice():b],d?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},bb.extend({Deferred:function(a){var b=[["resolve","done",bb.Callbacks("once memory"),"resolved"],["reject","fail",bb.Callbacks("once memory"),"rejected"],["notify","progress",bb.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return bb.Deferred(function(c){bb.each(b,function(b,f){var g=bb.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&bb.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?bb.extend(a,d):d}},e={};return d.pipe=d.then,bb.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=S.call(arguments),g=f.length,h=1!==g||a&&bb.isFunction(a.promise)?g:0,i=1===h?a:bb.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?S.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&bb.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var qb;bb.fn.ready=function(a){return bb.ready.promise().done(a),this},bb.extend({isReady:!1,readyWait:1,holdReady:function(a){a?bb.readyWait++:bb.ready(!0)},ready:function(a){(a===!0?--bb.readyWait:bb.isReady)||(bb.isReady=!0,a!==!0&&--bb.readyWait>0||(qb.resolveWith(_,[bb]),bb.fn.trigger&&bb(_).trigger("ready").off("ready")))}}),bb.ready.promise=function(b){return qb||(qb=bb.Deferred(),"complete"===_.readyState?setTimeout(bb.ready):(_.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1))),qb.promise(b)},bb.ready.promise();var rb=bb.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===bb.type(c)){e=!0;for(h in c)bb.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,bb.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(bb(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};bb.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},i.uid=1,i.accepts=bb.acceptData,i.prototype={key:function(a){if(!i.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=i.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,bb.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(bb.isEmptyObject(f))bb.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,bb.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{bb.isArray(b)?d=b.concat(b.map(bb.camelCase)):(e=bb.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(ob)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!bb.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var sb=new i,tb=new i,ub=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,vb=/([A-Z])/g;bb.extend({hasData:function(a){return tb.hasData(a)||sb.hasData(a)},data:function(a,b,c){return tb.access(a,b,c)
},removeData:function(a,b){tb.remove(a,b)},_data:function(a,b,c){return sb.access(a,b,c)},_removeData:function(a,b){sb.remove(a,b)}}),bb.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=tb.get(f),1===f.nodeType&&!sb.get(f,"hasDataAttrs"))){for(c=g.length;c--;)d=g[c].name,0===d.indexOf("data-")&&(d=bb.camelCase(d.slice(5)),j(f,d,e[d]));sb.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){tb.set(this,a)}):rb(this,function(b){var c,d=bb.camelCase(a);if(f&&void 0===b){if(c=tb.get(f,a),void 0!==c)return c;if(c=tb.get(f,d),void 0!==c)return c;if(c=j(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=tb.get(this,d);tb.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&tb.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){tb.remove(this,a)})}}),bb.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=sb.get(a,b),c&&(!d||bb.isArray(c)?d=sb.access(a,b,bb.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=bb.queue(a,b),d=c.length,e=c.shift(),f=bb._queueHooks(a,b),g=function(){bb.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return sb.get(a,c)||sb.access(a,c,{empty:bb.Callbacks("once memory").add(function(){sb.remove(a,[b+"queue",c])})})}}),bb.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?bb.queue(this[0],a):void 0===b?this:this.each(function(){var c=bb.queue(this,a,b);bb._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&bb.dequeue(this,a)})},dequeue:function(a){return this.each(function(){bb.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=bb.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=sb.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var wb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xb=["Top","Right","Bottom","Left"],yb=function(a,b){return a=b||a,"none"===bb.css(a,"display")||!bb.contains(a.ownerDocument,a)},zb=/^(?:checkbox|radio)$/i;!function(){var a=_.createDocumentFragment(),b=a.appendChild(_.createElement("div"));b.innerHTML="<input type='radio' checked='checked' name='t'/>",$.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",$.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Ab="undefined";$.focusinBubbles="onfocusin"in a;var Bb=/^key/,Cb=/^(?:mouse|contextmenu)|click/,Db=/^(?:focusinfocus|focusoutblur)$/,Eb=/^([^.]*)(?:\.(.+)|)$/;bb.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=sb.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=bb.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof bb!==Ab&&bb.event.triggered!==b.type?bb.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(ob)||[""],j=b.length;j--;)h=Eb.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=bb.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=bb.event.special[n]||{},k=bb.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&bb.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),bb.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=sb.hasData(a)&&sb.get(a);if(q&&(i=q.events)){for(b=(b||"").match(ob)||[""],j=b.length;j--;)if(h=Eb.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=bb.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||bb.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)bb.event.remove(a,n+b[j],c,d,!0);bb.isEmptyObject(i)&&(delete q.handle,sb.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||_],n=Y.call(b,"type")?b.type:b,o=Y.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||_,3!==d.nodeType&&8!==d.nodeType&&!Db.test(n+bb.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[bb.expando]?b:new bb.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:bb.makeArray(c,[b]),l=bb.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!bb.isWindow(d)){for(i=l.delegateType||n,Db.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||_)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(sb.get(g,"events")||{})[b.type]&&sb.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&bb.acceptData(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!bb.acceptData(d)||j&&bb.isFunction(d[n])&&!bb.isWindow(d)&&(h=d[j],h&&(d[j]=null),bb.event.triggered=n,d[n](),bb.event.triggered=void 0,h&&(d[j]=h)),b.result}},dispatch:function(a){a=bb.event.fix(a);var b,c,d,e,f,g=[],h=S.call(arguments),i=(sb.get(this,"events")||{})[a.type]||[],j=bb.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=bb.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(f.namespace))&&(a.handleObj=f,a.data=f.data,d=((bb.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?bb(e,this).index(i)>=0:bb.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||_,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[bb.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Cb.test(e)?this.mouseHooks:Bb.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new bb.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=_),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&bb.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return bb.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=bb.extend(new bb.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?bb.event.trigger(e,null,b):bb.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},bb.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},bb.Event=function(a,b){return this instanceof bb.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.getPreventDefault&&a.getPreventDefault()?k:l):this.type=a,b&&bb.extend(this,b),this.timeStamp=a&&a.timeStamp||bb.now(),void(this[bb.expando]=!0)):new bb.Event(a,b)},bb.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=k,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=k,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=k,this.stopPropagation()}},bb.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){bb.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!bb.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),$.focusinBubbles||bb.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){bb.event.simulate(b,a.target,bb.event.fix(a),!0)};bb.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=sb.access(d,b);e||d.addEventListener(a,c,!0),sb.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=sb.access(d,b)-1;e?sb.access(d,b,e):(d.removeEventListener(a,c,!0),sb.remove(d,b))}}}),bb.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=l;else if(!d)return this;return 1===e&&(f=d,d=function(a){return bb().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=bb.guid++)),this.each(function(){bb.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,bb(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=l),this.each(function(){bb.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){bb.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?bb.event.trigger(a,b,c,!0):void 0}});var Fb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Gb=/<([\w:]+)/,Hb=/<|&#?\w+;/,Ib=/<(?:script|style|link)/i,Jb=/checked\s*(?:[^=]|=\s*.checked.)/i,Kb=/^$|\/(?:java|ecma)script/i,Lb=/^true\/(.*)/,Mb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Nb={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Nb.optgroup=Nb.option,Nb.tbody=Nb.tfoot=Nb.colgroup=Nb.caption=Nb.thead,Nb.th=Nb.td,bb.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=bb.contains(a.ownerDocument,a);if(!($.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||bb.isXMLDoc(a)))for(g=s(h),f=s(a),d=0,e=f.length;e>d;d++)t(f[d],g[d]);if(b)if(c)for(f=f||s(a),g=g||s(h),d=0,e=f.length;e>d;d++)r(f[d],g[d]);else r(a,h);return g=s(h,"script"),g.length>0&&q(g,!i&&s(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===bb.type(e))bb.merge(l,e.nodeType?[e]:e);else if(Hb.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(Gb.exec(e)||["",""])[1].toLowerCase(),h=Nb[g]||Nb._default,f.innerHTML=h[1]+e.replace(Fb,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;bb.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===bb.inArray(e,d))&&(i=bb.contains(e.ownerDocument,e),f=s(k.appendChild(e),"script"),i&&q(f),c))for(j=0;e=f[j++];)Kb.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f,g,h=bb.event.special,i=0;void 0!==(c=a[i]);i++){if(bb.acceptData(c)&&(f=c[sb.expando],f&&(b=sb.cache[f]))){if(d=Object.keys(b.events||{}),d.length)for(g=0;void 0!==(e=d[g]);g++)h[e]?bb.event.remove(c,e):bb.removeEvent(c,e,b.handle);sb.cache[f]&&delete sb.cache[f]}delete tb.cache[c[tb.expando]]}}}),bb.fn.extend({text:function(a){return rb(this,function(a){return void 0===a?bb.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=n(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=n(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?bb.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||bb.cleanData(s(c)),c.parentNode&&(b&&bb.contains(c.ownerDocument,c)&&q(s(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(bb.cleanData(s(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return bb.clone(this,a,b)})},html:function(a){return rb(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Ib.test(a)&&!Nb[(Gb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Fb,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(bb.cleanData(s(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,bb.cleanData(s(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=T.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=bb.isFunction(m);if(n||j>1&&"string"==typeof m&&!$.checkClone&&Jb.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(c=bb.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(e=bb.map(s(c,"script"),o),f=e.length;j>i;i++)g=c,i!==l&&(g=bb.clone(g,!0,!0),f&&bb.merge(e,s(g,"script"))),b.call(this[i],g,i);if(f)for(h=e[e.length-1].ownerDocument,bb.map(e,p),i=0;f>i;i++)g=e[i],Kb.test(g.type||"")&&!sb.access(g,"globalEval")&&bb.contains(h,g)&&(g.src?bb._evalUrl&&bb._evalUrl(g.src):bb.globalEval(g.textContent.replace(Mb,"")))}return this}}),bb.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){bb.fn[a]=function(a){for(var c,d=[],e=bb(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),bb(e[g])[b](c),U.apply(d,c.get());return this.pushStack(d)}});var Ob,Pb={},Qb=/^margin/,Rb=new RegExp("^("+wb+")(?!px)[a-z%]+$","i"),Sb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};!function(){function b(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",f.appendChild(g);var b=a.getComputedStyle(h,null);c="1%"!==b.top,d="4px"===b.width,f.removeChild(g)}var c,d,e="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",f=_.documentElement,g=_.createElement("div"),h=_.createElement("div");h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",$.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(h),a.getComputedStyle&&bb.extend($,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},reliableMarginRight:function(){var b,c=h.appendChild(_.createElement("div"));return c.style.cssText=h.style.cssText=e,c.style.marginRight=c.style.width="0",h.style.width="1px",f.appendChild(g),b=!parseFloat(a.getComputedStyle(c,null).marginRight),f.removeChild(g),h.innerHTML="",b}})}(),bb.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Tb=/^(none|table(?!-c[ea]).+)/,Ub=new RegExp("^("+wb+")(.*)$","i"),Vb=new RegExp("^([+-])=("+wb+")","i"),Wb={position:"absolute",visibility:"hidden",display:"block"},Xb={letterSpacing:0,fontWeight:400},Yb=["Webkit","O","Moz","ms"];bb.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=w(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=bb.camelCase(b),i=a.style;return b=bb.cssProps[h]||(bb.cssProps[h]=y(i,h)),g=bb.cssHooks[b]||bb.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Vb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(bb.css(a,b)),f="number"),void(null!=c&&c===c&&("number"!==f||bb.cssNumber[h]||(c+="px"),$.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]="",i[b]=c))))}},css:function(a,b,c,d){var e,f,g,h=bb.camelCase(b);return b=bb.cssProps[h]||(bb.cssProps[h]=y(a.style,h)),g=bb.cssHooks[b]||bb.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=w(a,b,d)),"normal"===e&&b in Xb&&(e=Xb[b]),""===c||c?(f=parseFloat(e),c===!0||bb.isNumeric(f)?f||0:e):e}}),bb.each(["height","width"],function(a,b){bb.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Tb.test(bb.css(a,"display"))?bb.swap(a,Wb,function(){return B(a,b,d)}):B(a,b,d):void 0},set:function(a,c,d){var e=d&&Sb(a);return z(a,c,d?A(a,b,d,"border-box"===bb.css(a,"boxSizing",!1,e),e):0)}}}),bb.cssHooks.marginRight=x($.reliableMarginRight,function(a,b){return b?bb.swap(a,{display:"inline-block"},w,[a,"marginRight"]):void 0}),bb.each({margin:"",padding:"",border:"Width"},function(a,b){bb.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xb[d]+b]=f[d]||f[d-2]||f[0];return e}},Qb.test(a)||(bb.cssHooks[a+b].set=z)}),bb.fn.extend({css:function(a,b){return rb(this,function(a,b,c){var d,e,f={},g=0;if(bb.isArray(b)){for(d=Sb(a),e=b.length;e>g;g++)f[b[g]]=bb.css(a,b[g],!1,d);return f}return void 0!==c?bb.style(a,b,c):bb.css(a,b)},a,b,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){yb(this)?bb(this).show():bb(this).hide()})}}),bb.Tween=D,D.prototype={constructor:D,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(bb.cssNumber[c]?"":"px")},cur:function(){var a=D.propHooks[this.prop];return a&&a.get?a.get(this):D.propHooks._default.get(this)},run:function(a){var b,c=D.propHooks[this.prop];return this.pos=b=this.options.duration?bb.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=bb.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){bb.fx.step[a.prop]?bb.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[bb.cssProps[a.prop]]||bb.cssHooks[a.prop])?bb.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},bb.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},bb.fx=D.prototype.init,bb.fx.step={};var Zb,$b,_b=/^(?:toggle|show|hide)$/,ac=new RegExp("^(?:([+-])=|)("+wb+")([a-z%]*)$","i"),bc=/queueHooks$/,cc=[H],dc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=ac.exec(b),f=e&&e[3]||(bb.cssNumber[a]?"":"px"),g=(bb.cssNumber[a]||"px"!==f&&+d)&&ac.exec(bb.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,bb.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};bb.Animation=bb.extend(J,{tweener:function(a,b){bb.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],dc[c]=dc[c]||[],dc[c].unshift(b)},prefilter:function(a,b){b?cc.unshift(a):cc.push(a)}}),bb.speed=function(a,b,c){var d=a&&"object"==typeof a?bb.extend({},a):{complete:c||!c&&b||bb.isFunction(a)&&a,duration:a,easing:c&&b||b&&!bb.isFunction(b)&&b};return d.duration=bb.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in bb.fx.speeds?bb.fx.speeds[d.duration]:bb.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){bb.isFunction(d.old)&&d.old.call(this),d.queue&&bb.dequeue(this,d.queue)},d},bb.fn.extend({fadeTo:function(a,b,c,d){return this.filter(yb).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=bb.isEmptyObject(a),f=bb.speed(b,c,d),g=function(){var b=J(this,bb.extend({},a),f);(e||sb.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=bb.timers,g=sb.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&bc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&bb.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=sb.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=bb.timers,g=d?d.length:0;for(c.finish=!0,bb.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),bb.each(["toggle","show","hide"],function(a,b){var c=bb.fn[b];bb.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(F(b,!0),a,d,e)}}),bb.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){bb.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),bb.timers=[],bb.fx.tick=function(){var a,b=0,c=bb.timers;for(Zb=bb.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||bb.fx.stop(),Zb=void 0},bb.fx.timer=function(a){bb.timers.push(a),a()?bb.fx.start():bb.timers.pop()},bb.fx.interval=13,bb.fx.start=function(){$b||($b=setInterval(bb.fx.tick,bb.fx.interval))},bb.fx.stop=function(){clearInterval($b),$b=null},bb.fx.speeds={slow:600,fast:200,_default:400},bb.fn.delay=function(a,b){return a=bb.fx?bb.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=_.createElement("input"),b=_.createElement("select"),c=b.appendChild(_.createElement("option"));a.type="checkbox",$.checkOn=""!==a.value,$.optSelected=c.selected,b.disabled=!0,$.optDisabled=!c.disabled,a=_.createElement("input"),a.value="t",a.type="radio",$.radioValue="t"===a.value}();var ec,fc,gc=bb.expr.attrHandle;bb.fn.extend({attr:function(a,b){return rb(this,bb.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){bb.removeAttr(this,a)})}}),bb.extend({attr:function(a,b,c){var d,e,f=a.nodeType;return a&&3!==f&&8!==f&&2!==f?typeof a.getAttribute===Ab?bb.prop(a,b,c):(1===f&&bb.isXMLDoc(a)||(b=b.toLowerCase(),d=bb.attrHooks[b]||(bb.expr.match.bool.test(b)?fc:ec)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=bb.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void bb.removeAttr(a,b)):void 0},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ob);if(f&&1===a.nodeType)for(;c=f[e++];)d=bb.propFix[c]||c,bb.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!$.radioValue&&"radio"===b&&bb.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),fc={set:function(a,b,c){return b===!1?bb.removeAttr(a,c):a.setAttribute(c,c),c}},bb.each(bb.expr.match.bool.source.match(/\w+/g),function(a,b){var c=gc[b]||bb.find.attr;gc[b]=function(a,b,d){var e,f;return d||(f=gc[b],gc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,gc[b]=f),e}});var hc=/^(?:input|select|textarea|button)$/i;bb.fn.extend({prop:function(a,b){return rb(this,bb.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[bb.propFix[a]||a]})}}),bb.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;return a&&3!==g&&8!==g&&2!==g?(f=1!==g||!bb.isXMLDoc(a),f&&(b=bb.propFix[b]||b,e=bb.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]):void 0},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||hc.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),$.optSelected||(bb.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),bb.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){bb.propFix[this.toLowerCase()]=this});var ic=/[\t\r\n\f]/g;bb.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(bb.isFunction(a))return this.each(function(b){bb(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(ob)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ic," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=bb.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(bb.isFunction(a))return this.each(function(b){bb(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(ob)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ic," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?bb.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(bb.isFunction(a)?function(c){bb(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=bb(this),f=a.match(ob)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===Ab||"boolean"===c)&&(this.className&&sb.set(this,"__className__",this.className),this.className=this.className||a===!1?"":sb.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ic," ").indexOf(b)>=0)return!0;return!1}});var jc=/\r/g;bb.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=bb.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,bb(this).val()):a,null==e?e="":"number"==typeof e?e+="":bb.isArray(e)&&(e=bb.map(e,function(a){return null==a?"":a+""})),b=bb.valHooks[this.type]||bb.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=bb.valHooks[e.type]||bb.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(jc,""):null==c?"":c)):void 0}}),bb.extend({valHooks:{select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||($.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&bb.nodeName(c.parentNode,"optgroup"))){if(b=bb(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=bb.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=bb.inArray(bb(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),bb.each(["radio","checkbox"],function(){bb.valHooks[this]={set:function(a,b){return bb.isArray(b)?a.checked=bb.inArray(bb(a).val(),b)>=0:void 0}},$.checkOn||(bb.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),bb.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){bb.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),bb.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var kc=bb.now(),lc=/\?/;bb.parseJSON=function(a){return JSON.parse(a+"")},bb.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&bb.error("Invalid XML: "+a),b};var mc,nc,oc=/#.*$/,pc=/([?&])_=[^&]*/,qc=/^(.*?):[ \t]*([^\r\n]*)$/gm,rc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,sc=/^(?:GET|HEAD)$/,tc=/^\/\//,uc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,vc={},wc={},xc="*/".concat("*");try{nc=location.href}catch(yc){nc=_.createElement("a"),nc.href="",nc=nc.href}mc=uc.exec(nc.toLowerCase())||[],bb.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:nc,type:"GET",isLocal:rc.test(mc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":bb.parseJSON,"text xml":bb.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?M(M(a,bb.ajaxSettings),b):M(bb.ajaxSettings,a)
},ajaxPrefilter:K(vc),ajaxTransport:K(wc),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),d=void 0,f=g||"",v.readyState=a>0?4:0,i=a>=200&&300>a||304===a,c&&(s=N(l,v,c)),s=O(l,s,v,i),i?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(bb.lastModified[e]=u),u=v.getResponseHeader("etag"),u&&(bb.etag[e]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--bb.active||bb.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=bb.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?bb(m):bb.event,o=bb.Deferred(),p=bb.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=qc.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||nc)+"").replace(oc,"").replace(tc,mc[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=bb.trim(l.dataType||"*").toLowerCase().match(ob)||[""],null==l.crossDomain&&(i=uc.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===mc[1]&&i[2]===mc[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(mc[3]||("http:"===mc[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=bb.param(l.data,l.traditional)),L(vc,l,b,v),2===t)return v;j=l.global,j&&0===bb.active++&&bb.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!sc.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(lc.test(e)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=pc.test(e)?e.replace(pc,"$1_="+kc++):e+(lc.test(e)?"&":"?")+"_="+kc++)),l.ifModified&&(bb.lastModified[e]&&v.setRequestHeader("If-Modified-Since",bb.lastModified[e]),bb.etag[e]&&v.setRequestHeader("If-None-Match",bb.etag[e])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+xc+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);if(d=L(wc,l,b,v)){v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return bb.get(a,b,c,"json")},getScript:function(a,b){return bb.get(a,void 0,b,"script")}}),bb.each(["get","post"],function(a,b){bb[b]=function(a,c,d,e){return bb.isFunction(c)&&(e=e||d,d=c,c=void 0),bb.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),bb.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){bb.fn[b]=function(a){return this.on(b,a)}}),bb._evalUrl=function(a){return bb.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},bb.fn.extend({wrapAll:function(a){var b;return bb.isFunction(a)?this.each(function(b){bb(this).wrapAll(a.call(this,b))}):(this[0]&&(b=bb(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(bb.isFunction(a)?function(b){bb(this).wrapInner(a.call(this,b))}:function(){var b=bb(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=bb.isFunction(a);return this.each(function(c){bb(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){bb.nodeName(this,"body")||bb(this).replaceWith(this.childNodes)}).end()}}),bb.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},bb.expr.filters.visible=function(a){return!bb.expr.filters.hidden(a)};var zc=/%20/g,Ac=/\[\]$/,Bc=/\r?\n/g,Cc=/^(?:submit|button|image|reset|file)$/i,Dc=/^(?:input|select|textarea|keygen)/i;bb.param=function(a,b){var c,d=[],e=function(a,b){b=bb.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=bb.ajaxSettings&&bb.ajaxSettings.traditional),bb.isArray(a)||a.jquery&&!bb.isPlainObject(a))bb.each(a,function(){e(this.name,this.value)});else for(c in a)P(c,a[c],b,e);return d.join("&").replace(zc,"+")},bb.fn.extend({serialize:function(){return bb.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=bb.prop(this,"elements");return a?bb.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!bb(this).is(":disabled")&&Dc.test(this.nodeName)&&!Cc.test(a)&&(this.checked||!zb.test(a))}).map(function(a,b){var c=bb(this).val();return null==c?null:bb.isArray(c)?bb.map(c,function(a){return{name:b.name,value:a.replace(Bc,"\r\n")}}):{name:b.name,value:c.replace(Bc,"\r\n")}}).get()}}),bb.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Ec=0,Fc={},Gc={0:200,1223:204},Hc=bb.ajaxSettings.xhr();a.ActiveXObject&&bb(a).on("unload",function(){for(var a in Fc)Fc[a]()}),$.cors=!!Hc&&"withCredentials"in Hc,$.ajax=Hc=!!Hc,bb.ajaxTransport(function(a){var b;return $.cors||Hc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Ec;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Fc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Gc[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Fc[g]=b("abort"),f.send(a.hasContent&&a.data||null)},abort:function(){b&&b()}}:void 0}),bb.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return bb.globalEval(a),a}}}),bb.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),bb.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=bb("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),_.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Ic=[],Jc=/(=)\?(?=&|$)|\?\?/;bb.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ic.pop()||bb.expando+"_"+kc++;return this[a]=!0,a}}),bb.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Jc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=bb.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Jc,"$1"+e):b.jsonp!==!1&&(b.url+=(lc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||bb.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Ic.push(e)),g&&bb.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),bb.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||_;var d=hb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=bb.buildFragment([a],b,e),e&&e.length&&bb(e).remove(),bb.merge([],d.childNodes))};var Kc=bb.fn.load;bb.fn.load=function(a,b,c){if("string"!=typeof a&&Kc)return Kc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h),a=a.slice(0,h)),bb.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&bb.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?bb("<div>").append(bb.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},bb.expr.filters.animated=function(a){return bb.grep(bb.timers,function(b){return a===b.elem}).length};var Lc=a.document.documentElement;bb.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=bb.css(a,"position"),l=bb(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=bb.css(a,"top"),i=bb.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),bb.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},bb.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){bb.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;return f?(b=f.documentElement,bb.contains(b,d)?(typeof d.getBoundingClientRect!==Ab&&(e=d.getBoundingClientRect()),c=Q(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e):void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===bb.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),bb.nodeName(a[0],"html")||(d=a.offset()),d.top+=bb.css(a[0],"borderTopWidth",!0),d.left+=bb.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-bb.css(c,"marginTop",!0),left:b.left-d.left-bb.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Lc;a&&!bb.nodeName(a,"html")&&"static"===bb.css(a,"position");)a=a.offsetParent;return a||Lc})}}),bb.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;bb.fn[b]=function(e){return rb(this,function(b,e,f){var g=Q(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),bb.each(["top","left"],function(a,b){bb.cssHooks[b]=x($.pixelPosition,function(a,c){return c?(c=w(a,b),Rb.test(c)?bb(a).position()[b]+"px":c):void 0})}),bb.each({Height:"height",Width:"width"},function(a,b){bb.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){bb.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return rb(this,function(b,c,d){var e;return bb.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?bb.css(b,c,g):bb.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),bb.fn.size=function(){return this.length},bb.fn.andSelf=bb.fn.addBack,"function"==typeof d&&d.amd&&d("jquery",[],function(){return bb});var Mc=a.jQuery,Nc=a.$;return bb.noConflict=function(b){return a.$===bb&&(a.$=Nc),b&&a.jQuery===bb&&(a.jQuery=Mc),bb},typeof b===Ab&&(a.jQuery=a.$=bb),bb}),e("undefined"!=typeof $?$:window.$)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],99:[function(a,b){(function(c){jQuery=c.jQuery=a("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=a,function(){!function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,this.each(h?function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}:function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){function c(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=j.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=j.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",a=l.exec(d[0]),c=l.exec(d[1]),x[this]=[a?a[0]:0,c?c[0]:0],b[this]=[m.exec(d[0])[0],m.exec(d[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&n>h(c+d)&&(i.horizontal="center"),m>p&&p>h(e+f)&&(i.vertical="middle"),i.important=g(h(c),h(d))>g(h(e),h(f))?"horizontal":"vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||h(k)>c)&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||l>h(d))&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||h(k)>d)&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||l>h(c))&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()
},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;return e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=b.pageX,j=b.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,h-p>r||q>i+p||j-p>t||s>k+p||!a.contains(n.snapElements[l].item.ownerDocument,n.snapElements[l].item)?(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1):("inner"!==o.snapMode&&(d=p>=Math.abs(j-t),e=p>=Math.abs(k-s),f=p>=Math.abs(h-r),g=p>=Math.abs(i-q),d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=p>=Math.abs(j-s),e=p>=Math.abs(k-t),f=p>=Math.abs(h-q),g=p>=Math.abs(i-r),d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=this.data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(c){a(this).css("zIndex",b+c)}),this.css("zIndex",b+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}a.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b=this.options,c=b.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=0,c=a.ui.ddmanager.droppables[this.options.scope];c.length>b;b++)c[b]===this&&c.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){"accept"===b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"ui-droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope===d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(a,c,d){if(!c.offset)return!1;var e,f,g=(a.positionAbs||a.position.absolute).left,h=g+a.helperProportions.width,i=(a.positionAbs||a.position.absolute).top,j=i+a.helperProportions.height,k=c.offset.left,l=k+c.proportions.width,m=c.offset.top,n=m+c.proportions.height;switch(d){case"fit":return g>=k&&l>=h&&i>=m&&n>=j;case"intersect":return g+a.helperProportions.width/2>k&&l>h-a.helperProportions.width/2&&i+a.helperProportions.height/2>m&&n>j-a.helperProportions.height/2;case"pointer":return e=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,f=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,b(f,m,c.proportions.height)&&b(e,k,c.proportions.width);case"touch":return(i>=m&&n>=i||j>=m&&n>=j||m>i&&j>n)&&(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;f.length>d;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;h.length>e;e++)if(h[e]===f[d].element[0]){f[d].proportions.height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions={width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a.data(this,"ui-droppable").options.scope===e}),f.length&&(d=a.data(f[0],"ui-droppable"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){function b(a){return parseInt(a,10)||0}function c(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;b.length>c;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(c){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=b(this.helper.css("left")),e=b(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),g.maxWidth>d&&(g.maxWidth=d),g.maxHeight>f&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,d=this.axis,e=c(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=c(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=c(a.width)&&b.minWidth&&b.minWidth>a.width,h=c(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(d),l=/nw|ne|n/.test(d);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a
},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;this._proportionallyResizeElements.length>a;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;c.length>b;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(c=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=b(c.css("padding"+e))}),j.containerOffset=c.offset(),j.containerPosition=c.position(),j.containerSize={height:c.innerHeight()-d[3],width:c.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=g.parentData.left),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&m>c.maxWidth,p=c.maxHeight&&n>c.maxHeight,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(b.size.width=m,b.size.height=n,b.position.top=f.top-l,b.position.left=f.left-k)}})}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1;c&&c.element!==d.element[0]&&("touch"===e.tolerance?j=!(c.left>h||f>c.right||c.top>i||g>c.bottom):"fit"===e.tolerance&&(j=c.left>f&&h>c.right&&c.top>g&&i>c.bottom),j?(c.selected&&(c.$element.removeClass("ui-selected"),c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}function c(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||c(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var c="x"===this.options.axis||b(this.positionAbs.top+this.offset.click.top,a.top,a.height),d="y"===this.options.axis||b(this.positionAbs.left+this.offset.click.left,a.left,a.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"===g||"down"===f?2:1:f&&("down"===f?2:1):!1},_intersectsWithSides:function(a){var c=b(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),d=b(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===f&&d||"left"===f&&!d:e&&("down"===e&&c||"up"===e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c,d,e,f,g=[],h=[],i=this._connectWith();if(i&&b)for(c=i.length-1;c>=0;c--)for(e=a(i[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&h.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f]);for(h.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),c=h.length-1;c>=0;c--)h[c][0].each(function(){g.push(this)});return a(g)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(d){var e,f,g,h,i,j,k,l,m,n,o=null,p=null;for(e=this.containers.length-1;e>=0;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(o&&a.contains(this.containers[e].element[0],o.element[0]))continue;o=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",d,this._uiHash(this)),this.containers[e].containerCache.over=0);if(o)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(g=1e4,h=null,n=o.floating||c(this.currentItem),i=n?"left":"top",j=n?"width":"height",k=this.positionAbs[i]+this.offset.click[i],f=this.items.length-1;f>=0;f--)a.contains(this.containers[p].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!n||b(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(l=this.items[f].item.offset()[i],m=!1,Math.abs(l-k)>Math.abs(l+this.items[f][j]-k)&&(m=!0,l+=this.items[f][j]),g>Math.abs(l-k)&&(g=Math.abs(l-k),h=this.items[f],this.direction=m?"up":"down"));if(!h&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;h?this._rearrange(d,h,null,!0):this._rearrange(d,null,this.containers[p].element,!0),this._trigger("change",d,this._uiHash()),this.containers[p]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);
return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){this.reverting=!1;var c,d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(c in this._storedCSS)("auto"===this._storedCSS[c]||"static"===this._storedCSS[c])&&(this._storedCSS[c]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||d.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),c=this.containers.length-1;c>=0;c--)b||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),c=0;d.length>c;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(c=0;d.length>c;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}(jQuery),function(a){var b=0,c={},d={};c.height=c.paddingTop=c.paddingBottom=c.borderTopWidth=c.borderBottomWidth="hide",d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="show",a.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var b=this.options;this.prevShow=this.prevHide=a(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),b.collapsible||b.active!==!1&&null!=b.active||(b.active=0),this._processPanels(),0>b.active&&(b.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a(),content:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),a=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){return"active"===a?void this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||this.options.active!==!1||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),void("disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b)))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels(),b.active===!1&&b.collapsible===!0||!this.headers.length?(b.active=!1,this.active=a()):b.active===!1?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var c,d=this.options,e=d.heightStyle,f=this.element.parent(),g=this.accordionId="ui-accordion-"+(this.element.attr("id")||++b);this.active=this._findActive(d.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(b){var c=a(this),d=c.attr("id"),e=c.next(),f=e.attr("id");d||(d=g+"-header-"+b,c.attr("id",d)),f||(f=g+"-panel-"+b,e.attr("id",f)),c.attr("aria-controls",f),e.attr("aria-labelledby",d)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(d.event),"fill"===e?(c=f.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===e&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).css("height","").height())}).height(c))},_activate:function(b){var c=this._findActive(b)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,c),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e[0]===d[0],g=f&&c.collapsible,h=g?a():e.next(),i=d.next(),j={oldHeader:d,oldPanel:i,newHeader:g?a():e,newPanel:h};b.preventDefault(),f&&!c.collapsible||this._trigger("beforeActivate",b,j)===!1||(c.active=g?!1:this.headers.index(e),this.active=f?a():e,this._toggle(j),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),f||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=c,this.prevHide=d,this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b)),d.attr({"aria-expanded":"false","aria-hidden":"true"}),d.prev().attr("aria-selected","false"),c.length&&d.length?d.prev().attr("tabIndex",-1):c.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),c.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(a,b,e){var f,g,h,i=this,j=0,k=a.length&&(!b.length||a.index()<b.index()),l=this.options.animate||{},m=k&&l.down||l,n=function(){i._toggleComplete(e)};return"number"==typeof m&&(h=m),"string"==typeof m&&(g=m),g=g||m.easing||l.easing,h=h||m.duration||l.duration,b.length?a.length?(f=a.show().outerHeight(),b.animate(c,{duration:h,easing:g,step:function(a,b){b.now=Math.round(a)}}),void a.hide().animate(d,{duration:h,easing:g,complete:n,step:function(a,c){c.now=Math.round(a),"height"!==c.prop?j+=c.now:"content"!==i.options.heightStyle&&(c.now=Math.round(f-b.outerHeight()-j),j=0)}})):b.animate(c,h,g,n):a.animate(d,h,g,n)},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),b.length&&(b.parent()[0].className=b.parent()[0].className),this._trigger("activate",null,a)}})}(jQuery),function(a){var b=0;a.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f?!0:g?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,void(c=!0);b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault());if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,void a.preventDefault()):void this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),void this._change(a))}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(d){c===b&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this._value(this.term),void this.menu.blur()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments),this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})}(jQuery),function(a){var b,c,d,e,f="ui-button ui-widget ui-state-default ui-corner-all",g="ui-state-hover ui-state-active ",h="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",i=function(){var b=a(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},j=function(b){var c=b.name,d=b.form,e=a([]);return c&&(c=c.replace(/'/g,"\\'"),e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,i),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var g=this,h=this.options,k="checkbox"===this.type||"radio"===this.type,l=k?"":"ui-state-active",m="ui-state-focus";null===h.label&&(h.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(f).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){h.disabled||this===b&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){h.disabled||a(this).removeClass(l)}).bind("click"+this.eventNamespace,function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){g.buttonElement.addClass(m)}).bind("blur"+this.eventNamespace,function(){g.buttonElement.removeClass(m)}),k&&(this.element.bind("change"+this.eventNamespace,function(){e||g.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){h.disabled||(e=!1,c=a.pageX,d=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){h.disabled||(c!==a.pageX||d!==a.pageY)&&(e=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return h.disabled||e?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(h.disabled||e)return!1;a(this).addClass("ui-state-active"),g.buttonElement.attr("aria-pressed","true");var b=g.element[0];j(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return h.disabled?!1:(a(this).addClass("ui-state-active"),b=this,void g.document.one("mouseup",function(){b=null}))}).bind("mouseup"+this.eventNamespace,function(){return h.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){return h.disabled?!1:void((b.keyCode===a.ui.keyCode.SPACE||b.keyCode===a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){var a,b,c;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(f+" "+g+" "+h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?void(b?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?j(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(h),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b),this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(a,b){function c(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.dpDiv=d(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",function(){a.datepicker._isDisabledDatepicker(f.inline?b.parent()[0]:f.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}a.extend(a.ui,{datepicker:{version:"1.10.3"}});var f,g="datepicker";a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return e(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var e=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:e,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,g,c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.focus(this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");
g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;a.length>e;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,g,c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,f,h){var i,j,k,l,m,n=this._dialogInst;return n||(this.uuid+=1,i="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+i+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},a.data(this._dialogInput[0],g,n)),e(n.settings,f||{}),c=c&&c.constructor===Date?this._formatDate(n,c):c,this._dialogInput.val(c),this._pos=h?h.length?h:[h.pageX,h.pageY]:null,this._pos||(j=document.documentElement.clientWidth,k=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,m=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[j/2-100+l,k/2-150+m]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],g,n),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,g);d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,g),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,g)}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(c,d,f){var g,h,i,j,k=this._getInst(c);return 2===arguments.length&&"string"==typeof d?"defaults"===d?a.extend({},a.datepicker._defaults):k?"all"===d?a.extend({},k.settings):this._get(k,d):null:(g=d||{},"string"==typeof d&&(g={},g[d]=f),k&&(this._curInst===k&&this._hideDatepicker(),h=this._getDateDatepicker(c,!0),i=this._getMinMaxDate(k,"min"),j=this._getMinMaxDate(k,"max"),e(k.settings,g),null!==i&&g.dateFormat!==b&&g.minDate===b&&(k.settings.minDate=this._formatDate(k,i)),null!==j&&g.dateFormat!==b&&g.maxDate===b&&(k.settings.maxDate=this._formatDate(k,j)),"disabled"in g&&(g.disabled?this._disableDatepicker(c):this._enableDatepicker(c)),this._attachments(a(c),k),this._autoSize(k),this._setDate(k,h),this._updateAlternate(k),this._updateDatepicker(k)),b)},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(c){var d,e,f=a.datepicker._getInst(c.target);return a.datepicker._get(f,"constrainInput")?(d=a.datepicker._possibleChars(a.datepicker._get(f,"dateFormat")),e=String.fromCharCode(null==c.charCode?c.keyCode:c.charCode),c.ctrlKey||c.metaKey||" ">e||!d||d.indexOf(e)>-1):b},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,d,f,g,h,i,j;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),d=a.datepicker._get(c,"beforeShow"),f=d?d.apply(b,[b,c]):{},f!==!1&&(e(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),h={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),h=a.datepicker._checkOffset(c,h,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),c.inline||(i=a.datepicker._get(c,"showAnim"),j=a.datepicker._get(c,"duration"),c.dpDiv.zIndex(a(b).zIndex()+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[i]?c.dpDiv.show(i,a.datepicker._get(c,"showOptions"),j):c.dpDiv[i||"show"](i?j:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,f=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b),b.dpDiv.find("."+this._dayOverClass+" a").mouseover();var c,d=this._getNumberOfMonths(b),e=d[1],g=17;b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",g*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,h=this._curInst;!h||b&&h!==a.data(b,g)||this._datepickerShowing&&(c=this._get(h,"showAnim"),d=this._get(h,"duration"),e=function(){a.datepicker._tidyDialog(h)},a.effects&&(a.effects.effect[c]||a.effects[c])?h.dpDiv.hide(c,a.datepicker._get(h,"showOptions"),d,e):h.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(h,"onClose"),f&&f.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(c,d,e){if(null==c||null==d)throw"Invalid arguments";if(d="object"==typeof d?""+d:d+"",""===d)return null;var f,g,h,i,j=0,k=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof k?k:(new Date).getFullYear()%100+parseInt(k,10),m=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,n=(e?e.dayNames:null)||this._defaults.dayNames,o=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,q=-1,r=-1,s=-1,t=-1,u=!1,v=function(a){var b=c.length>f+1&&c.charAt(f+1)===a;return b&&f++,b},w=function(a){var b=v(a),c="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e=RegExp("^\\d{1,"+c+"}"),f=d.substring(j).match(e);if(!f)throw"Missing number at position "+j;return j+=f[0].length,parseInt(f[0],10)},x=function(c,e,f){var g=-1,h=a.map(v(c)?f:e,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(h,function(a,c){var e=c[1];return d.substr(j,e.length).toLowerCase()===e.toLowerCase()?(g=c[0],j+=e.length,!1):b}),-1!==g)return g+1;throw"Unknown name at position "+j},y=function(){if(d.charAt(j)!==c.charAt(f))throw"Unexpected literal at position "+j;j++};for(f=0;c.length>f;f++)if(u)"'"!==c.charAt(f)||v("'")?y():u=!1;else switch(c.charAt(f)){case"d":s=w("d");break;case"D":x("D",m,n);break;case"o":t=w("o");break;case"m":r=w("m");break;case"M":r=x("M",o,p);break;case"y":q=w("y");break;case"@":i=new Date(w("@")),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"!":i=new Date((w("!")-this._ticksTo1970)/1e4),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"'":v("'")?y():u=!0;break;default:y()}if(d.length>j&&(h=d.substr(j),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;if(-1===q?q=(new Date).getFullYear():100>q&&(q+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=q?0:-100)),t>-1)for(r=1,s=t;g=this._getDaysInMonth(q,r-1),!(g>=s);)r++,s-=g;if(i=this._daylightSavingAdjust(new Date(q,r-1,s)),i.getFullYear()!==q||i.getMonth()+1!==r||i.getDate()!==s)throw"Invalid date";return i},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=a.length>d+1&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;c>d.length;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;a.length>d;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=a.length>b+1&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;a.length>b;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"==""+g?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,ab=a.drawYear;if(0>_&&(_+=12,ab--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(ab,_,1))>b;)_--,0>_&&(_=11,ab--);for(a.drawMonth=_,a.drawYear=ab,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(ab,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,ab,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(ab,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,ab,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;U[0]>w;w++){for(x="",this.maxRows=4,y=0;U[1]>y;y++){if(z=this._daylightSavingAdjust(new Date(ab,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,ab,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(ab,_),ab===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(ab,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(ab,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,ab++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||e.getMonth()>=k)&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||h>=b.getFullYear())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new c,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.10.3"}(jQuery),function(a){var b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},c={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1
},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c=this;this._isOpen&&this._trigger("beforeClose",b)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||a(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(a,b){var c=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return c&&!b&&this._trigger("focus",a),c},open:function(){var b=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var a=this.element.find("[autofocus]");a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===a.ui.keyCode.TAB){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(e.focus(1),b.preventDefault()):(d.focus(1),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(b.element[0],arguments)},f={icons:d.icons,text:d.showText},delete d.icons,delete d.showText,a("<button></button>",d).button(f).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("ui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){d.position=[f.position.left-c.document.scrollLeft(),f.position.top-c.document.scrollTop()],a(this).removeClass("ui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){d.height=a(this).height(),d.width=a(this).width(),a(this).removeClass("ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(d){var e=this,f=!1,g={};a.each(d,function(a,d){e._setOption(a,d),a in b&&(f=!0),a in c&&(g[a]=d)}),f&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=this,c=this.widgetFullName;a.ui.dialog.overlayInstances||this._delay(function(){a.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(d){b._allowInteraction(d)||(d.preventDefault(),a(".ui-dialog:visible:last .ui-dialog-content").data(c)._focusTabbable())})}),this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),a.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(a.ui.dialog.overlayInstances--,a.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),a.ui.dialog.overlayInstances=0,a.uiBackCompat!==!1&&a.widget("ui.dialog",a.ui.dialog,{_position:function(){var b,c=this.options.position,d=[],e=[0,0];c?(("string"==typeof c||"object"==typeof c&&"0"in c)&&(d=c.split?c.split(" "):[c[0],c[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),c={my:d[0]+(0>e[0]?e[0]:"+"+e[0])+" "+d[1]+(0>e[1]?e[1]:"+"+e[1]),at:d.join(" ")}),c=a.extend({},a.ui.dialog.prototype.options.position,c)):c=a.ui.dialog.prototype.options.position,b=this.uiDialog.is(":visible"),b||this.uiDialog.show(),this.uiDialog.position(c),b||this.uiDialog.hide()}})}(jQuery),function(a){a.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(b),c.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())}),d=g&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,d=this.element.find(this.options.menus);d.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e),b.attr("aria-labelledby",d.attr("id"))}),b=d.add(this.element),b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")}),b.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.height(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),0>c.offset().top-d-e}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}})}(jQuery),function(a,b){a.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(a){return a===b?this.options.value:(this.options.value=this._constrainedValue(a),this._refreshValue(),b)},_constrainedValue:function(a){return a===b&&(a=this.options.value),this.indeterminate=a===!1,"number"!=typeof a&&(a=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value,this._super(a),this.options.value=this._constrainedValue(b),this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b)),this._super(a,b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(c.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}})}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):this.range=a([])},_setupEvents:function(){var a=this.handles.add(this.range).filter("a");this._off(a),this._on(a,this._handleEvents),this._hoverable(a),this._focusable(a)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;d.length>f;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;c.length>d;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(this._valueMin()>=a)return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())),k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(c){var d,e,f,g,h=a(c.target).data("ui-slider-handle-index");switch(c.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(c.target).addClass("ui-state-active"),d=this._start(c,h),d===!1))return}switch(g=this.options.step,e=f=this.options.values&&this.options.values.length?this.values(h):this.value(),c.keyCode){case a.ui.keyCode.HOME:f=this._valueMin();break;case a.ui.keyCode.END:f=this._valueMax();break;case a.ui.keyCode.PAGE_UP:f=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:f=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===this._valueMax())return;f=this._trimAlignValue(e+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===this._valueMin())return;f=this._trimAlignValue(e-g)}this._slide(c,h,f)},click:function(a){a.preventDefault()},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}})}(jQuery),function(a){function b(a){return function(){var b=this.element.val();a.apply(this,arguments),this._refresh(),b!==this.element.val()&&this._trigger("change")}}a.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},c=this.element;return a.each(["min","max","step"],function(a,d){var e=c.attr(d);void 0!==e&&e.length&&(b[d]=e)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",a)))
},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((b>0?1:-1)*this.options.step,a),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100),a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){var a=this.element[0]===this.document[0].activeElement;a||(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),b.preventDefault(),c.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,c.call(this)}),this._start(b)!==!1&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){return a(b.currentTarget).hasClass("ui-state-active")?this._start(b)===!1?!1:void this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*a.height())&&a.height()>0&&a.height(a.height()),this.options.disabled&&this.disable()},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){return this.spinning||this._trigger("start",a)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(a,b,c){a=a||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,b,c)},a),this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1),c=this._adjustValue(c+a*this._increment(this.counter)),this.spinning&&this._trigger("spin",b,{value:c})===!1||(this._value(c),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=""+a,c=b.indexOf(".");return-1===c?0:b.length-c-1},_adjustValue:function(a){var b,c,d=this.options;return b=null!==d.min?d.min:0,c=a-b,c=Math.round(c/d.step)*d.step,a=b+c,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==d.min&&d.min>a?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var c=this._parse(this.element.val());return this.options[a]=b,void this.element.val(this._format(c))}("max"===a||"min"===a||"step"===a)&&"string"==typeof b&&(b=this._parse(b)),"icons"===a&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(b.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(b.down)),this._super(a,b),"disabled"===a&&(b?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:b(function(a){this._super(a),this._value(this.element.val())}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(b||(c=this._adjustValue(c)),a=this._format(c))),this.element.val(a),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:b(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:b(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:b(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:b(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){return arguments.length?void b(this._value).call(this,a):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(a,b){function c(){return++e}function d(a){return a.hash.length>1&&decodeURIComponent(a.href.replace(f,""))===decodeURIComponent(location.href.replace(f,""))}var e=0,f=/#.*$/;a.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,c=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(c.active):a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var c=this.options.active,d=this.options.collapsible,e=location.hash.substring(1);return null===c&&(e&&this.tabs.each(function(d,f){return a(f).attr("aria-controls")===e?(c=d,!1):b}),null===c&&(c=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===c||-1===c)&&(c=this.tabs.length?0:!1)),c!==!1&&(c=this.tabs.index(this.tabs.eq(c)),-1===c&&(c=d?!1:0)),!d&&c===!1&&this.anchors.length&&(c=0),c},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(c){var d=a(this.document[0].activeElement).closest("li"),e=this.tabs.index(d),f=!0;if(!this._handlePageNav(c)){switch(c.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:e++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:f=!1,e--;break;case a.ui.keyCode.END:e=this.anchors.length-1;break;case a.ui.keyCode.HOME:e=0;break;case a.ui.keyCode.SPACE:return c.preventDefault(),clearTimeout(this.activating),this._activate(e),b;case a.ui.keyCode.ENTER:return c.preventDefault(),clearTimeout(this.activating),this._activate(e===this.options.active?!1:e),b;default:return}c.preventDefault(),clearTimeout(this.activating),e=this._focusNextTab(e,f),c.ctrlKey||(d.attr("aria-selected","false"),this.tabs.eq(e).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",e)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(c){return c.altKey&&c.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):c.altKey&&c.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):b},_findNextTab:function(b,c){function d(){return b>e&&(b=0),0>b&&(b=e),b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,c){return"active"===a?(this._activate(c),b):"disabled"===a?(this._setupDisabled(c),b):(this._super(a,c),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",c),c||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(c),"heightStyle"===a&&this._setupHeightStyle(c),b)},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+c()},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,e){var f,g,h,i=a(e).uniqueId().attr("id"),j=a(e).closest("li"),k=j.attr("aria-controls");d(e)?(f=e.hash,g=b.element.find(b._sanitizeSelector(f))):(h=b._tabId(j),f="#"+h,g=b.element.find(f),g.length||(g=b._createPanel(h),g.insertAfter(b.panels[c-1]||b.tablist)),g.attr("aria-live","polite")),g.length&&(b.panels=b.panels.add(g)),k&&j.data("ui-tabs-aria-controls",k),j.attr({"aria-controls":f.substring(1),"aria-labelledby":i}),g.attr("aria-labelledby",i)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)b===!0||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={click:function(a){a.preventDefault()}};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h.hide(),e()),h.attr({"aria-expanded":"false","aria-hidden":"true"}),c.oldTab.attr("aria-selected","false"),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr({"aria-expanded":"true","aria-hidden":"false"}),c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(c){var d=this.options.disabled;d!==!1&&(c===b?d=!1:(c=this._getIndex(c),d=a.isArray(d)?a.map(d,function(a){return a!==c?a:null}):a.map(this.tabs,function(a,b){return b!==c?b:null})),this._setupDisabled(d))},disable:function(c){var d=this.options.disabled;if(d!==!0){if(c===b)d=!0;else{if(c=this._getIndex(c),-1!==a.inArray(c,d))return;d=a.isArray(d)?a.merge([c],d).sort():[c]}this._setupDisabled(d)}},load:function(b,c){b=this._getIndex(b);var e=this,f=this.tabs.eq(b),g=f.find(".ui-tabs-anchor"),h=this._getPanelForTab(f),i={tab:f,panel:h};d(g[0])||(this.xhr=a.ajax(this._ajaxSettings(g,c,i)),this.xhr&&"canceled"!==this.xhr.statusText&&(f.addClass("ui-tabs-loading"),h.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){h.html(a),e._trigger("load",c,i)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&e.panels.stop(!1,!0),f.removeClass("ui-tabs-loading"),h.removeAttr("aria-busy"),a===e.xhr&&delete e.xhr},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}})}(jQuery),function(a){function b(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))}function c(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);-1!==e&&d.splice(e,1),b.removeData("ui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")}var d=0;a.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),void(this.options[b]=c)):(this._super(b,c),void("content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b)})))},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0)}),this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0)),d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){a.data("ui-tooltip-open")&&e._delay(function(){b&&(b.type=f),this._open(b,a,c)})}),void(c&&this._open(b,a,c)))},_open:function(c,d,e){function f(a){j.of=a,g.is(":hidden")||g.position(j)}var g,h,i,j=a.extend({},this.options.position);if(e){if(g=this._find(d),g.length)return void g.find(".ui-tooltip-content").html(e);d.is("[title]")&&(c&&"mouseover"===c.type?d.attr("title",""):d.removeAttr("title")),g=this._tooltip(d),b(d,g.attr("id")),g.find(".ui-tooltip-content").html(e),this.options.track&&c&&/^mouse/.test(c.type)?(this._on(this.document,{mousemove:f}),f(c)):g.position(a.extend({of:d},this.options.position)),g.hide(),this._show(g,this.options.show),this.options.show&&this.options.show.delay&&(i=this.delayedShow=setInterval(function(){g.is(":visible")&&(f(j.of),clearInterval(i))},a.fx.interval)),this._trigger("open",c,{tooltip:g}),h={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var c=a.Event(b);c.currentTarget=d[0],this.close(c,!0)}},remove:function(){this._removeTooltip(g)}},c&&"mouseover"!==c.type||(h.mouseleave="close"),c&&"focusin"!==c.type||(h.focusout="close"),this._on(!0,d,h)}},close:function(b){var d=this,e=a(b?b.currentTarget:this.element),f=this._find(e);this.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title")),c(e),f.stop(!0),this._hide(f,this.options.hide,function(){d._removeTooltip(a(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,c){a(c.element).attr("title",c.title),delete d.parents[b]}),this.closing=!0,this._trigger("close",b,{tooltip:f}),this.closing=!1)},_tooltip:function(b){var c="ui-tooltip-"+d++,e=a("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return a("<div>").addClass("ui-tooltip-content").appendTo(e),e.appendTo(this.document[0].body),this.tooltips[c]=b,e},_find:function(b){var c=b.data("ui-tooltip-id");return c?a("#"+c):a()},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0),a("#"+c).remove(),d.data("ui-tooltip-title")&&(d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))})}})}(jQuery),function(a,b){var c="ui-effects-";a.effects={effect:{}},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:a>d.max?d.max:a)}function d(c){var d=j(),e=d._rgba=[];return c=c.toLowerCase(),o(i,function(a,f){var g,h=f.re.exec(c),i=h&&f.parse(h),j=f.space||"rgba";return i?(g=d[j](i),d[k[j].cache]=g[k[j].cache],e=d._rgba=g._rgba,!1):b}),e.length?("0,0,0,0"===e.join()&&a.extend(e,f.transparent),d):f[c]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&0>a.inArray(null,l[f].slice(0,3))&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):b},is:function(a){var c=j(a),d=!0,e=this;return o(k,function(a,f){var g,h=c[f.cache];return h&&(g=e[f.cache]||f.to&&f.to(e._rgba)||[],o(f.props,function(a,c){return null!=h[c.idx]?d=h[c.idx]===g[c.idx]:b})),d}),d},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(i){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(i){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function c(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(d=e.length;d--;)c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c]);else for(c in e)"string"==typeof e[c]&&(f[c]=e[c]);return f}function d(b,c){var d,e,g={};for(d in c)e=c[d],b[d]!==e&&(f[d]||(a.fx.step[d]||!isNaN(parseFloat(e)))&&(g[d]=e));return g}var e=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(jQuery.style(a.elem,c,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(b,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f,g=a(this),h=g.attr("class")||"",j=i.children?g.find("*").addBack():g;j=j.map(function(){var b=a(this);return{el:b,start:c(this)}}),f=function(){a.each(e,function(a,c){b[c]&&g[c+"Class"](b[c])})},f(),j=j.map(function(){return this.end=c(this.el[0]),this.diff=d(this.start,this.end),this}),g.attr("class",h),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){f(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(g[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(c){return function(d,e,f,g,h){return"boolean"==typeof e||e===b?f?a.effects.animateClass.call(this,e?{add:d}:{remove:d},f,g,h):c.apply(this,arguments):a.effects.animateClass.call(this,{toggle:d},e,f,g)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function d(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function e(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects.effect[b]?a.isFunction(b)?!0:"object"!=typeof b||b.effect?!1:!0:!0}a.extend(a.effects,{version:"1.10.3",save:function(a,b){for(var d=0;b.length>d;d++)null!==b[d]&&a.data(c+b[d],a[0].style[b[d]])},restore:function(a,d){var e,f;for(f=0;d.length>f;f++)null!==d[f]&&(e=a.data(c+d[f]),e===b&&(e=""),a.css(d[f],e))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).focus(),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")
}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function b(b){function d(){a.isFunction(f)&&f.call(e[0]),a.isFunction(b)&&b()}var e=a(this),f=c.complete,h=c.mode;(e.is(":hidden")?"hide"===h:"show"===h)?(e[h](),d()):g.call(e[0],c,d)}var c=d.apply(this,arguments),e=c.mode,f=c.queue,g=a.effects.effect[c.effect];return a.fx.off||!g?e?this[e](c.duration,c.complete):this.each(function(){c.complete&&c.complete.call(this)}):f===!1?this.each(b):this.queue(f||"fx",b)},show:function(a){return function(b){if(e(b))return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="show",this.effect.call(this,c)}}(a.fn.show),hide:function(a){return function(b){if(e(b))return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="hide",this.effect.call(this,c)}}(a.fn.hide),toggle:function(a){return function(b){if(e(b)||"boolean"==typeof b)return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="toggle",this.effect.call(this,c)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}})}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;((b=Math.pow(2,--c))-1)/11>a;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}()}(jQuery),function(a){var b=/up|down|vertical/,c=/up|left|vertical|horizontal/;a.effects.effect.blind=function(d,e){var f,g,h,i=a(this),j=["position","top","bottom","left","right","height","width"],k=a.effects.setMode(i,d.mode||"hide"),l=d.direction||"up",m=b.test(l),n=m?"height":"width",o=m?"top":"left",p=c.test(l),q={},r="show"===k;i.parent().is(".ui-effects-wrapper")?a.effects.save(i.parent(),j):a.effects.save(i,j),i.show(),f=a.effects.createWrapper(i).css({overflow:"hidden"}),g=f[n](),h=parseFloat(f.css(o))||0,q[n]=r?g:0,p||(i.css(m?"bottom":"right",0).css(m?"top":"left","auto").css({position:"absolute"}),q[o]=r?h:g+h),r&&(f.css(n,0),p||f.css(o,h+g)),f.animate(q,{duration:d.duration,easing:d.easing,queue:!1,complete:function(){"hide"===k&&i.hide(),a.effects.restore(i,j),a.effects.removeWrapper(i),e()}})}}(jQuery),function(a){a.effects.effect.bounce=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"effect"),j="hide"===i,k="show"===i,l=b.direction||"up",m=b.distance,n=b.times||5,o=2*n+(k||j?1:0),p=b.duration/o,q=b.easing,r="up"===l||"down"===l?"top":"left",s="up"===l||"left"===l,t=g.queue(),u=t.length;for((k||j)&&h.push("opacity"),a.effects.save(g,h),g.show(),a.effects.createWrapper(g),m||(m=g["top"===r?"outerHeight":"outerWidth"]()/3),k&&(f={opacity:1},f[r]=0,g.css("opacity",0).css(r,s?2*-m:2*m).animate(f,p,q)),j&&(m/=Math.pow(2,n-1)),f={},f[r]=0,d=0;n>d;d++)e={},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q).animate(f,p,q),m=j?2*m:m/2;j&&(e={opacity:0},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q)),g.queue(function(){j&&g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}),u>1&&t.splice.apply(t,[1,0].concat(t.splice(u,o+1))),g.dequeue()}}(jQuery),function(a){a.effects.effect.clip=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"hide"),j="show"===i,k=b.direction||"vertical",l="vertical"===k,m=l?"height":"width",n=l?"top":"left",o={};a.effects.save(g,h),g.show(),d=a.effects.createWrapper(g).css({overflow:"hidden"}),e="IMG"===g[0].tagName?d:g,f=e[m](),j&&(e.css(m,0),e.css(n,f/2)),o[m]=j?f:0,o[n]=j?0:f/2,e.animate(o,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){j||g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}})}}(jQuery),function(a){a.effects.effect.drop=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","opacity","height","width"],g=a.effects.setMode(e,b.mode||"hide"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i?"pos":"neg",l={opacity:h?1:0};a.effects.save(e,f),e.show(),a.effects.createWrapper(e),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0)/2,h&&e.css("opacity",0).css(j,"pos"===k?-d:d),l[j]=(h?"pos"===k?"+=":"-=":"pos"===k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})}}(jQuery),function(a){a.effects.effect.explode=function(b,c){function d(){t.push(this),t.length===l*m&&e()}function e(){n.css({visibility:"visible"}),a(t).remove(),p||n.hide(),c()}var f,g,h,i,j,k,l=b.pieces?Math.round(Math.sqrt(b.pieces)):3,m=l,n=a(this),o=a.effects.setMode(n,b.mode||"hide"),p="show"===o,q=n.show().css("visibility","hidden").offset(),r=Math.ceil(n.outerWidth()/m),s=Math.ceil(n.outerHeight()/l),t=[];for(f=0;l>f;f++)for(i=q.top+f*s,k=f-(l-1)/2,g=0;m>g;g++)h=q.left+g*r,j=g-(m-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*r,top:-f*s}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r,height:s,left:h+(p?j*r:0),top:i+(p?k*s:0),opacity:p?0:1}).animate({left:h+(p?0:j*r),top:i+(p?0:k*s),opacity:p?1:0},b.duration||500,b.easing,d)}}(jQuery),function(a){a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})}}(jQuery),function(a){a.effects.effect.fold=function(b,c){var d,e,f=a(this),g=["position","top","bottom","left","right","height","width"],h=a.effects.setMode(f,b.mode||"hide"),i="show"===h,j="hide"===h,k=b.size||15,l=/([0-9]+)%/.exec(k),m=!!b.horizFirst,n=i!==m,o=n?["width","height"]:["height","width"],p=b.duration/2,q={},r={};a.effects.save(f,g),f.show(),d=a.effects.createWrapper(f).css({overflow:"hidden"}),e=n?[d.width(),d.height()]:[d.height(),d.width()],l&&(k=parseInt(l[1],10)/100*e[j?0:1]),i&&d.css(m?{height:0,width:k}:{height:k,width:0}),q[o[0]]=i?e[0]:k,r[o[1]]=i?e[1]:0,d.animate(q,p,b.easing).animate(r,p,b.easing,function(){j&&f.hide(),a.effects.restore(f,g),a.effects.removeWrapper(f),c()})}}(jQuery),function(a){a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};"hide"===f&&(g.opacity=0),a.effects.save(d,e),d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(g,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),c()}})}}(jQuery),function(a){a.effects.effect.pulsate=function(b,c){var d,e=a(this),f=a.effects.setMode(e,b.mode||"show"),g="show"===f,h="hide"===f,i=g||"hide"===f,j=2*(b.times||5)+(i?1:0),k=b.duration/j,l=0,m=e.queue(),n=m.length;for((g||!e.is(":visible"))&&(e.css("opacity",0).show(),l=1),d=1;j>d;d++)e.animate({opacity:l},k,b.easing),l=1-l;e.animate({opacity:l},k,b.easing),e.queue(function(){h&&e.hide(),c()}),n>1&&m.splice.apply(m,[1,0].concat(m.splice(n,j+1))),e.dequeue()}}(jQuery),function(a){a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,g=parseInt(b.percent,10)||150,h=g/100,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?g:100,from:f?i:{height:i.height*h,width:i.width*h,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*h}}),d.effect(b)},a.effects.effect.scale=function(b,c){var d=a(this),e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),g=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===f?0:100),h=b.direction||"both",i=b.origin,j={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},k={y:"horizontal"!==h?g/100:1,x:"vertical"!==h?g/100:1};e.effect="size",e.queue=!1,e.complete=c,"effect"!==f&&(e.origin=i||["middle","center"],e.restore=!0),e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:j),e.to={height:j.height*k.y,width:j.width*k.x,outerHeight:j.outerHeight*k.y,outerWidth:j.outerWidth*k.x},e.fade&&("show"===f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0)),d.effect(e)},a.effects.effect.size=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],j=["width","height","overflow"],k=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=a.effects.setMode(g,b.mode||"effect"),o=b.restore||"effect"!==n,p=b.scale||"both",q=b.origin||["middle","center"],r=g.css("position"),s=o?h:i,t={height:0,width:0,outerHeight:0,outerWidth:0};"show"===n&&g.show(),d={height:g.height(),width:g.width(),outerHeight:g.outerHeight(),outerWidth:g.outerWidth()},"toggle"===b.mode&&"show"===n?(g.from=b.to||t,g.to=b.from||d):(g.from=b.from||("show"===n?t:d),g.to=b.to||("hide"===n?t:d)),f={from:{y:g.from.height/d.height,x:g.from.width/d.width},to:{y:g.to.height/d.height,x:g.to.width/d.width}},("box"===p||"both"===p)&&(f.from.y!==f.to.y&&(s=s.concat(l),g.from=a.effects.setTransition(g,l,f.from.y,g.from),g.to=a.effects.setTransition(g,l,f.to.y,g.to)),f.from.x!==f.to.x&&(s=s.concat(m),g.from=a.effects.setTransition(g,m,f.from.x,g.from),g.to=a.effects.setTransition(g,m,f.to.x,g.to))),("content"===p||"both"===p)&&f.from.y!==f.to.y&&(s=s.concat(k).concat(j),g.from=a.effects.setTransition(g,k,f.from.y,g.from),g.to=a.effects.setTransition(g,k,f.to.y,g.to)),a.effects.save(g,s),g.show(),a.effects.createWrapper(g),g.css("overflow","hidden").css(g.from),q&&(e=a.effects.getBaseline(q,d),g.from.top=(d.outerHeight-g.outerHeight())*e.y,g.from.left=(d.outerWidth-g.outerWidth())*e.x,g.to.top=(d.outerHeight-g.to.outerHeight)*e.y,g.to.left=(d.outerWidth-g.to.outerWidth)*e.x),g.css(g.from),("content"===p||"both"===p)&&(l=l.concat(["marginTop","marginBottom"]).concat(k),m=m.concat(["marginLeft","marginRight"]),j=h.concat(l).concat(m),g.find("*[width]").each(function(){var c=a(this),d={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};o&&a.effects.save(c,j),c.from={height:d.height*f.from.y,width:d.width*f.from.x,outerHeight:d.outerHeight*f.from.y,outerWidth:d.outerWidth*f.from.x},c.to={height:d.height*f.to.y,width:d.width*f.to.x,outerHeight:d.height*f.to.y,outerWidth:d.width*f.to.x},f.from.y!==f.to.y&&(c.from=a.effects.setTransition(c,l,f.from.y,c.from),c.to=a.effects.setTransition(c,l,f.to.y,c.to)),f.from.x!==f.to.x&&(c.from=a.effects.setTransition(c,m,f.from.x,c.from),c.to=a.effects.setTransition(c,m,f.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.easing,function(){o&&a.effects.restore(c,j)})})),g.animate(g.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===g.to.opacity&&g.css("opacity",g.from.opacity),"hide"===n&&g.hide(),a.effects.restore(g,s),o||("static"===r?g.css({position:"relative",top:g.to.top,left:g.to.left}):a.each(["top","left"],function(a,b){g.css(b,function(b,c){var d=parseInt(c,10),e=a?g.to.left:g.to.top;return"auto"===c?e+"px":d+e+"px"})})),a.effects.removeWrapper(g),c()}})}}(jQuery),function(a){a.effects.effect.shake=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","height","width"],g=a.effects.setMode(e,b.mode||"effect"),h=b.direction||"left",i=b.distance||20,j=b.times||3,k=2*j+1,l=Math.round(b.duration/k),m="up"===h||"down"===h?"top":"left",n="up"===h||"left"===h,o={},p={},q={},r=e.queue(),s=r.length;for(a.effects.save(e,f),e.show(),a.effects.createWrapper(e),o[m]=(n?"-=":"+=")+i,p[m]=(n?"+=":"-=")+2*i,q[m]=(n?"-=":"+=")+2*i,e.animate(o,l,b.easing),d=1;j>d;d++)e.animate(p,l,b.easing).animate(q,l,b.easing);e.animate(p,l,b.easing).animate(o,l/2,b.easing).queue(function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}),s>1&&r.splice.apply(r,[1,0].concat(r.splice(s,k+1))),e.dequeue()}}(jQuery),function(a){a.effects.effect.slide=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","width","height"],g=a.effects.setMode(e,b.mode||"show"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i,l={};a.effects.save(e,f),e.show(),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0),a.effects.createWrapper(e).css({overflow:"hidden"}),h&&e.css(j,k?isNaN(d)?"-"+d:-d:d),l[j]=(h?k?"+=":"-=":k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})}}(jQuery),function(a){a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),c()})}}(jQuery)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js":98}],100:[function(a,b){(function(c){jQuery=c.jQuery=a("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=a,function(){!function(a){function b(){this.items=new Array,this.itemsCount=0,this.put=function(a,b){this.containsKey(a)?this.items[a]=b:(this.items[a]=b,this.itemsCount++)},this.get=function(a){return this.containsKey(a)?this.items[a]:null},this.remove=function(a){if(!this.containsKey(a))throw"key '"+a+"' does not exists.";delete this.items[a],this.itemsCount--},this.containsKey=function(a){return"undefined"!=typeof this.items[a]},this.containsValue=function(a){for(var b in this.items)if(this.items[b]==a)return!0;return!1},this.contains=function(a){return this.containsKey(a)||this.containsValue(a)},this.clear=function(){this.items=new Array,itemsCount=0},this.size=function(){return this.itemsCount},this.isEmpty=function(){return 0==this.size()}}function c(a,b,c){this.dec=a,this.group=b,this.neg=c}function d(){for(var a=0;a<l.length;a++){localeGroup=l[a];for(var b=0;b<localeGroup.length;b++)f.put(localeGroup[b],a)}}function e(a,b){0==f.size()&&d();var e=".",g=",",h="-";0==b&&(-1!=a.indexOf("_")?a=a.split("_")[1].toLowerCase():-1!=a.indexOf("-")&&(a=a.split("-")[1].toLowerCase()));var i=f.get(a);if(i){var j=k[i];j&&(e=j[0],g=j[1])}return new c(e,g,h)}var f=new b,g=["ae","au","ca","cn","eg","gb","hk","il","in","jp","sk","th","tw","us"],h=["at","br","de","dk","es","gr","it","nl","pt","tr","vn"],i=["cz","fi","fr","ru","se","pl"],j=["ch"],k=[[".",","],[",","."],[","," "],[".","'"]],l=[g,h,i,j];a.fn.formatNumber=function(b,c,d){return this.each(function(){null==c&&(c=!0),null==d&&(d=!0);var e;e=new String(a(this).is(":input")?a(this).val():a(this).text());var f=a.formatNumber(e,b);return c&&(a(this).is(":input")?a(this).val(f):a(this).text(f)),d?f:void 0})},a.formatNumber=function(b,c){for(var c=a.extend({},a.fn.formatNumber.defaults,c),d=e(c.locale.toLowerCase(),c.isFullLocale),f=(d.dec,d.group,d.neg,"0#-,."),g="",h=!1,i=0;i<c.format.length;i++)if(-1==f.indexOf(c.format.charAt(i)))g+=c.format.charAt(i);else{if(0!=i||"-"!=c.format.charAt(i))break;h=!0}for(var j="",i=c.format.length-1;i>=0&&-1==f.indexOf(c.format.charAt(i));i--)j=c.format.charAt(i)+j;c.format=c.format.substring(g.length),c.format=c.format.substring(0,c.format.length-j.length);var k=new Number(b);return a._formatNumber(k,c,j,g,h)},a._formatNumber=function(b,c,d,f,g){var c=a.extend({},a.fn.formatNumber.defaults,c),h=e(c.locale.toLowerCase(),c.isFullLocale),i=h.dec,j=h.group,k=h.neg,l=!1;if(isNaN(b)){if(1!=c.nanForceZero)return null;b=0,l=!0}"%"==d&&(b=100*b);var m="";if(c.format.indexOf(".")>-1){var n=i,o=c.format.substring(c.format.lastIndexOf(".")+1);if(1==c.round)b=new Number(b.toFixed(o.length));else{var p=b.toString();p=p.substring(0,p.lastIndexOf(".")+o.length+1),b=new Number(p)}var q=b%1,r=new String(q.toFixed(o.length));r=r.substring(r.lastIndexOf(".")+1);for(var s=0;s<o.length;s++)if("#"==o.charAt(s)&&"0"!=r.charAt(s))n+=r.charAt(s);else if("#"==o.charAt(s)&&"0"==r.charAt(s)){var t=r.substring(s);if(!t.match("[1-9]"))break;n+=r.charAt(s)}else"0"==o.charAt(s)&&(n+=r.charAt(s));m+=n}else b=Math.round(b);var u=Math.floor(b);0>b&&(u=Math.ceil(b));var v="";v=-1==c.format.indexOf(".")?c.format:c.format.substring(0,c.format.indexOf("."));var w="";if(0!=u||"#"!=v.substr(v.length-1)||l){var x=new String(Math.abs(u)),y=9999;-1!=v.lastIndexOf(",")&&(y=v.length-v.lastIndexOf(",")-1);for(var z=0,s=x.length-1;s>-1;s--)w=x.charAt(s)+w,z++,z==y&&0!=s&&(w=j+w,z=0);if(v.length>w.length){var A=v.indexOf("0");if(-1!=A)for(var B=v.length-A,C=v.length-w.length-1;w.length<B;){var D=v.charAt(C);","==D&&(D=j),w=D+w,C--}}}return w||-1===v.indexOf("0",v.length-1)||(w="0"),m=w+m,0>b&&g&&f.length>0?f=k+f:0>b&&(m=k+m),c.decimalSeparatorAlwaysShown||m.lastIndexOf(i)==m.length-1&&(m=m.substring(0,m.length-1)),m=f+m+d},a.fn.parseNumber=function(b,c,d){null==c&&(c=!0),null==d&&(d=!0);var e;e=new String(a(this).is(":input")?a(this).val():a(this).text());var f=a.parseNumber(e,b);return f&&(c&&(a(this).is(":input")?a(this).val(f.toString()):a(this).text(f.toString())),d)?f:void 0},a.parseNumber=function(b,c){for(var c=a.extend({},a.fn.parseNumber.defaults,c),d=e(c.locale.toLowerCase(),c.isFullLocale),f=d.dec,g=d.group,h=d.neg,i="1234567890.-";b.indexOf(g)>-1;)b=b.replace(g,"");b=b.replace(f,".").replace(h,"-");var j="",k=!1;("%"==b.charAt(b.length-1)||1==c.isPercentage)&&(k=!0);for(var l=0;l<b.length;l++)i.indexOf(b.charAt(l))>-1&&(j+=b.charAt(l));var m=new Number(j);if(k){m/=100;var n=j.indexOf(".");if(-1!=n){var o=j.length-n-1;m=m.toFixed(o+2)}else m=m.toFixed(j.length-1)}return m},a.fn.parseNumber.defaults={locale:"us",decimalSeparatorAlwaysShown:!1,isPercentage:!1,isFullLocale:!1},a.fn.formatNumber.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1,nanForceZero:!0,round:!0,isFullLocale:!1},Number.prototype.toFixed=function(b){return a._roundNumber(this,b)},a._roundNumber=function(a,b){var c=Math.pow(10,b||0),d=String(Math.round(a*c)/c);if(b>0){var e=d.indexOf(".");for(-1==e?(d+=".",e=0):e=d.length-(e+1);b>e;)d+="0",e++}return d}}(jQuery)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js":98}],101:[function(require,module,exports){(function(global){$=global.$=require("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=require,function browserifyShim(module,define,require){!function($){$.extend({tablesorter:new function(){function benchmark(a,b){log(a+","+((new Date).getTime()-b.getTime())+"ms")}function log(a){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(a):alert(a)}function buildParserCache(a,b){if(a.config.debug)var c="";if(0!=a.tBodies.length){var d=a.tBodies[0].rows;if(d[0])for(var e=[],f=d[0].cells,g=f.length,h=0;g>h;h++){var i=!1;$.metadata&&$(b[h]).metadata()&&$(b[h]).metadata().sorter?i=getParserById($(b[h]).metadata().sorter):a.config.headers[h]&&a.config.headers[h].sorter&&(i=getParserById(a.config.headers[h].sorter)),i||(i=detectParserForColumn(a,d,-1,h)),a.config.debug&&(c+="column:"+h+" parser:"+i.id+"\n"),e.push(i)}return a.config.debug&&log(c),e}}function detectParserForColumn(a,b,c,d){for(var e=parsers.length,f=!1,g=!1,h=!0;""==g&&h;)c++,b[c]?(f=getNodeFromRowAndCellIndex(b,c,d),g=trimAndGetNodeText(a.config,f),a.config.debug&&log("Checking if value was empty on row:"+c)):h=!1;for(var i=1;e>i;i++)if(parsers[i].is(g,a,f))return parsers[i];return parsers[0]}function getNodeFromRowAndCellIndex(a,b,c){return a[b].cells[c]}function trimAndGetNodeText(a,b){return $.trim(getElementText(a,b))}function getParserById(a){for(var b=parsers.length,c=0;b>c;c++)if(parsers[c].id.toLowerCase()==a.toLowerCase())return parsers[c];return!1}function buildCache(a){if(a.config.debug)var b=new Date;for(var c=a.tBodies[0]&&a.tBodies[0].rows.length||0,d=a.tBodies[0].rows[0]&&a.tBodies[0].rows[0].cells.length||0,e=a.config.parsers,f={row:[],normalized:[]},g=0;c>g;++g){var h=$(a.tBodies[0].rows[g]),i=[];if(h.hasClass(a.config.cssChildRow))f.row[f.row.length-1]=f.row[f.row.length-1].add(h);else{f.row.push(h);for(var j=0;d>j;++j)i.push(e[j].format(getElementText(a.config,h[0].cells[j]),a,h[0].cells[j]));i.push(f.normalized.length),f.normalized.push(i),i=null}}return a.config.debug&&benchmark("Building cache for "+c+" rows:",b),f}function getElementText(a,b){var c="";return b?(a.supportsTextContent||(a.supportsTextContent=b.textContent||!1),c="simple"==a.textExtraction?a.supportsTextContent?b.textContent:b.childNodes[0]&&b.childNodes[0].hasChildNodes()?b.childNodes[0].innerHTML:b.innerHTML:"function"==typeof a.textExtraction?a.textExtraction(b):$(b).text()):""}function appendToTable(a,b){if(a.config.debug)var c=new Date;for(var d=b,e=d.row,f=d.normalized,g=f.length,h=f[0].length-1,i=$(a.tBodies[0]),j=[],k=0;g>k;k++){var l=f[k][h];if(j.push(e[l]),!a.config.appender)for(var m=e[l].length,n=0;m>n;n++)i[0].appendChild(e[l][n])}a.config.appender&&a.config.appender(a,j),j=null,a.config.debug&&benchmark("Rebuilt table:",c),applyWidget(a),setTimeout(function(){$(a).trigger("sortEnd")},0)}function buildHeaders(a){if(a.config.debug)var b=new Date;var c=($.metadata?!0:!1,computeTableHeaderCellIndexes(a));return $tableHeaders=$(a.config.selectorHeaders,a).each(function(b){if(this.column=c[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=formatSortingOrder(a.config.sortInitialOrder),this.count=this.order,(checkHeaderMetadata(this)||checkHeaderOptions(a,b))&&(this.sortDisabled=!0),checkHeaderOptionsSortingLocked(a,b)&&(this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(a,b)),!this.sortDisabled){var d=$(this).addClass(a.config.cssHeader);a.config.onRenderHeader&&a.config.onRenderHeader.apply(d)}a.config.headerList[b]=this}),a.config.debug&&(benchmark("Built headers:",b),log($tableHeaders)),$tableHeaders}function computeTableHeaderCellIndexes(a){for(var b=[],c={},d=a.getElementsByTagName("THEAD")[0],e=d.getElementsByTagName("TR"),f=0;f<e.length;f++)for(var g=e[f].cells,h=0;h<g.length;h++){var i,j=g[h],k=j.parentNode.rowIndex,l=k+"-"+j.cellIndex,m=j.rowSpan||1,n=j.colSpan||1;"undefined"==typeof b[k]&&(b[k]=[]);for(var o=0;o<b[k].length+1;o++)if("undefined"==typeof b[k][o]){i=o;break}c[l]=i;for(var o=k;k+m>o;o++){"undefined"==typeof b[o]&&(b[o]=[]);for(var p=b[o],q=i;i+n>q;q++)p[q]="x"}}return c}function checkCellColSpan(a,b,c){for(var d=[],e=a.tHead.rows,f=e[c].cells,g=0;g<f.length;g++){var h=f[g];h.colSpan>1?d=d.concat(checkCellColSpan(a,headerArr,c++)):(1==a.tHead.length||h.rowSpan>1||!e[c+1])&&d.push(h)}return d}function checkHeaderMetadata(a){return $.metadata&&$(a).metadata().sorter===!1?!0:!1}function checkHeaderOptions(a,b){return a.config.headers[b]&&a.config.headers[b].sorter===!1?!0:!1}function checkHeaderOptionsSortingLocked(a,b){return a.config.headers[b]&&a.config.headers[b].lockedOrder?a.config.headers[b].lockedOrder:!1}function applyWidget(a){for(var b=a.config.widgets,c=b.length,d=0;c>d;d++)getWidgetById(b[d]).format(a)}function getWidgetById(a){for(var b=widgets.length,c=0;b>c;c++)if(widgets[c].id.toLowerCase()==a.toLowerCase())return widgets[c]}function formatSortingOrder(a){return"Number"!=typeof a?"desc"==a.toLowerCase()?1:0:1==a?1:0}function isValueInArray(a,b){for(var c=b.length,d=0;c>d;d++)if(b[d][0]==a)return!0;return!1}function setHeadersCss(a,b,c,d){b.removeClass(d[0]).removeClass(d[1]);var e=[];b.each(function(){this.sortDisabled||(e[this.column]=$(this))});for(var f=c.length,g=0;f>g;g++)e[c[g][0]].addClass(d[c[g][1]])}function fixColumnWidth(a){var b=a.config;if(b.widthFixed){var c=$("<colgroup>");$("tr:first td",a.tBodies[0]).each(function(){c.append($("<col>").css("width",$(this).width()))}),$(a).prepend(c)}}function updateHeaderSortCount(a,b){for(var c=a.config,d=b.length,e=0;d>e;e++){var f=b[e],g=c.headerList[f[0]];g.count=f[1],g.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;for(var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length,i=0;l>i;i++){var c=sortList[i][0],order=sortList[i][1],s="text"==table.config.parsers[c].type?0==order?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c):0==order?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c),e="e"+i;dynamicExp+="var "+e+" = "+s,dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;l>i;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",table.config.debug&&benchmark("Evaling expression:"+dynamicExp,new Date),eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function makeSortFunction(a,b,c){var d="a["+c+"]",e="b["+c+"]";return"text"==a&&"asc"==b?"("+d+" == "+e+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : ("+d+" < "+e+") ? -1 : 1 )));":"text"==a&&"desc"==b?"("+d+" == "+e+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : ("+e+" < "+d+") ? -1 : 1 )));":"numeric"==a&&"asc"==b?"("+d+" === null && "+e+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : "+d+" - "+e+"));":"numeric"==a&&"desc"==b?"("+d+" === null && "+e+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : "+e+" - "+d+"));":void 0}function makeSortText(a){return"((a["+a+"] < b["+a+"]) ? -1 : ((a["+a+"] > b["+a+"]) ? 1 : 0));"}function makeSortTextDesc(a){return"((b["+a+"] < a["+a+"]) ? -1 : ((b["+a+"] > a["+a+"]) ? 1 : 0));"}function makeSortNumeric(a){return"a["+a+"]-b["+a+"];"}function makeSortNumericDesc(a){return"b["+a+"]-a["+a+"];"}function sortText(a,b){return table.config.sortLocaleCompare?a.localeCompare(b):b>a?-1:a>b?1:0}function sortTextDesc(a,b){return table.config.sortLocaleCompare?b.localeCompare(a):a>b?-1:b>a?1:0}function sortNumeric(a,b){return a-b}function sortNumericDesc(a,b){return b-a}function getCachedSortType(a,b){return a[b].type}var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1},this.benchmark=benchmark,this.construct=function(a){return this.each(function(){if(this.tHead&&this.tBodies){var b,c,d,e;this.config={},e=$.extend(this.config,$.tablesorter.defaults,a),b=$(this),$.data(this,"tablesorter",e),c=buildHeaders(this),this.config.parsers=buildParserCache(this,c),d=buildCache(this);var f=[e.cssDesc,e.cssAsc];fixColumnWidth(this),c.click(function(a){var g=b[0].tBodies[0]&&b[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&g>0){b.trigger("sortStart");var h=($(this),this.column);if(this.order=this.count++%2,this.lockedOrder&&(this.order=this.lockedOrder),a[e.sortMultiSortKey])if(isValueInArray(h,e.sortList))for(var i=0;i<e.sortList.length;i++){var j=e.sortList[i],k=e.headerList[j[0]];j[0]==h&&(k.count=j[1],k.count++,j[1]=k.count%2)}else e.sortList.push([h,this.order]);else{if(e.sortList=[],null!=e.sortForce)for(var l=e.sortForce,i=0;i<l.length;i++)l[i][0]!=h&&e.sortList.push(l[i]);e.sortList.push([h,this.order])}return setTimeout(function(){setHeadersCss(b[0],c,e.sortList,f),appendToTable(b[0],multisort(b[0],e.sortList,d))},1),!1}}).mousedown(function(){return e.cancelSelection?(this.onselectstart=function(){return!1},!1):void 0}),b.bind("update",function(){var a=this;setTimeout(function(){a.config.parsers=buildParserCache(a,c),d=buildCache(a)},1)}).bind("updateCell",function(a,b){var c=this.config,e=[b.parentNode.rowIndex-1,b.cellIndex];d.normalized[e[0]][e[1]]=c.parsers[e[1]].format(getElementText(c,b),b)}).bind("sorton",function(a,b){$(this).trigger("sortStart"),e.sortList=b;var g=e.sortList;updateHeaderSortCount(this,g),setHeadersCss(this,c,g,f),appendToTable(this,multisort(this,g,d))}).bind("appendCache",function(){appendToTable(this,d)}).bind("applyWidgetId",function(a,b){getWidgetById(b).format(this)}).bind("applyWidgets",function(){applyWidget(this)}),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(e.sortList=$(this).metadata().sortlist),e.sortList.length>0&&b.trigger("sorton",[e.sortList]),applyWidget(this)}})},this.addParser=function(a){for(var b=parsers.length,c=!0,d=0;b>d;d++)parsers[d].id.toLowerCase()==a.id.toLowerCase()&&(c=!1);c&&parsers.push(a)},this.addWidget=function(a){widgets.push(a)},this.formatFloat=function(a){var b=parseFloat(a);return isNaN(b)?0:b},this.formatInt=function(a){var b=parseInt(a);return isNaN(b)?0:b},this.isDigit=function(a){return/^[-+]?\d*$/.test($.trim(a.replace(/[,.']/g,"")))},this.clearTableBody=function(a){function b(){for(;this.firstChild;)this.removeChild(this.firstChild)}$.browser.msie?b.apply(a.tBodies[0]):a.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(){return!0},format:function(a){return $.trim(a.toLocaleLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(a,b){var c=b.config;return $.tablesorter.isDigit(a,c)},format:function(a){return $.tablesorter.formatFloat(a)},type:"numeric"}),ts.addParser({id:"currency",is:function(a){return/^[£$€?.]/.test(a)},format:function(a){return $.tablesorter.formatFloat(a.replace(new RegExp(/[£$€]/g),""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(a)},format:function(a){for(var b=a.split("."),c="",d=b.length,e=0;d>e;e++){var f=b[e];c+=2==f.length?"0"+f:f}return $.tablesorter.formatFloat(c)},type:"numeric"}),ts.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},format:function(a){return jQuery.trim(a.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},format:function(a){return $.tablesorter.formatFloat(""!=a?new Date(a.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),ts.addParser({id:"percent",is:function(a){return/\%$/.test($.trim(a))
},format:function(a){return $.tablesorter.formatFloat(a.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(a){return a.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(a){return $.tablesorter.formatFloat(new Date(a).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(a){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(a)},format:function(a,b){var c=b.config;return a=a.replace(/\-/g,"/"),"us"==c.dateFormat?a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):"uk"==c.dateFormat?a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):("dd/mm/yy"==c.dateFormat||"dd-mm-yy"==c.dateFormat)&&(a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(a).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(a){return $.tablesorter.formatFloat(new Date("2000/01/01 "+a).getTime())},type:"numeric"}),ts.addParser({id:"metadata",is:function(){return!1},format:function(a,b,c){var d=b.config,e=d.parserMetadataName?d.parserMetadataName:"sortValue";return $(c).metadata()[e]},type:"numeric"}),ts.addWidget({id:"zebra",format:function(a){if(a.config.debug)var b=new Date;var c,d,e=-1;$("tr:visible",a.tBodies[0]).each(function(){c=$(this),c.hasClass(a.config.cssChildRow)||e++,d=e%2==0,c.removeClass(a.config.widgetZebra.css[d?0:1]).addClass(a.config.widgetZebra.css[d?1:0])}),a.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",b)}})}(jQuery)}.call(global,module,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js":98}],102:[function(a,b){(function(c){$=c.$=a("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js"),a("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery.tablesorter.min.js"),__browserify_shim_require__=a,function(){!function(a){a.tablesorter.addParser({id:"alphaNum",is:function(){return!1},format:function(a){var b=a.replace(/(\d{1,2})/g,function(a){var b="00000"+a;return b.substr(b.length-5)});return b},type:"text"})}(jQuery,window)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js":98,"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery.tablesorter.min.js":101}],103:[function(a,b){var c=a("jquery");a("jquery-ui"),a("jquery-range-slider"),a("numberFormatter"),a("bootstrap"),a("datepicker"),a("fileupload"),a("zoomHammer"),a("gridster"),a("tablesorter"),a("dataTables"),a("zdStringParser"),a("fixTableHeader"),a("spectrum"),b.exports=c},{bootstrap:87,dataTables:96,datepicker:85,fileupload:86,fixTableHeader:97,gridster:91,jquery:98,"jquery-range-slider":95,"jquery-ui":99,numberFormatter:100,spectrum:106,tablesorter:101,zdStringParser:102,zoomHammer:93}],104:[function(a,b){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(){function b(){var a=this;a.build_tree=function(b){var c,d,e=a.dyn_tree,f=a.stat_desc.static_tree,g=a.stat_desc.elems,h=-1;for(b.heap_len=0,b.heap_max=r,c=0;g>c;c++)0!==e[2*c]?(b.heap[++b.heap_len]=h=c,b.depth[c]=0):e[2*c+1]=0;for(;2>b.heap_len;)d=b.heap[++b.heap_len]=2>h?++h:0,e[2*d]=1,b.depth[d]=0,b.opt_len--,f&&(b.static_len-=f[2*d+1]);for(a.max_code=h,c=Math.floor(b.heap_len/2);c>=1;c--)b.pqdownheap(e,c);d=g;do c=b.heap[1],b.heap[1]=b.heap[b.heap_len--],b.pqdownheap(e,1),f=b.heap[1],b.heap[--b.heap_max]=c,b.heap[--b.heap_max]=f,e[2*d]=e[2*c]+e[2*f],b.depth[d]=Math.max(b.depth[c],b.depth[f])+1,e[2*c+1]=e[2*f+1]=d,b.heap[1]=d++,b.pqdownheap(e,1);while(2<=b.heap_len);b.heap[--b.heap_max]=b.heap[1],c=a.dyn_tree;for(var i,j,h=a.stat_desc.static_tree,k=a.stat_desc.extra_bits,m=a.stat_desc.extra_base,n=a.stat_desc.max_length,o=0,g=0;l>=g;g++)b.bl_count[g]=0;for(c[2*b.heap[b.heap_max]+1]=0,d=b.heap_max+1;r>d;d++)f=b.heap[d],g=c[2*c[2*f+1]+1]+1,g>n&&(g=n,o++),c[2*f+1]=g,f>a.max_code||(b.bl_count[g]++,i=0,f>=m&&(i=k[f-m]),j=c[2*f],b.opt_len+=j*(g+i),h&&(b.static_len+=j*(h[2*f+1]+i)));if(0!==o){do{for(g=n-1;0===b.bl_count[g];)g--;b.bl_count[g]--,b.bl_count[g+1]+=2,b.bl_count[n]--,o-=2}while(o>0);for(g=n;0!==g;g--)for(f=b.bl_count[g];0!==f;)h=b.heap[--d],h>a.max_code||(c[2*h+1]!=g&&(b.opt_len+=(g-c[2*h+1])*c[2*h],c[2*h+1]=g),f--)}for(c=a.max_code,d=b.bl_count,b=[],f=0,g=1;l>=g;g++)b[g]=f=f+d[g-1]<<1;for(d=0;c>=d;d++)if(k=e[2*d+1],0!==k){f=e,g=2*d,h=b[k]++,m=0;do m|=1&h,h>>>=1,m<<=1;while(0<--k);f[g]=m>>>1}}}function c(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e}function e(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}function f(a,b,c,d){var e=a[2*b];return a=a[2*c],a>e||e==a&&d[b]<=d[c]}function g(){function a(){var a;for(a=0;q>a;a++)Pb[2*a]=0;for(a=0;m>a;a++)Qb[2*a]=0;for(a=0;n>a;a++)Rb[2*a]=0;Pb[2*s]=1,Yb=$b=Sb.opt_len=Sb.static_len=0}function d(a,b){var c,d,e=-1,f=a[1],g=0,h=7,i=4;for(0===f&&(h=138,i=3),a[2*(b+1)+1]=65535,c=0;b>=c;c++)d=f,f=a[2*(c+1)+1],++g<h&&d==f||(i>g?Rb[2*d]+=g:0!==d?(d!=e&&Rb[2*d]++,Rb[2*u]++):10>=g?Rb[2*v]++:Rb[2*w]++,g=0,e=d,0===f?(h=138,i=3):d==f?(h=6,i=3):(h=7,i=4))}function e(a){Sb.pending_buf[Sb.pending++]=a}function g(a){e(255&a),e(a>>>8&255)}function h(a,b){bc>x-b?(ac|=a<<bc&65535,g(ac),ac=a>>>x-bc,bc+=b-x):(ac|=a<<bc&65535,bc+=b)}function i(a,b){var c=2*a;h(65535&b[c],65535&b[c+1])}function j(a,b){var c,d,e=-1,f=a[1],g=0,j=7,k=4;for(0===f&&(j=138,k=3),c=0;b>=c;c++)if(d=f,f=a[2*(c+1)+1],!(++g<j&&d==f)){if(k>g){do i(d,Rb);while(0!==--g)}else 0!==d?(d!=e&&(i(d,Rb),g--),i(u,Rb),h(g-3,2)):10>=g?(i(v,Rb),h(g-3,3)):(i(w,Rb),h(g-11,7));g=0,e=d,0===f?(j=138,k=3):d==f?(j=6,k=3):(j=7,k=4)}}function k(){16==bc?(g(ac),bc=ac=0):bc>=8&&(e(255&ac),ac>>>=8,bc-=8)}function l(a,c){var d,e,f;if(Sb.pending_buf[Zb+2*Yb]=a>>>8&255,Sb.pending_buf[Zb+2*Yb+1]=255&a,Sb.pending_buf[Wb+Yb]=255&c,Yb++,0===a?Pb[2*c]++:($b++,a--,Pb[2*(b._length_code[c]+p+1)]++,Qb[2*b.d_code(a)]++),0===(8191&Yb)&&Lb>2){for(d=8*Yb,e=Fb-Bb,f=0;m>f;f++)d+=Qb[2*f]*(5+b.extra_dbits[f]);if($b<Math.floor(Yb/2)&&d>>>3<Math.floor(e/2))return!0}return Yb==Xb-1}function o(a,c){var d,e,f,g,j=0;if(0!==Yb)do d=Sb.pending_buf[Zb+2*j]<<8&65280|255&Sb.pending_buf[Zb+2*j+1],e=255&Sb.pending_buf[Wb+j],j++,0===d?i(e,a):(f=b._length_code[e],i(f+p+1,a),g=b.extra_lbits[f],0!==g&&(e-=b.base_length[f],h(e,g)),d--,f=b.d_code(d),i(f,c),g=b.extra_dbits[f],0!==g&&(d-=b.base_dist[f],h(d,g)));while(Yb>j);i(s,a),_b=a[2*s+1]}function r(){bc>8?g(ac):bc>0&&e(255&ac),bc=ac=0}function t(a,b,c){h((cb<<1)+(c?1:0),3),r(),_b=8,g(b),g(~b),Sb.pending_buf.set(sb.subarray(a,a+b),Sb.pending),Sb.pending+=b}function M(e){var f,g,i=Bb>=0?Bb:-1,k=Fb-Bb,l=0;if(Lb>0){for(Tb.build_tree(Sb),Ub.build_tree(Sb),d(Pb,Tb.max_code),d(Qb,Ub.max_code),Vb.build_tree(Sb),l=n-1;l>=3&&0===Rb[2*b.bl_order[l]+1];l--);Sb.opt_len+=3*(l+1)+14,f=Sb.opt_len+3+7>>>3,g=Sb.static_len+3+7>>>3,f>=g&&(f=g)}else f=g=k+5;if(f>=k+4&&-1!=i)t(i,k,e);else if(g==f)h((db<<1)+(e?1:0),3),o(c.static_ltree,c.static_dtree);else{for(h((eb<<1)+(e?1:0),3),i=Tb.max_code+1,k=Ub.max_code+1,l+=1,h(i-257,5),h(k-1,5),h(l-4,4),f=0;l>f;f++)h(Rb[2*b.bl_order[f]+1],3);j(Pb,i-1),j(Qb,k-1),o(Pb,Qb)}a(),e&&r(),Bb=Fb,lb.flush_pending()}function $(){var a,b,c,d;do{if(d=tb-Hb-Fb,0===d&&0===Fb&&0===Hb)d=pb;else if(-1==d)d--;else if(Fb>=pb+pb-hb){sb.set(sb.subarray(pb,pb+pb),0),Gb-=pb,Fb-=pb,Bb-=pb,c=a=xb;do b=65535&vb[--c],vb[c]=b>=pb?b-pb:0;while(0!==--a);c=a=pb;do b=65535&ub[--c],ub[c]=b>=pb?b-pb:0;while(0!==--a);d+=pb}if(0===lb.avail_in)break;a=lb.read_buf(sb,Fb+Hb,d),Hb+=a,Hb>=fb&&(wb=255&sb[Fb],wb=(wb<<Ab^255&sb[Fb+1])&zb)}while(hb>Hb&&0!==lb.avail_in)}function ib(a){var b,c=65535;for(c>nb-5&&(c=nb-5);;){if(1>=Hb){if($(),0===Hb&&a==C)return U;if(0===Hb)break}if(Fb+=Hb,Hb=0,b=Bb+c,(0===Fb||Fb>=b)&&(Hb=Fb-b,Fb=b,M(!1),0===lb.avail_out))return U;if(Fb-Bb>=pb-hb&&(M(!1),0===lb.avail_out))return U}return M(a==F),0===lb.avail_out?a==F?W:U:a==F?X:V}function jb(a){var b,c=Jb,d=Fb,e=Ib,f=Fb>pb-hb?Fb-(pb-hb):0,g=Ob,h=rb,i=Fb+gb,j=sb[d+e-1],k=sb[d+e];Ib>=Nb&&(c>>=2),g>Hb&&(g=Hb);do if(b=a,!(sb[b+e]!=k||sb[b+e-1]!=j||sb[b]!=sb[d]||sb[++b]!=sb[d+1])){d+=2,b++;do;while(sb[++d]==sb[++b]&&sb[++d]==sb[++b]&&sb[++d]==sb[++b]&&sb[++d]==sb[++b]&&sb[++d]==sb[++b]&&sb[++d]==sb[++b]&&sb[++d]==sb[++b]&&sb[++d]==sb[++b]&&i>d);if(b=gb-(i-d),d=i-gb,b>e){if(Gb=a,e=b,b>=g)break;j=sb[d+e-1],k=sb[d+e]}}while((a=65535&ub[a&h])>f&&0!==--c);return Hb>=e?e:Hb}function kb(a){for(var b,c,d=0;;){if(hb>Hb){if($(),hb>Hb&&a==C)return U;if(0===Hb)break}if(Hb>=fb&&(wb=(wb<<Ab^255&sb[Fb+(fb-1)])&zb,d=65535&vb[wb],ub[Fb&rb]=vb[wb],vb[wb]=Fb),Ib=Cb,Db=Gb,Cb=fb-1,0!==d&&Kb>Ib&&pb-hb>=(Fb-d&65535)&&(Mb!=A&&(Cb=jb(d)),5>=Cb&&(Mb==z||Cb==fb&&Fb-Gb>4096))&&(Cb=fb-1),Ib>=fb&&Ib>=Cb){c=Fb+Hb-fb,b=l(Fb-1-Db,Ib-fb),Hb-=Ib-1,Ib-=2;do++Fb<=c&&(wb=(wb<<Ab^255&sb[Fb+(fb-1)])&zb,d=65535&vb[wb],ub[Fb&rb]=vb[wb],vb[wb]=Fb);while(0!==--Ib);if(Eb=0,Cb=fb-1,Fb++,b&&(M(!1),0===lb.avail_out))return U}else if(0!==Eb){if((b=l(0,255&sb[Fb-1]))&&M(!1),Fb++,Hb--,0===lb.avail_out)return U}else Eb=1,Fb++,Hb--}return 0!==Eb&&(l(0,255&sb[Fb-1]),Eb=0),M(a==F),0===lb.avail_out?a==F?W:U:a==F?X:V}var lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb=this,Tb=new b,Ub=new b,Vb=new b;Sb.depth=[];var Wb,Xb,Yb,Zb,$b,_b,ac,bc;Sb.bl_count=[],Sb.heap=[],Pb=[],Qb=[],Rb=[],Sb.pqdownheap=function(a,b){for(var c=Sb.heap,d=c[b],e=b<<1;e<=Sb.heap_len&&(e<Sb.heap_len&&f(a,c[e+1],c[e],Sb.depth)&&e++,!f(a,d,c[e],Sb.depth));)c[b]=c[e],b=e,e<<=1;c[b]=d},Sb.deflateInit=function(b,d,e,f,g,h){if(f||(f=bb),g||(g=O),h||(h=B),b.msg=null,d==y&&(d=6),1>g||g>N||f!=bb||9>e||e>15||0>d||d>9||0>h||h>A)return J;for(b.dstate=Sb,qb=e,pb=1<<qb,rb=pb-1,yb=g+7,xb=1<<yb,zb=xb-1,Ab=Math.floor((yb+fb-1)/fb),sb=new Uint8Array(2*pb),ub=[],vb=[],Xb=1<<g+6,Sb.pending_buf=new Uint8Array(4*Xb),nb=4*Xb,Zb=Math.floor(Xb/2),Wb=3*Xb,Lb=d,Mb=h,b.total_in=b.total_out=0,b.msg=null,Sb.pending=0,Sb.pending_out=0,mb=_,ob=C,Tb.dyn_tree=Pb,Tb.stat_desc=c.static_l_desc,Ub.dyn_tree=Qb,Ub.stat_desc=c.static_d_desc,Vb.dyn_tree=Rb,Vb.stat_desc=c.static_bl_desc,bc=ac=0,_b=8,a(),tb=2*pb,b=vb[xb-1]=0;xb-1>b;b++)vb[b]=0;return Kb=S[Lb].max_lazy,Nb=S[Lb].good_length,Ob=S[Lb].nice_length,Jb=S[Lb].max_chain,Hb=Bb=Fb=0,Cb=Ib=fb-1,wb=Eb=0,G},Sb.deflateEnd=function(){return mb!=Z&&mb!=_&&mb!=ab?J:(sb=ub=vb=Sb.pending_buf=null,Sb.dstate=null,mb==_?K:G)},Sb.deflateParams=function(a,b,c){var d=G;return b==y&&(b=6),0>b||b>9||0>c||c>A?J:(S[Lb].func!=S[b].func&&0!==a.total_in&&(d=a.deflate(D)),Lb!=b&&(Lb=b,Kb=S[Lb].max_lazy,Nb=S[Lb].good_length,Ob=S[Lb].nice_length,Jb=S[Lb].max_chain),Mb=c,d)},Sb.deflateSetDictionary=function(a,b,c){a=c;var d=0;if(!b||mb!=Z)return J;if(fb>a)return G;for(a>pb-hb&&(a=pb-hb,d=c-a),sb.set(b.subarray(d,d+a),0),Bb=Fb=a,wb=255&sb[0],wb=(wb<<Ab^255&sb[1])&zb,b=0;a-fb>=b;b++)wb=(wb<<Ab^255&sb[b+(fb-1)])&zb,ub[b&rb]=vb[wb],vb[wb]=b;return G},Sb.deflate=function(a,b){var d,f,g;if(b>F||0>b)return J;if(!a.next_out||!a.next_in&&0!==a.avail_in||mb==ab&&b!=F)return a.msg=T[I-J],J;if(0===a.avail_out)return a.msg=T[I-L],L;if(lb=a,d=ob,ob=b,mb==Z&&(f=bb+(qb-8<<4)<<8,g=(Lb-1&255)>>1,g>3&&(g=3),f|=g<<6,0!==Fb&&(f|=Y),mb=_,f+=31-f%31,e(f>>8&255),e(255&f)),0!==Sb.pending){if(lb.flush_pending(),0===lb.avail_out)return ob=-1,G}else if(0===lb.avail_in&&d>=b&&b!=F)return lb.msg=T[I-L],L;if(mb==ab&&0!==lb.avail_in)return a.msg=T[I-L],L;if(0!==lb.avail_in||0!==Hb||b!=C&&mb!=ab){switch(d=-1,S[Lb].func){case P:d=ib(b);break;case Q:a:{for(d=0;;){if(hb>Hb){if($(),hb>Hb&&b==C){d=U;break a}if(0===Hb)break}if(Hb>=fb&&(wb=(wb<<Ab^255&sb[Fb+(fb-1)])&zb,d=65535&vb[wb],ub[Fb&rb]=vb[wb],vb[wb]=Fb),0!==d&&pb-hb>=(Fb-d&65535)&&Mb!=A&&(Cb=jb(d)),Cb>=fb)if(f=l(Fb-Gb,Cb-fb),Hb-=Cb,Kb>=Cb&&Hb>=fb){Cb--;do Fb++,wb=(wb<<Ab^255&sb[Fb+(fb-1)])&zb,d=65535&vb[wb],ub[Fb&rb]=vb[wb],vb[wb]=Fb;while(0!==--Cb);Fb++}else Fb+=Cb,Cb=0,wb=255&sb[Fb],wb=(wb<<Ab^255&sb[Fb+1])&zb;else f=l(0,255&sb[Fb]),Hb--,Fb++;if(f&&(M(!1),0===lb.avail_out)){d=U;break a}}M(b==F),d=0===lb.avail_out?b==F?W:U:b==F?X:V}break;case R:d=kb(b)}if((d==W||d==X)&&(mb=ab),d==U||d==W)return 0===lb.avail_out&&(ob=-1),G;if(d==V){if(b==D)h(db<<1,3),i(s,c.static_ltree),k(),9>1+_b+10-bc&&(h(db<<1,3),i(s,c.static_ltree),k()),_b=7;else if(t(0,0,!1),b==E)for(d=0;xb>d;d++)vb[d]=0;if(lb.flush_pending(),0===lb.avail_out)return ob=-1,G}}return b!=F?G:H}}function h(){this.total_out=this.avail_out=this.total_in=this.avail_in=this.next_out_index=this.next_in_index=0}function i(a){var b=new h,c=C,d=new Uint8Array(512);"undefined"==typeof a&&(a=y),b.deflateInit(a),b.next_out=d,this.append=function(a,e){var f,g,h=[],i=0,j=0,k=0;if(a.length){b.next_in_index=0,b.next_in=a,b.avail_in=a.length;do{if(b.next_out_index=0,b.avail_out=512,f=b.deflate(c),f!=G)throw"deflating: "+b.msg;b.next_out_index&&h.push(512==b.next_out_index?new Uint8Array(d):new Uint8Array(d.subarray(0,b.next_out_index))),k+=b.next_out_index,e&&0<b.next_in_index&&b.next_in_index!=i&&(e(b.next_in_index),i=b.next_in_index)}while(0<b.avail_in||0===b.avail_out);return g=new Uint8Array(k),h.forEach(function(a){g.set(a,j),j+=a.length}),g}},this.flush=function(){var a,c,e=[],f=0,g=0;do{if(b.next_out_index=0,b.avail_out=512,a=b.deflate(F),a!=H&&a!=G)throw"deflating: "+b.msg;0<512-b.avail_out&&e.push(new Uint8Array(d.subarray(0,b.next_out_index))),g+=b.next_out_index}while(0<b.avail_in||0===b.avail_out);return b.deflateEnd(),c=new Uint8Array(g),e.forEach(function(a){c.set(a,f),f+=a.length}),c}}window.jsPDF=function(){function a(d,e,f,g){d="undefined"==typeof d?"p":d.toString().toLowerCase(),"undefined"==typeof e&&(e="mm"),"undefined"==typeof f&&(f="a4"),"undefined"==typeof g&&"undefined"==typeof zpipe&&(g=!1);var h=f.toString().toLowerCase(),j=[],l=0,m=g;g={a3:[841.89,1190.55],a4:[595.28,841.89],a5:[420.94,595.28],letter:[612,792],legal:[612,1008]};var n,o,p,q,r,s,t,u,v="0 g",w=0,x=[],y=2,z=!1,A=[],B={},C={},D=16,E={title:"",subject:"",author:"",keywords:"",creator:""},F=0,G=0,H={},I=new c(H),J=function(a){return a.toFixed(2)},K=function(a){var b=a.toFixed(0);return 10>a?"0"+b:b},L=function(a){z?x[w].push(a):(j.push(a),l+=a.length+1)},M=function(){return y++,A[y]=l,L(y+" 0 obj"),y},N=function(a){L("stream"),L(a),L("endstream")},O=function(a,b){var c;c=a;var d,e,f,g,h,i,j=b;if(void 0===j&&(j={}),d=j.sourceEncoding?d:"Unicode",f=j.outputEncoding,(j.autoencode||f)&&B[n].metadata&&B[n].metadata[d]&&B[n].metadata[d].encoding&&(d=B[n].metadata[d].encoding,!f&&B[n].encoding&&(f=B[n].encoding),!f&&d.codePages&&(f=d.codePages[0]),"string"==typeof f&&(f=d[f]),f)){for(h=!1,g=[],d=0,e=c.length;e>d;d++)g.push((i=f[c.charCodeAt(d)])?String.fromCharCode(i):c[d]),g[d].charCodeAt(0)>>8&&(h=!0);c=g.join("")}for(d=c.length;void 0===h&&0!==d;)c.charCodeAt(d-1)>>8&&(h=!0),d--;if(h){for(g=j.noBOM?[]:[254,255],d=0,e=c.length;e>d;d++){if(i=c.charCodeAt(d),j=i>>8,j>>8)throw Error("Character at position "+d.toString(10)+" of string '"+c+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");g.push(j),g.push(i-(j<<8))}c=String.fromCharCode.apply(void 0,g)}return c.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},P=function(){w++,z=!0,x[w]=[],L(J(.200025*q)+" w"),L("0 G"),0!==F&&L(F.toString(10)+" J"),0!==G&&L(G.toString(10)+" j"),I.publish("addPage",{pageNumber:w})},Q=function(a,b){var c;void 0===a&&(a=B[n].fontName),void 0===b&&(b=B[n].fontStyle);try{c=C[a][b]}catch(d){c=void 0}if(!c)throw Error("Unable to look up font label for font '"+a+"', '"+b+"'. Refer to getFontList() for available fonts.");return c},R=function(){z=!1,j=[],A=[],L("%PDF-1.3"),s=p*q,t=o*q;var a,b,c,d,e;for(a=1;w>=a;a++){if(M(),L("<</Type /Page"),L("/Parent 1 0 R"),L("/Resources 2 0 R"),L("/Contents "+(y+1)+" 0 R>>"),L("endobj"),b=x[a].join("\n"),M(),m){for(c=[],d=0;d<b.length;++d)c[d]=b.charCodeAt(d);e=adler32cs.from(b),b=new i(6),b.append(new Uint8Array(c)),b=b.flush(),c=[new Uint8Array([120,156]),new Uint8Array(b),new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255])],b="";for(d in c)c.hasOwnProperty(d)&&(b+=String.fromCharCode.apply(null,c[d]));L("<</Length "+b.length+" /Filter [/FlateDecode]>>")}else L("<</Length "+b.length+">>");N(b),L("endobj")}for(A[1]=l,L("1 0 obj"),L("<</Type /Pages"),u="/Kids [",d=0;w>d;d++)u+=3+2*d+" 0 R ";L(u+"]"),L("/Count "+w),L("/MediaBox [0 0 "+J(s)+" "+J(t)+"]"),L(">>"),L("endobj");for(var f in B)B.hasOwnProperty(f)&&(a=B[f],a.objectNumber=M(),L("<</BaseFont/"+a.PostScriptName+"/Type/Font"),"string"==typeof a.encoding&&L("/Encoding/"+a.encoding),L("/Subtype/Type1>>"),L("endobj"));I.publish("putResources"),A[2]=l,L("2 0 obj"),L("<<"),L("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),L("/Font <<");for(var g in B)B.hasOwnProperty(g)&&L("/"+g+" "+B[g].objectNumber+" 0 R");for(L(">>"),L("/XObject <<"),I.publish("putXobjectDict"),L(">>"),L(">>"),L("endobj"),I.publish("postPutResources"),M(),L("<<"),L("/Producer (jsPDF 20120619)"),E.title&&L("/Title ("+O(E.title)+")"),E.subject&&L("/Subject ("+O(E.subject)+")"),E.author&&L("/Author ("+O(E.author)+")"),E.keywords&&L("/Keywords ("+O(E.keywords)+")"),E.creator&&L("/Creator ("+O(E.creator)+")"),f=new Date,L("/CreationDate (D:"+[f.getFullYear(),K(f.getMonth()+1),K(f.getDate()),K(f.getHours()),K(f.getMinutes()),K(f.getSeconds())].join("")+")"),L(">>"),L("endobj"),M(),L("<<"),L("/Type /Catalog"),L("/Pages 1 0 R"),L("/OpenAction [3 0 R /FitH null]"),L("/PageLayout /OneColumn"),I.publish("putCatalog"),L(">>"),L("endobj"),f=l,L("xref"),L("0 "+(y+1)),L("0000000000 65535 f "),g=1;y>=g;g++)a=A[g].toFixed(0),a=10>a.length?Array(11-a.length).join("0")+a:a,L(a+" 00000 n ");return L("trailer"),L("<<"),L("/Size "+(y+1)),L("/Root "+y+" 0 R"),L("/Info "+(y-1)+" 0 R"),L(">>"),L("startxref"),L(f),L("%%EOF"),z=!0,j.join("\n")},S=function(a){var b="S";return"F"===a?b="f":("FD"===a||"DF"===a)&&(b="B"),b},T=function(a,b){var c,d,e,f;switch(a){case void 0:return R();case"save":if(navigator.getUserMedia&&(void 0===window.URL||void 0===window.URL.createObjectURL))return H.output("dataurlnewwindow");for(c=R(),d=c.length,e=new Uint8Array(new ArrayBuffer(d)),f=0;d>f;f++)e[f]=c.charCodeAt(f);c=new Blob([e],{type:"application/pdf"}),k(c,b);break;case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(R());case"datauri":case"dataurl":document.location.href="data:application/pdf;base64,"+btoa(R());break;case"dataurlnewwindow":window.open("data:application/pdf;base64,"+btoa(R()));break;default:throw Error('Output type "'+a+'" is not supported.')}};if("pt"===e)q=1;else if("mm"===e)q=72/25.4;else if("cm"===e)q=72/2.54;else{if("in"!==e)throw"Invalid unit: "+e;q=72}if(g.hasOwnProperty(h))o=g[h][1]/q,p=g[h][0]/q;else try{o=f[1],p=f[0]}catch(U){throw"Invalid format: "+f}if("p"===d||"portrait"===d)d="p",p>o&&(d=p,p=o,o=d);else{if("l"!==d&&"landscape"!==d)throw"Invalid orientation: "+d;d="l",o>p&&(d=p,p=o,o=d)}H.internal={pdfEscape:O,getStyle:S,getFont:function(){return B[Q.apply(H,arguments)]},getFontSize:function(){return D},btoa:btoa,write:function(a){L(1===arguments.length?a:Array.prototype.join.call(arguments," "))},getCoordinateString:function(a){return J(a*q)},getVerticalCoordinateString:function(a){return J((o-a)*q)},collections:{},newObject:M,putStream:N,events:I,scaleFactor:q,pageSize:{width:p,height:o},output:function(a,b){return T(a,b)}},H.addPage=function(){return P(),this},H.text=function(a,b,c,d){var e,f;if("number"==typeof a&&(e=a,f=b,a=c,b=e,c=f),"string"==typeof a&&a.match(/[\n\r]/)&&(a=a.split(/\r\n|\r|\n/g)),"undefined"==typeof d?d={noBOM:!0,autoencode:!0}:(void 0===d.noBOM&&(d.noBOM=!0),void 0===d.autoencode&&(d.autoencode=!0)),"string"==typeof a)d=O(a,d);else{if(!(a instanceof Array))throw Error('Type of text must be string or Array. "'+a+'" is not recognized.');for(a=a.concat(),e=a.length-1;-1!==e;e--)a[e]=O(a[e],d);d=a.join(") Tj\nT* (")}return L("BT\n/"+n+" "+D+" Tf\n"+D+" TL\n"+v+"\n"+J(b*q)+" "+J((o-c)*q)+" Td\n("+d+") Tj\nET"),this},H.line=function(a,b,c,d){return L(J(a*q)+" "+J((o-b)*q)+" m "+J(c*q)+" "+J((o-d)*q)+" l S"),this},H.lines=function(a,b,c,d,e){var f,g,h,i,j,k,l,m;for("number"==typeof a&&(f=a,g=b,a=c,b=f,c=g),e=S(e),d=void 0===d?[1,1]:d,L((b*q).toFixed(3)+" "+((o-c)*q).toFixed(3)+" m "),f=d[0],d=d[1],g=a.length,m=c,c=0;g>c;c++)h=a[c],2===h.length?(b=h[0]*f+b,m=h[1]*d+m,L((b*q).toFixed(3)+" "+((o-m)*q).toFixed(3)+" l")):(i=h[0]*f+b,j=h[1]*d+m,k=h[2]*f+b,l=h[3]*d+m,b=h[4]*f+b,m=h[5]*d+m,L((i*q).toFixed(3)+" "+((o-j)*q).toFixed(3)+" "+(k*q).toFixed(3)+" "+((o-l)*q).toFixed(3)+" "+(b*q).toFixed(3)+" "+((o-m)*q).toFixed(3)+" c"));return L(e),this},H.rect=function(a,b,c,d,e){return e=S(e),L([J(a*q),J((o-b)*q),J(c*q),J(-d*q),"re",e].join(" ")),this},H.triangle=function(a,b,c,d,e,f,g){return this.lines([[c-a,d-b],[e-c,f-d],[a-e,b-f]],a,b,[1,1],g),this},H.roundedRect=function(a,b,c,d,e,f,g){var h=4/3*(Math.SQRT2-1);return this.lines([[c-2*e,0],[e*h,0,e,f-f*h,e,f],[0,d-2*f],[0,f*h,-(e*h),f,-e,f],[-c+2*e,0],[-(e*h),0,-e,-(f*h),-e,-f],[0,-d+2*f],[0,-(f*h),e*h,-f,e,-f]],a+e,b,[1,1],g),this},H.ellipse=function(a,b,c,d,e){e=S(e);var f=4/3*(Math.SQRT2-1)*c,g=4/3*(Math.SQRT2-1)*d;return L([J((a+c)*q),J((o-b)*q),"m",J((a+c)*q),J((o-(b-g))*q),J((a+f)*q),J((o-(b-d))*q),J(a*q),J((o-(b-d))*q),"c"].join(" ")),L([J((a-f)*q),J((o-(b-d))*q),J((a-c)*q),J((o-(b-g))*q),J((a-c)*q),J((o-b)*q),"c"].join(" ")),L([J((a-c)*q),J((o-(b+g))*q),J((a-f)*q),J((o-(b+d))*q),J(a*q),J((o-(b+d))*q),"c"].join(" ")),L([J((a+f)*q),J((o-(b+d))*q),J((a+c)*q),J((o-(b+g))*q),J((a+c)*q),J((o-b)*q),"c",e].join(" ")),this},H.circle=function(a,b,c,d){return this.ellipse(a,b,c,c,d)},H.setProperties=function(a){for(var b in E)E.hasOwnProperty(b)&&a[b]&&(E[b]=a[b]);return this},H.setFontSize=function(a){return D=a,this},H.setFont=function(a,b){return n=Q(a,b),this},H.setFontStyle=H.setFontType=function(a){return n=Q(void 0,a),this},H.getFontList=function(){var a,b,c,d={};for(a in C)if(C.hasOwnProperty(a))for(b in d[a]=c=[],C[a])C[a].hasOwnProperty(b)&&c.push(b);return d},H.setLineWidth=function(a){return L((a*q).toFixed(2)+" w"),this},H.setDrawColor=function(a,b,c,d){return a=void 0===b||void 0===d&&a===b===c?"string"==typeof a?a+" G":J(a/255)+" G":void 0===d?"string"==typeof a?[a,b,c,"RG"].join(" "):[J(a/255),J(b/255),J(c/255),"RG"].join(" "):"string"==typeof a?[a,b,c,d,"K"].join(" "):[J(a),J(b),J(c),J(d),"K"].join(" "),L(a),this},H.setFillColor=function(a,b,c,d){return a=void 0===b||void 0===d&&a===b===c?"string"==typeof a?a+" g":J(a/255)+" g":void 0===d?"string"==typeof a?[a,b,c,"rg"].join(" "):[J(a/255),J(b/255),J(c/255),"rg"].join(" "):"string"==typeof a?[a,b,c,d,"k"].join(" "):[J(a),J(b),J(c),J(d),"k"].join(" "),L(a),this},H.setTextColor=function(a,b,c){return v=0===a&&0===b&&0===c||"undefined"==typeof b?(a/255).toFixed(3)+" g":[(a/255).toFixed(3),(b/255).toFixed(3),(c/255).toFixed(3),"rg"].join(" "),this},H.CapJoinStyles={0:0,butt:0,but:0,bevel:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,milter:2},H.setLineCap=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw Error("Line cap style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return F=b,L(b.toString(10)+" J"),this},H.setLineJoin=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw Error("Line join style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return G=b,L(b.toString(10)+" j"),this},H.output=T,H.save=function(a){H.output("save",a)};for(r in a.API)if(a.API.hasOwnProperty(r))if("events"===r&&a.API.events.length)for(d=I,e=a.API.events,g=h=f=void 0,g=e.length-1;-1!==g;g--)f=e[g][0],h=e[g][1],d.subscribe.apply(d,[f].concat("function"==typeof h?[h]:h));else H[r]=a.API[r];for(r=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"]],d=0,e=r.length;e>d;d++){g=r[d][0];var V=r[d][1],h=r[d][2];f="F"+(b(B)+1).toString(10),g=B[f]={id:f,PostScriptName:g,fontName:V,fontStyle:h,encoding:"StandardEncoding",metadata:{}};var W=f;void 0===C[V]&&(C[V]={}),C[V][h]=W,I.publish("addFont",g),h=f,f=r[d][0].split("-"),g=f[0],f=f[1]||"",void 0===C[g]&&(C[g]={}),C[g][f]=h}return I.publish("addFonts",{fonts:B,dictionary:C}),n="F1",P(),I.publish("initialized"),H}"undefined"==typeof btoa&&(window.btoa=function(a){var b,c,d,e,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),g=0,h=0,i="",i=[];do b=a.charCodeAt(g++),c=a.charCodeAt(g++),d=a.charCodeAt(g++),e=b<<16|c<<8|d,b=e>>18&63,c=e>>12&63,d=e>>6&63,e&=63,i[h++]=f[b]+f[c]+f[d]+f[e];while(g<a.length);return i=i.join(""),a=a.length%3,(a?i.slice(0,a-3):i)+"===".slice(a||3)}),"undefined"==typeof atob&&(window.atob=function(a){var b,c,d,e,f,g=0,h=0;e="";var i=[];if(!a)return a;a+="";do b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)),d=b<<18|c<<12|e<<6|f,b=d>>16&255,c=d>>8&255,d&=255,i[h++]=64===e?String.fromCharCode(b):64===f?String.fromCharCode(b,c):String.fromCharCode(b,c,d);while(g<a.length);return e=i.join("")});var b="function"==typeof Object.keys?function(a){return Object.keys(a).length}:function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},c=function(a){this.topics={},this.context=a,this.publish=function(a,b){if(this.topics[a]){var c,d,e,f,g=this.topics[a],h=[],i=function(){};for(b=Array.prototype.slice.call(arguments,1),d=0,e=g.length;e>d;d++)f=g[d],c=f[0],f[1]&&(f[0]=i,h.push(d)),c.apply(this.context,b);for(d=0,e=h.length;e>d;d++)g.splice(h[d],1)}},this.subscribe=function(a,b,c){return this.topics[a]?this.topics[a].push([b,c]):this.topics[a]=[[b,c]],{topic:a,callback:b}},this.unsubscribe=function(a){if(this.topics[a.topic]){var b,c,d=this.topics[a.topic];for(b=0,c=d.length;c>b;b++)d[b][0]===a.callback&&d.splice(b,1)}}};return a.API={events:[]},a}(),function(a){var b=function(){var a,b=this.internal.collections.addImage_images;for(a in b){var c=b[a],d=this.internal.newObject(),e=this.internal.write,f=this.internal.putStream;if(c.n=d,e("<</Type /XObject"),e("/Subtype /Image"),e("/Width "+c.w),e("/Height "+c.h),"Indexed"===c.cs?e("/ColorSpace [/Indexed /DeviceRGB "+(c.pal.length/3-1)+" "+(d+1)+" 0 R]"):(e("/ColorSpace /"+c.cs),"DeviceCMYK"===c.cs&&e("/Decode [1 0 1 0 1 0 1 0]")),e("/BitsPerComponent "+c.bpc),"f"in c&&e("/Filter /"+c.f),"dp"in c&&e("/DecodeParms <<"+c.dp+">>"),"trns"in c&&c.trns.constructor==Array)for(var g="",h=0;h<c.trns.length;h++)g+=c[g][h]+" "+c.trns[h]+" ",e("/Mask ["+g+"]");"smask"in c&&e("/SMask "+(d+1)+" 0 R"),e("/Length "+c.data.length+">>"),f(c.data),e("endobj")}},c=function(){var a,b,c=this.internal.collections.addImage_images,d=this.internal.write;for(b in c)a=c[b],d("/I"+a.i,a.n,"0","R")};a.addImage=function(a,d,e,f,g,h){if("object"==typeof a&&1===a.nodeType){d=document.createElement("canvas"),d.width=a.clientWidth,d.height=a.clientHeight;var i=d.getContext("2d");if(!i)throw"addImage requires canvas to be supported by browser.";i.drawImage(a,0,0,d.width,d.height),a=d.toDataURL("image/jpeg"),d="JPEG"}if("JPEG"!==d.toUpperCase())throw Error("addImage currently only supports format 'JPEG', not '"+d+"'");var j;d=this.internal.collections.addImage_images;var i=this.internal.getCoordinateString,k=this.internal.getVerticalCoordinateString;if("data:image/jpeg;base64,"===a.substring(0,23)&&(a=atob(a.replace("data:image/jpeg;base64,",""))),d)if(Object.keys)j=Object.keys(d).length;else{var l=d,m=0;for(j in l)l.hasOwnProperty(j)&&m++;j=m}else j=0,this.internal.collections.addImage_images=d={},this.internal.events.subscribe("putResources",b),this.internal.events.subscribe("putXobjectDict",c);a:{var n,l=a;if(255===!l.charCodeAt(0)||216===!l.charCodeAt(1)||255===!l.charCodeAt(2)||224===!l.charCodeAt(3)||74===!l.charCodeAt(6)||70===!l.charCodeAt(7)||73===!l.charCodeAt(8)||70===!l.charCodeAt(9)||0===!l.charCodeAt(10))throw Error("getJpegSize requires a binary jpeg file");n=256*l.charCodeAt(4)+l.charCodeAt(5);for(var m=4,o=l.length;o>m;){if(m+=n,255!==l.charCodeAt(m))throw Error("getJpegSize could not find the size of the image");if(192===l.charCodeAt(m+1)){n=256*l.charCodeAt(m+5)+l.charCodeAt(m+6),l=256*l.charCodeAt(m+7)+l.charCodeAt(m+8),l=[l,n];break a}m+=2,n=256*l.charCodeAt(m)+l.charCodeAt(m+1)}l=void 0}return a={w:l[0],h:l[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:j,data:a},d[j]=a,!g&&!h&&(h=g=-96),0>g&&(g=-72*a.w/g/this.internal.scaleFactor),0>h&&(h=-72*a.h/h/this.internal.scaleFactor),0===g&&(g=h*a.w/a.h),0===h&&(h=g*a.h/a.w),this.internal.write("q",i(g),"0 0",i(h),i(e),k(f+h),"cm /I"+a.i,"Do Q"),this}}(jsPDF.API),function(a){function b(a,b,c,d){return this.pdf=a,this.x=b,this.y=c,this.settings=d,this.init(),this}function c(a){var b=h[a];return b?b:(b={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[a],void 0!==b||(b=parseFloat(a))?h[a]=b/16:(b=a.match(/([\d\.]+)(px)/),h[a]=3===b.length?parseFloat(b[1])/16:1))}function d(a,b,h){var i,j=a.childNodes;i=$(a),a={};for(var k,l=i.css("font-family").split(","),m=l.shift();!k&&m;)k=e[m.trim().toLowerCase()],m=l.shift();for(a["font-family"]=k||"times",a["font-style"]=g[i.css("font-style")]||"normal",k=f[i.css("font-weight")]||"normal","bold"===k&&(a["font-style"]="normal"===a["font-style"]?k:k+a["font-style"]),a["font-size"]=c(i.css("font-size"))||1,a["line-height"]=c(i.css("line-height"))||1,a.display="inline"===i.css("display")?"inline":"block","block"===a.display&&(a["margin-top"]=c(i.css("margin-top"))||0,a["margin-bottom"]=c(i.css("margin-bottom"))||0,a["padding-top"]=c(i.css("padding-top"))||0,a["padding-bottom"]=c(i.css("padding-bottom"))||0),(k="block"===a.display)&&(b.setBlockBoundary(),b.setBlockStyle(a)),l=0,m=j.length;m>l;l++)if(i=j[l],"object"==typeof i)if(1===i.nodeType&&"SCRIPT"!=i.nodeName){var n=i,o=b,p=h,q=!1,r=void 0,s=void 0,t=p["#"+n.id];if(t)if("function"==typeof t)q=t(n,o);else for(r=0,s=t.length;!q&&r!==s;)q=t[r](n,o),r++;if(t=p[n.nodeName],!q&&t)if("function"==typeof t)q=t(n,o);else for(r=0,s=t.length;!q&&r!==s;)q=t[r](n,o),r++;q||d(i,b,h)}else 3===i.nodeType&&b.addText(i.nodeValue,a);else"string"==typeof i&&b.addText(i,a);k&&b.setBlockBoundary()}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")}),b.prototype.init=function(){this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},b.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y}},b.prototype.splitFragmentsIntoLines=function(a,b){for(var c,d,e,f,g,h=this.pdf.internal.scaleFactor,i={},j=[],k=[j],l=0,m=this.settings.width;a.length;)if(f=a.shift(),g=b.shift(),f)if(c=g["font-family"],d=g["font-style"],e=i[c+d],e||(e=this.pdf.internal.getFont(c,d).metadata.Unicode,i[c+d]=e),c={widths:e.widths,kerning:e.kerning,fontSize:12*g["font-size"],textIndent:l},d=this.pdf.getStringUnitWidth(f,c)*c.fontSize/h,l+d>m){for(f=this.pdf.splitTextToSize(f,m,c),j.push([f.shift(),g]);f.length;)j=[[f.shift(),g]],k.push(j);
l=this.pdf.getStringUnitWidth(j[0][0],c)*c.fontSize/h}else j.push([f,g]),l+=d;return k},b.prototype.RenderTextFragment=function(a,b){var c=this.pdf.internal.getFont(b["font-family"],b["font-style"]);this.pdf.internal.write("/"+c.id,(12*b["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(a)+") Tj")},b.prototype.renderParagraph=function(){for(var a,b=this.paragraph.text,c=0,d=b.length,e=!1,f=!1;!e&&c!==d;)(a=b[c]=b[c].trimLeft())&&(e=!0),c++;for(c=d-1;d&&!f&&-1!==c;)(a=b[c]=b[c].trimRight())&&(f=!0),c--;for(e=/\s+$/g,f=!0,c=0;c!==d;c++)a=b[c].replace(/\s+/g," "),f&&(a=a.trimLeft()),a&&(f=e.test(a)),b[c]=a;if(c=this.paragraph.style,a=(d=this.paragraph.blockstyle)||{},this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:d},b.join("").trim()){b=this.splitFragmentsIntoLines(b,c),c=12/this.pdf.internal.scaleFactor,e=(Math.max((d["margin-top"]||0)-(a["margin-bottom"]||0),0)+(d["padding-top"]||0))*c,d=((d["margin-bottom"]||0)+(d["padding-bottom"]||0))*c,a=this.pdf.internal.write;var g,h;for(this.y+=e,a("q","BT",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");b.length;){for(e=b.shift(),g=f=0,h=e.length;g!==h;g++)e[g][0].trim()&&(f=Math.max(f,e[g][1]["line-height"],e[g][1]["font-size"]));for(a(0,(-12*f).toFixed(2),"Td"),g=0,h=e.length;g!==h;g++)e[g][0]&&this.RenderTextFragment(e[g][0],e[g][1]);this.y+=f*c}a("ET","Q"),this.y+=d}},b.prototype.setBlockBoundary=function(){this.renderParagraph()},b.prototype.setBlockStyle=function(a){this.paragraph.blockstyle=a},b.prototype.addText=function(a,b){this.paragraph.text.push(a),this.paragraph.style.push(b)};var e={helvetica:"helvetica","sans-serif":"helvetica",serif:"times",times:"times","times new roman":"times",monospace:"courier",courier:"courier"},f={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},g={normal:"normal",italic:"italic",oblique:"italic"},h={normal:1};a.fromHTML=function(a,c,e,f){if("string"==typeof a){var g="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0);$('<div style="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;"><iframe style="height:1px;width:1px" name="'+g+'" /></div>').appendTo(document.body),a=$(window.frames[g].document.body).html(a)[0]}return c=new b(this,c,e,f),d(a,c,f.elementHandlers),c.dispose()}}(jsPDF.API),function(a){a.addSVG=function(a,b,c,d,e){if(void 0===b||void 0===b)throw Error("addSVG needs values for 'x' and 'y'");var f=document.createElement("iframe"),g=document.createElement("style");g.type="text/css",g.styleSheet?g.styleSheet.cssText=".jsPDF_sillysvg_iframe {display:none;position:absolute;}":g.appendChild(document.createTextNode(".jsPDF_sillysvg_iframe {display:none;position:absolute;}")),document.getElementsByTagName("head")[0].appendChild(g),f.name="childframe",f.setAttribute("width",0),f.setAttribute("height",0),f.setAttribute("frameborder","0"),f.setAttribute("scrolling","no"),f.setAttribute("seamless","seamless"),f.setAttribute("class","jsPDF_sillysvg_iframe"),document.body.appendChild(f),f=(f.contentWindow||f.contentDocument).document,f.write(a),f.close(),f=f.getElementsByTagName("svg")[0],a=[1,1];var g=parseFloat(f.getAttribute("width")),h=parseFloat(f.getAttribute("height"));for(g&&h&&(d&&e?a=[d/g,e/h]:d?a=[d/g,d/g]:e&&(a=[e/h,e/h])),f=f.childNodes,d=0,e=f.length;e>d;d++)if(g=f[d],g.tagName&&"PATH"===g.tagName.toUpperCase()){for(var g=g.getAttribute("d").split(" "),h=parseFloat(g[1]),i=parseFloat(g[2]),j=[],k=3,l=g.length;l>k;)"c"===g[k]?(j.push([parseFloat(g[k+1]),parseFloat(g[k+2]),parseFloat(g[k+3]),parseFloat(g[k+4]),parseFloat(g[k+5]),parseFloat(g[k+6])]),k+=7):"l"===g[k]?(j.push([parseFloat(g[k+1]),parseFloat(g[k+2])]),k+=3):k+=1;g=[h,i,j],g[0]=g[0]*a[0]+b,g[1]=g[1]*a[1]+c,this.lines.call(this,g[2],g[0],g[1],a)}return this}}(jsPDF.API),function(a){var b=a.getCharWidthsArray=function(a,b){b||(b={});var c,d,e,f=b.widths?b.widths:this.internal.getFont().metadata.Unicode.widths,g=f.fof?f.fof:1,h=b.kerning?b.kerning:this.internal.getFont().metadata.Unicode.kerning,i=h.fof?h.fof:1,j=0,k=f[0]||g,l=[];for(c=0,d=a.length;d>c;c++)e=a.charCodeAt(c),l.push((f[e]||k)/g+(h[e]&&h[e][j]||0)/i),j=e;return l},c=function(a){for(var b=a.length,c=0;b;)b--,c+=a[b];return c};a.getStringUnitWidth=function(a,d){return c(b.call(this,a,d))};var d=function(a,d,e){e||(e={});var f=b(" ",e)[0],g=a.split(" "),h=[];a=[h];var i,j,k,l,m=e.textIndent||0,n=0,o=0;for(k=0,l=g.length;l>k;k++){if(i=g[k],j=b(i,e),o=c(j),m+n+o>d){if(o>d){for(var o=i,p=j,q=d,r=[],s=0,t=o.length,u=0;s!==t&&u+p[s]<d-(m+n);)u+=p[s],s++;for(r.push(o.slice(0,s)),m=s,u=0;s!==t;)u+p[s]>q&&(r.push(o.slice(m,s)),u=0,m=s),u+=p[s],s++;for(m!==s&&r.push(o.slice(m,s)),m=r,h.push(m.shift()),h=[m.pop()];m.length;)a.push([m.shift()]);o=c(j.slice(i.length-h[0].length))}else h=[i];a.push(h),m=o}else h.push(i),m+=n+o;n=f}for(d=[],k=0,l=a.length;l>k;k++)d.push(a[k].join(" "));return d};a.splitTextToSize=function(a,b,c){c||(c={});var e,f=c.fontSize||this.internal.getFontSize(),g=c;e={0:1};var h={};for(g.widths&&g.kerning?e={widths:g.widths,kerning:g.kerning}:(g=this.internal.getFont(g.fontName,g.fontStyle),e=g.metadata.Unicode?{widths:g.metadata.Unicode.widths||e,kerning:g.metadata.Unicode.kerning||h}:{widths:e,kerning:h}),a=a.match(/[\n\r]/)?a.split(/\r\n|\r|\n/g):[a],b=1*this.internal.scaleFactor*b/f,e.textIndent=c.textIndent?1*c.textIndent*this.internal.scaleFactor/f:0,h=[],c=0,f=a.length;f>c;c++)h=h.concat(d(a[c],b,e));return h}}(jsPDF.API),function(a){var b=function(a){for(var b={},c=0;16>c;c++)b["klmnopqrstuvwxyz"[c]]="0123456789abcdef"[c];for(var d,e,f,g={},h=1,i=g,j=[],k="",l="",m=a.length-1,c=1;c!=m;)e=a[c],c+=1,"'"==e?d?(f=d.join(""),d=void 0):d=[]:d?d.push(e):"{"==e?(j.push([i,f]),i={},f=void 0):"}"==e?(e=j.pop(),e[0][e[1]]=i,f=void 0,i=e[0]):"-"==e?h=-1:void 0===f?b.hasOwnProperty(e)?(k+=b[e],f=parseInt(k,16)*h,h=1,k=""):k+=e:b.hasOwnProperty(e)?(l+=b[e],i[f]=parseInt(l,16)*h,h=1,f=void 0,l=""):l+=e;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:b("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},e={Unicode:{"Courier-Oblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":b("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":b("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":b("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":b("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};a.events.push(["addFonts",function(a){var b,c,f,g;for(c in a.fonts)a.fonts.hasOwnProperty(c)&&(b=a.fonts[c],(f=e.Unicode[b.PostScriptName])&&(g=b.metadata.Unicode?b.metadata.Unicode:b.metadata.Unicode={},g.widths=f.widths,g.kerning=f.kerning),(f=d.Unicode[b.PostScriptName])&&(g=b.metadata.Unicode?b.metadata.Unicode:b.metadata.Unicode={},g.encoding=f,f.codePages&&f.codePages.length&&(b.encoding=f.codePages[0])))}])}(jsPDF.API);var j=j||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},d=function(a,b,c){this.data=a,this.size=a.length,this.type=b,this.encoding=c},e=c.prototype,f=d.prototype,g=a.FileReaderSync,h=function(a){this.code=this[this.name=a]},i="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),j=i.length,k=a.URL||a.webkitURL||a,l=k.createObjectURL,m=k.revokeObjectURL,n=k,o=a.btoa,p=a.atob,q=!1,r=function(a){q=!a},s=a.ArrayBuffer,t=a.Uint8Array;for(c.fake=f.fake=!0;j--;)h.prototype[i[j]]=j+1;try{t&&r.apply(0,new t(1))}catch(u){}return k.createObjectURL||(n=a.URL={}),n.createObjectURL=function(a){var b=a.type;return null===b&&(b="application/octet-stream"),a instanceof d?(b="data:"+b,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):o?b+";base64,"+o(a.data):b+","+encodeURIComponent(a.data)):l?l.call(k,a):void 0},n.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&m&&m.call(k,a)},e.append=function(a){var c=this.data;if(t&&a instanceof s)if(q)c.push(String.fromCharCode.apply(String,new t(a)));else{c="",a=new t(a);for(var e=0,f=a.length;f>e;e++)c+=String.fromCharCode(a[e])}else if("Blob"===b(a)||"File"===b(a)){if(!g)throw new h("NOT_READABLE_ERR");e=new g,c.push(e.readAsBinaryString(a))}else a instanceof d?"base64"===a.encoding&&p?c.push(p(a.data)):"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!=typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))},e.getBlob=function(a){return arguments.length||(a=null),new d(this.data.join(""),a,"raw")},e.toString=function(){return"[object BlobBuilder]"},f.slice=function(a,b,c){var e=arguments.length;return 3>e&&(c=null),new d(this.data.slice(a,e>1?b:this.data.length),c,this.encoding)},f.toString=function(){return"[object Blob]"},c}(self),k=k||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(a){var b=a.document,c=a.URL||a.webkitURL||a,d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=a.webkitRequestFileSystem,g=a.requestFileSystem||f||a.mozRequestFileSystem,h=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},i=0,j=[],k=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){h(f)}}},l=function(c,h){var l,m,n,o=this,p=c.type,q=!1,r=function(){var b=(a.URL||a.webkitURL||a).createObjectURL(c);return j.push(b),b},s=function(){k(o,["writestart","progress","write","writeend"])},t=function(){(q||!l)&&(l=r(c)),m&&(m.location.href=l),o.readyState=o.DONE,s()},u=function(a){return function(){return o.readyState!==o.DONE?a.apply(this,arguments):void 0}},v={create:!0,exclusive:!1};return o.readyState=o.INIT,h||(h="download"),e&&(l=r(c),d.href=l,d.download=h,n=b.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(n))?(o.readyState=o.DONE,void s()):(a.chrome&&p&&"application/octet-stream"!==p&&(n=c.slice||c.webkitSlice,c=n.call(c,0,c.size,"application/octet-stream"),q=!0),f&&"download"!==h&&(h+=".download"),m="application/octet-stream"===p||f?a:a.open(),void(g?(i+=c.size,g(a.TEMPORARY,i,u(function(a){a.root.getDirectory("saved",v,u(function(a){var b=function(){a.getFile(h,v,u(function(a){a.createWriter(u(function(b){b.onwriteend=function(b){m.location.href=a.toURL(),j.push(a),o.readyState=o.DONE,k(o,"writeend",b)},b.onerror=function(){var a=b.error;a.code!==a.ABORT_ERR&&t()},["writestart","progress","write","abort"].forEach(function(a){b["on"+a]=o["on"+a]}),b.write(c),o.abort=function(){b.abort(),o.readyState=o.DONE},o.readyState=o.WRITING}),t)}),t)};a.getFile(h,{create:!1},u(function(a){a.remove(),b()}),u(function(a){a.code===a.NOT_FOUND_ERR?b():t()}))}),t)}),t)):t()))},m=l.prototype;return m.abort=function(){this.readyState=this.DONE,k(this,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,a.addEventListener("unload",function(){for(var a=j.length;a--;){var b=j[a];"string"==typeof b?c.revokeObjectURL(b):b.remove()}j.length=0},!1),function(a,b){return new l(a,b)}}(self),l=15,m=30,n=19,o=29,p=256,q=p+1+o,r=2*q+1,s=256,t=7,u=16,v=17,w=18,x=16,y=-1,z=1,A=2,B=0,C=0,D=1,E=3,F=4,G=0,H=1,I=2,J=-2,K=-3,L=-5,M=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];b._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],b.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],b.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],b.d_code=function(a){return 256>a?M[a]:M[256+(a>>>7)]},b.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],b.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],b.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],c.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],c.static_l_desc=new c(c.static_ltree,b.extra_lbits,p+1,q,l),c.static_d_desc=new c(c.static_dtree,b.extra_dbits,0,m,l),c.static_bl_desc=new c(null,b.extra_blbits,0,n,t);var N=9,O=8,P=0,Q=1,R=2,S=[new e(0,0,0,0,P),new e(4,4,8,4,Q),new e(4,5,16,8,Q),new e(4,6,32,32,Q),new e(4,4,16,16,R),new e(8,16,32,32,R),new e(8,16,128,128,R),new e(8,32,128,256,R),new e(32,128,258,1024,R),new e(32,258,258,4096,R)],T="need dictionary;stream end;;;stream error;data error;;buffer error;;".split(";"),U=0,V=1,W=2,X=3,Y=32,Z=42,_=113,ab=666,bb=8,cb=0,db=1,eb=2,fb=3,gb=258,hb=gb+fb+1;h.prototype={deflateInit:function(a,b){return this.dstate=new g,b||(b=l),this.dstate.deflateInit(this,a,b)},deflate:function(a){return this.dstate?this.dstate.deflate(this,a):J},deflateEnd:function(){if(!this.dstate)return J;var a=this.dstate.deflateEnd();return this.dstate=null,a},deflateParams:function(a,b){return this.dstate?this.dstate.deflateParams(this,a,b):J},deflateSetDictionary:function(a,b){return this.dstate?this.dstate.deflateSetDictionary(this,a,b):J},read_buf:function(a,b,c){var d=this.avail_in;return d>c&&(d=c),0===d?0:(this.avail_in-=d,a.set(this.next_in.subarray(this.next_in_index,this.next_in_index+d),b),this.next_in_index+=d,this.total_in+=d,d)},flush_pending:function(){var a=this.dstate.pending;a>this.avail_out&&(a=this.avail_out),0!==a&&(this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out,this.dstate.pending_out+a),this.next_out_index),this.next_out_index+=a,this.dstate.pending_out+=a,this.total_out+=a,this.avail_out-=a,this.dstate.pending-=a,0===this.dstate.pending&&(this.dstate.pending_out=0))
}},void function(b,c){"object"==typeof a?a.exports=c():"function"==typeof d?d(c):b.adler32cs=c()}(this,function(){var a,b="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,c=null;if(b){try{var d=__browserify_shim_require__("buffer");"function"==typeof d.Buffer&&(c=d.Buffer)}catch(e){}a=function(a){return a instanceof ArrayBuffer||null!==c&&a instanceof c}}else a=function(){return!1};var f;f=null!==c?function(a){return new c(a,"utf8").toString("binary")}:function(a){return unescape(encodeURIComponent(a))};var g=function(a,b){for(var c=65535&a,d=a>>>16,e=0,f=b.length;f>e;e++)c=(c+(255&b.charCodeAt(e)))%65521,d=(d+c)%65521;return(d<<16|c)>>>0},h=function(a,b){for(var c=65535&a,d=a>>>16,e=0,f=b.length;f>e;e++)c=(c+b[e])%65521,d=(d+c)%65521;return(d<<16|c)>>>0},d={},i=function(a){if(!(this instanceof i))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(a=null==a?1:+a))throw Error("First arguments needs to be a finite number.");this.checksum=a>>>0},j=i.prototype={};j.constructor=i;var k=function(a){if(!(this instanceof i))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw Error("First argument needs to be a string.");this.checksum=g(1,a.toString())};k.prototype=j,i.from=k,k=function(a){if(!(this instanceof i))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw Error("First argument needs to be a string.");a=f(a.toString()),this.checksum=g(1,a)},k.prototype=j,i.fromUtf8=k,b&&(k=function(b){if(!(this instanceof i))throw new TypeError("Constructor cannot called be as a function.");if(!a(b))throw Error("First argument needs to be ArrayBuffer.");return b=new Uint8Array(b),this.checksum=h(1,b)},k.prototype=j,i.fromBuffer=k),j.update=function(a){if(null==a)throw Error("First argument needs to be a string.");return a=a.toString(),this.checksum=g(this.checksum,a)},j.updateUtf8=function(a){if(null==a)throw Error("First argument needs to be a string.");return a=f(a.toString()),this.checksum=g(this.checksum,a)},b&&(j.updateBuffer=function(b){if(!a(b))throw Error("First argument needs to be ArrayBuffer.");return b=new Uint8Array(b),this.checksum=h(this.checksum,b)}),j.clone=function(){return new l(this.checksum)};var l=d.Adler32=i;return d.from=function(a){if(null==a)throw Error("First argument needs to be a string.");return g(1,a.toString())},d.fromUtf8=function(a){if(null==a)throw Error("First argument needs to be a string.");return a=f(a.toString()),g(1,a)},b&&(d.fromBuffer=function(b){if(!a(b))throw Error("First argument need to be ArrayBuffer.");return b=new Uint8Array(b),h(1,b)}),d})}(),e("undefined"!=typeof jsPDF?jsPDF:window.jsPDF)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],105:[function(a,b){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(a){var c=function(){"use strict";var a="s",b=function(a){var b=-a.getTimezoneOffset();return null!==b?b:0},d=function(a,b,c){var d=new Date;return void 0!==a&&d.setFullYear(a),d.setDate(c),d.setMonth(b),d},e=function(a){return b(d(a,0,2))},f=function(a){return b(d(a,5,2))},g=function(a){var c=a.getMonth()>7?f(a.getFullYear()):e(a.getFullYear()),d=b(a);return c-d!==0},h=function(){var b=e(),c=f(),d=e()-f();return 0>d?b+",1":d>0?c+",1,"+a:b+",0"},i=function(){var a=h();return new c.TimeZone(c.olson.timezones[a])};return{determine:i,date_is_dst:g}}();c.TimeZone=function(a){"use strict";var b=null,d=function(){return b},e=function(){for(var a=c.olson.ambiguity_list[b],d=a.length,e=0,f=a[0];d>e;e+=1)if(f=a[e],c.date_is_dst(c.olson.dst_start_dates[f]))return void(b=f)},f=function(){return"undefined"!=typeof c.olson.ambiguity_list[b]};return b=a,f()&&e(),{name:d}},c.olson={},c.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"Etc/GMT+2","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Etc/UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},c.olson.dst_start_dates=function(){"use strict";var a=new Date(2010,6,15,1,0,0,0);return{"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"America/Asuncion":new Date(2012,9,7,3,0,0,0),"America/Santiago":new Date(2012,9,3,3,0,0,0),"America/Campo_Grande":new Date(2012,9,21,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2012,2,10,2,0,0,0),"America/New_York":new Date(2012,2,10,7,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Helsinki":new Date(2011,2,27,4,0,0,0),"Europe/Istanbul":new Date(2011,2,28,5,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Asia/Gaza":new Date(2009,2,28,0,30,0,0),"Africa/Cairo":new Date(2009,3,25,0,30,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0),"Europe/Moscow":a,"Asia/Yekaterinburg":a,"Asia/Omsk":a,"Asia/Krasnoyarsk":a,"Asia/Irkutsk":a,"Asia/Yakutsk":a,"Asia/Vladivostok":a,"Asia/Kamchatka":a,"Europe/Minsk":a,"Australia/Perth":new Date(2008,10,1,1,0,0,0)}}(),c.olson.ambiguity_list={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Santiago":["America/Santiago","America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Beirut","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Asia/Gaza"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"],"Asia/Dubai":["Europe/Moscow"],"Asia/Dhaka":["Asia/Yekaterinburg"],"Asia/Jakarta":["Asia/Omsk"],"Asia/Shanghai":["Asia/Krasnoyarsk","Australia/Perth"],"Asia/Tokyo":["Asia/Irkutsk"],"Australia/Brisbane":["Asia/Yakutsk"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Tarawa":["Asia/Kamchatka"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"],"Asia/Baghdad":["Europe/Minsk"]},"undefined"!=typeof b?b.jstz=c:a.jstz=c}(this),e("undefined"!=typeof jstz?jstz:window.jstz)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],106:[function(a,b){(function(c){$=c.$=a("/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=a,function(){!function(a,b,c){function d(a,b,c,d){for(var e=[],f=0;f<a.length;f++){var g=a[f];if(g){var h=tinycolor(g),i=h.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";i+=tinycolor.equals(b,g)?" sp-thumb-active":"";var j=h.toString(d||"rgb"),k=r?"background-color:"+h.toRgbString():"filter:"+h.toFilter();e.push('<span title="'+j+'" data-color="'+h.toRgbString()+'" class="'+i+'"><span class="sp-thumb-inner" style="'+k+';" /></span>')}else{var l="sp-clear-display";e.push('<span title="No Color Selected" data-color="" style="background-color:transparent;" class="'+l+'"></span>')}}return"<div class='sp-cf "+c+"'>"+e.join("")+"</div>"}function e(){for(var a=0;a<p.length;a++)p[a]&&p[a].hide()}function f(a,c){var d=b.extend({},o,a);return d.callbacks={move:l(d.move,c),change:l(d.change,c),show:l(d.show,c),hide:l(d.hide,c),beforeShow:l(d.beforeShow,c)},d}function g(g,j){function l(){if(T.showPaletteOnly&&(T.showPalette=!0),T.palette){lb=T.palette.slice(0),mb=b.isArray(lb[0])?lb:[lb],nb={};for(var a=0;a<mb.length;a++)for(var c=0;c<mb[a].length;c++){var d=tinycolor(mb[a][c]).toRgbString();nb[d]=!0}}vb.toggleClass("sp-flat",U),vb.toggleClass("sp-input-disabled",!T.showInput),vb.toggleClass("sp-alpha-enabled",T.showAlpha),vb.toggleClass("sp-clear-enabled",Vb),vb.toggleClass("sp-buttons-disabled",!T.showButtons),vb.toggleClass("sp-palette-disabled",!T.showPalette),vb.toggleClass("sp-palette-only",T.showPaletteOnly),vb.toggleClass("sp-initial-disabled",!T.showInitial),vb.addClass(T.className).addClass(T.containerClassName),O()}function o(){function a(a){return a.data&&a.data.ignore?(H(b(this).data("color")),K()):(H(b(this).data("color")),K(),N(!0),F()),!1}if(q&&vb.find("*:not(input)").attr("unselectable","on"),l(),Lb&&tb.after(Mb).hide(),Vb||Hb.hide(),U)tb.after(vb).hide();else{var c="parent"===T.appendTo?tb.parent():b(T.appendTo);1!==c.length&&(c=b("body")),c.append(vb)}v(),Nb.bind("click.spectrum touchstart.spectrum",function(a){ub||D(),a.stopPropagation(),b(a.target).is("input")||a.preventDefault()}),(tb.is(":disabled")||T.disabled===!0)&&S(),vb.click(k),Db.change(C),Db.bind("paste",function(){setTimeout(C,1)}),Db.keydown(function(a){13==a.keyCode&&C()}),Gb.text(T.cancelText),Gb.bind("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),F("cancel")}),Hb.attr("title",T.clearText),Hb.bind("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),Ub=!0,K(),U&&N(!0)}),Ib.text(T.chooseText),Ib.bind("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),J()&&(N(!0),F())}),m(Bb,function(a,b,c){kb=a/eb,Ub=!1,c.shiftKey&&(kb=Math.round(10*kb)/10),K()},A,B),m(yb,function(a,b){hb=parseFloat(b/cb),Ub=!1,T.showAlpha||(kb=1),K()},A,B),m(wb,function(a,b,c){if(c.shiftKey){if(!rb){var d=ib*_,e=ab-jb*ab,f=Math.abs(a-d)>Math.abs(b-e);rb=f?"x":"y"}}else rb=null;var g=!rb||"x"===rb,h=!rb||"y"===rb;g&&(ib=parseFloat(a/_)),h&&(jb=parseFloat((ab-b)/ab)),Ub=!1,T.showAlpha||(kb=1),K()},A,B),Pb?(H(Pb),L(),Sb=Rb||tinycolor(Pb).format,w(Pb)):L(),U&&E();var d=q?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Eb.delegate(".sp-thumb-el",d,a),Fb.delegate(".sp-thumb-el:nth-child(1)",d,{ignore:!0},a)}function v(){if(W&&a.localStorage){try{var c=a.localStorage[W].split(",#");c.length>1&&(delete a.localStorage[W],b.each(c,function(a,b){w(b)}))}catch(d){}try{ob=a.localStorage[W].split(";")}catch(d){}}}function w(c){if(V){var d=tinycolor(c).toRgbString();if(!nb[d]&&-1===b.inArray(d,ob))for(ob.push(d);ob.length>pb;)ob.shift();if(W&&a.localStorage)try{a.localStorage[W]=ob.join(";")}catch(e){}}}function x(){var a=[];if(T.showPalette)for(i=0;i<ob.length;i++){var b=tinycolor(ob[i]).toRgbString();nb[b]||a.push(ob[i])}return a.reverse().slice(0,T.maxSelectionSize)}function y(){var a=I(),c=b.map(mb,function(b,c){return d(b,a,"sp-palette-row sp-palette-row-"+c,T.preferredFormat)});v(),ob&&c.push(d(x(),a,"sp-palette-row sp-palette-row-selection",T.preferredFormat)),Eb.html(c.join(""))}function z(){if(T.showInitial){var a=Qb,b=I();Fb.html(d([a,b],b,"sp-palette-row-initial",T.preferredFormat))}}function A(){(0>=ab||0>=_||0>=cb)&&O(),vb.addClass(qb),rb=null,tb.trigger("dragstart.spectrum",[I()])}function B(){vb.removeClass(qb),tb.trigger("dragstop.spectrum",[I()])}function C(){var a=Db.val();if(null!==a&&""!==a||!Vb){var b=tinycolor(a);b.isValid()?(H(b),N(!0)):Db.addClass("sp-validation-error")}else H(null),N(!0)}function D(){$?F():E()}function E(){var c=b.Event("beforeShow.spectrum");return $?void O():(tb.trigger(c,[I()]),void(Y.beforeShow(I())===!1||c.isDefaultPrevented()||(e(),$=!0,b(sb).bind("click.spectrum",F),b(a).bind("resize.spectrum",Z),Mb.addClass("sp-active"),vb.removeClass("sp-hidden"),O(),L(),Qb=I(),z(),Y.show(Qb),tb.trigger("show.spectrum",[Qb]))))}function F(c){if((!c||"click"!=c.type||2!=c.button)&&$&&!U){$=!1,b(sb).unbind("click.spectrum",F),b(a).unbind("resize.spectrum",Z),Mb.removeClass("sp-active"),vb.addClass("sp-hidden");var d=!tinycolor.equals(I(),Qb);d&&(Tb&&"cancel"!==c?N(!0):G()),Y.hide(I()),tb.trigger("hide.spectrum",[I()])}}function G(){H(Qb,!0)}function H(a,b){if(tinycolor.equals(a,I()))return void L();var c,d;!a&&Vb?Ub=!0:(Ub=!1,c=tinycolor(a),d=c.toHsv(),hb=d.h%360/360,ib=d.s,jb=d.v,kb=d.a),L(),c&&c.isValid()&&!b&&(Sb=Rb||c.getFormat())}function I(a){return a=a||{},Vb&&Ub?null:tinycolor.fromRatio({h:hb,s:ib,v:jb,a:Math.round(100*kb)/100},{format:a.format||Sb})}function J(){return!Db.hasClass("sp-validation-error")}function K(){L(),Y.move(I()),tb.trigger("move.spectrum",[I()])}function L(){Db.removeClass("sp-validation-error"),M();var a=tinycolor.fromRatio({h:hb,s:1,v:1});wb.css("background-color",a.toHexString());var b=Sb;1>kb&&(0!==kb||"name"!==b)&&("hex"===b||"hex3"===b||"hex6"===b||"name"===b)&&(b="rgb");var c=I({format:b}),d="";if(Ob.removeClass("sp-clear-display"),Ob.css("background-color","transparent"),!c&&Vb)Ob.addClass("sp-clear-display");else{var e=c.toHexString(),f=c.toRgbString();if(r||1===c.alpha?Ob.css("background-color",f):(Ob.css("background-color","transparent"),Ob.css("filter",c.toFilter())),T.showAlpha){var g=c.toRgb();g.a=0;var h=tinycolor(g).toRgbString(),i="linear-gradient(left, "+h+", "+e+")";q?Ab.css("filter",tinycolor(h).toFilter({gradientType:1},e)):(Ab.css("background","-webkit-"+i),Ab.css("background","-moz-"+i),Ab.css("background","-ms-"+i),Ab.css("background","linear-gradient(to right, "+h+", "+e+")"))}d=c.toString(b)}T.showInput&&Db.val(d),T.showPalette&&y(),z()}function M(){var a=ib,b=jb;if(Vb&&Ub)Cb.hide(),zb.hide(),xb.hide();else{Cb.show(),zb.show(),xb.show();var c=a*_,d=ab-b*ab;c=Math.max(-bb,Math.min(_-bb,c-bb)),d=Math.max(-bb,Math.min(ab-bb,d-bb)),xb.css({top:d+"px",left:c+"px"});var e=kb*eb;Cb.css({left:e-fb/2+"px"});var f=hb*cb;zb.css({top:f-gb+"px"})}}function N(a){var b=I(),c="",d=!tinycolor.equals(b,Qb);b&&(c=b.toString(Sb),w(b)),Jb&&tb.val(c),Qb=b,a&&d&&(Y.change(b),tb.trigger("change",[b]))}function O(){_=wb.width(),ab=wb.height(),bb=xb.height(),db=yb.width(),cb=yb.height(),gb=zb.height(),eb=Bb.width(),fb=Cb.width(),U||(vb.css("position","absolute"),vb.offset(h(vb,Nb))),M(),T.showPalette&&y(),tb.trigger("reflow.spectrum")}function P(){tb.show(),Nb.unbind("click.spectrum touchstart.spectrum"),vb.remove(),Mb.remove(),p[Wb.id]=null}function Q(a,d){return a===c?b.extend({},T):d===c?T[a]:(T[a]=d,void l())}function R(){ub=!1,tb.attr("disabled",!1),Nb.removeClass("sp-disabled")}function S(){F(),ub=!0,tb.attr("disabled",!0),Nb.addClass("sp-disabled")}var T=f(j,g),U=T.flat,V=T.showSelectionPalette,W=T.localStorageKey,X=T.theme,Y=T.callbacks,Z=n(O,10),$=!1,_=0,ab=0,bb=0,cb=0,db=0,eb=0,fb=0,gb=0,hb=0,ib=0,jb=0,kb=1,lb=[],mb=[],nb={},ob=T.selectionPalette.slice(0),pb=T.maxSelectionSize,qb="sp-dragging",rb=null,sb=g.ownerDocument,tb=(sb.body,b(g)),ub=!1,vb=b(u,sb).addClass(X),wb=vb.find(".sp-color"),xb=vb.find(".sp-dragger"),yb=vb.find(".sp-hue"),zb=vb.find(".sp-slider"),Ab=vb.find(".sp-alpha-inner"),Bb=vb.find(".sp-alpha"),Cb=vb.find(".sp-alpha-handle"),Db=vb.find(".sp-input"),Eb=vb.find(".sp-palette"),Fb=vb.find(".sp-initial"),Gb=vb.find(".sp-cancel"),Hb=vb.find(".sp-clear"),Ib=vb.find(".sp-choose"),Jb=tb.is("input"),Kb=Jb&&s&&"color"===tb.attr("type"),Lb=Jb&&!U,Mb=Lb?b(t).addClass(X).addClass(T.className).addClass(T.replacerClassName):b([]),Nb=Lb?Mb:tb,Ob=Mb.find(".sp-preview-inner"),Pb=T.color||Jb&&tb.val(),Qb=!1,Rb=T.preferredFormat,Sb=Rb,Tb=!T.showButtons||T.clickoutFiresChange,Ub=!Pb,Vb=T.allowEmpty&&!Kb;o();var Wb={show:E,hide:F,toggle:D,reflow:O,option:Q,enable:R,disable:S,set:function(a){H(a),N()},get:I,destroy:P,container:vb};return Wb.id=p.push(Wb)-1,Wb}function h(a,c){var d=0,e=a.outerWidth(),f=a.outerHeight(),g=c.outerHeight(),h=a[0].ownerDocument,i=h.documentElement,j=i.clientWidth+b(h).scrollLeft(),k=i.clientHeight+b(h).scrollTop(),l=c.offset();return l.top+=g,l.left-=Math.min(l.left,l.left+e>j&&j>e?Math.abs(l.left+e-j):0),l.top-=Math.min(l.top,l.top+f>k&&k>f?Math.abs(f+g-d):d),l}function j(){}function k(a){a.stopPropagation()}function l(a,b){var c=Array.prototype.slice,d=c.call(arguments,2);return function(){return a.apply(b,d.concat(c.call(arguments)))}}function m(c,d,e,f){function g(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.returnValue=!1}function h(a){if(l){if(q&&document.documentMode<9&&!a.button)return j();var b=a.originalEvent.touches,e=b?b[0].pageX:a.pageX,f=b?b[0].pageY:a.pageY,h=Math.max(0,Math.min(e-m.left,o)),i=Math.max(0,Math.min(f-m.top,n));p&&g(a),d.apply(c,[h,i,a])}}function i(a){{var d=a.which?3==a.which:2==a.button;a.originalEvent.touches}d||l||e.apply(c,arguments)!==!1&&(l=!0,n=b(c).height(),o=b(c).width(),m=b(c).offset(),b(k).bind(r),b(k.body).addClass("sp-dragging"),p||h(a),g(a))}function j(){l&&(b(k).unbind(r),b(k.body).removeClass("sp-dragging"),f.apply(c,arguments)),l=!1}d=d||function(){},e=e||function(){},f=f||function(){};var k=c.ownerDocument||document,l=!1,m={},n=0,o=0,p="ontouchstart"in a,r={};r.selectstart=g,r.dragstart=g,r["touchmove mousemove"]=h,r["touchend mouseup"]=j,b(c).bind("touchstart mousedown",i)}function n(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d),(c||!d)&&(d=setTimeout(g,b))}}var o={beforeShow:j,move:j,change:j,show:j,hide:j,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",clearText:"Clear Color Selection",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1},p=[],q=!!/msie/i.exec(a.navigator.userAgent),r=function(){function a(a,b){return!!~(""+a).indexOf(b)}var b=document.createElement("div"),c=b.style;return c.cssText="background-color:rgba(0,0,0,.5)",a(c.backgroundColor,"rgba")||a(c.backgroundColor,"hsla")}(),s=function(){var a=b("<input type='color' value='!' />")[0];return"color"===a.type&&"!"!==a.value}(),t=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),u=function(){var a="";if(q)for(var b=1;6>=b;b++)a+="<div class='sp-"+b+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",a,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),v="spectrum.id";b.fn.spectrum=function(a){if("string"==typeof a){var c=this,d=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=p[b(this).data(v)];if(e){var f=e[a];if(!f)throw new Error("Spectrum: no such method: '"+a+"'");"get"==a?c=e.get():"container"==a?c=e.container:"option"==a?c=e.option.apply(e,d):"destroy"==a?(e.destroy(),b(this).removeData(v)):f.apply(e,d)}}),c}return this.spectrum("destroy").each(function(){var c=b.extend({},a,b(this).data()),d=g(this,c);b(this).data(v,d.id)})},b.fn.spectrum.load=!0,b.fn.spectrum.loadOpts={},b.fn.spectrum.draggable=m,b.fn.spectrum.defaults=o,b.spectrum={},b.spectrum.localization={},b.spectrum.palettes={},b.fn.spectrum.processNativeColorInputs=function(){s||b("input[type=color]").spectrum({preferredFormat:"hex6"})},function(){function b(a){var b={r:0,g:0,b:0},d=1,f=!1,h=!1;return"string"==typeof a&&(a=u(a)),"object"==typeof a&&(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b")?(b=c(a.r,a.g,a.b),f=!0,h="%"===String(a.r).substr(-1)?"prgb":"rgb"):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")?(a.s=r(a.s),a.v=r(a.v),b=g(a.h,a.s,a.v),f=!0,h="hsv"):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(a.s=r(a.s),a.l=r(a.l),b=e(a.h,a.s,a.l),f=!0,h="hsl"),a.hasOwnProperty("a")&&(d=a.a)),d=k(d),{ok:f,format:a.format||h,r:A(255,B(b.r,0)),g:A(255,B(b.g,0)),b:A(255,B(b.b,0)),a:d}}function c(a,b,c){return{r:255*l(a,255),g:255*l(b,255),b:255*l(c,255)}}function d(a,b,c){a=l(a,255),b=l(b,255),c=l(c,255);var d,e,f=B(a,b,c),g=A(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}}function e(a,b,c){function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(a=l(a,360),b=l(b,100),c=l(c,100),0===b)e=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return{r:255*e,g:255*f,b:255*g}}function f(a,b,c){a=l(a,255),b=l(b,255),c=l(c,255);var d,e,f=B(a,b,c),g=A(a,b,c),h=f,i=f-g;if(e=0===f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,v:h}}function g(a,b,c){a=6*l(a,360),b=l(b,100),c=l(c,100);var d=y.floor(a),e=a-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=d%6,j=[c,g,f,f,h,c][i],k=[h,c,c,g,f,f][i],m=[f,f,h,c,c,g][i];return{r:255*j,g:255*k,b:255*m}}function h(a,b,c,d){var e=[q(z(a).toString(16)),q(z(b).toString(16)),q(z(c).toString(16))];return d&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function i(a,b,c,d){var e=[q(s(d)),q(z(a).toString(16)),q(z(b).toString(16)),q(z(c).toString(16))];return e.join("")}function j(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}function k(a){return a=parseFloat(a),(isNaN(a)||0>a||a>1)&&(a=1),a}function l(a,b){o(a)&&(a="100%");var c=p(a);return a=A(b,B(0,parseFloat(a))),c&&(a=parseInt(a*b,10)/100),y.abs(a-b)<1e-6?1:a%b/parseFloat(b)}function m(a){return A(1,B(0,a))}function n(a){return parseInt(a,16)}function o(a){return"string"==typeof a&&-1!=a.indexOf(".")&&1===parseFloat(a)}function p(a){return"string"==typeof a&&-1!=a.indexOf("%")}function q(a){return 1==a.length?"0"+a:""+a}function r(a){return 1>=a&&(a=100*a+"%"),a}function s(a){return Math.round(255*parseFloat(a)).toString(16)}function t(a){return n(a)/255}function u(a){a=a.replace(v,"").replace(w,"").toLowerCase();var b=!1;if(E[a])a=E[a],b=!0;else if("transparent"==a)return{r:0,g:0,b:0,a:0,format:"name"};var c;return(c=G.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=G.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=G.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=G.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=G.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=G.hex8.exec(a))?{a:t(c[1]),r:n(c[2]),g:n(c[3]),b:n(c[4]),format:b?"name":"hex8"}:(c=G.hex6.exec(a))?{r:n(c[1]),g:n(c[2]),b:n(c[3]),format:b?"name":"hex"}:(c=G.hex3.exec(a))?{r:n(c[1]+""+c[1]),g:n(c[2]+""+c[2]),b:n(c[3]+""+c[3]),format:b?"name":"hex"}:!1}var v=/^[\s,#]+/,w=/\s+$/,x=0,y=Math,z=y.round,A=y.min,B=y.max,C=y.random,D=function H(a,c){if(a=a?a:"",c=c||{},a instanceof H)return a;if(!(this instanceof H))return new H(a,c);var d=b(a);this._r=d.r,this._g=d.g,this._b=d.b,this._a=d.a,this._roundA=z(100*this._a)/100,this._format=c.format||d.format,this._gradientType=c.gradientType,this._r<1&&(this._r=z(this._r)),this._g<1&&(this._g=z(this._g)),this._b<1&&(this._b=z(this._b)),this._ok=d.ok,this._tc_id=x++};D.prototype={isValid:function(){return this._ok},getFormat:function(){return this._format},getAlpha:function(){return this._a},setAlpha:function(a){this._a=k(a),this._roundA=z(100*this._a)/100},toHsv:function(){var a=f(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=f(this._r,this._g,this._b),b=z(360*a.h),c=z(100*a.s),d=z(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHsl:function(){var a=d(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=d(this._r,this._g,this._b),b=z(360*a.h),c=z(100*a.s),e=z(100*a.l);return 1==this._a?"hsl("+b+", "+c+"%, "+e+"%)":"hsla("+b+", "+c+"%, "+e+"%, "+this._roundA+")"},toHex:function(a){return h(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(){return i(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:z(this._r),g:z(this._g),b:z(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+z(this._r)+", "+z(this._g)+", "+z(this._b)+")":"rgba("+z(this._r)+", "+z(this._g)+", "+z(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:z(100*l(this._r,255))+"%",g:z(100*l(this._g,255))+"%",b:z(100*l(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+z(100*l(this._r,255))+"%, "+z(100*l(this._g,255))+"%, "+z(100*l(this._b,255))+"%)":"rgba("+z(100*l(this._r,255))+"%, "+z(100*l(this._g,255))+"%, "+z(100*l(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:F[h(this._r,this._g,this._b,!0)]||!1},toFilter:function(a){var b="#"+i(this._r,this._g,this._b,this._a),c=b,d=this._gradientType?"GradientType = 1, ":"";if(a){var e=D(a);c=e.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+d+"startColorstr="+b+",endColorstr="+c+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,d=this._a<1&&this._a>=0,e=!b&&d&&("hex"===a||"hex6"===a||"hex3"===a||"name"===a);return e?"name"===a&&0===this._a?this.toName():this.toRgbString():("rgb"===a&&(c=this.toRgbString()),"prgb"===a&&(c=this.toPercentageRgbString()),("hex"===a||"hex6"===a)&&(c=this.toHexString()),"hex3"===a&&(c=this.toHexString(!0)),"hex8"===a&&(c=this.toHex8String()),"name"===a&&(c=this.toName()),"hsl"===a&&(c=this.toHslString()),"hsv"===a&&(c=this.toHsvString()),c||this.toHexString())}},D.fromRatio=function(a,b){if("object"==typeof a){var c={};for(var d in a)a.hasOwnProperty(d)&&(c[d]="a"===d?a[d]:r(a[d]));a=c}return D(a,b)},D.equals=function(a,b){return a&&b?D(a).toRgbString()==D(b).toRgbString():!1},D.random=function(){return D.fromRatio({r:C(),g:C(),b:C()})},D.desaturate=function(a,b){b=0===b?0:b||10;var c=D(a).toHsl();return c.s-=b/100,c.s=m(c.s),D(c)},D.saturate=function(a,b){b=0===b?0:b||10;var c=D(a).toHsl();return c.s+=b/100,c.s=m(c.s),D(c)},D.greyscale=function(a){return D.desaturate(a,100)},D.lighten=function(a,b){b=0===b?0:b||10;var c=D(a).toHsl();return c.l+=b/100,c.l=m(c.l),D(c)},D.brighten=function(a,b){b=0===b?0:b||10;var c=D(a).toRgb();return c.r=B(0,A(255,c.r-z(255*-(b/100)))),c.g=B(0,A(255,c.g-z(255*-(b/100)))),c.b=B(0,A(255,c.b-z(255*-(b/100)))),D(c)},D.darken=function(a,b){b=0===b?0:b||10;var c=D(a).toHsl();return c.l-=b/100,c.l=m(c.l),D(c)},D.complement=function(a){var b=D(a).toHsl();return b.h=(b.h+180)%360,D(b)},D.triad=function(a){var b=D(a).toHsl(),c=b.h;return[D(a),D({h:(c+120)%360,s:b.s,l:b.l}),D({h:(c+240)%360,s:b.s,l:b.l})]},D.tetrad=function(a){var b=D(a).toHsl(),c=b.h;return[D(a),D({h:(c+90)%360,s:b.s,l:b.l}),D({h:(c+180)%360,s:b.s,l:b.l}),D({h:(c+270)%360,s:b.s,l:b.l})]},D.splitcomplement=function(a){var b=D(a).toHsl(),c=b.h;return[D(a),D({h:(c+72)%360,s:b.s,l:b.l}),D({h:(c+216)%360,s:b.s,l:b.l})]},D.analogous=function(a,b,c){b=b||6,c=c||30;var d=D(a).toHsl(),e=360/c,f=[D(a)];for(d.h=(d.h-(e*b>>1)+720)%360;--b;)d.h=(d.h+e)%360,f.push(D(d));return f},D.monochromatic=function(a,b){b=b||6;for(var c=D(a).toHsv(),d=c.h,e=c.s,f=c.v,g=[],h=1/b;b--;)g.push(D({h:d,s:e,v:f})),f=(f+h)%1;return g},D.readability=function(a,b){var c=D(a).toRgb(),d=D(b).toRgb(),e=(299*c.r+587*c.g+114*c.b)/1e3,f=(299*d.r+587*d.g+114*d.b)/1e3,g=Math.max(c.r,d.r)-Math.min(c.r,d.r)+Math.max(c.g,d.g)-Math.min(c.g,d.g)+Math.max(c.b,d.b)-Math.min(c.b,d.b);return{brightness:Math.abs(e-f),color:g}},D.readable=function(a,b){var c=D.readability(a,b);return c.brightness>125&&c.color>500},D.mostReadable=function(a,b){for(var c=null,d=0,e=!1,f=0;f<b.length;f++){var g=D.readability(a,b[f]),h=g.brightness>125&&g.color>500,i=3*(g.brightness/125)+g.color/500;(h&&!e||h&&e&&i>d||!h&&!e&&i>d)&&(e=h,d=i,c=D(b[f]))}return c};var E=D.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},F=D.hexNames=j(E),G=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";
return{rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();a.tinycolor=D}(),b(function(){b.fn.spectrum.load&&b.fn.spectrum.processNativeColorInputs()})}(window,jQuery)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/libs/jquery/jquery-2.1.0.min.js":98}],107:[function(a,b){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(c,e){"object"==typeof b?a.exports=e():"function"==typeof d&&d.amd?d(e):c.Spinner=e()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;if(void 0!==e[b])return b;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(c=k[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function h(a){return"undefined"==typeof this?new h(a):void(this.opts=f(a||{},h.defaults,n))}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:j+" "+j,coordorigin:-i+" "+-i}),{width:j,height:j})}function g(a,g,h){b(l,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~g}),b(e(c("roundrect",{arcsize:d.corners}),{width:i,height:d.width,left:d.radius,top:-d.width>>1,filter:h}),c("fill",{color:d.color,opacity:d.opacity}),c("stroke",{opacity:0}))))}var h,i=d.length+d.width,j=2*i,k=2*-(d.width+d.length)+"px",l=e(f(),{position:"absolute",top:k,left:k});if(d.shadow)for(h=1;h<=d.lines;h++)g(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=d.lines;h++)g(h);return b(a,l)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c,d,f=this,h=f.opts,i=f.el=e(a(0,{className:h.className}),{position:h.position,width:0,zIndex:h.zIndex}),k=h.radius+h.length+h.width;if(b&&(b.insertBefore(i,b.firstChild||null),d=g(b),c=g(i),e(i,{left:("auto"==h.left?d.x-c.x+(b.offsetWidth>>1):parseInt(h.left,10)+k)+"px",top:("auto"==h.top?d.y-c.y+(b.offsetHeight>>1):parseInt(h.top,10)+k)+"px"})),i.setAttribute("role","progressbar"),f.lines(i,f.opts),!j){var l,m=0,n=(h.lines-1)*(1-h.direction)/2,o=h.fps,p=o/h.speed,q=(1-h.opacity)/(p*h.trail/100),r=p/h.lines;!function s(){m++;for(var a=0;a<h.lines;a++)l=Math.max(1-(m+(h.lines-a)*r)%p*q,h.opacity),f.opacity(i,a*h.direction+n,l,h);f.timeout=f.el&&setTimeout(s,~~(1e3/o))}()}return f},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function g(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*i+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var h,i=0,k=(f.lines-1)*(1-f.direction)/2;i<f.lines;i++)h=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,k+i*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(h,e(g("#000","0 0 4px #000"),{top:"2px"})),b(d,b(h,g(f.color,"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?i():j=d(o,"animation"),h}),e("undefined"!=typeof Spinner?Spinner:window.Spinner)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],108:[function(a,b){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(a){function b(b){try{return b()}catch(c){a.console&&a.console.log&&a.console.log.apply&&a.console.log("Zenbox Error: ",c)}}function c(a,b,c){a&&a.addEventListener?a.addEventListener(b,c,!1):a&&a.attachEvent&&a.attachEvent("on"+b,c)}function d(a){return a&&!x.test(a)?w.location.protocol+"//"+a:a}function e(){q=w.createElement("div"),q.setAttribute("id","zenbox_tab"),q.setAttribute("href","#"),q.style.display="none",w.body.appendChild(q),r=w.createElement("div"),r.setAttribute("id","zenbox_overlay"),r.style.display="none",r.innerHTML='<div id="zenbox_container">  <div class="zenbox_header"><img id="zenbox_close" /></div>  <iframe id="zenbox_body" frameborder="0" scrolling="auto" allowTransparency="true"></iframe></div><div id="zenbox_scrim">&nbsp;</div>',w.body.appendChild(r),s=w.getElementById("zenbox_container"),t=w.getElementById("zenbox_close"),u=w.getElementById("zenbox_body"),v=w.getElementById("zenbox_scrim"),c(q,"click",function(){a.Zenbox.show()}),c(t,"click",function(){a.Zenbox.hide()}),c(v,"click",function(){a.Zenbox.hide()})}function f(a){var b;for(b in a)a.hasOwnProperty(b)&&(y[b]="url"===b||"assetHost"===b?d(a[b]):a[b])}function g(){q.innerHTML='<img src="'+y.tabImageURL+'" />'}function h(){y.hide_tab?q.style.display="none":(g(),q.setAttribute("title",y.tabTooltip),q.setAttribute("class","ZenboxTab"+y.tabPosition),q.setAttribute("className","ZenboxTab"+y.tabPosition),q.style.backgroundColor=y.tabColor,q.style.borderColor=y.tabColor,q.style.display="block")}function i(b){var c=b||a.event||{};return c.cancelBubble=!0,c.returnValue=!1,c.stopPropagation&&c.stopPropagation(),c.preventDefault&&c.preventDefault(),!1}function j(){return Math.max(Math.max(w.body.scrollHeight,w.documentElement.scrollHeight),Math.max(w.body.offsetHeight,w.documentElement.offsetHeight),Math.max(w.body.clientHeight,w.documentElement.clientHeight))}function k(){return y.assetHost+"/external/zenbox/images/close_big.png"}function l(){return y.assetHost+"/external/zenbox/v2.1/loading.html"}function m(){var a=y.url+"/account/dropboxes/"+y.dropboxID+"?x=1";return y.request_subject&&(a+="&subject="+y.request_subject),y.request_description&&(a+="&description="+y.request_description),y.requester_name&&(a+="&name="+y.requester_name),y.requester_email&&(a+="&email="+y.requester_email),a}function n(b){q||e(),f(b),h(),t.src=k(),u.src=l(),a.addEventListener("message",function(a){"hideZenbox"===a.data&&p()},!1)}function o(a){return u.src=m(),r.style.height=v.style.height=j()+"px",r.style.display="block",i(a)}function p(a){return r.style.display="none",u.src=l(),i(a)}var q,r,s,t,u,v,w=a.document,x=/^([a-zA-Z]+:)?\/\//,y={url:null,dropboxID:null,tabColor:"#000000",assetHost:"//assets.zendesk.com",tabTooltip:"support",tabImageURL:null,tabPosition:"Left",hide_tab:!1,request_subject:null,request_description:null,requester_name:null,requester_email:null},z={init:function(a){b(function(){return n(a)})},update:function(a){b(function(){return n(a)})},render:function(a){b(function(){return o(a)})},show:function(a){b(function(){return o(a)})},hide:function(a){b(function(){return p(a)})}};c(a,"load",function(){a.zenbox_params&&z.init(a.zenbox_params)}),a.Zenbox=z}(this.window||this),e("undefined"!=typeof Zenbox?Zenbox:window.Zenbox)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],109:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC/Model"),d=c.extend({defaults:{title:"Zoomdata",url:"",copyright:"On",customMessage:"",terms:"",favicon:"",headerLogo:"",loginLogo:"",background:"",customCss:!1,defaultLogo:!0,zdContactLink:!0,zdSupportLink:!0,zdQuickstartLink:!0,zdContactVal:"Contact us with a question",zdSupportVal:"Support Site",zdQuickstartVal:"Show Quickstart Tutorials"},url:function(){return"service/branding"},initialize:function(a){c.prototype.initialize.apply(this,arguments),a&&(this._bootstrapped=!0)}});b.exports=d}()},{"../../Core/MVC/Model":4}],110:[function(a,b){b.exports=a("./Branding")},{"./Branding":109}],111:[function(a,b){!function(){"use strict";function c(a){return a.substring(0,a.lastIndexOf("."))}var d=a("jquery"),e=(a("./../../utilities"),a("../../Core/MVC/Model"));b.exports=e.extend({defaults:{},initialize:function(){e.prototype.initialize.apply(this,arguments),this.execute=null},getComponentName:function(){return c(this.get("name"))},url:function(){var a="string"==typeof this.remote?this.remote+"/":"",b="string"==typeof this.remote&&"boolean"==typeof this.secure?this.secure?"https://":"http://":"",c=e.prototype.url.apply(this,arguments);return c+="/"+this.get("uploadDate"),b+a+c},load:function(a){function b(a,b,d){console.error("Failed to load: "+c.get("name")+" with exception: "+d),e.reject(a,b,d)}var c=this,e=d.Deferred(),f=this.get("type"),g=this.getComponentName(),h=this.apiKey,i=this.url(),j=a+"_"+g;switch(f){case"text/template":d("#template_"+j).length?e.resolve():d.ajax({cache:!0,dataType:"text",url:i,data:{key:h,unwrapped:!0}}).then(function(a){d("<script>"+a+"</script>").attr({type:"text/template",id:"template_"+j}).appendTo("head"),e.resolve()},b);break;case"text/css":d.ajax({cache:!0,dataType:"text",url:i,data:{key:h}}).then(function(a){var b=c.get("visualizationId")||c.collection.visId,f=c.get("id");d(".widgetContent[data-visid="+b+"]").each(function(c,e){var g=d(e).parent();if(g.children('[data-componentid="'+f+'"]').length>0);else{var h=d('<style data-visid="'+b+'" data-componentid="'+f+'" scoped>'+a+"</style>").appendTo(g);h.scopedPolyFill&&h.scopedPolyFill()}}),e.resolve()},b);break;default:d("#script_"+j).length?(c.execute=window[j](),e.resolve()):d.ajax({cache:!0,dataType:"text",url:i,data:{key:h,"function":j}}).then(function(a){d("<script></script> ").attr({type:"text/javascript",id:"script_"+j}).text(a).appendTo("head"),c.execute=window[j](),e.resolve()},b)}return e.promise()}})}()},{"../../Core/MVC/Model":4,"./../../utilities":144,jquery:103}],112:[function(a,b){var c=a("jquery"),d="service/connections",e=a("../../Core/MVC/Model"),f=e.extend({defaults:{name:"",type:"",parameters:{}},urlRoot:d,initialize:function(a,b){e.prototype.initialize.apply(this,arguments),this.options=c.extend({},this.options,b),this.listenTo(this,"change",this.setSubStorageType)},setSubStorageType:function(){var a=this.get("parameters"),b=null;if(a&&a.JDBC_URL&&"SQL"===this.get("type")){var c=a.JDBC_URL;-1!==c.indexOf("redshift.amazonaws.com")?b="REDSHIFT":-1!==c.indexOf("jdbc:oracle")?b="ORACLE":-1!==c.indexOf("jdbc:mysql")?b="MYSQL":-1!==c.indexOf("jdbc:sqlserver")?b="SQLSERVER":-1!==c.indexOf("jdbc:postgresql")?b="POSTGRESQL":c&&-1!==c.indexOf("jdbc:presto")?b="PRESTO":c&&-1!==c.indexOf("jdbc:hive")&&(b="SPARKSQL")}b&&this.set("subStorageType",b)},validateServer:function(){var a=this.urlRoot+"/validate",b=c.Deferred();return this.setSubStorageType(),c.ajax({type:"POST",url:a,contentType:"application/json",dataType:"json",data:JSON.stringify(this.toJSON()),success:function(a){b.resolve(a)},error:function(a){b.reject(a.responseJSON||a.statusText)}}),b.promise()}});b.exports=f},{"../../Core/MVC/Model":4,jquery:103}],113:[function(a,b){!function(){"use strict";var c=a("./../../components/settings"),d=a("./../User"),e=a("jquery"),f=d.extend({urlRoot:"service/user",initialize:function(a){d.prototype.initialize.apply(this,arguments),a&&(this._bootstrapped=!0,this.initPermissions()),this.listenTo(this,"sync",this.initPermissions)},isDemoUser:function(){return"true"===c["demo-mode"]&&!this.isAdmin()&&!this.isSupervisor()},rejectAction:function(){return e.Deferred().reject()},initPermissions:function(){var a=this,b=this.get("roles")||[],c=this.get("groupRoles")||[],d=-1!==b.indexOf("user"),e=-1!==b.indexOf("admin"),f=-1!==b.indexOf("supervisor");this.permissions={sources:{read:e||f,write:e||f,remove:e||f,createNew:e||f,manageSome:e||f},dashboards:{save:e||f||d,share:e||f||d},filters:{save:e||f||d}},c.forEach(function(b){"ROLE_CREATE_SOURCES"===b?(a.permissions.sources.createNew=!0,a.permissions.sources.manageSome=!0):"ROLE_MANAGE_ALL_SOURCES"===b?(a.permissions.sources.read=!0,a.permissions.sources.write=!0,a.permissions.sources.remove=!0):"ROLE_VIEW_ALL_SOURCES"===b?a.permissions.sources.read=!0:"ROLE_MANAGE_SOME_SOURCES"===b?a.permissions.sources.manageSome=!0:"ROLE_SAVE_DASHBOARDS"===b?a.permissions.dashboards.save=!0:"ROLE_SHARE_DASHBOARDS"===b?a.permissions.dashboards.share=!0:"ROLE_SAVE_FILTERS"===b&&(a.permissions.filters.save=!0)})},getSourcesAcl:function(a){var b=this,c=e.Deferred();return a=a||{},e.ajax({type:"GET",url:this.urlRoot+"/source-acl",success:function(a){b.sourcesAcl=a,c.resolve(a)},error:function(){c.reject()}}),c.promise()},canCreateSources:function(){return this.permissions.sources.createNew},canCreateBookmarks:function(){return this.permissions.dashboards.save},canShareBookmarks:function(){return this.permissions.dashboards.share},canSaveFilters:function(){return this.permissions.filters.save}});b.exports=f}()},{"./../../components/settings":55,"./../User":133,jquery:103}],114:[function(a,b){!function(){"use strict";var c=a("./../../collections/VisualizationConfigs"),d=a("../../Core/MVC/Model"),e=a("jquery"),f=d.extend({defaults:{name:"Dashboard",description:"",layout:"unset",showDescription:!1,visualizations:[]},urlRoot:"service/bookmarks/",initialize:function(){var a=this;this.visualizations=new c(this.attributes.visualizations),this.listenTo(this.visualizations,"all",function(){a.set("visualizations",this.visualizations.toJSON(),{silent:!0})}),this.listenTo(this,"change:visualizations sync",function(){a.visualizations.reset(this.get("visualizations"),{silent:!0})})},saveViewCount:function(){e.post(this.urlRoot+this.id+"/viewscount")}});b.exports=f}()},{"../../Core/MVC/Model":4,"./../../collections/VisualizationConfigs":33,jquery:103}],115:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC/Model"),d=c.extend({defaults:{title:"Error",description:"No description available"}});b.exports=d}()},{"../../Core/MVC/Model":4}],116:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("../../Core/MVC/Model"),e=d.extend({defaults:{path:null,operation:"IN",value:[],editable:!1},idAttribute:"path",initialize:function(){c.bindAll(this,"hasAttribute","addAttribute","removeAttribute","hasValue","isEqualToFilter")},hasAttribute:function(a){return"number"==typeof this.attributes.value?this.attributes.value===a:this.attributes.value&&this.attributes.value.indexOf(a.toString())>=0},hasValue:function(){var a=this.attributes.value;return null!==a&&("number"==typeof a||a.length>0)},addAttribute:function(a,b){var c=[];return this.get("value")instanceof Array&&(c=this.get("value").slice()),-1===c.indexOf(a)&&(c.push(a.toString()),this.set("value",c,b)),this},removeAttribute:function(a,b){var d=c.clone(this.get("value")),e=d&&d.indexOf(a.toString());return d&&-1!==e?(d.splice(e,1),this.set("value",d,b),d.length?this:(this.collection&&this.collection.remove(this,b),null)):this},isEqualToFilter:function(a){return a&&a.get("operation")===this.get("operation")&&a.get("path")===this.get("path")&&this.get("value").toString()===a.get("value").toString()},toRequest:function(){return{path:this.get("path"),value:this.get("value"),operation:this.get("operation")}}});b.exports=e}()},{"../../Core/MVC/Model":4,underscore:458}],117:[function(a,b){b.exports=a("./FilterModel")},{"./FilterModel":116}],118:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC/Model"),d=c.extend({defaults:{id:null,name:"",userId:null,sourceId:null,accountId:null,scope:"PRIVATE",userName:"",filters:[]},url:function(){return"service/filter-sets/"+(this.get("id")||"")},idAttribute:"id"});b.exports=d}()},{"../../Core/MVC/Model":4}],119:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC/Model"),f=a("colorbrewer"),g=e.extend({defaults:{name:"",limit:30,sort:{name:"count",dir:"desc"}},setAttribute:function(a,b){var c=this.get("sort");return c.name===this.get("name")?c.name=a:c.name===a&&"distinct_count"===c.func&&delete c.func,this.set({name:a,sort:c},b),this},getAttribute:function(){return this.get("name")},getLabel:function(){return this.label},setLimit:function(a,b){return this.set({limit:+a},b),this},getLimit:function(){return+this.get("limit")},setSort:function(a,b){var c=d.clone(this.get("sort"));return c.name=a.name,c.dir=a.dir,c.func=a.func,this.set({sort:c},b),this},setSortMetric:function(a,b){var c=d.clone(this.get("sort"));return c.name=a,this.set({sort:c},b),this},setSortDirection:function(a,b){var c=d.clone(this.get("sort"));return c.dir=a,this.set({sort:c},b),this},_updateDomain:function(a){function b(a){return c("<div>").text(a).html()}var d=this,e=this.collection.indexOf(this);this.noData=0===a.length,this.domainValue=[],a.forEach(function(a){"string"==typeof a.group&&0===e?d.domainValue.push(b(a.group)):-1===d.domainValue.indexOf(a.group[e])&&d.domainValue.push(b(a.group[e]))}),d.domainValue.sort()},colorRange:function(){var a,b=this,c=this.get("groupColors")||{},d=this.domain()||[],e=d.length;if(this.savedColors=this.savedColors||{},0===e)return[];3>e&&(e=3),this.get("autoColor")&&(c={});do a=f[this.get("groupColorSet")][e],e-=1;while(!a&&f[this.get("groupColorSet")]);return e=a.length,d.map(function(d,f){return b.savedColors[d]=b.savedColors[d]||a[f%e],c[d]||b.savedColors[d]})},domain:function(){return d.clone(this.domainValue)},_setField:function(a){this.field=a},getColorKeyLabel:function(){return this.field.get("label")},isMetric:function(){return!1},isNoData:function(){return this.noData},toJSON:function(a){var b=this,f=e.prototype.toJSON.call(this,arguments),g=f.sort.dir,h=g;return"Ascending Value"===g&&(h="asc"),"Descending Value"===g&&(h="desc"),f.sort.dir=h,f.sort=d.clone(f.sort),f.limit=+f.limit,a||c.each(f,function(a){"undefined"==typeof b.defaults[a]&&delete f[a]}),f}});b.exports=g}()},{"../../Core/MVC/Model":4,colorbrewer:89,jquery:103,underscore:458}],120:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("./../../utilities"),e=a("./../ComponentSource");b.exports=e.extend({defaults:{},initialize:function(a){e.prototype.initialize.apply(this,arguments),"string"==typeof a&&this.set("name",a)},idAttribute:"id",url:function(){var a="string"==typeof this.remote?this.remote+"/":"",b="string"==typeof this.remote&&"boolean"==typeof this.secure?this.secure?"https://":"http://":"";return b+a+"service/visualizations/libs/"+this.id+"/"+(this.get("uploadDate")||"")},load:function(){var a=this,b=this.get("type"),e=c.Deferred(),f=this.url(),g=(c("head"),this.apiKey||d.getURLParameter("key"));switch(b){case"text/template":f+=g?"?unwrapped=true&key="+g:"?unwrapped=true",c.ajax({cache:!0,dataType:"text",url:f,data:c.extend({},{key:g})}).done(function(a){c("<script type='text/template'>"+a+"</script>").appendTo(c("head")),e.resolve()}).fail(function(b,c,d){console.error("Failed to load: "+a.get("name")+" with exception: "+d),e.reject(b)});break;case"text/css":g&&(f+="?key="+g),c.ajax({cache:!0,dataType:"text",url:f,data:c.extend({},{key:g})}).done(function(a){c("<style>"+a+"</style>").appendTo(c("head")),e.resolve()}).fail(function(b,c,d){console.error("Failed to load: "+a.get("name")+" with exception: "+d),e.reject(b)});break;default:c.ajax({cache:!0,dataType:"script",url:f+"/",data:c.extend({},{key:g})}).done(function(){e.resolve()}).fail(function(b,c,d){console.error("Failed to load: "+a.get("name")+" with exception: "+d),e.reject(c)})}return e.promise()}})}()},{"./../../utilities":144,"./../ComponentSource":111,jquery:103}],121:[function(a,b){"use strict";var c=a("jquery"),d=a("../../Core/MVC/Model");b.exports=d.extend({defaults:{label:"",name:"",func:""},initialize:function(a,b){return d.prototype.initialize.apply(this,arguments),b=b||{},this.options=c.extend({},this.defaults,b),this._setModelId(),this},_setModelId:function(){function a(){return(268435456*(1+Math.random())|0).toString(16).substring(1)}var b,c=this.get("label");this.get("id")||(b=c+"-"+a(),this.set("id",b,{silent:!0}))},isCount:function(){return"count"===this.get("name")},isNone:function(){return"none"===this.get("name")},getColorKeyLabel:function(){return this.get("label")},isMetric:function(){return!0}})},{"../../Core/MVC/Model":4,jquery:103}],122:[function(a,b){b.exports=a("./Metric")},{"./Metric":121}],123:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("../../Core/MVC/Model");b.exports=d.extend({TYPES:{},FUNCS:{DEFAULT:["AVG","MIN","MAX","SUM"],DISTINCT_COUNT:"DISTINCT_COUNT",LAST_VALUE:"LV_METRIC"},initialize:function(){d.prototype.initialize.apply(this,arguments),this.on("change:name change:type",this._setComposedId),this._setComposedId()},_setComposedId:function(){this.id=this._composedId()},_composedId:function(){return this.get("name")+this.get("type")},getAvailableFuncs:function(){var a=this.get("type"),b="TIME"==a,c="ATTRIBUTE"==a,d=this.get("distinctCount"),e=this.collection?this.collection.hasLastValue():null,f=this.FUNCS.DEFAULT;return b?null:c?d?["distinct_count"]:null:(d&&f.push(this.FUNCS.DISTINCT_COUNT),e&&f.push(this.FUNCS.LAST_VALUE),f)},updateFacetValues:function(a,b,d,e){var f=this,g=this.get("name"),h=["service/stream/",this.collection.sourceId,"/facet/",g,"?from=",d,"&to=",e,a?"&query="+a:""].concat(""),i=c.ajax({type:"POST",url:h,data:JSON.stringify(b),contentType:"application/json"}).done(function(){}).fail(function(){console.warn("Couldn't get values for ObjectField ",f.get("name"))});return i.promise()},updateValues:function(a){var b=this,d=this.get("name"),e=this.collection.url()+d+"/values"+(a?"?query="+a:"/"),f=c.ajax({type:"GET",url:e,contentType:"application/json"}).done(function(a){b.values=a}).fail(function(){console.warn("Couldn't get values for ObjectField ",b.get("name"))});return f.promise()},isValidMetric:function(){var a=this.get("type"),b="TIME"==a,c="ATTRIBUTE"==a,d="TEXT"==a,e=c||d?!!this.get("distinctCount"):!1;return!b&&(c?e:!0)},toMetric:function(){var a=this.isValidMetric(),b=this.get("type"),c="ATTRIBUTE"==b,d="count"===this.get("name"),e="TEXT"==b,f=c||e?!!this.get("distinctCount"):!1,g=this.get("name"),h=this.get("label"),i=f?this.FUNCS.DISTINCT_COUNT:d?null:this.get("func")||"avg";return a?{name:g,label:h,func:i}:null}})}()},{"../../Core/MVC/Model":4,jquery:103}],124:[function(a,b){b.exports=a("./ObjectField")},{"./ObjectField":123}],125:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC/Model"),d=c.extend({defaults:{interactive:"true",link:"",embedCode:"",sourceId:null,bookmarkId:null,visId:"",sourceName:"",visName:""},url:function(){return this.get("sourceId")?"service/sources/"+this.get("sourceId")+"/key":"service/bookmarks/"+this.get("bookmarkId")+"/key"}});b.exports=d}()},{"../../Core/MVC/Model":4}],126:[function(a,b){"use strict";var c=a("../../Core/MVC/Model");b.exports=c.extend({defaults:{sort:{name:"count",dir:"desc"},limit:30},setSort:function(a,b,c){var d=this.get("sort");d[a]=b,this.set("sort",d,c),c&&c.silent||this.trigger("change")},unsetSort:function(a,b){var c=this.get("sort");delete c[a],this.set("sort",c,b),b&&b.silent||this.trigger("change")}})},{"../../Core/MVC/Model":4}],127:[function(a,b){b.exports=a("./SortAttributeItem")},{"./SortAttributeItem":126}],128:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("../../Core/MVC/Model"),e=a("./../../collections/SourceVisualizations"),f=a("./../../collections/ObjectFields"),g=a("./../../collections/Formulas"),h=a("./../Connection");b.exports=d.extend({urlRoot:"service/sources",initialize:function(){d.prototype.initialize.apply(this,arguments),this.visualizations=new e(this.attributes.visualizations,{secure:this.secure,remote:this.remote,apiKey:this.apiKey}),this.objectFields=new f(this.attributes.objectFields,{secure:this.secure,remote:this.remote,apiKey:this.apiKey}),this.formulaList=this.objectFields.formulas,this.connection=null,this.on("sync",this._onSync),this._onSync()},_onSync:function(){this.updateVisualizations(),this.updateObjectFields()},_detectTypeViaJdbc:function(a,b){return-1!=a.indexOf("redshift.amazonaws.com")?b="REDSHIFT":-1!=a.indexOf("jdbc:oracle")?b="ORACLE":-1!=a.indexOf("jdbc:mysql")?b="MYSQL":-1!=a.indexOf("jdbc:sqlserver")?b="SQLSERVER":-1!=a.indexOf("jdbc:postgresql")?b="POSTGRESQL":a&&-1!=a.indexOf("jdbc:presto")?b="PRESTO":a&&-1!=a.indexOf("jdbc:hive")&&(b="SPARKSQL"),b},_detectTypeViaPathFile:function(a,b){return b=a&&0===a.indexOf("s3")?"S3":"HDFS"},hasFeature:function(a){return-1!==this.get("features").indexOf(a)},hasLastValue:function(){return this.hasFeature("LV_METRIC")},hasPlayer:function(){return this.hasFeature("PLAYER")},hasLiveOption:function(){return this.hasFeature("LIVE_PLAYER")},updateVisualizations:function(){var a=this.get("id");this.visualizations.setSource(a),this.visualizations.set(this.attributes.visualizations),this.visualizations.isBootstrapped(!1)},updateObjectFields:function(){var a=new f(this.attributes.objectFields),b=new g(this.attributes.formulas);this.objectFields.setSource(this),this.objectFields.set(a.toArray()),this.formulaList.set(b.toArray())},getConnection:function(){var a=this.get("storageConfiguration")||{},b=a.connectionId,d=c.Deferred();return b?(this.connection||(this.connection=new h({id:b})),this.connection.fetch().then(d.resolve,d.reject,d.always)):d.resolve(null),d.promise()},validate:function(){this.attributes.visualizations=this.visualizations.toJSON()},saveViewCount:c.noop()})}()},{"../../Core/MVC/Model":4,"./../../collections/Formulas":19,"./../../collections/ObjectFields":27,"./../../collections/SourceVisualizations":28,"./../Connection":112,jquery:103}],129:[function(a,b){b.exports=a("./Source")},{"./Source":128}],130:[function(a,b){!function(){"use strict";var c=a("./../Visualization");b.exports=c.extend({idAttribute:"visId",initialize:function(a,b){return c.prototype.initialize.apply(this,arguments),b=b||{},b.sourceId?(this.setSource(b.sourceId),delete b.sourceId):this.attributes.source&&this.attributes.source.sourceId&&this.setSource(this.attributes.source.sourceId),this},setSource:function(a){return this.sourceId=a,this},getSourceId:function(){return this.sourceId||this.collection.sourceId},url:function(){if(this.getSourceId())return"service/sources/"+this.getSourceId()+"/visualizations/"+this.get("visId");throw new Error("sourceId must be defined")}})}()},{"./../Visualization":137}],131:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC"),d=c.Model,e=d.extend({idAttribute:"value",getValues:function(){return{HOUR:"HOUR",ROLLING_HOUR:"ROLLING_HOUR",DAY:"DAY",WEEK:"WEEK",MONTH:"MONTH",QUARTER:"QUARTER",YEAR:"YEAR",CUSTOM:"CUSTOM",ALL:"ALL"}}});b.exports=e}()},{"../../Core/MVC":6}],132:[function(a,b){"use strict";var c=a("../../Core/MVC/Model"),d=a("jquery"),e=a("./../../collections/UserPreferences");b.exports=c.extend({defaults:{name:"visitor"},urlRoot:"service/users",initialize:function(a){return c.prototype.initialize.apply(this,arguments),a=a||{},this.options=d.extend({},this.defaults,a),this.set({tags:[]}),this.preferences=new e,this},isSupervisor:function(){return-1!==this.get("roles").indexOf("supervisor")},isOnlySupervisor:function(){return this.isSupervisor()&&1===this.get("roles").length},isAdmin:function(){return-1!==this.get("roles").indexOf("admin")},getPreference:function(a){var b=this.preferences.findWhere({key:a});return b?b.get("value"):null}})},{"../../Core/MVC/Model":4,"./../../collections/UserPreferences":32,jquery:103}],133:[function(a,b){b.exports=a("./User")},{"./User":132}],134:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC/Model"),d=c.extend({defaults:{},idAttribute:"key",initialize:function(){this.accountId=null,this.userId=null,c.prototype.initialize.apply(this,arguments),this.collection&&"string"==typeof this.collection.userId&&this.setUserId(this.collection.userId),this.collection&&"string"==typeof this.collection.accountId&&this.setAccountId(this.collection.accountId)},setUserId:function(a){this.userId=a},setAccountId:function(a){this.accountId=a},url:function(){var a=c.prototype.url.apply(this);return(null!==this.accountId||null!==this.userId)&&(a+="?",this.accountId&&(a+="accountId="+this.accountId+"&"),this.userId&&(a+="userId="+this.userId+"&")),a}});b.exports=d}()},{"../../Core/MVC/Model":4}],135:[function(a,b){b.exports=a("./UserPreference")},{"./UserPreference":134}],136:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC/Model"),d=c.extend({urlRoot:"service/visualizations",initialize:function(){c.prototype.initialize.apply(this,arguments),this.on("change sync",this.setIconUrl),this.setIconUrl()},setIconUrl:function(){var a=this.get("thumbnailId"),b=this.get("type"),c="";if(a)c=this.urlRoot+"/"+this.get("visId")+"/thumbnail/"+a+".svg?v=01081831";else switch(b){case"VERTICAL_BARS":c="images/Template_Bars_Button_sm.png?v=01081831";break;case"BUBBLES":c="images/Template_Bubbles_Button_sm.png?v=01081831";break;case"SCATTERPLOT":c="images/Template_Scatterplot_Button_sm.png?v=01081831";break;case"PIE":c="images/Template_Pie_Button_sm.png?v=01081831";break;case"WORD_CLOUD":c="images/Template_WordCloud_Button_sm.png?v=01081831";break;case"MAP":c="images/Template_ZoomableMap_Button_sm.png?v=01081831";break;case"TRENDS":c="images/Template_MultiLine_Button_sm.png?v=01081831";break;case"ZOOMABLE_MAP":c="images/Template_ZoomableMap_Button_sm.png?v=01081831";break;case"WORLD_MAP":c="images/GlobalMap_sm.png?v=01081831";break;case"PIVOT_TABLE":c="images/Template_GridView_Button_sm.png?v=01081831";break;case"TREE_MAP":c="images/Template_HeatMap_Button_sm.png?v=01081831";break;case"HEAT_MAP":c="images/Template_HeatMap2_Button_sm.png?v=01081831";break;case"HORIZONTAL_BARS":c="images/Template_HorizBar_Button_sm.png?v=01081831";break;case"SIDE_BY_SIDE_BARS":c="images/Template_MultiBar_Button_sm.png?v=01081831";break;case"MULTI_METRIC_BARS":c="images/Template_MultiBar_Button_sm.png?v=01081831";break;case"VERTICAL_STACKED_BARS":c="images/Template_MultiGroup_Bar_Button_sm.png?v=01081831";break;case"VERTICAL_100PCT_STACKED_BARS":c="images/Template_Vertical_100pct_Stacked_sm.png?v=01081831";break;case"HORIZONTAL_STACKED_BARS":c="images/Template_Horizontal_Stacked_Bar_Button_sm.png?v=01081831";break;case"HORIZONTAL_100_STACKED_BARS":c="images/Template_Horizontal_100pct_Stacked_sm.png?v=01081831";break;case"HORIZONTAL_SIDE_BY_SIDE_BARS":c="images/Template_SideBySide_Horiz_Button_sm.png?v=01081831";break;case"MULTI_LINE":c="images/Template_MultiLine_Button_sm.png?v=01081831";
break;case"MULTI_METRIC_TREND":c="images/Template_LineAndBar_Button_sm.png?v=01081831";break;case"FINGERPAINT":c="images/Template_Fingerpaint_Button_sm.png?v=01081831";break;case"DONUT":c="images/Template_Donut_Button_sm.png?v=01081831";break;default:c="images/Template_Custom_Button_sm.png?v=01081831"}this.set("thumbnailUrl",c,{silent:!0})},saveEnabled:function(a){this.save({enabled:a})}});b.exports=d}()},{"../../Core/MVC/Model":4}],137:[function(a,b){b.exports=a("./Visualization")},{"./Visualization":136}],138:[function(a,b){!function(){var c=a("underscore"),d=a("jquery"),e=a("./../SourceVisualization"),f=e.extend({idAttribute:"id",fetch:function(){var a=this,b=c.clone(this.attributes),f=d.Deferred();return e.prototype.fetch.apply(this,arguments).done(function(){d.extend(!0,a.attributes,b),b.source&&b.source.variables&&(a.attributes.source.variables=b.source.variables),f.resolve(arguments)}).fail(function(){f.reject(arguments)}),f.promise()}});b.exports=f}()},{"./../SourceVisualization":130,jquery:103,underscore:458}],139:[function(a,b){!function(){"use strict";var c={},d=a("jquery"),e=a("underscore"),f=a("./../utilities"),g=f.time.millisecondsIn,h=a("../Core/MVC/Model"),i=a("./../collections/Metrics"),j=a("./../collections/GroupBys");c.Time=h.extend({defaults:{paused:!1,speed:1,minSpeed:1,timeWindow:"ROLLING_HOUR",time:null,groupTime:null,tz:f.determineTimeZone(),min:0,max:(new Date).getTime(),speedValues:[1,10,60,3600,86400,864e3,5184e3],speedNames:["1x","10x","60x","1h/sec","1d/sec","10d/sec","60d/sec"],live:!1},startTimeFunctions:{},initialize:function(a){e.bindAll(this,"firstMinuteTime","firstHourTime","rollingTime","getStartTime","getEndTime"),this.set("LIVE"===a.time?{time:(new Date).getTime(),live:!0}:"string"==typeof a.time?{time:f.getTimestamp(a.time),paused:a.paused}:{time:a.time,paused:a.paused}),this.on("change:timeWindow",this._updateLimits)},firstMinuteTime:function(a){var b=new Date(a);return b.setMinutes(0,0,0),b.getTime()},firstHourTime:function(a){var b=new Date(a);return b.setHours(0,0,0,0),b.getTime()},rollingTime:function(a){return a-g.hour},getStartTimeStamp:function(){return this.get("fromTime")},getEndTimeStamp:function(){var a=this.get("time");return a},getStartTime:function(a,b,c){var d=this.get("ALL"===this.get("timeWindow")?"min":"fromTime");return a?f.formattedDate(d,b)+" "+f.timeZoneFromTime(d):"DAY"===c?f.formattedDateOnly(d,b,!0):f.formattedDate(d,b)},getEndTime:function(a,b,c){var d=this.get("time");return a?f.formattedDate(d,b)+" "+f.timeZoneFromTime(d):"DAY"===c?f.formattedDateOnly(d,b):f.formattedDate(d,b)},formattedCustomDate:function(a,b,c){return b=1*b,a?f.formattedDate(b,c)+" "+f.timeZoneFromTime(b):f.formattedDate(b,c)},getStartTimeForComparisonPeriod:function(a){var b=this.get("fromTime"),c=new Date(b);if("YESTERDAY"===a)c.setDate(c.getDate()-1);else if("WEEK_AGO"===a)c.setDate(c.getDate()-7);else{var d=a.split("-"),e=new Date(1*d[0],1*d[1]-1,1*d[2]);e.setHours(c.getHours()),e.setMinutes(c.getMinutes()),e.setSeconds(c.getSeconds()),c=e}return b=c&&c.getTime()||b,f.formattedDate(b,!0)+" "+f.timeZoneFromTime(b)},getEndTimeForComparisonPeriod:function(a){var b=this.get("time"),c=new Date(b);if("YESTERDAY"===a)c.setDate(c.getDate()-1);else if("WEEK_AGO"===a)c.setDate(c.getDate()-7);else{var d=a.split("-"),e=new Date(1*d[0],1*d[1]-1,1*d[2]);e.setHours(c.getHours()),e.setMinutes(c.getMinutes()),e.setSeconds(c.getSeconds()),c=e}return b=c&&c.getTime()||b,f.formattedDate(b,!0)+" "+f.timeZoneFromTime(b)},getStartTimeForTimeWindowScaleAndComparisonPeriod:function(a,b){var c=this.get("fromTime"),d=new Date(c);if("YESTERDAY"===b)d.setDate(d.getDate()-1);else if("WEEK_AGO"===b)d.setDate(d.getDate()-7);else{var e=b.split("-"),g=new Date(1*e[0],1*e[1]-1,1*e[2]);g.setHours(d.getHours()),g.setMinutes(d.getMinutes()),g.setSeconds(d.getSeconds()),d=g}return"HOUR"===a?(d.setMinutes(0),d.setSeconds(0)):"DAY"===a&&(d.setHours(0),d.setMinutes(0),d.setSeconds(0)),c=d&&d.getTime()||c,f.formattedDate(c,!0)+" "+f.timeZoneFromTime(c)},getEndTimeForTimeWindowScaleAndComparisonPeriod:function(a,b){var c=this.get("time"),d=new Date(c);if("YESTERDAY"===b)d.setDate(d.getDate()-1);else if("WEEK_AGO"===b)d.setDate(d.getDate()-7);else{var e=b.split("-"),g=new Date(1*e[0],1*e[1]-1,1*e[2]);g.setHours(d.getHours()),g.setMinutes(d.getMinutes()),g.setSeconds(d.getSeconds()),d=g}return"HOUR"===a?(d.setMinutes(59),d.setSeconds(59)):"DAY"===a&&(d.setDate(d.getDate()+1),d.setHours(0),d.setMinutes(59),d.setSeconds(59),d.setHours(-1)),c=d&&d.getTime()||c,f.formattedDate(c,!0)+" "+f.timeZoneFromTime(c)}}),c.Datum=h.extend({idAttribute:"group"});var k={"Descending Value":"valueDescending","Ascending Value":"valueAscending",Alphabetical:"alphabetical","Reverse Alphabetical":"reverseAlphabetical"},l={valueDescending:"Descending Value",valueAscending:"Ascending Value",alphabetical:"Alphabetical",reverseAlphabetical:"Reverse Alphabetical"},m=a("./Filter"),n=a("./../collections/Filters");c.State=h.extend({defaults:{groupBy:null,timeWindowScale:"ROLLING_HOUR",comparison:!1,comparisonPeriod:"YESTERDAY",sort:{dir:"desc",name:"count"},limit:1e3,clientSort:"valueDescending"},initialize:function(a,b){b=b||{};var d,e,g,h=this,k=this.defaults,l=a||{},m=(b.config,b.config&&b.config.get("source")),o=b.hasOwnProperty("interactiveMode")?b.interactiveMode:!0,p=m.variables,q=m.filters||[],r=m.minSpeed?m.minSpeed:1,s=r>1?r:1,t=m.startFrom;switch(this.options=this.options||{},b.config&&(this.config=b.config,delete b.config),b.objectFields&&(this.options.fields=b.objectFields.toJSON(),delete b.objectFields),d=this.options.fields.filter(function(a){return a.name===m.date})[0],"BEGINNING"===t&&d&&(t=d.min,"ROLLING_HOUR"===m.timeWindowScale&&(t+=36e5)),this.metrics=new i(this._retrieveMetrics()),r){case 86400:k.timeWindowScale="WEEK";break;case 3600:k.timeWindowScale="DAY";break;default:k.timeWindowScale="ROLLING_HOUR"}if(e=this.getGroupTime(),g={time:t,speed:s,minSpeed:r,timeWindow:m.timeWindowScale,groupTime:e},d&&(g.min=d.min,g.max=d.max),b.time&&(g.fromTime=b.time.fromTime,g.paused=b.time.paused,g.time=b.time.time,g.live=b.time.live,delete b.time),this.time=new c.Time(g),this.on("change:timeWindowScale",function(a,b){h.config.get("source").timeWindowScale=b}),this.queryBuilderSource=m.variables.queryBuilderSource,this.interactiveMode=o,this.filters=new n(q,{fields:this.options.fields}),this.groupBy=new j(this._retrieveGroupBy(),this._retrieveGroupByDefinition()),e)if(m.variables._limitPeriod)this.groupBy.setLimit(m.variables._limitPeriod,{silent:!0}),l.timeTrendStep=m.timeTrendStep,this.time.set("time",m.variables._timePeriod,{silent:!0});else{var u=f.time.getStepForMinimalGranulation(d.min,d.max,this.isTimeUTC());this.groupBy.setLimit(u.limit,{silent:!0}),l.timeTrendStep=l.timeTrendStep||u.name,this.time.set("time",d.max,{silent:!0})}else l.timeTrendStep=m.timeTrendStep;l.timeWindowScale=b.timeWindowScale||m.timeWindowScale||k.timeWindowScale,l.comparison=l.comparison||"On"===p.Comparison,l.comparisonPeriod=p._comparisonPeriod||l.comparisonPeriod||m.comparisonPeriod||this._getDefaultComparison(),l.sort=l.sort||k.sort,l.clientSort=this._getClientSort(),l.delay=m.delay,l.delayUnit=m.delayUnit,l.timestampField=l.timestampField||m.date,this.set(l)},isTimeUTC:function(){var a=e.findWhere(this.options.fields,{name:this.groupBy.getAttribute()}),b=!1;if(a){var c=a.timestampGranularity;b=-1!==f.time.TIME_STEPS_UTC.indexOf(c)}return b},_getDefaultComparison:function(){var a="YESTERDAY";if(!this.time.get("live")){var b=new Date(this.time.get("time")),c=b.getFullYear().toString(),d=(b.getMonth()+1).toString(),e=b.getDate().toString();a=c+"-"+(d[1]?d:"0"+d[0])+"-"+(e[1]?e:"0"+e[0])}return a},_getClientSort:function(){var a=this.config.get("source").variables,b=k[a.Sort],c=this.groupBy.at(0);return!b&&c&&(b=k[c.get("sort").dir]),b||this.defaults.clientSort},_retrieveGroupByDefinition:function(){var a=this._retrieveGroup(),b=this._retrieveGroups();return{definition:b||a}},getGroupTime:function(){var a,b=this.config.get("variables").filter(function(a){return"group"===a.type&&"time"===a.groupType})[0]||null,c=this.config.get("source").variables;return b&&(a=c[b.name],a?b=d.extend(b,JSON.parse(a)):b.name=this.config.get("source").date,b.sort=b.sort||{},b.timeScale=this.config.get("source").timeTrendStep||b.timeScale),b},_retrieveGroupBy:function(){var a=this,b=this.config,c=[],d="",e=b&&b.get("source"),f=e.variables,g=this.time.get("groupTime"),h=a._retrieveGroup(),i=a._retrieveGroups();if(i)if(f&&f[i.name])c=JSON.parse(f[i.name]);else if(d=i.defaultValue,d&&""!==d)c=[JSON.parse(i.defaultValue)];else{var j=JSON.parse(i.config).groupLevel||2;c=a._getDefaultGroups(j)}else h&&(f&&f[h.name]?c=[JSON.parse(f[h.name])]:(d=h.defaultValue,c=d&&""!==d?[JSON.parse(h.defaultValue)]:a._getDefaultGroup()));return g&&(c=[{name:e.date||g.name,limit:g.limit||10,sort:{name:"date",dir:g.sort.dir||"Ascending Value"}}]),("ZOOMABLE_MAP"===b.get("type")||"ZOOMABLE_MAP"===b.get("templateType"))&&(c=[{name:f.State,limit:1e4,sort:{name:"count",dir:"Descending Value"}}]),c},_getDefaultGroup:function(){var a,b,c="ATTRIBUTE",d={name:"",limit:10,groupType:"attribute",sort:{name:"count",dir:"Descending Value"}};return a=this.options.fields,b=e.findWhere(a,{type:c}),d.name=b?b.name:"none",d},_getDefaultGroups:function(a){var b,c="ATTRIBUTE",d=[];b=this.options.fields;for(var e=0;e<b.length;e++){var f=b[e];if(f.type===c){var g={name:f.name,limit:10,sort:{name:"count",dir:"Descending Value"}};if(d.push(g),d.length>=a)break}}return d},_retrieveGroup:function(){var a=this.config.get("variables"),b=e.findWhere(a,{type:"group"});return b||(b=!1),b},_retrieveGroups:function(){var a=this.config.get("variables"),b=e.findWhere(a,{type:"multi-group"});return b||(b=!1),b},_retrieveMetrics:function(){function a(a){var b=a.name,c=f[b]||"none",h=c.split(":"),i=h[0],j=e.filter(function(a){return a.name===i})[0],k=h[1]||j.func||("count"!==i&&"none"!==i?"sum":null),l={};h[2]&&(l=JSON.parse(h[2].replace(/\|/g,":")),d.extend(a,l)),g.push(d.extend({},a,{label:b,name:i,func:k,id:b}))}function b(b){var c=b.name,d=f[c].split(" ");"color"===b.metricType?a(b):d.forEach(function(a){var b=a.split(":")[0],d=e.filter(function(a){return a.name===b})[0],f=a.split(":")[1]||d.func;g.push({label:c,name:b,func:f})})}var c=this.config.get("variables"),e=this.options.fields||[],f=this.config.get("source").variables,g=[];return c.forEach(function(c){"metric"===c.type?a(c):"multi-metric"===c.type?b(c):null}),g},addFilter:function(a,b){var c,d,f,g,h=this.filters,i=this.config.get("source").date;if(b=b||{},Array.isArray(a))return this.filters.add(a,e.extend({merge:!0},b)),this;if(a instanceof m?null:a=new m(a),d=a.get("path"),g=a.get("operation"),f=a.get("value"),d===i&&(this.config.get("source").showTimeLine||this.isTimeTrends()))return void this.filters.trigger("filter:unsupported",a);if(c=h.findWhere({path:d})){var j=!1,k=e.findWhere(this.options.fields,{name:d,type:"TIME"});b.silent=!0,"number"==typeof f||"number"==typeof c.get("value")||"number"==typeof f[0]||k?(c.set("value",f,b),j=!0):(e.each(f,function(a){c.hasAttribute(a,b)||(j=!0,c.addAttribute(a,b))}),e.each(c.get("value"),function(d){a.hasAttribute(d,b)||c.removeAttribute(d,b)})),c.get("operation")!==g&&(j=!0,c.set("operation",g,b)),j&&b.trigger!==!1&&c.trigger("change")}else this.filters.add(a,b);return this},addFilters:function(a){var b=this;a=e.sortBy(a,function(a){return b.filters.findWhere({path:a.path})}),a.forEach(function(c,d){b.addFilter(c,{silent:d!==a.length-1})})},removeFilter:function(a,b){function c(a,b){var c,d,f,g=e.filters;return a instanceof m?null:a=new m(a),d=a.get("path"),f=a.get("value"),c=g.findWhere({path:d}),c&&1===f.length&&c.hasAttribute(f[0],b)?(c.removeAttribute(f[0],b),e):"undefined"==typeof f[0]||f.length>1?(e.filters.remove(c,b),e):void 0}var e=this;if(d.isArray(a))for(var f=0;f<a.length;f++)c(a[f],b);else c(a,b);return this},setFilter:function(a,b){var c,d,e=this.filters;a instanceof m?null:a=new m(a),d=a.get("path"),c=e.findWhere({path:d}),c?c.set(a.attributes,b):this.addFilter(a,b)},checkForGroupBy:function(){-1===["PIVOT_TABLE","CUSTOM","TRENDS","MULTI_METRIC_TREND","FINGERPAINT"].indexOf(this.config.get("type"))&&("none"===this.groupBy.getAttribute()||0===this.groupBy.models.length)&&this.groupBy.trigger("groupBy:invalid")},toRequest:function(){var a=this.time.get("live"),b=this.config.get("source"),c=this.queryBuilderSource||b.variables.queryBuilderSource,g=b.variables._limitPeriod,h=this.get("timeTrendStep");g&&(b.variables._TempLimitPeriod=g,delete b.variables._limitPeriod);var i=d.extend({},this.attributes),j=this.get("timestampField"),k=this.get("timeWindowScale"),l={};this.checkForGroupBy(),delete i.clientSort,delete i.startFrom;var m=e.findWhere(this.options.fields,{name:j}),n=!1;m&&(n=-1!==f.time.TIME_STEPS_UTC.indexOf(m.timestampGranularity)),i.time=h||j&&!a&&"none"!==j?this.time.get("time"):null,i.tz=86400===this.time.get("minSpeed")||n?"GMT":this.time.get("tz"),i.speed=this.time.get("speed"),l.pauseAfterRead=this.time.get("paused"),l.player=this.config.get("source").showTimeLine?"ON":"OFF",this.groupBy&&(delete i.groupBy,l=l||{},l.group={},l.group.limit=1,l.group.fields=this.groupBy.toJSON(),l.group.fields.forEach(function(a){l.group.limit=l.group.limit*+a.limit;var b=e.clone(a.sort);"count"!==b.name&&b.func&&(b.metricFunc=b.func.toUpperCase()),a.sort=b,delete a.sort.func}),1===l.group.fields.length&&l.group.limit&&delete l.group.limit,l.group.metrics=l.group.metrics||[],this.metrics.each(function(a){a.isCount()||a.isNone()||l.group.metrics.push({name:a.get("name"),func:a.get("func").toUpperCase()})}),this.prepareRequestSortMetric(l.group),h&&(delete i.timeTrendStep,l.group.timeTrendStep=h)),this.filters.length>0&&(delete l.filters,l=l||{},l.filters=this.filters.toRequest()),this.get("sort")&&(delete i.sort,delete l.sort),c&&(l=l||{},l.queryBuilderSource=c);var o=this.get("comparisonPeriod");return i.comparisonPeriod=this.dataToFormatString(this.getTimeByType(i.time,o)),l&&(i.cfg=l),i.volume?delete i.volume:null,i.color?delete i.color:null,i.timeWindowScale&&-1!==k.indexOf("UTC")&&(i.timeWindowScale=f.convertTimeToStringUTC(k,!1)),"none"!==j?e.findWhere(l.filters,{path:j})?(i.time=null,delete i.timestampField):i.timestampField=j:delete i.timestampField,i},prepareRequestSortMetric:function(a){var b,c,d=this.groupBy.toJSON(),e=a.metrics,f=e.map(function(a){return a.name+":"+a.func.toLowerCase()}),g=this.isTimeTrends();g||d.forEach(function(a){a.sort&&"count"!==a.sort.name&&a.name!==a.sort.name&&(b=a.sort.name,c=a.sort.func||"SUM",-1===f.indexOf(b+":"+c.toLowerCase())&&e.push({name:b,func:c.toUpperCase()}))})},getTimeByType:function(a,b){var c=b,d=a&&a<=new Date?new Date(a):new Date,e=new Date(d);e.setDate(d.getDate()-1);var f=new Date(d);f.setDate(d.getDate()-7);var g=new Date(d);g.setDate(d.getDate()-30);var h=new Date(d);h.setDate(d.getDate()-365);var i=new Date(d);switch(i.setDate(d.getDate()-365),b){case"YESTERDAY":c=e;break;case"WEEK_AGO":c=f;break;case"LAST_MONTH":c=g;break;case"MONTH_YEAR_AGO":c=h;break;case"LAST_YEAR":c=i}return c},dataToFormatString:function(a){var b="";return b=a.getFullYear?a.getFullYear()+"-"+(a.getMonth()+1<10?"0":"")+(a.getMonth()+1)+"-"+(a.getDate()<10?"0":"")+a.getDate():a},convertToBookmark:function(a){var b=this,c=this.config.get("source"),g=this.metrics.pluck("label"),h="CUSTOM"===this.time.get("timeWindow"),i=h?f.convertTimeToStringUTC(this.time.get("time")):c.startFrom,j=h?f.convertTimeToStringUTC(this.time.get("fromTime")):c.timeWindowScale,k=d.extend({},c,{filters:this.filters.toJSON(),timeWindowScale:j,timeTrendStep:this.get("timeTrendStep"),startFrom:i,sourceId:c.sourceId,sourceName:c.sourceName,showTimeLine:c.hasOwnProperty("showTimeLine")?c.showTimeLine:a.get("showTimeLine")});if(k.variables=k.variables||{},k.variables.Sort=l[this.attributes.clientSort],k.variables.Comparison=this.get("comparison")?"On":"Off",k.variables._comparisonPeriod=this.get("comparisonPeriod"),this.isSingleGroupBy()){var m="",n=null,o=e.findWhere(b.config.get("variables"),{type:"group"});o&&(m=o.name,n=this.groupBy.at(0),k.variables[m]=JSON.stringify(n.toJSON(!0)))}else{var m="",n=null,o=e.findWhere(b.config.get("variables"),{type:"multi-group"});o&&(m=o.name,n=this.groupBy,k.variables[m]=JSON.stringify(n.toJSON(!0)))}return g.forEach(function(a){k.variables[a]=""}),this.metrics.map(function(a){var c,d=a.get("label"),e=a.get("name"),f=a.get("func"),g="[]";k.variables.hasOwnProperty(d)?k.variables[d]+=(k.variables[d].length>0?" ":"")+("count"===e?e:e+":"+f):null,b.colorDataObj&&b.colorDataObj.id===a.id&&(1===k.variables[d].split(":").length&&(k.variables[d]+=":"),"distinct"===b.divergingColorRange&&(c=b.colorMetricDomain),g=b.colorDataObj.get("colors")||b.colorDataObj.get("savedColors"),"string"!=typeof g&&(g=JSON.stringify(g)),k.variables[d]+=":"+JSON.stringify({colorNumb:b.colorNumb,legendType:b.legendType,divergingColorRange:b.divergingColorRange,autoShowColorLegend:b.colorDataObj.get("autoShowColorLegend"),colorLegendPosition:b.colorDataObj.get("colorLegendPosition"),savedColors:g,colorSet:b.colorDataObj.get("colorSet"),domain:c}).replace(/:/g,"|"))}),k},isSingleGroupBy:function(){var a=!0,b=this.groupBy;return b.length>1&&(a=!1),a},isTimeTrends:function(){var a=this.config.toJSON();return!!e.findWhere(a.variables,{groupType:"time"})},isMultiGroups:function(){var a=this.config.toJSON();return!!e.findWhere(a.variables,{type:"multi-group"})},isMultiMetric:function(){var a=this.config.toJSON();return!!e.findWhere(a.variables,{type:"multi-metric"})},isLastValueFunc:function(){return!!this.metrics.findWhere({func:"last_value"})},_hasPlayerOption:function(){var a=this.config.toJSON(),b=a.source,c=!!e.findWhere(a.variables,{groupType:"time"});return b.showTimeLine||c}}),b.exports=c}()},{"../Core/MVC/Model":4,"./../collections/Filters":17,"./../collections/GroupBys":23,"./../collections/Metrics":25,"./../utilities":144,"./Filter":117,jquery:103,underscore:458}],140:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("moment"),e=a("jquery");b.exports=function(a,b,f){b="NONE"==b?!1:b;var g=a,h=!1,i=b,j=function(a){return h||(h=new Date(1*a)),h};this.format=function(a){var b=null;switch(h=!1,g){case"MONEY":b=e.formatNumber(a,{format:"$#,##0.00",locale:"us"});break;case"TIME":parseInt(a)==a&&(a=Number(a)),b=d(a);var k;k=f&&-1!==["DAY","WEEK","MONTH","YEAR"].indexOf(f)?"MM/DD/YYYY":"MM/DD/YYYY, hh:mm:ss A",b=b.format(k);break;case"DATE":b=j(a).getDay();break;case"MINUTE":if(isNaN(1*a))return"";var l=j(a).getHours(),m=j(a).getMinutes(),n=l>12?l-12:l||12;b=(10>n?"0":"")+n+":"+(10>m?"0"+m:m)+(l>=12?" pm":" am");break;case"HOUR":if(isNaN(1*a))return"";var l=j(a).getHours(),n=l>12?l-12:l||12;b=(10>n?"0":"")+n+(l>=12?" pm":" am");break;case"DAY":if(isNaN(1*a))return"";var o="DAY"==i?j(a).getUTCDate():j(a).getDate(),p="DAY"==i?j(a).getUTCMonth()+1:j(a).getMonth()+1;b=(10>p?"0"+p:p)+" / "+(10>o?"0"+o:o);break;case"WEEK":if(isNaN(1*a))return"";var o="DAY"==i?j(a).getUTCDate():j(a).getDate(),p="DAY"==i?j(a).getUTCMonth()+1:j(a).getMonth()+1;b=(10>p?"0"+p:p)+" / "+(10>o?"0"+o:o);break;case"MONTH":if(isNaN(1*a))return"";var p="DAY"==i?j(a).getUTCMonth()+1:j(a).getMonth()+1,q="DAY"==i?j(a).getUTCFullYear():j(a).getFullYear();b=q+" / "+(10>p?"0"+p:p);break;case"YEAR":if(isNaN(1*a))return"";b="DAY"==i?j(a).getUTCFullYear():j(a).getFullYear();break;default:if(c.isString(a))return a;Math.abs(a)>=1e-4&&Math.abs(a)<=1?b=e.formatNumber(a,{format:"0.####",locale:"us"}):Math.abs(a)>1?b=e.formatNumber(a,{format:"#,##0.##",locale:"us"}):(null===a&&(a=0),b="number"==typeof a&&0!==a?a.toExponential(4).toString():a.toString())}return b}}}()},{jquery:103,moment:457,underscore:458}],141:[function(a,b){!function(){"use strict";var c=a("./log10");b.exports=function(a,b,d){function e(){h=f(l-k,!1),g=f(h/(m-1),!0),i=Math.floor(k/g)*g,j=Math.ceil(l/g)*g}function f(a,b){var d,e,f;return d=Math.floor(c(a)),e=a/Math.pow(10,d),f=b?1.5>e?1:3>e?2:7>e?5:10:1>=e?1:2>=e?2:5>=e?5:10,f*Math.pow(10,d)}var g,h,i,j,k=a,l=b,m=d;this.setMinMaxPoints=function(a,b){k=a,l=b,e()},this.setMaxTicks=function(a){m=a,e()},this.getTickSpacing=function(){return g||0},this.getNiceMin=function(){return i||0},this.getNiceMax=function(){return j||0},e()}}()},{"./log10":145}],142:[function(a,b){!function(){"use strict";function c(a,b){return b>a?"0"+a:a.toString()}function d(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function e(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.hash)||[,""])[1].replace(/\+/g,"%20"))||null}function f(){var a=[],b={};-1!==location.search.indexOf("?")&&(a=location.search.split("?")[1].split("#")[0].split("&"));for(var c=0;c<a.length;c++){var d=a[c].split("=");b[d[0]]=d[1]}if(Zoomdata.pageData)var e=Zoomdata.pageData.csrfToken,f=Zoomdata.pageData.csrfParameterName;var g=b.server||window.location.hostname,h=b.port||location.port||!1,i=b.key?"key="+b.key:void 0,j=e?f+"="+e:void 0;if(i)var k=i;j&&(k=k?"&"+j:j);var l=("https:"==location.protocol?"wss":"ws")+"://"+g+(h?":"+h:"")+"/zoomdata/websocket/"+(k?"?"+k:"");return{host:l,time:(new Date).getTime(),params:b}}function g(a,b){for(var c=a.visualizations||[],e=b||d("visId"),f=0;f<c.length;f++)if(c[f].visId==e){var g=c[f];return g}}function h(a){var b=["avg","min","max","sum"];return a&&i(a)&&b.push("last_value"),b}function i(a){if(!a)throw new ReferenceError("Source needed");if(a.toRequest().cfg.group.metrics.length>1)return!1;var b=a.config.attributes.source.sourceFeatures,c=(a.config.attributes.variables,a.isMultiGroups());return b.indexOf("LV_METRIC")>=0&&!c}function j(a){var b=["MONEY","INTEGER","NUMBER","COUNT OF","FORMULA"];return b.indexOf(a.toUpperCase())>=0}function k(a){var b=a.split(/[^0-9]/),c=new Date,d=-1!==a.indexOf("UTC"),e=new Date(a.replace(" UTC","Z").replace(" ","T"));return"Invalid Date"===e.toString()?e:(d?(c.setUTCFullYear(b[0]),c.setUTCMonth(b[1]-1),c.setUTCDate(b[2]),c.setUTCHours(b[3]),c.setUTCMinutes(b[4]),c.setUTCSeconds(b[5])):(c.setFullYear(b[0]),c.setMonth(b[1]-1),c.setDate(b[2]),c.setHours(b[3]),c.setMinutes(b[4]),c.setSeconds(b[5])),c)}function l(a){for(var b=a.visualizations,c=d("visId"),e=0;e<b.length;e++)if(b[e].visId==c){var f=b[e];return f.source}}function m(a){return a>=12&&(a-=12),0===a&&(a=12),a}function n(a){var b=new Date(Math.round(a)),d=b.getHours()>=12?" PM":" AM",e=m(b.getHours())+":"+c(b.getMinutes(),10)+":"+c(b.getSeconds(),10)+d;return e}function o(a,b,c){function d(a){var b=+a,c="";return c=10>b?"0"+b:""+b}var e=new Date(Math.round(a)),f=c?e.getUTCMonth():e.getMonth(),g=c?e.getUTCDate():e.getDate(),h=c?e.getUTCFullYear():e.getFullYear();return f+=1,b?d(f)+"/"+d(g)+"/"+h:h+"/"+d(f)+"/"+d(g)}function p(a){var b=new Date(Math.round(a)),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return b.getDate()+" "+c[b.getMonth()]+" "+(1900+b.getYear())}function q(a,b){return o(a,b)+" "+n(a)}function r(a){var b=new Date(a);"string"==typeof a&&isNaN(b)&&(a=a.replace(/-/g,"/"),b=new Date(a));var c=b.getTimezoneOffset()/-60;return"GMT"+(c>0?"+":"")+c}function s(){var a=A.determine();return a.name()}function t(){return window.pageUserData}function u(a){"string"==typeof a&&(a=a.replace(" UTC","+0000"));var b=new Date(a);return isNaN(b)&&(b=new Date(a.replace(" ","T"))),isNaN(b)&&(b=new Date(a.replace("T"," ").replace("-","/"))),x.datepicker.formatDate("mm/dd/yy",b)+" "+D.formattedTimeOnly(b)}function v(a){"string"==typeof a&&(a=a.replace(" UTC","+0000"));var b=new Date(a);return isNaN(b)&&(b=new Date(a.replace(" ","T"))),x.datepicker.formatDate("mm/dd/yy",b)}function w(a){this.options=x.extend({},this.defaults,a),this.$el=x('<div class="zd-radial-item-filter"></div>'),this.$donut=x('<div class="zd-radial-item-donut"></div>').appendTo(this.$el),this.$filler=x('<div class="zd-radial-item-filler"></div>').appendTo(this.$el),this.$center=x('<div class="zd-radial-item-center"></div>').appendTo(this.$donut),this.positionElements()}var x=a("jquery"),y=a("underscore"),z=a("../Core/MVC/View"),A=a("jstz"),B=a("canvg"),C=a("moment"),D={};D.MetricFormatter=a("./MetricFormatter"),D.NiceScale=a("./NiceScale");var E=a("./dialogTemplate.html");D.Dialog=z.extend({defaults:{template:E,mode:"dialog",draggable:!1,wide:!1,modal:"static",rejectButtonLabel:"Close",acceptButtonLabel:"Accept",rejectButtonTitle:"Close",acceptButtonTitle:"Accept"},events:{'click button[value="dialog-reject"]':"hide",'click button[value="dialog-accept"]':"accept"},initialize:function(a){var b=this;switch(this.settings=x.extend({},this.defaults,a),this.setElement(this.settings.template({rejectButtonLabel:this.settings.rejectButtonLabel,acceptButtonLabel:this.settings.acceptButtonLabel,rejectButtonTitle:this.settings.rejectButtonTitle,acceptButtonTitle:this.settings.acceptButtonTitle})),this.$el.appendTo("body"),this.$el.modal({show:!1,backdrop:this.settings.modal,keyboard:!1}),this.settings.mode){case"alert":this.$('button[value="dialog-accept"]').hide()}this.$head=this.$(".dialog-head"),this.$body=this.$(".dialog-body"),this.settings.draggable&&this.$el.draggable({start:function(){b.$el.removeClass("fade")},stop:function(){b.$el.addClass("fade")},cursor:"move"}),this.settings.wide&&this.$el.addClass("wide")},render:function(a,b){this.$body.empty(),this.$head.empty(),this.$body.append(a),void 0!==b?(this.$head.append(b),this.$head.show()):this.$head.hide(),this.$el.modal("show"),this.delegateEvents()},onBeforeHide:x.noop,hide:function(){var a=this;this.onBeforeHide()!==!1&&(this.$el.one("hidden",function(){a.trigger("dialog:rejected"),a.remove(),a.onReject()}),this.$el.modal("hide"))},onReject:x.noop,onBeforeAccept:x.noop,accept:function(){var a=this;this.onBeforeAccept()!==!1&&(this.$el.one("hidden",function(){a.trigger("dialog:accepted"),a.remove(),a.onAccept()}),this.$el.modal("hide"))},onAccept:x.noop});var F=y.template('        <span><%= message %></span>        <i title="<%= acceptTitle%>" class="icon-ok icon-white"></i>        <i title="<%= cancelTitle%>" class="icon-remove icon-white"></i>    ');D.ConfirmMessage=z.extend({tagName:"span",className:"label label-warning pull-right confirmMessage",defaults:{template:F,message:"Warning",acceptTitle:"Accept",cancelTitle:"Cancel"},events:{"click .icon-ok":"accept","click .icon-remove":"cancel"},initialize:function(a){this.settings=x.extend({},this.defaults,a),this._deferred=x.Deferred(),this.result=this._deferred.promise()},accept:function(){this.remove(),this._deferred.resolve()},cancel:function(){this.remove(),this._deferred.reject()},render:function(){return this.$el.html(this.settings.template({message:this.settings.message,acceptTitle:this.settings.acceptTitle,cancelTitle:this.settings.cancelTitle})),this.delegateEvents(),this}}),D.getTimestamp=function(a){var b=a.split(" ")[0],c=b.replace(/-/g,"/");a=a.replace(b,c);var d=new Date(a).getTime();return isNaN(d)?parseInt(a,10):d},D.isNotUndefinedOrNull=function(a){return void 0!==a&&null!==a},D.isFirstTime=function(a){var b="zd_first_enter_ts-"+a,c=D.getCookie(b),d=(new Date).getTime(),e=864e5;return x.isNumeric(c)?e>d-+c?!0:!1:(D.setCookie(b,(new Date).getTime()),!0)},D.setCookie=function(a,b,c){var d=new Date;d.setDate(d.getDate()+c);var e=escape(b)+(null===c?"":"; expires="+d.toUTCString());document.cookie=a+"="+e},D.getCookie=function(a){var b=window.sessionStorage.sessionId;if(!D.isNotUndefinedOrNull(b)){var c=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));b=c?decodeURIComponent(c[1]):void 0}return b},D.namespace=function(a,b){var c=[],d=b||window;return a&&(c=a.split(".")),x.each(c,function(a,b){d.hasOwnProperty(b)||(d[b]={}),d=d[b]}),d},D.isIE=function(){var a,b=window.navigator.userAgent,c=window.navigator.appVersion,d=-1!==b.indexOf("MSIE"),e=c.indexOf("Trident/")>0;return a=d||e?d||e:!1},D.preventUnsavedGestures=function(){if(navigator.userAgent.match(/Macintosh/)&&navigator.userAgent.match(/Chrome/)){{x(window)}D.turnOnPrompt(!1),D.preventSwipeForBack()}},D.preventSwipeForBack=function(a){if(navigator.userAgent.match(/Macintosh/)&&navigator.userAgent.match(/Chrome/)){var b=a||x(window);if("undefined"==typeof b.mousewheel)return;b.mousewheel(function(a,b,c,d){if(!(Math.abs(d)>10||0===c)){var e,f,g=x(a.target).parents();e=!y(g).detect(function(a){var b=x(a).scrollLeft()>0;return b}),f=!y(g).detect(function(a){var b=x(a).scrollLeft()-(a.scrollWidth-a.clientWidth)<0;return b}),0>=c&&e===!0&&f===!1&&a.preventDefault(),c>=0&&e===!1&&f===!0&&a.preventDefault()}})}},D.turnOnPrompt=function(a){var b=x(window),c="Are you sure you want to leave the page unsaved?",d=null;d=a?a?a:c:"",b.unbind("beforeunload"),b.bind("beforeunload",function(){return d})},D.turnOffPrompt=function(){x(window).unbind("beforeunload")},D.validateDateInput=function(a){var b=/^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/;return b.test(a)},D.validateTimeInput=function(a){var b=/(?:[0-1]?[0-9]|[2][1-4]):[0-5]?[0-9]:[0-5]?[0-9]\s?(?:am|pm)?/;return b.test(a)},D.validateUrl=function(a){var b=/^((https?|ftp):\/\/)?(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,c=/^(https?|ftp):\/\/(.*)/;return b.test(a)||c.test(a)};var G=Math.sqrt(2);w.prototype={defaults:{start:-30,angle:120,gap:8,radius:200,width:60,color:"rgba(0, 0, 0, 0.7)"},maxAngle:160,positionElements:function(){var a=this,b=this.options.gap,c=this.options.radius,d=Math.max(this.options.angle,1),e=90-this.options.start,f=90-d,g=c*(1+(0>f?Math.sin(-f/180*Math.PI):0)),h=this.options.radius,i=this.options.width,j=parseInt(this.$center.width())||20,k=parseInt(this.$center.height())||20,l=h-i,m=/(iPhone|iPod|iPad)/i.test(navigator.userAgent),n=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);a.$el.css({width:g,height:g,borderWidth:b/2+"px",transform:(m||n)&&1===e?"rotate("+e+"deg)":"rotate("+e+"deg) skew(0deg, "+f+"deg)",transformOrigin:"100% 100%"}),a.$donut.css({left:g-h,top:g-h,width:2*h,height:2*h,borderWidth:i,transform:(m||n)&&1===e?"rotate("+-(d-90)/2+"deg)":"skew(0deg, "+-f+"deg) rotate("+-(d-90)/2+"deg)"}),(m||n)&&(a.$el.css({transition:"0.1s ease-in","-ms-transition":"0.1s ease-in","-moz-transition":"0.1s ease-in","-webkit-transition":"0.1s ease-in"}),a.$donut.css({transition:"0.1s ease-in","-ms-transition":"0.1s ease-in","-moz-transition":"0.1s ease-in","-webkit-transition":"0.1s ease-in"})),a.$filler.css({left:g-l,top:g-l,width:2*l,height:2*l,transform:"skew(0deg, "+-f+"deg)"}),a.$center.css({left:-(l*(G/2-1)+i*(G/4)+j/2),top:-(l*(G/2-1)+i*(G/4)+k/2),transform:"rotate("+((d-90)/2-e)+"deg)"})
},get:function(){var a=[];if(0===arguments.length)a=this.options;else if(1==arguments.length)a=this.options[arguments[0]]||null;else for(var b=0;b<arguments.length;b++)a[arguments[b]]=this.options[arguments[b]]||null;return a},set:function(a){"number"==typeof a.start&&(this.options.start=a.start),"number"==typeof a.angle&&(this.options.angle=Math.min(a.angle,this.maxAngle)),"number"==typeof a.gap&&(this.options.gap=a.gap),"number"==typeof a.radius&&(this.options.radius=a.radius),"number"==typeof a.width&&(this.options.width=a.width),"number"==typeof a.color&&(this.options.color=a.color),this.positionElements()},close:function(){var a=this.options;this.set({start:a.start+a.angle/2,angle:0})},remove:function(){this.$el.remove()}},D.Arc=w,D.getURLParameter=d,D.getHashParameter=e,D.parseUrlParams=f,D.getVisualizationDetails=g,D.getSourceDetails=l,D.pad=c,D.hoursToAMPM=m,D.formattedTimeOnly=n,D.formattedDateTime=u,D.formattedDateOnly=o,D.formattedDate=q,D.formattedOnlyDate=v,D.timeZoneFromTime=r,D.determineTimeZone=s,D.formattedDateMonth=p,D.getPageUserData=t,D.getFunctionsForMetric=h,D.hasLastValue=i,D.isNumericAttributeType=j,D.getDateObjFromString=k,D.time={},D.time.getPreviousHour=function(a){return a-D.time.millisecondsIn.hour},D.time.getMaxStepLimit=function(){return 100},D.time.getLowerStep=function(a){var b="",c=["MILLISECOND","SECOND","MINUTE","HOUR","DAY","WEEK","MONTH","YEAR"],d=c.indexOf(a),e=d-1;return b=0>e?"MINUTE":c[e]},D.time.getMaxStep=function(a,b){var c=null,d=["MILLISECOND","SECOND","MINUTE","HOUR","DAY","WEEK","MONTH","YEAR"],e=d.indexOf(a),f=d.indexOf(b);if(-1===e)throw"Step 1 is wrong";if(-1===f)throw"Step 2 is wrong";return c=e>f?a:b},D.time.getMinStep=function(a,b,c){var d=null,e=D.time.getMaxStep(a,b,c);return d=e===a?b:a},D.time.getDaysInMonth=function(a,b){var c=new Date(a);return b?(c.setUTCDate(15),c.setUTCMonth(c.getUTCMonth()+1),c.setUTCDate(0),c.getUTCDate()):(c.setDate(15),c.setMonth(c.getMonth()+1),c.setDate(0),c.getDate())},D.time.formatAMPM=function(a,b){var c,d;b?(c=a.getUTCHours(),d=a.getUTCMinutes()):(c=a.getHours(),d=a.getMinutes());var e=c>=12?"pm":"am";c%=12,c=c?c:12,d=10>d?"0"+d:d;var f=c+":"+d+" "+e;return f},D.time.formatAMPMForHours=function(a,b){var c;c=b?a.getUTCHours():a.getHours();var d=c>=12?"pm":"am";c%=12,c=c?c:12;var e=c+" "+d;return e},D.time.getWeekNumber=function(a,b){if(a=new Date(a),b){a.setUTCHours(0,0,0),a.setUTCDate(a.getUTCDate()+4-(a.getUTCDay()||7));var c=new Date(a.getUTCFullYear(),0,1),d=Math.ceil(((a-c)/864e5+1)/7);return[a.getUTCFullYear(),d]}a.setHours(0,0,0),a.setDate(a.getDate()+4-(a.getDay()||7));var c=new Date(a.getFullYear(),0,1),d=Math.ceil(((a-c)/864e5+1)/7);return[a.getFullYear(),d]},D.time.getRangeForStep=function(a,b,c,d){var e=d?C.utc(a):C(a),f=d?C.utc(b):C(b);switch(c){case"YEAR":e.month(0),f.month(11);case"MONTH":{D.time.months[f.month()]}e.date(1),f.date(28);case"WEEK":case"DAY":e.hour(0),f.hour(23);case"HOUR":e.minute(0),f.minute(59)}return{min:e.toDate(),max:f.toDate()}},D.time.floorDateForStep=function(a,b,c){var d=c?C.utc(a):C(a);switch(b){case"YEAR":d.month(0);case"MONTH":d.date(1);case"WEEK":case"DAY":d.hour(0);case"HOUR":d.minute(0);case"MINUTE":d.second(0);case"SECOND":d.millisecond(0)}return d.toDate()},D.time.recalculateLimit=function(a,b,c){var d=1,e=1,f=D.time.getMaxStepLimit();switch(a){case"MINUTE":e=b;break;case"HOUR":e=60*b;break;case"DAY":e=60*b*24;break;case"WEEK":e=60*b*24*7;break;case"MONTH":e=60*b*24*31;break;case"YEAR":e=60*b*24*365}switch(d=e,c){case"MINUTE":d=e;break;case"HOUR":"MINUTE"!==a&&(d=e/60);break;case"DAY":"HOUR"!==a&&(d=e/60/24);break;case"WEEK":"DAY"!==a&&(d=e/60/24/7);break;case"MONTH":"WEEK"!==a&&(d=e/60/24/31);break;case"YEAR":"MONTH"!==a&&(d=e/60/24/365)}return d=Math.ceil(d),d>f?f:d},D.time.getRoundedDateRange=function(a,b,c,d,e){var f,g=c,h=new Date("number"==typeof a?a:a.getTime()),i=new Date("number"==typeof b?b:b.getTime()),j=i.getTime()-h.getTime();if(j>0){g||(j<=D.time.millisecondsIn.hour?g="MINUTE":j<=D.time.millisecondsIn.day?g="HOUR":j<=29*D.time.millisecondsIn.day?g="DAY":j<=60*D.time.millisecondsIn.day?g="WEEK":j<=365*D.time.millisecondsIn.day?g="MONTH":j>365*D.time.millisecondsIn.day&&(g="YEAR"));var k=e?C.utc(a):C(a),l=e?C.utc(b):C(b);if(d)switch(g){case"YEAR":k.month(0),l.month(11);case"MONTH":k.date(1),l.date(28);case"WEEK":case"DAY":k.hour(0),l.hour(23);case"HOUR":k.minute(0),l.minute(59)}var m=l.diff(k,g,!0);f=Math.ceil(m)}else f=d?1:0;return{step:g,amount:f}},D.time.getStepForMinimalGranulation=function(a,b,c){for(var d,e,f=["YEAR","MONTH","WEEK","DAY","HOUR","MINUTE"],g=D.time.getMaxStepLimit(),h=0;h<f.length;h++){var i=f[h],j=D.time.getRoundedDateRange(a,b,i,!0,c);if(j.amount>g){e||(e=j),d={name:e.step,limit:e.amount};break}e=j}return d||(d={name:e.step,limit:e.amount}),d},D.time.forceTimeToUTC=function(a,b){if(b)return a;var c=new Date(a).getTimezoneOffset();return new Date(a).getTime()-60*c*1e3},D.time.forceTimeToLocal=function(a,b){if(b)return a;var c=new Date(a).getTimezoneOffset();return new Date(a).getTime()+60*c*1e3},D.time.TIME_STEPS_UTC=["YEAR","MONTH","WEEK","DAY"],D.time.days=[{acr:"Sun",full:"Sunday"},{acr:"Mon",full:"Monday"},{acr:"Tue",full:"Tuesday"},{acr:"Wed",full:"Wednesday"},{acr:"Thu",full:"Thursday"},{acr:"Fri",full:"Friday"},{acr:"Sat",full:"Saturday"}],D.time.months=[{acr:"Jan",full:"January",days:31},{acr:"Feb",full:"February",days:28},{acr:"Mar",full:"March",days:31},{acr:"Apr",full:"April",days:30},{acr:"May",full:"May",days:31},{acr:"Jun",full:"June",days:30},{acr:"Jul",full:"July",days:31},{acr:"Aug",full:"August",days:31},{acr:"Sep",full:"September",days:30},{acr:"Oct",full:"October",days:31},{acr:"Nov",full:"November",days:30},{acr:"Dec",full:"December",days:31}],D.time.millisecondsIn={},D.time.millisecondsIn.sec=1e3,D.time.millisecondsIn.min=60*D.time.millisecondsIn.sec,D.time.millisecondsIn.hour=60*D.time.millisecondsIn.min,D.time.millisecondsIn.day=24*D.time.millisecondsIn.hour,D.time.millisecondsIn.week=7*D.time.millisecondsIn.day,D.time.millisecondsIn.month=31*D.time.millisecondsIn.day,D.time.millisecondsIn.year=365*D.time.millisecondsIn.day,D.time.millisecondsIn.second=D.time.millisecondsIn.sec,D.time.millisecondsIn.minute=D.time.millisecondsIn.min,D.time.getEndTimeWithinStep=function(a,b,c,d){var e=new Date(a),f=d?-1:0;switch(b){case"MINUTE":c?(e.setUTCMilliseconds(0),e.setUTCSeconds(0),e.setUTCMinutes(e.getUTCMinutes()+1)):(e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(e.getMinutes()+1));break;case"HOUR":c?(e.setUTCMilliseconds(0),e.setUTCSeconds(0),e.setUTCMinutes(0),e.setUTCHours(e.getUTCHours()+1)):(e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(e.getHours()+1));break;case"DAY":c?(e.setUTCMilliseconds(0),e.setUTCSeconds(0),e.setUTCMinutes(0),e.setUTCHours(0),e.setUTCDate(e.getUTCDate()+1)):(e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e.setDate(e.getDate()+1));break;case"WEEK":c?(e.setUTCMilliseconds(0),e.setUTCSeconds(0),e.setUTCMinutes(0),e.setUTCHours(0),e.setUTCDate(e.getUTCDate()+7)):(e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e.setDate(e.getDate()+7));break;case"MONTH":c?(e.setUTCMilliseconds(0),e.setUTCSeconds(0),e.setUTCMinutes(0),e.setUTCHours(0),e.setUTCDate(1),e.setUTCMonth(e.getUTCMonth()+1)):(e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e.setDate(1),e.setMonth(e.getMonth()+1));break;case"YEAR":c?(e.setUTCMilliseconds(0),e.setUTCSeconds(0),e.setUTCMinutes(0),e.setUTCHours(0),e.setUTCDate(1),e.setUTCMonth(0),e.setUTCFullYear(e.getUTCFullYear()+1)):(e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e.setDate(1),e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return e.getTime()+f},D.convertTimeToStringUTC=function(a,b,c){function d(a){var b=a+"";return b.length<2?"0"+b:b}var e="string"==typeof a?D.unifyUTCTimeString(a):a;a=new Date(e),b="undefined"!=typeof b?b:!0,c="undefined"!=typeof c?c:!0;var f=new Date(a),g=b?f.getUTCFullYear():f.getFullYear(),h=d((b?f.getUTCMonth():f.getMonth())+1),i=d(b?f.getUTCDate():f.getDate()),j=d(b?f.getUTCHours():f.getHours()),k=d(b?f.getUTCMinutes():f.getMinutes()),l=d(b?f.getUTCSeconds():f.getSeconds()),m=g+"-"+h+"-"+i+" "+j+":"+k+":"+l;return b&&c&&(m+=" UTC"),m},D.convertTimeToShortStringUTC=function(a,b,c){function d(a){var b=a+"";return b.length<2?"0"+b:b}var e="string"==typeof a?D.unifyUTCTimeString(a):a;a=new Date(e),b="undefined"!=typeof b?b:!0,c="undefined"!=typeof c?c:!0;var f=new Date(a),g=b?f.getUTCFullYear():f.getFullYear(),h=d((b?f.getUTCMonth():f.getMonth())+1),i=d(b?f.getUTCDate():f.getDate()),j=g+"-"+h+"-"+i;return j},D.noUTCString=function(a){return-1!==a.indexOf("UTC")&&(a=a.replace("UTC","").trim()),a},D.unifyUTCTimeString=function(a){return-1!==a.indexOf("UTC")&&(a=a.replace("UTC","").trim()),new Date(a.replace(" ","T"))},D.getStringGmtTime=function(a,b){b=b||"MM/DD/YYYY hh:mm:ss A";var c,d=r(a),e=new RegExp(/\d\d:\d\d/);return c=isNaN(new Date(a))?C.utc(D.noUTCString(a)).local():C.utc(a).local(),c=c.format(b),e.test(c)&&(c+=" ("+d+")"),c},D.log10=a("./log10"),D.isRetina=function(){return window.devicePixelRatio>1},D.keepLinebreaks=function(a){return a&&a.replace?a.replace(/\n|\r/g,"<br>"):a},D.toTitleCase=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},D.MODE={NORMAL:0,WIDGET:1,EMBEDDED:2,NATIVE:3};var H=-1;D.mode=function(){if(-1!==H)return H;H=D.MODE.NORMAL;var a=d("__target");if("widget"===a)H=D.MODE.WIDGET;else if("embedded"===a)H=D.MODE.EMBEDDED;else{var b=/(iPhone|iPod|iPad)/i.test(navigator.userAgent),c=/(Safari)/i.test(navigator.userAgent);b&&!c&&(H=D.MODE.NATIVE)}return H},D.getHiddenControls=function(){var a=d("hidecontrol");return a=a?a.split(","):[],console.log("hiddenControls",a),a},D.visualizationStartedUnique={_counter:0},D.visualizationStarted=function(a,b){var c={WORD_CLOUD:1e3,ZOOMABLE_MAP:2e3,VERTICAL_BARS:100,TREE_MAP:1e3,HEAT_MAP:1e3,MULTI_METRIC_TREND:100,SIDE_BY_SIDE_BARS:900,STACKED_BARS:900,TRENDS:100,PIE:600,PIVOT_TABLE:1e3,DEFAULT:100},d=c.DEFAULT;if(a){if(D.visualizationStartedUnique[a.UUID])return!1;D.visualizationStartedUnique[a.UUID]=!0,d=a.customReadyStatusDelay?a.customReadyStatusDelay:c[a.config.type]||c.DEFAULT,d+=1002}D.preventSwipeForBack();var e="screenshot_status_ready",f=x("body");return setTimeout(function(){D.visualizationStartedUnique._counter++,b===D.visualizationStartedUnique._counter&&(f.addClass(e),console.log(a.UUID+" started with delay "+d+"ms."))},d),!0},D.isSingleVizualization=function(){return Zoomdata.main.currentSection.widgetGrid.childViews.length<2},D.isSmallWidget=function(a,b){var c=500,d=380;return c>=a||d>=b},D.getWidgetSizeClass=function(a,b){var c=500,d=380,e=1e3,f=700,g=["small","medium","large"],h=g[1];return(a>e||b>f)&&(h=g[2]),(e>=a||f>=b)&&(a>=c||b>=d)&&(h=g[1]),(c>a||d>b)&&(h=g[0]),h},D.generateUUID=function(){return"xxxxxxxxxxxxxxxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},"undefined"!=typeof Hammer&&(Hammer.plugins.fakeMultitouch(),x(function(){x("body").hammer()})),D.getVersion=function(){var a=x.Deferred(),b=Zoomdata.pageData&&Zoomdata.pageData.version?Zoomdata.pageData.version:null;return b?a.resolve(b):x.ajax({url:"service/version/",success:function(b){a.resolve(b)},fail:function(){a.reject()}}),a.promise()},D.getUrlVars=function(){var a={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){a[c]=d}),a},D.detectTouchDevice=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},D.sourceExists=function(a,b,c){var d=!1;return admin.sources.each(function(a){b.toLowerCase()===a.get("name").toLowerCase()&&a.get("id")!==c&&(d=!0)}),d},D.isIOS=function(){return/(iPhone|iPod|iPad)/i.test(navigator.userAgent)},D.rTrim=function(a){return a.replace(/\s+$/,"")},D.lTrim=function(a){return a.replace(/^\s+/,"")},D.appendStylesWithScoping=function(a,b){a&&a.each(function(a,c){var d=document.createElement("STYLE"),e=!1;x(c.attributes).each(function(a,b){var c=b.name||b.nodeName,f=b.value||""===b.value?b.value:b.nodeValue;e=e||"scoped"===c,d.setAttribute(c,f)}),d.innerHTML=c.innerText||c.textContent||x(c).text(),b.appendChild(d),e&&x(d).scopedPolyFill()})},D.scopedPolyFill=function(a){function b(a,c){if(c&&(a=c),!a.nodeName)return a.jquery?a.each(b):void 0;if("STYLE"===a.nodeName&&!e.scopeSupported){for(var d,f,g,h=a[e.sheet],i=h[e.rules],j=a.parentNode,k="",l=i.length||0;j;)j.id&&(k="#"+j.id+" "+k),j=j.parentNode;for(;l--;)d=i[l],f=k+" "+d.selectorText.split(",").join(", "+k),f=f.replace(/[\ ]+:root/gi,""),e.changeSelectorTextAllowed?d.selectorText=f:d.type&&1!==d.type||(g=d.style.cssText,h.removeRule?h.removeRule(l):h.deleteRule(l),h.addRule&&g.length>0?h.addRule(f,g):h.insertRule(f+"{"+g+"}",l))}}var c,d,e=function(){var b,c,d,e=a.createElement("style"),f="undefined"!=typeof e.sheet?"sheet":"undefined"!=typeof e.getSheet?"getSheet":"styleSheet",g="undefined"!=typeof e.scoped;a.body.appendChild(e),b=e[f],b.addRule?b.addRule("c","blink"):b.insertRule("c{}",0),c=b.rules?"rules":"cssRules",d=b[c][0];try{d.selectorText="d"}catch(h){console.error("scopedPolyFill: "+h)}var i="d"===d.selectorText.toLowerCase();return D.isIE()&&(i="c"===d.selectorText.toLowerCase()),e.parentNode.removeChild(e),{scopeSupported:g,rules:c,sheet:f,changeSelectorTextAllowed:i}}();if(a.querySelectorAll)c=a.querySelectorAll("style[scoped]");else{var f,g=[];for(c=a.getElementsByTagName("style"),d=c.length;d--;)f=c[d].getAttribute("scoped"),("scoped"===f||""===f)&&g.push(c[d]);c=g}for(d=c.length;d--;)b(c[d]);return"function"==typeof jQuery&&"object"==typeof jQuery.fn&&(jQuery.fn.scopedPolyFill=function(){return this.each(b)}),b}(document),D.getImgFromSvg=function(a){function b(a){var b=o.find("style"),c="",d="@font-face {",e="}";for(var f in a)a.hasOwnProperty(f)&&(c+=[f,a[f]].join(":")+";");var g=[d,c,e].join("");b.get(0).innerHTML+=g}function c(){var a=document.styleSheets,b=x.Deferred(),c=[];for(var e in a){var f=a[e].rules||a[e].cssRules;for(var g in f){var h=f[g];if(h instanceof CSSFontFaceRule&&"source-sans-pro"===h.style.fontFamily){if(h.style.src.match("base64"))continue;c.push(d(h))}}}return x.when.apply(x,c).then(b.resolve),b.promise()}function d(a){for(var b=x.Deferred(),c=[],d=a.style.src.split(","),f=0;f<d.length;f++){var g=d[f];c.push(e(g))}return x.when.apply(x,c).done(function(){b.resolve({"font-family":a.style.fontFamily,"font-weidht":a.style.fontWeight,src:[].join.call(arguments,", ")})}),b.promise()}function e(a){var b=x.Deferred(),c=a.match(/format\(([^\)]*)\)/)[1],d=a.match(/url\(([^\)]*)\)/)[1];return x.ajax({type:"GET",url:d,success:function(a){var d=["url(data:application/x-font-woff;charset=utf-8;base64,",window.btoa(unescape(encodeURIComponent(a))),") format(",c,")"].join("");b.resolve(d)}}),b.promise()}function f(){var b=x(a).get(0).viewBox.baseVal;if(b&&(b.x||b.y||b.width||b.height)){var c=[b.x,b.y,b.width,b.height].join(", ");return'viewBox="'+c+'"'}return""}function g(a,b){function c(a,b){var c=D.getStyles(a),d=a[0];"text"==d.tagName&&"undefined"==typeof c["font-size"]&&(c["font-size"]=k),b.css(c)}a.children().length?a.children().each(function(){var a=x(this),c=a.clone();c.children().remove(),b.append(c),g(a,c)}):c(a,b)}var h=x.Deferred(),i=x(a).width(),j=x(a).height(),k=x("body").css("font-size"),l=a.style.transform,m=a.style.webkitTransform,n={prefix:'<svg                        version="1.1"                        xmlns="http://www.w3.org/2000/svg"                        xmlns:xlink="http://www.w3.org/1999/xlink"                        width="'+i+'" height="'+j+'" '+f()+">                        <defs>                            <style>                            </style>                        </defs>                        ",postfix:"</svg>"},o=x([n.prefix,n.postfix].join(""));return c().done(function(){for(var c=0;c<arguments.length;c++){var d=arguments[c];b(d)}x(a).each(function(){var a=x(this);g(a,o)});var e=document.createElement("canvas");e.width=i,e.height=j,document.body.appendChild(e);var f=document.createElement("div");f.appendChild(o.get(0)),B(e,f.innerHTML,{ignoreMouse:!0,ignoreAnimation:!0});var k=new Image;k.width=i,k.height=j,k.style.transform=l,k.style.webkitTransform=m,k.onload=function(){document.body.removeChild(e),h.resolve(k)};var n=e.toDataURL("image/png");k.src=n}),h.promise()},D.add$RemoveEvent=function(){x.event.special.removed={remove:function(a){a.handler&&a.handler()}}},D.getStyles=function(a){function b(a){var b=document.styleSheets,d={};for(var e in b){var f=b[e].rules||b[e].cssRules;for(var g in f)try{a.is(f[g].selectorText)&&(d=x.extend(d,c(f[g].style),c(a.attr("style"))))}catch(h){}}return d}function c(a){var b={};if(!a)return b;if(a instanceof CSSStyleDeclaration)for(var c in a)a[c].toLowerCase&&(b[a[c].toLowerCase()]=a[a[c]]);else if("string"==typeof a){a=a.split(/[;][ ]?/);for(var c in a){var d=a[c].split(": ");b[d[0].toLowerCase()]=d[1]}}return b}return b(a)},D.transducers=a("./transducers"),D.htmlEntities=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},function(a){function b(a){var b=document.querySelectorAll("svg image"),c=b.length;0===c&&a();for(var d=0;d<b.length;d++)!function(b){if(b.getAttribute("xlink:href")){var d=b.getAttribute("xlink:href").value;if(/^http/.test(d)&&!new RegExp("^"+window.location.host).test(d))throw new Error("Cannot render embedded images linking to external hosts.")}var e=document.createElement("canvas"),f=e.getContext("2d"),g=new Image;g.src=b.getAttribute("xlink:href"),g.onload=function(){e.width=g.width,e.height=g.height,f.drawImage(g,0,0),b.setAttribute("xlink:href",e.toDataURL("image/png")),c--,0===c&&a()}}(b[d])}function c(a){for(var b="",c=document.styleSheets,d=0;d<c.length;d++)for(var e=c[d].cssRules,f=0;f<e.length;f++){var g=e[f];if("undefined"!=typeof g.style){var h=a.querySelectorAll(g.selectorText);h.length>0&&(b+=g.selectorText+" { "+g.style.cssText+" }\n")}}var i=document.createElement("style");i.setAttribute("type","text/css"),i.innerHTML="<![CDATA[\n"+b+"\n]]>";var j=document.createElement("defs");return j.appendChild(i),j}var d="undefined"!=typeof a&&a||this,e='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';d.svgAsDataUri=function(a,d,f){d=d||1,b(function(){var b=document.createElement("div"),g=a.cloneNode(!0),h=a.clientWidth,i=a.clientHeight,j="http://www.w3.org/2000/xmlns/";g.setAttribute("version","1.1"),g.setAttributeNS(j,"xmlns","http://www.w3.org/2000/svg"),g.setAttributeNS(j,"xmlns:xlink","http://www.w3.org/1999/xlink"),g.setAttribute("width",h*d),g.setAttribute("height",i*d),g.setAttribute("viewBox","0 0 "+h+" "+i),b.appendChild(g),g.insertBefore(c(g),g.firstChild);var k=e+b.innerHTML,l="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(k)));f&&f(l)})},d.saveSvgAsPng=function(a,b){var c=x.Deferred();return d.svgAsDataUri(a,b,function(a){var b=new Image;b.src=a,b.onload=function(){var a=document.createElement("canvas"),d=new Image;a.width=b.width,a.height=b.height;var e=a.getContext("2d");e.drawImage(b,0,0),d.src=a.toDataURL("image/png"),d.onload=function(){c.resolve(d)}}}),c.promise()}}(D),b.exports=D}()},{"../Core/MVC/View":5,"./MetricFormatter":140,"./NiceScale":141,"./dialogTemplate.html":143,"./log10":145,"./transducers":149,canvg:88,jquery:103,jstz:105,moment:457,underscore:458}],143:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="modal hide fade">\n    <div class="modal-header">\n        <button title="Close" value="dialog-reject" class="close">&times;</button>\n        <h3 class="dialog-head pull-left"></h3>\n        <div class="clearfix"></div>\n    </div>\n    <div class="modal-body dialog-body">\n    </div>\n    <div class="modal-footer dialog-controls">\n        <button title="'+(null==(__t=rejectButtonTitle)?"":__t)+'" value="dialog-reject" class="btn btnNo">'+(null==(__t=rejectButtonLabel)?"":__t)+'</button>\n        <button title="'+(null==(__t=acceptButtonTitle)?"":__t)+'" value="dialog-accept" class="btn btn-primary btnYes">'+(null==(__t=acceptButtonLabel)?"":__t)+"</button>\n    </div>\n</div>";return __p}},{lodash:456}],144:[function(a,b){b.exports=a("./Utilities")},{"./Utilities":142}],145:[function(a,b){b.exports=function(a){"use strict";return Math.log(a)/Math.log(10)}},{}],146:[function(a,b){function c(a){this._wrapped=a}c.prototype.unwrap=function(){return this._wrapped},c.isReduced=function(a){return a instanceof c},b.exports=c},{}],147:[function(a,b){b.exports=function(a,b){switch(arguments.length){case 0:return[];case 1:return a;default:return a.concat([b])}}},{}],148:[function(a,b){b.exports=function(a){return function(b){return function(c,d){switch(arguments.length){case 0:return b();case 1:return b(c);default:return a(d)?b(c,d):c}}}}},{}],149:[function(a,b){var c=a("./append"),d=a("./filter"),e=a("./map"),f=a("./reduce"),g=a("./Reduced"),h=a("./transduce");b.exports={append:c,filter:d,map:e,reduce:f,Reduced:g,transduce:h}},{"./Reduced":146,"./append":147,"./filter":148,"./map":150,"./reduce":151,"./transduce":152}],150:[function(a,b){b.exports=function(a){return function(b){return function(c,d){switch(arguments.length){case 0:return b();case 1:return b(c);default:return b(c,a(d))}}}}},{}],151:[function(a,b){var c=a("./Reduced");b.exports=function(a,b,d){for(var e=d,f=0;f<a.length;f++)if(e=b(e,a[f]),c.isReduced(e))return e.unwrap();return e}},{"./Reduced":146}],152:[function(a,b){var c=a("./reduce");b.exports=function(a,b,d){var e=a(b),f=e(),g=c(d,e,f);return e(g)}},{"./reduce":151}],153:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="attribute-item-text">'+__e(attributes.value)+'</div>\n<div class="attribute-item-color"></div>';return __p}},{lodash:456}],154:[function(a,b){!function(){"use strict";var c=(a("underscore"),a("../../Core/MVC")),d=c.Model.extend({defaults:{value:"",color:"#fff"}}),e=a("./../ListItem"),f=a("./../../controls").ColorPicker,g=a("./attributeColorItemTemplate.html");b.exports=e.extend({model:new d,className:"zd-attribute-color-item",defaults:{template:g},events:{},render:function(){return e.prototype.render.apply(this,arguments),this._initColorPicker(),this},_initColorPicker:function(){var a=this;this.colorPicker=new f({el:this.$el.find(".attribute-item-color"),color:this.model.get("color")}),a.listenTo(this.colorPicker,"change",function(b){a.model.set("color",b),a.model.collection.trigger("changeModelColor",a.model)}),a.listenTo(this.colorPicker,"beforeShow",function(){a._undockParentView()})},_undockParentView:function(){this.$el.closest(".color-palette.docked").removeClass("docked")}})}()},{"../../Core/MVC":6,"./../../controls":66,"./../ListItem":273,"./attributeColorItemTemplate.html":153,underscore:458}],155:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("../../models/Filter"),g=a("../../controls"),h=e.Events,i=a("./attributeFilterTemplate.html"),j=a("./attributeTemplate.html"),k=e.Model.extend({defaults:{value:"",selected:!1}}),l=e.Collection.extend({model:k,initialize:function(a,b){b.url&&(this.url=b.url)},parse:function(a){var b=[];return a.forEach(function(a){var c=new k({value:a});b.push(c)}),b}}),m=e.View.extend({template:i,className:"create-filter",listItems:[],events:{"click .radio-button":"onRadioButtonClick","click button[value='applyFilter']":"applyFilter","click button[value='cancelFilter']":"revertFilter","click .values-list-item":"onAttributeSelected","click .zd-tabbar-head div[value='segment']":"onSegmentedControlChange","input .searchbar .search-query":"_onSearchChange"},initialize:function(){var a={},b=this;e.View.prototype.initialize.apply(this,arguments),this.listItems=[],this.searchTimeout=null,this.allElements=null,this.options.filter?(a=d.clone(this.options.filter.attributes),this.model=new f({label:this.options.objectField.get("label"),path:a.path,value:d.clone(a.value),operation:a.operation,editable:!0})):this.model=new f({label:this.options.objectField.get("label"),path:this.options.objectField.get("name"),editable:!0});var g=this.options.config?this.options.config.source.sourceId:this.options.sourceId;this.collection=new l([],{url:"service/sources/"+g+"/attributes/"+this.options.objectField.get("name")+"/values"}),this.listenTo(this.collection,"add",this.onAdd),this.listenTo(this.collection,"sync",function(){b.allElements||(b.allElements=b.collection.toJSON()),b.onAddSelectAll(),b._setListHeightScrollable(),c(b.$el.parentsUntil(".zd-palette").parent()[0]).resize(function(){b._setListHeightScrollable()}),b.trigger("filter:sync")}),this.listenTo(this.collection,"reset",function(){b.listItems=[],b.$ul.empty()}),this.listenTo(this.model,"change",function(){this.model.get("value").length?b.expandFooter():b.collapseFooter()}),this.markToRevert(),this.collection.fetch()},render:function(){var a=this,b="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",d=this.options.objectField.get("label");return this.$el.append(this.template({label:d,operation:this.model.get("operation")})),this.$ul=c(this.$el.find("ul")),this.$(".apply-to-all").prop("checked",!1),this._allVisible=!0,this.$el.find(".apply-filter-buttons").off(b).on(b,function(){a._setListHeightScrollable()}),this.$el.closest(".zd-infopopup-body").css({overflow:"hidden"}),this.collapseFooter(),this},remove:function(){this.$el.remove(),this.collection.off("add")},loaded:function(){this.collection.fetch(),c("#filter-path").text(this.editing?"Edit Filter: "+this.options.objectField.get("label"):"Add Filter: "+this.options.objectField.get("label"))},onAttributeSelected:function(a){var b,d=c(a.currentTarget);this.collection.forEach(function(a){a.attributes.value=a.get("value").toString()}),"Select All"===d.data("value")?this.onSelectAll(!d.hasClass("selected")):(b=this.collection.findWhere({value:d.data("value").toString()}),this.model.hasAttribute(b.get("value"))?(this.model.removeAttribute(b.get("value")),b.set("selected",!1),d.removeClass("selected")):(this.model.addAttribute(b.get("value")),b.set("selected",!0),d.addClass("selected"))),this.refreshSelectAll()},onSegmentedControlChange:function(a){var b=c(a.currentTarget);if(!b.hasClass("active"))if(this.$el.find(".zd-tabbar-head div[value='segment'].active").removeClass("active"),b.addClass("active"),this._allVisible=!this._allVisible,this.$("li.first-visible, li.last-visible").removeClass("first-visible last-visible"),this.$el.find(".searchbar .search-query").val(""),this._allVisible)this.showAll();else{this.showSelected();var d=this.$("li:visible"),e=d.first();e.addClass("first-visible");var f=d.last();f.addClass("last-visible")}},_onSearchChange:function(a){var b=c(a.currentTarget).val();this.search(b)},search:function(a){var b=this;this.selectedItemsTab?(a=a.toLowerCase(),this.listItems.forEach(function(c){c.modelValue.toLowerCase().search(a)>=0&&b.model.hasAttribute(c.modelValue)?c.show():c.hide()})):(null!==this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null),this.searchTimeout=setTimeout(function(){b.sendQuery(a)},300))},sendQuery:function(a){var b=this;this.collection.url="service/sources/"+this.options.config.source.sourceId+"/attributes/"+this.options.objectField.get("name")+"/values?query="+encodeURIComponent(a),this.listItems=[],this.$ul.empty(),this.collection.fetch().done(function(){b.options.fetchedLength=b.listItems.length}).fail(function(a){var b=new g.Notification;b.render(a.responseJSON.details)})},onSelectAll:function(a){var b=this;this.listItems.forEach(function(c,d){d&&b.model.hasAttribute(c.modelValue)!==a&&c.trigger("click")})},refreshSelectAll:function(){var a=this.$ul.find(".select-all");this.collection.length&&(this.collection.findWhere({selected:!1})?a.removeClass("selected"):a.addClass("selected")),this.collection.length&&!this.selectedItemsTab?a.show():a.hide()},filterList:function(a,b){var c=this;this.listItems.forEach(function(b){b.modelValue.search(a)>=0?(c._allVisible||c.model.hasAttribute(b.modelValue))&&b.show():b.hide()});var e=d.filter(this.listItems,function(b){return b.modelValue.search(a)>=0});this.$("li.first-visible, li.last-visible").removeClass("first-visible last-visible");var f=this.$("li:visible"),g=f.first();g.addClass("first-visible");var h=f.last();h.addClass("last-visible"),e.length===this.options.fetchedLength&&this.sendQuery(b)},onAdd:function(a){var b,d=a.attributes,e=a.get("value");d.selected=this.model.hasAttribute(e),this.listItems.length===this.collection.length+1?b=c.grep(this.listItems,function(a){return a.modelValue===e})[0]:(this.$ul.append(j(d)),b=this.$el.find(".values-list-item").last(),b.modelValue=a.get("value"),b.attr("data-value",a.get("value").toString()),this.listItems.push(b)),d.selected?b.addClass("selected"):b.removeClass("selected")},onAddSelectAll:function(){var a=new k({selected:!1,selectAll:!0,value:"Select All"}),b=a.attributes,c=a.get("value"),d=this.listItems[0];d&&d.modelValue===c||(this.$ul.prepend(j(b)),d=this.$el.find(".values-list-item").first(),d.modelValue=a.get("value"),d.attr("data-value",a.get("value").toString()).addClass("select-all"),this.listItems.unshift(d)),this.selectedItemsTab=!1,this.refreshSelectAll()},_setListHeightScrollable:function(){var a=this.$el.parent().parent().parent(),b=this.$ul.scrollTop(),c=a.find(".modal-body");if(this.$ul.css({"max-height":"none"}),!(a.find(".modal-body").height()>=a.find(".create-filter").height())){var d,e,f=a.find(".create-filter").height(),g=c.height(),h=f-g,i=0;h>0&&(this.$el.hasClass("collapsed-footer")||(i=60),e=this.$ul.offset().top-c.offset().top,d=c.height()-e-i,this.$ul.addClass("long-list").css("max-height",d).scrollTop(b))}},showSelected:function(){var a=this;this.collection.length!==this.allElements.length&&(this.collection.reset([]),this.collection.add(this.allElements)),this.listItems.forEach(function(b){a.model.hasAttribute(b.modelValue)?b.show():b.hide()}),this.selectedItemsTab=!0},showAll:function(){this.$el.find(".values-list-item").show(),this.selectedItemsTab=!1},applyFilter:function(){"IN"===this.model.get("operation")?console.log("Applied filter: ",this.model.toJSON()):console.log("Not In Filter: ",this.model.toJSON()),this.trigger("filter:apply",this.model),this.options.applyToAll&&h.trigger("visualization:filterAll",this.options.config.source.sourceId,{},this.model.attributes,{timestampField:this.options.state.get("timestampField"),timeTrendStep:this.options.state.get("timeTrendStep")})},markToRevert:function(){this._revertAttributes=d.clone(this.model.attributes)},revertFilter:function(){this.model.set(this._revertAttributes),this.collection.fetch(),this.$el.find(".radio-button .radio").removeClass("checked"),this.$el.find('.radio-button[value="'+this.model.get("operation")+'"] .radio').addClass("checked"),this.collapseFooter()},expandFooter:function(){this.$el.hasClass("collapsed-footer")&&(this.$el.removeClass("collapsed-footer"),this._setListHeightScrollable()),c(".apply-filter-buttons").show()},collapseFooter:function(){this.$el.addClass("collapsed-footer"),c(".apply-filter-buttons").hide(),this._setListHeightScrollable()},onRadioButtonClick:function(a){var b=c(a.target).closest(".radio-button");b.siblings().find(".zd.radio").removeClass("checked"),b.find(".zd.radio").addClass("checked"),this.model.set("operation",b.attr("value"))}});b.exports=m}()},{"../../Core/MVC":6,"../../controls":66,"../../models/Filter":117,"./attributeFilterTemplate.html":156,"./attributeTemplate.html":157,jquery:103,underscore:458}],156:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});
var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="radio-buttons"> \n        <span class="radio-button" value="IN">\n            <span class="zd icon checkbox radio selected '+(null==(__t="IN"===operation?"checked":"")?"":__t)+'"><span class="zd radio-inner selected checked"></span></span>\n            <div class="radio-label">Include</div> \n        </span> \n        <span class="radio-button" value="NOTIN">\n            <span class="zd icon checkbox radio selected '+(null==(__t="NOTIN"===operation?"checked":"")?"":__t)+'"><span class="zd radio-inner selected checked"></span></span>\n            <div class="radio-label">Exclude</div> \n        </span> \n    </div>  \n    <div class="values-controls">   \n        <div class="searchbar"> \n            <div class="zd icon magnifying-glass"/> \n            <input type="text" class="search-query">    \n        </div>  \n        <div class="zd-tabbar-head">    \n            <div value="segment" class="zd btn btn-link active" id="show-all">All</div> \n            <div value="segment" class="zd btn btn-link" id="show-selected">Selected</div>  \n        </div>  \n        <div class="zd-tabbar"> \n            <div class="zd-tabbar-body"> \n                <div class="subhead">'+__e(label)+'</div>\n                <ul class="values-list"/>   \n            </div> \n        </div> \n    </div> \n    <div class="apply-filter-buttons"> \n        <button class="left item zd btn btn-success btn-block" value="applyFilter">Apply</button> \n        <button class="right item zd btn btn-cancel btn-block" value="cancelFilter">Cancel</button>   \n    </div>  \n</div>  ';return __p}},{lodash:456}],157:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<li class="values-list-item ',selected&&(__p+="selected"),__p+='">\n    <div class="zd icon checkmark" ></div>\n    <div class="text">'+__e(value)+"</div>\n</li>";return __p}},{lodash:456}],158:[function(a,b){b.exports=a("./AttributeFilterEditor")},{"./AttributeFilterEditor":155}],159:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC"),a("../../utilities")),e=a("./../ObjectFieldItem"),f=a("./../../components/InteractiveElements")(),g=e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments)},render:function(){var a=this,b="objectField";e.prototype.render.apply(this,arguments),d.isNumericAttributeType(this.model.get("type"))&&(b="metric"),this.$el.data(b,this.model),f.register(this.el,{draggable:{scope:b,opacity:.8,distance:5,handle:".drag-icon",start:function(){a.model.collection.trigger("dragstart",this.model),a.trigger("dragstart",this.model)},stop:function(){a.model.collection.trigger("dragstop",this.model),a.trigger("dragstop",this.model)}}}),this.$el.find("div.text").on("touchmove",function(){return!1});var g;return this.$el.on("touchmove",function(a){if(a.originalEvent&&a.originalEvent.changedTouches){var b=document.elementFromPoint(a.originalEvent.changedTouches[0].pageX,a.originalEvent.changedTouches[0].pageY);if("svg"===c(b).prop("tagName"))return;g&&g!==b&&c(g).css({opacity:1}),c(b).css({opacity:.7}),g=b}}),this},remove:function(){f.release(this.el),e.prototype.remove.apply(this,arguments)}});b.exports=g}()},{"../../Core/MVC":6,"../../utilities":144,"./../../components/InteractiveElements":40,"./../ObjectFieldItem":309,jquery:103,underscore:458}],160:[function(a,b){!function(){"use strict";function c(a){var b=!1;return a instanceof Array&&a.length?a.forEach(function(a){return a instanceof l?void(b=!0):(b=!1,!1)}):a instanceof Array&&(b=!0),b}var d=a("jquery"),e=a("underscore"),f=a("../../Core/MVC"),g=a("../../utilities"),h=a("../../controls"),i=a("./../SmallObjectFieldItem"),j=a("./../GroupedListView"),k=a("../../models/GroupBy"),l=a("./../../components/MetricAccessor/index.js"),m=a("./../MetricPalette"),n=a("./../TimeScaleControl"),o=(a("moment"),{small:40,medium:50,large:60}),p=a("./../../components/Vocabulary/index.js"),q=f.View.extend({className:"axisLabel",defaults:{orientation:"horizontal",display:"inline",popoverTitle:"Title"},initialize:function(a){if(this._validateProperties(a),f.View.prototype.initialize.apply(this,arguments),e.bindAll(this,"resize","render","position","updateClasses","update"),this.$root=this.visualizationController.$el,this.variables=this.visualizationController.variables,!a.elementsManager)throw new Error("elementsManager must be defined");switch(this.elementsManager=a.elementsManager,this.applyEvents(),g.MODE.WIDGET!==g.mode()&&this.registerInteractiveLabel(),this.type){case"multi-metric":this.listenTo(this.visualizationController.state.metrics,"add remove change reset",this._onMultiMetricChange);break;case"metric":this.listenTo(this.visualizationController.state.metrics,"add remove change reset",this._onMetricChange);break;case"group":case"groupBy1":case"groupBy2":case"timeScale":this.listenTo(this.visualizationController.state.groupBy,"change",this._onAttributeChange),this.listenTo(this.visualizationController.state.groupBy,"reset",this._onAttributeReset)}return this},_validateProperties:function(a){var b,d,f,g,h,i,j,m;if(this.metric=null,!a.controller)throw new Error("visualizationController must be defined");if(this.visualizationController=d=a.controller,delete a.controller,f=d.fields,g=d.formulas,i=d.state,j=i.metrics,h=d.metrics,b=i.groupBy.getAttributes(),m=a.picks,!m)throw new Error("'picks' option must be defined");if(h[a.picks]instanceof l)this.type="metric",this.label=a.picks,this.metric=j.findWhere({label:a.picks}),this.field=this.metric.isCount()?f.volumeField:f.findWhere({name:this.metric.get("name")})||g.findWhere({name:this.metric.get("name")});else if(c(h[a.picks]))this.type="multi-metric",this.label=a.picks,this.metrics=j.where({label:a.picks}),this.fields=e.map(this.metrics,function(a){return a.isCount()?f.volumeField:f.findWhere({name:a.get("name")})});else if(m instanceof k)this.type="group",this.field=f.findWhere({name:m.getAttribute()}),this.groupItem=m;else if("groupBy1"==a.picks){this.type="groupBy1";var n=this.visualizationController._controller.variables["First Group By"];this.field=f.findWhere({name:n})}else if("groupBy2"==a.picks){this.type="groupBy2";var n=this.visualizationController._controller.variables["Second Group By"];this.field=f.findWhere({name:n})}else this.type="timeScale"==a.picks?"timeScale":a.picks},_onMetricChange:function(){var a=this.visualizationController,b=a.fields,c=a.formulas,d=this.metric,e=d.get("name"),f=d.isCount();this.field=f?b.volumeField:b.findWhere({name:e})||c.findWhere({name:e}),this.render()},_onMultiMetricChange:function(){var a=this.visualizationController,b=a.state,c=a.fields,d=b.metrics,f=this.label;this.metrics=d.where({label:f}),this.fields=e.map(this.metrics,function(a){return a.isCount()?c.volumeField:c.findWhere({name:a.get("name")})}),this.render()},_onMetricSelect:function(a){function b(a){var b=g.metric.get("label"),c=g.metric.get("name"),d=g.metric.get("func"),e=g.visualizationController.metrics[b];"color"!==e.metric.metricType&&g.visualizationController.state.groupBy.forEach(function(b){var e=b.get("sort");e.name!==c||"count"!==e.name&&e.func!==d||(e.name=a.name,e.func=a.func,b.set("sort",e,{silent:!0}))}),g.metric.set({name:a.name,func:a.func,colorsData:e.metric.colorsData,colors:e.metric.colors})}function c(a){console.log("Add metric: ",a),g.visualizationController.state.metrics.add({name:a.name,func:a.func,label:g.label})}function d(a,b){console.log("Change metric: ",a.toJSON(),"to",b),a.set({name:b.name,func:b.func})}var f,g=this,h=this.type;switch(h){case"metric":b(a);break;case"multi-metric":f=e.find(this.metrics,function(b){return b.get("name")==a.name}),f?d(f,a):c(a)}},_onMetricDeselect:function(a){function b(a){var b=d.visualizationController.state.metrics,c=b.findWhere({name:a.get("name"),label:a.get("label")});console.log("Remove metric: ",a.get("name")),d.visualizationController.state.metrics.remove(c)}var c,d=this,f=this.type;switch(f){case"multi-metric":c=e.find(this.visualizationController.state.metrics.models,function(b){return b.get("label")===d.label&&b.get("name")===a.name}),c?b(c):null}},_onAttributeChange:function(){var a=this.visualizationController.fields,b=this.groupItem?this.groupItem.getAttribute():this.visualizationController.state.groupBy.getAttribute();this.field=a.findWhere({name:b}),this.render()},_onAttributeReset:function(){var a=this.visualizationController.fields,b=this.visualizationController.state.groupBy.getAttribute();this.field=a.findWhere({name:b}),this.render()},render:function(){var a=this,b="",c=": ",d="",e="",f=this.visualizationController.state.attributes;switch(this.variables=this.visualizationController.state.config.get("source").variables,this.type){case"group":b=this.options.popoverTitle,d=this.field.get("label"),e=b+c+d;break;case"metric":b=this.label,d=this.field.get("label")+(this.metric.isCount()||this.metric.isNone()?"":" ("+p.text(this.metric.get("func"))+")"),e=b+c+d;break;case"multi-metric":if(b=this.label,1==this.metrics.length){var g=this.fields[0].get("label"),h=this.metrics[0].isCount(),i="";h||(i=" ("+p.text(this.metrics[0].get("func"))+")"),d=g+i}else{var j=this.metrics.map(function(a){return a.get("name")}).reduce(function(a,b){return a.dict[b]||(a.dict[b]=!0,a.count++),a},{dict:{},count:0}).count;d="("+j+" selected)"}e=b+c+d;break;case"timeScale":var k=a.visualizationController.fields.findWhere({name:f.timestampField}),l=f&&f.timeTrendStep?f.timeTrendStep.toLowerCase():"Unknown";b=k?k.get("label"):"",e=b+" ("+l+")";break;case"radius":var m=a.variables["_metric-radius"].split(":"),n=a.visualizationController.fields.findWhere({name:m[0]});n&&(n.attributes.func=m[1]);var o=n&&n.attributes?n.attributes:null,q=o&&o.func&&-1===["Volume","FORMULA"].indexOf(o.label)?o.func.toLowerCase():null;e=o?o.label+(q?" ("+q+")":""):"";break;case"groupBy1":var r=this.variables["First Group By"],n=this.visualizationController.fields.findWhere({name:r});e=n&&n.attributes?n.attributes.label:"";break;case"groupBy2":var r=this.variables["Second Group By"],n=this.visualizationController.fields.findWhere({name:r});e=n&&n.attributes?n.attributes.label:""}return this.$el.text(e),this.updateClasses(),this.position(),this.options.disableAxis?this.undelegateEvents():null,this},applyEvents:function(){this.$root.on("resize",this.resize),this.listenTo(this.visualizationController.state.groupBy,"change",this.render),this.listenTo(this.visualizationController.state,"change",this.render),this.listenTo(this.visualizationController.fields,"sync",this.render),this.$el.on("DOMSubtreeModified",this.fixCase)},removeEvents:function(){this.$root.off("resize",this.resize),this.stopListening(this.visualizationController.state.groupBy,"change",this.render),this.stopListening(this.visualizationController.state,"change"),this.stopListening(this.visualizationController.fields,"sync"),this.$el.off("DOMSubtreeModified",this.fixCase)},registerInteractiveLabel:function(){function a(a,b){var c=new h.PalettePopup({autohide:!1,customClass:"metricPalette",pointerWidth:14}),e=new m({collection:p.visualizationController.fields,currentItem:d.extend({},p.field.toJSON(),p.metric.toJSON()),state:r,controller:p.visualizationController,filter:function(a){var b=a.get("name"),c=q.state.groupBy.findWhere({name:b}),d=p.metric.get("displayNoneOption"),e=!!a.get("visible");return e?c?!1:k||d?!0:"none"!==b:!1}});p.childViews.push(c),p.childViews.push(e),c.render(e.render().$el,p.options.popoverTitle).position({of:b,my:"left+5 center",at:"center center",collision:"flipfit flipfit"}),c.onHide=function(){e.trigger("hide"),p.childViews.splice(p.childViews.indexOf(c),1),p.childViews.splice(p.childViews.indexOf(e),1)},p.listenTo(e,"select:metric",p._onMetricSelect)}function b(a,b){var c=new h.PalettePopup({autohide:!1,customClass:"metricPalette",pointerWidth:14}),f=new m({multiselect:!0,collection:p.visualizationController.fields,state:r,controller:p.visualizationController,currentItem:e.map(p.metrics,function(a,b){var c=p.fields[b];return d.extend({},c.toJSON(),a.toJSON())}),filter:function(a){var b=!!a.get("visible"),c=!!q.state.groupBy.findWhere({name:a.get("name")});return b&&!c}});p.childViews.push(c),p.childViews.push(f),c.render(f.render().$el,p.options.popoverTitle).position({of:b,my:"left+5 center",at:"center center",collision:"flipfit flipfit"}),c.onHide=function(){f.trigger("hide"),p.childViews.splice(p.childViews.indexOf(c),1),p.childViews.splice(p.childViews.indexOf(f),1)},p.listenTo(f,"select:metric",p._onMetricSelect),p.listenTo(f,"deselect:metric",p._onMetricDeselect)}function c(a){var b=-1===p.visualizationController.source.get("features").indexOf("LIVE_PLAYER"),c=p.visualizationController.state.groupBy,d=p.visualizationController.state.metrics,f=c.getAttributes(),g=p.groupItem.getAttribute(),k=f.filter(function(a){return a!==g}),l=c.filter(function(a){return a.get("name")!==g||!b}).map(function(a){return a.get("sort").name}),m=k.concat(l),n=new h.PalettePopup({customClass:"attributePalette",pointerWidth:14}),o=new j({className:"nav nav-tabs nav-stacked",ItemView:i,collection:q.fields,groupBy:"type",selectable:"radio",selected:function(a){return a.get("name")===p.field.get("name")},disabled:function(a){var f=c.length>1,g=e.contains(m,a.get("name")),h=d.findWhere({name:a.get("name")});return f||!b?g||h:h},filter:function(a){{var b=!!a.get("visible"),c="ATTRIBUTE"==a.get("type");p.visualizationController.state.groupBy,s.get("type"),p.visualizationController.state.metrics.findWhere({name:a.get("name")})}return b&&c},comparator:function(a){return a.get("label")}});n.render(o.render().$el,p.options.popoverTitle),n.position({of:a,my:"left+20 top-30",at:"right center",collision:"flipfit flipfit"}),p.listenToOnce(o,"select",function(a){a.get("disabled")||(p.groupItem.setAttribute(a.get("name")),n.remove(),o.remove())})}function f(a){var b=new h.PalettePopup({customClass:"timeScalePaletteContainer",pointerWidth:14}),c=new n({className:"timeScalePalette",currentItem:r.get("timeTrendStep"),controller:q,filter:function(a){return"TIME"===a.get("type")}});b.render(c.render().$el,p.options.popoverTitle),b.position({of:a,my:"left+20 top-30",at:"right center",collision:"flipfit flipfit"}),p.listenToOnce(c,"select:scale",function(a){var d,e=g.time.getMaxStepLimit(),f=a.get("_scale")||r.get("timeTrendStep"),h={name:f,limit:e},i=r.groupBy.getAttribute(),j=r.time.get("time"),k=r.groupBy.definition.limit||10,l=new Date(a.get("min")),m=new Date(a.get("max")),n="DAY"===a.get("timestampGranularity");if(i!==a.get("name"))d=m.getTime(),h=g.time.getStepForMinimalGranulation(l,m,n);else{d=Math.min(m.getTime(),j);var o=g.time.getRoundedDateRange(l,d,f,!0,n).amount;h.limit=Math.min(k,o,e)}r.time.set({min:a.get("min"),max:a.get("max"),time:d},{silent:!0}),r.groupBy.setLimit(h.limit,{silent:!0}),r.groupBy.setAttribute(a.get("name"),{silent:!0}),r.set({timestampField:a.get("name"),timeTrendStep:h.name,limit:h.limit},{silent:!0}),r.config.get("source").date=a.get("name"),r.config.get("source").timeTrendStep=h.name,r.trigger("change"),b.remove(),c.remove()})}var k,l,o,p=this,q=this.visualizationController,r=q.state,s=q.config,t=s.get("variables"),u=(this.el,this.type),v={},w=[];switch(u){case"metric":l=this.metric.get("label"),o=e.where(t,{name:l})[0],k=o&&"color"==o.metricType,w.push({label:"Metric",action:a});break;case"multi-metric":w.push({label:"Multi Metric",action:b});break;case"group":case"groupBy1":case"groupBy2":w.push({label:"Attribute",action:c});break;case"timeScale":w.push({label:"Time Scale",action:f})}v.actions=w,v.interactive=q.interactiveMode,this.elementsManager.register(this.el,v)},resize:function(){var a=this,b=this.$root.parents(".widget").eq(0),c=b.width(),d=b.height();return this.size=0!==b.length?g.getWidgetSizeClass(c,d):"medium",a.position(),this},position:function(a){a&&(this.options.position=a);var b=this.options.position,c=this.$el.width(),e=this.$el.height(),f=this.$root.parent().width(),g=this.$root.parent().height(),h="small"===this.size?16:10,i=d(this.$root.parent()).children(".widgetLabel.top, .widgetLabel.bottom"),j=i.length*o[this.size],k=12;if(d(".filters-list").is(":empty")||(j-=10),"string"==typeof b||b instanceof String)switch(b){case"top":this.$el.css("vertical"===this.options.orientation?{top:h+(c+2*k-e)/2,left:(f-c-2*k)/2}:{top:h,left:(f-c-2*k)/2});break;case"left":"vertical"===this.options.orientation?this.$el.parent().css({width:g+"px","padding-top":h+"px"}):this.$el.css({top:(g-e)/2,left:h/2});break;case"right":"vertical"===this.options.orientation?this.$el.parent().css({width:g+"px","padding-top":h+"px"}):this.$el.css({top:(g-e)/2,right:h/2});break;case"bottom":"vertical"===this.options.orientation&&this.$el.css({bottom:h+(c+2*k-e)/2,left:(f-c-2*k)/2})}else{if(b.x){var l=0;l="vertical"===this.options.orientation?b.x-(c+2*k-e)/2:b.x,this.$el.css({left:l}),test.css({left:b.x})}if(b.y){var m=0;m="vertical"===this.options.orientation?b.y+(c+2*k-e)/2:b.y,this.$el.css({top:m}),test.css({top:b.y})}b.cx&&(this.$el.css({left:b.cx-(c+2*k)/2}),test.css({left:b.cx})),b.cy&&(this.$el.css({top:b.cy-e/2}),test.css({top:b.cy}))}var n=this.$root.parent().find(".zd-visualization-toolbar");return"top"===b||"bottom"===b?this.$root.css(0==n.length?{height:this.$root.parent().height()-j+"px"}:{top:"50px"}):this.$el.siblings().length,"top"===b&&this.$root.css({"margin-top":o[this.size]+"px"}),this},updateClasses:function(){return this.$el.removeClass("inline"),this.$el.removeClass("absolute"),this.$el.addClass("inline"===this.options.display?"inline":"absolute"),"vertical"===this.options.orientation&&this.$el.addClass("vertical"),this.options.customClass&&this.$el.addClass(this.options.customClass),this.type&&this.$el.addClass(this.type),this.resize(null,null,this.$root.height()),this},update:function(a){return a&&e.extend(this.options,a),this.render(),this},hide:function(){return this.$el.hide(),this},show:function(){return this.$el.show(),this},remove:function(){var a=this.options.position,b=d(this.$root.parent()).children(".widgetLabel.top, .widgetLabel.bottom"),c=b.length*o[this.size];return d(".filters-list").is(":empty")||(c-=10),("top"===a||"bottom"===a)&&this.$root.css({height:this.$root.parent().height()-c+"px"}),"top"===a&&this.$root.css({"margin-top":"0px"}),"bottom"===a&&this.$root.css({"margin-bottom":"0px"}),this.elementsManager.release(this.el),f.View.prototype.remove.apply(this,arguments),this},fixCase:function(){var a=-1!==navigator.userAgent.toLowerCase().indexOf("msie")||navigator.userAgent.match(/Trident\/7\./);if(a){var b=this.innerHTML.toLowerCase();this.innerHTML!==b&&(this.innerHTML=this.innerHTML.toLowerCase())}}});b.exports=q}()},{"../../Core/MVC":6,"../../controls":66,"../../models/GroupBy":119,"../../utilities":144,"./../../components/MetricAccessor/index.js":44,"./../../components/Vocabulary/index.js":54,"./../GroupedListView":258,"./../MetricPalette":291,"./../SmallObjectFieldItem":344,"./../TimeScaleControl":368,jquery:103,moment:457,underscore:458}],161:[function(a,b){b.exports=a("./AxisLabel")},{"./AxisLabel":160}],162:[function(a,b){!function(){"use strict";function c(){var a=window.getComputedStyle(document.documentElement,""),b=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1];return"-"+b+"-"}var d=a("jquery"),e=a("underscore"),f=a("../../utilities"),g=a("../../Core/MVC"),h=a("../../utilities/MetricFormatter"),i=a("./colorKeyTemplate.html"),j=a("./colorItemTemplate.html"),k=a("./colorListTemplate.html"),l=g.View.extend({defaults:{isDraggable:!0},initialize:function(a){var b=this;if(e.bindAll(this,"render","remove"),!a.controller)throw new Error("controller must be defined");this.controller=a.controller,delete a.controller,this.controller.state.colorDataObj&&(this.colorMetricLabel=this.controller.state.colorDataObj.getColorKeyLabel()),this.autoShow=a.autoShow,a.colorLegendPosition&&this.$el.css(a.colorLegendPosition),a.type?(this.type=a.type,delete a.type):this.type="gradient",g.View.prototype.initialize.apply(this,arguments),this.options.isDraggable&&"undefined"!=typeof d.fn.draggable&&(this.$el.draggable({start:function(){d(this).css({bottom:"auto",right:"auto"})},stop:function(){b.fixPosition(!0)},cursor:"move",cancel:".scrolling-list",containment:this.$el.parent()}),this.$el.on("drag mousedown",function(a){a.stopPropagation()})),this.listenTo(this.controller,"visualization:change",this.updateColorState),this.listenTo(this.controller,"visualization:dataUpdate",this._colorsUpdate),this.listenTo(this.controller,"resize",this._colorKeyPosition)},render:function(){var a,b=this,c="",d=this.$el.find(".color-key-list-view"),e=d.scrollTop()||0;return!this.colorMetricLabel&&!this.controller.state.colorDataObj||this.controller.state.colorDataObj.isMetric()&&"none"===this.controller.state.colorDataObj.get("name")?(this.hide(),this):(this.colorMetricLabel=this.controller.state.colorDataObj.getColorKeyLabel(),d.data("mouseScrolling")?(d.off("mouseScrollingEnd").on("mouseScrollingEnd",function(){b.render()}),this):(this.colorDataObj=this.controller._controller.metrics[this.colorMetricLabel],this.colorDataObj&&this.colorDataObj[0]?(this.colorDataObj=this.colorDataObj[0],this.multiMetric=!0):this.controller.state.colorDataObj.isMetric()||(this.colorDataObj=this.controller.state.colorDataObj),!this.colorDataObj||this.colorDataObj.isNoData()?(this.hide(),this):(this.multiMetric&&this.colorDataObj.isMetric()?a=this.colorDataObj.metric.label:(a=this.colorDataObj.getColorKeyLabel(),this.colorDataObj.isMetric()&&(c=this.colorDataObj.metric.func,c&&"none"!==this.colorDataObj.metric.name&&(a+=" ("+c+")"))),this.$el.empty().append(i({metricLabel:a})),this.initScale(),this.initLabels(),this.autoShow?this.show():this.$el.is(":visible")&&this.fixPosition(),d=this.$el.find(".color-key-list-view"),d.scrollTop(e),d[0].scrollHeight>d.height()?d.addClass("scrolling-list"):d.removeClass("scrolling-list"),this.initScrollingDetection(d),this.delegateEvents(),this)))},_colorsUpdate:function(){this.render()},_colorKeyPosition:function(){this.fixPosition()},updateColorState:function(){this.controller.state.colorDataObj?this.colorMetricLabel=this.controller.state.colorDataObj.getColorKeyLabel():(this.colorMetricLabel=null,this.colorDataObj=null)},initScrollingDetection:function(a){var b=!1;a.on("mousedown",function(){b=!0}).on("scroll",function(){b&&a.data("mouseScrolling",!0)}).on("mouseup",function(){b=!1,a.data("mouseScrolling",!1),a.trigger("mouseScrollingEnd")})},fixPosition:function(a){var b,c,d=this.$el.parent().width(),e=this.$el.parent().height(),f=this.$el.width(),g=this.$el.height(),h=d-f+5,i=e-g+5,j=this.$el.attr("savedPosition");this.$el.hasClass("ui-draggable-dragging")&&!a||!this.$el.is(":visible")||(!a&&j&&this.$el.css(JSON.parse(j)),b=this.$el.position(),b.top>i?b.top=i:b.top<0&&(b.top=0),b.left>h?b.left=h:b.left<0&&(b.left=0),b.top>(e-g)/2?(b.bottom=i-b.top-5,b.bottom<0&&(b.bottom=0),b.top="auto"):b.bottom="auto",b.left>(d-f)/2?(b.right=h-b.left-5,b.right<0&&(b.right=0),b.left="auto"):b.right="auto",a&&(c=JSON.stringify(b),this.$el.attr("savedPosition",c),this.controller.state.colorDataObj.set("colorLegendPosition",c,{silent:!0})),this.$el.css(b))},cloneTo:function(a){var b=this.$el.find(".color-key").clone().show();a.append(b),this.initScrollingDetection(b.find(".color-key-list-view"))},initScale:function(){var a=c(),b=this.$el.find(".color-key-scale").empty(),e=this.$el.find(".color-key-list-view").empty(),f=this.colorDataObj.colorRange()||[];return f.length?(this.colorDataObj.isMetric()&&"none"===this.colorDataObj.metric.name&&(f=[f[0],f[0]]),void(this.multiMetric||!this.colorDataObj.isMetric()||"gradient"!==this.controller.state.divergingColorRange&&"none"!==this.colorDataObj.metric.name?!this.multiMetric&&this.colorDataObj.isMetric()&&f.length<=3?(this.$el.find(".color-key").css("width",""),e.hide(),b.show().css("width","85%").css("background","transparent"),d.each(f,function(a,c){b.append(j({color:c}))}),b.find(".color-item").css("width",100/f.length+"%")):(this.$el.find(".color-key").css("width","auto"),b.hide(),e.show(),d.each(f,function(a,b){e.append(k({color:b}))})):(this.$el.find(".color-key").css("width",""),e.hide(),b.show().css("width",null).css("background",a+"linear-gradient(left, "+f.join(",")+")").css("background","linear-gradient(to right, "+f.join(",")+")")))):void b.hide()},initLabels:function(){var a,b,c=this,e=this.colorDataObj.domain()||[],g=this.$el.find(".color-key-list-view li"),i=this.colorDataObj.colorRange()||[],j=this.$el.find(".color-key-labels").empty();this.colorDataObj.isMetric()&&(a=this.controller.fields.findWhere({name:this.colorDataObj.metric.name}),b=new h(a.get("type")),"gradient"===this.controller.state.divergingColorRange&&(e=[e[0],e[e.length-1]]),"none"===this.colorDataObj.metric.name&&(e=[])),!this.multiMetric&&this.colorDataObj.isMetric()&&e&&"undefined"!=typeof e[0]?(d.each(e,function(a,d){d>10?e[a]=d=d.toFixed(0):(100*d).toFixed(0)!==(100*d).toString()&&(e[a]=d=d.toFixed(2)),(e.length<=4&&i.length<4||"gradient"===c.controller.state.divergingColorRange)&&j.append('<span class="color-key-label">'+b.format(d)+"</span>")}),(e.length>4||e.length===i.length)&&g.each(function(a,c){var d=b.format(e[a]);d+=e[a+1]?" - "+b.format(e[a+1]):" +",c.innerHTML+=d})):(this.multiMetric||!this.colorDataObj.isMetric())&&g.each(function(a,b){b.innerHTML+=f.htmlEntities(e[a])}),("gradient"!==this.controller.state.divergingColorRange&&e.length<=4||!this.colorDataObj.isMetric())&&j.find(".color-key-label").css("width",100/e.length+"%")},show:function(a){this.$el.is(":visible")||(this.$el.show(),this.fixPosition(!0),a&&(this.autoShow=!0))},hide:function(a){this.$el.hide(),a&&(this.autoShow=!1)},isVisible:function(){return this.$el.is(":visible")}});b.exports=l}()},{"../../Core/MVC":6,"../../utilities":144,"../../utilities/MetricFormatter":140,"./colorItemTemplate.html":163,"./colorKeyTemplate.html":164,"./colorListTemplate.html":165,jquery:103,underscore:458}],163:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="color-item" style="background: '+(null==(__t=color)?"":__t)+';"></div>';return __p}},{lodash:456}],164:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="color-key">\n    <div class="color-key-content">\n        <div class="color-key-metric-label"><b>'+__e(metricLabel)+'</b></div>\n        <div class="color-key-linear-view">\n            <div class="color-key-scale"></div>\n            <div class="color-key-labels"></div>\n        </div>\n        <ul class="color-key-list-view unstyled" style="display: none;"></ul>\n    </div>\n</div>';return __p}},{lodash:456}],165:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<li class="color-list-item">\n	<div class="color-item" style="background: '+(null==(__t=color)?"":__t)+';"></div>\n</li>';return __p}},{lodash:456}],166:[function(a,b){b.exports=a("./ColorKey")},{"./ColorKey":162}],167:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div id="color-palette" ',multiMetric&&(__p+=' class="multi-metric" '),__p+=' >\n	<div class="color-palette-content">\n	    <div class="color-palette-key color-palette-block" ',disableColorLegend&&(__p+=' style="display: none;" '),__p+='>\n	        <legend class="subhead">Color Key</legend>\n	        <div class="zd-legend"></div>\n	    </div>\n	    <div class="color-palette-legend-toggle color-palette-block">\n	        <legend class="subhead">Display Legend</legend>\n	        <label>\n	            <input type="checkbox" class="zd icon checkmark" ',colorKeyVisible&&(__p+=" checked "),__p+=" ",disableColorLegend&&(__p+=" disabled "),__p+=' > Enabled\n	        </label>\n	    </div>\n	    <div class="color-palette-color-settings color-palette-block">\n	        <legend class="subhead">Color Settings</legend>\n	        <div class="color-palette-settings-box color-palette-nav-button">\n	            ',colors.splice(0,6).forEach(function(a){__p+='\n	            	<div class="color-item" style="background: '+(null==(__t=a)?"":__t)+';"></div>\n	            '}),__p+='\n	            <i class="zd icon right-chevron"></i>\n	        </div>\n	        <div class="color-palette-color-settings-details">'+(null==(__t=colorPaletteDetails)?"":__t)+"</div>\n	    </div>\n	    ",__p+=isAttributesColor?'\n        <div class="color-palette-color-attribute color-palette-block">\n            <legend class="subhead">Color Attribute</legend>\n            <div class="color-palette-selected-attribute color-palette-nav-button">'+__e(colorItemLabel)+'<i class="zd icon right-chevron"></i></div>\n        </div>\n	    ':'\n	    <div class="color-palette-color-metric color-palette-block">\n	        <legend class="subhead">Color Metric</legend>\n	        <div class="color-palette-selected-metric color-palette-nav-button">'+__e(colorItemLabel)+'<i class="zd icon right-chevron"></i></div>\n	    </div>\n	    ',__p+="\n	</div>\n</div>";return __p}},{lodash:456}],168:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("./colorMainViewTemplate.html"),g=e.View.extend({template:f,initialize:function(){e.View.prototype.initialize.apply(this,arguments),this.controller=this.options.controller,d.bindAll(this,"render","remove")},events:{'change .color-palette-legend-toggle input[type="checkbox"]':"_paletteLegendToggle"},render:function(){var a,b,c,d=this,e=this.controller.state.colorDataObj.getColorKeyLabel(),f=!1,g=this.$el.find(".color-key-list-view"),h=g.scrollTop()||0;return g.data("mouseScrolling")?(g.off("mouseScrollingEnd").on("mouseScrollingEnd",function(){d.render()}),this):(this.isAttributesColor=!this.controller.state.colorDataObj.isMetric(),this.isAttributesColor?this.colorDataObj=this.controller.state.colorDataObj:(this.colorDataObj=this.controller._controller.metrics[e],this.colorDataObj[0]&&(this.colorDataObj=this.colorDataObj[0],this.multiMetric=!0),"none"===this.colorDataObj.get("name")&&(f=!0)),a=this.colorDataObj.getColorKeyLabel(),this.isAttributesColor||(c=this.colorDataObj.metric.func,c&&"none"!==this.colorDataObj.metric.name&&("distinct_count"===c&&(c="Count"),a+=" ("+c+")")),this.colorKey=this.controller.colorKey,b=this.colorDataObj.colorRange()||[],this.isAttributesColor||"none"!==this.colorDataObj.metric.name||(b=[b[0]]),this.$el.empty().append(this.template({colorItemLabel:a,colors:b,colorKeyVisible:this.colorKey.isVisible(),disableColorLegend:f,colorPaletteDetails:this._getColorPaletteDetails(),multiMetric:this.multiMetric,isAttributesColor:this.isAttributesColor})),this.colorKey.cloneTo(this.$el.find(".zd-legend")),this.$el.find(".color-key-list-view").scrollTop(h),this.$el.append('<div class="palette-bottom-panel"></div>'),this.delegateEvents(),this)},_paletteLegendToggle:function(a){var b=c(a.target).prop("checked");this.controller.state.colorDataObj.set("autoShowColorLegend",b,{silent:!0}),b?this.colorKey.show(!0):this.colorKey.hide(!0)},_getColorPaletteDetails:function(){var a;return this.isAttributesColor?a='Attribute Palette : "'+this.colorDataObj.getColorKeyLabel()+'"':(a="gradient"===this.controller.state.divergingColorRange?"Sequential":"Diverging",a+=", "+this.controller.state.colorNumb,a+="palette"===this.controller.state.legendType?" Distinct Colors":"-Color Range"),a
}});b.exports=g}()},{"../../Core/MVC":6,"./colorMainViewTemplate.html":167,jquery:103,underscore:458}],169:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=(a("../../controls"),a("../../utilities"),a("../../models/ObjectField")),g=a("./../MetricPalette/MetricItem"),h=new f({label:"None",name:"none",type:"NONE",func:null,visible:!0}),i=a("./colorMetricTemplate.html"),j=a("./functionTemplate.html"),k=a("./selectTemplate.html"),l=(a("./fTemplate.html"),a("./functionItemTemplate.html"),["INTEGER","NUMBER","MONEY","FORMULA","NONE"]),m=g.extend({className:"metricItem",tagName:"li",functionTemplate:j,selectTemplate:k,events:{click:"select","click .metricFunction":"openFunctionList"},initialize:function(a){if(!a.main)throw new Error("main (old Zoomdata.main) must be defined");this.main=a.main,g.prototype.initialize.apply(this,arguments)},select:function(){return this.disabledMetric?void this.state.metrics.trigger("metric:unsupported",this.options.metric,{removeAll:!0}):(this.trigger("select",this.data),this.$el.parent().parent().parent().find(".selected").removeClass("selected"),void this.$el.addClass("selected"))},_undockParentView:function(){this.options.$parentView.closest(".color-palette.docked").removeClass("docked")},_isDisabledFuncList:function(){var a=this.options.metric.get("type"),b="NONE"===a,c="distinct_count"===this.data.func,d=-1!==["ATTRIBUTE","TEXT"].indexOf(a);return b||c&&d},_getFuncName:function(){return"distinct_count"===this.data.func?"count":this.data.func},render:function(){var a=c('<div class="text"></div>'),b=this._isDisabledFuncList(),d=this.functionTemplate({func:this._getFuncName(),disabled:b?" disabled":""}),e=this.selectTemplate({selected:this.data.selected?" selected":""});return this.data.selected&&this.$el.addClass("selected"),this.$el.html(e),this.$el.append(a.text(this.data.label)),"Volume"!==this.data.label&&"FORMULA"!==this.data.type&&this.$el.append(d),this.$el.attr("data-name",this.data.name),this.$el.attr("data-func",this.data.func),this.$el.attr("data-label",this.data.label),this.$el.attr("data-type",this.data.type),this.$el.attr("disabled",this.disabledMetric),this}}),n=e.View.extend({template:i,events:{},initialize:function(a){if(e.View.prototype.initialize.apply(this,arguments),!a.main)throw new Error("main (old Zoomdata.main) must be defined");this.colorMetric=a.controller.state.colorDataObj,this.metrics=a.controller.fields.filter(function(b){var c=b.get("type"),d=!!a.controller.state.groupBy.findWhere({name:b.get("name")});return!d&&(-1!==l.indexOf(c)||b.get("distinctCount"))}),a.controller.fields.findWhere({name:"none"})||this.metrics.unshift(h),d.bindAll(this,"render","remove")},render:function(){var a,b,c=this,d=this.options.controller.source.get("type");return this.$el.append(this.template()),a=this.$el.find("ul.metricItems"),b=this.metrics.map(function(a){var b=c.colorMetric.get("name")===a.get("name"),e=c.colorMetric.attributes;return b&&a.set("func",c.colorMetric.get("func")),new m({metric:a,selected:b,$parentView:c.$el,main:c.options.main,state:c.model,sourceType:d,selectedItem:e})}),b.forEach(function(b){a.append(b.render().$el),b.on("select",function(a){c.trigger("select",a)})}),this.delegateEvents(),this}});b.exports=n}()},{"../../Core/MVC":6,"../../controls":66,"../../models/ObjectField":124,"../../utilities":144,"./../MetricPalette/MetricItem":288,"./colorMetricTemplate.html":170,"./fTemplate.html":171,"./functionItemTemplate.html":172,"./functionTemplate.html":173,"./selectTemplate.html":175,jquery:103,underscore:458}],170:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div id="color-palette"> \n    <div class="color-palette-content"> \n        <div class="color-palette-legend-toggle color-palette-block"> \n            <legend class="subhead">COLOR METRIC</legend>\n            <ul class="metricItems"></ul> \n        </div> \n    </div>	\n</div>	';return __p}},{lodash:456}],171:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<ul class="functions"></ul>';return __p}},{lodash:456}],172:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<li class="functionItem '+(null==(__t=selected)?"":__t)+'">'+__e(label)+"</li>";return __p}},{lodash:456}],173:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<a class="metricFunction'+(null==(__t=disabled)?"":__t)+'">'+__e(func)+"</a>";return __p}},{lodash:456}],174:[function(a,b){b.exports=a("./ColorMetricView")},{"./ColorMetricView":169}],175:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<span class="zd icon checkbox">\n	<span class="zd checked '+(null==(__t=selected)?"":__t)+'"></span>\n</span>';return __p}},{lodash:456}],176:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("./../ObjectFieldItem"),g=a("./../ListView/index.js"),h=a("./../ViewNavigator/index.js"),i=a("./../GroupedListView/index.js"),j=a("./../ColorMainView/index.js"),k=a("./../ColorMetricView/index.js"),l=a("./../ColorSettingsView/index.js"),m=a("./../ColorSettingsAttrView/index.js"),n=f,o=h.extend({className:"color-palette-view",initialize:function(a){var b;if(!a.main)throw new Error("main (old Zoomdata.main) must be defined");e.View.prototype.initialize.apply(this,arguments),this.controller=this.options.controller,b=this.controller.state.colorDataObj.getColorKeyLabel(),this.colorDataObj=this.controller._controller.metrics[b],this.colorDataObj&&this.colorDataObj[0]&&(this.colorDataObj=this.colorDataObj[0]),this.colorDataObj&&this.colorDataObj.isMetric()||(this.colorDataObj=this.controller.state.colorDataObj),this.listenTo(this.controller,"visualization:dataUpdate",this._onVisualizationDataUpdate),d.bindAll(this,"render","remove")},events:{"click .color-palette-settings-box":"_showSettingsView","click .color-palette-color-metric":"_showMetricsView","click .color-palette-color-attribute":"_showAttributesView",'click button[value="dialog-back"]':"onBack"},_showMainView:function(){this.mainView=new j({model:this.model,controller:this.options.controller}),this.currentView="ColorMainView",this.show(this.mainView)},_onVisualizationDataUpdate:function(){"ColorMainView"===this.currentView&&this.mainView.$el.is(":visible")&&this.mainView.render()},_showSettingsView:function(){var a,b={model:this.model,controller:this.options.controller};return this.colorDataObj.domain()?(this.colorDataObj.isMetric()?a=new l(b):(b.selectedAttribute=this.options.controller.fields.models[2],a=new m(b)),this.currentView="ColorSettingsView",void this.show(a)):!1},_showMetricsView:function(){var a=new k({model:this.model,controller:this.options.controller,main:this.options.main});this.currentView="ColorMetricView",this.listenTo(a,"select",this.selectMetric),this.show(a),a.$el.append('<div class="palette-bottom-panel"></div>')},_showAttributesView:function(){var a=this.controller.state.groupBy,b=new i({className:"nav nav-tabs nav-stacked",ItemView:n,ListView:g,collection:this.controller.fields,showSelected:!0,selectedModel:this.controller.state.colorDataObj,selectable:"radio",filter:function(b){var c=a.findWhere({name:b.get("name")});return"ATTRIBUTE"===b.get("type")&&(!c||c.get("groupColorSet"))},groupBy:"type",comparator:function(a){var b=a.get("label");return b?b.toLocaleLowerCase():b}});this.currentView="ColorAttributeView",this.listenTo(b,"select",this.selectAttribute),this.show(b),b.$el.append('<div class="palette-bottom-panel"></div>')},selectMetric:function(a){this.controller.state.colorDataObj.set({name:a.name,func:a.func,colorsData:this.colorDataObj.metric.colorsData,colors:this.colorDataObj.metric.colors})},selectAttribute:function(a){var b=this.controller.fields.findWhere({name:a.get("name")});this.controller.state.colorDataObj._setField(b),this.controller.state.colorDataObj.set("name",a.get("name"))},render:function(){return this._showMainView(),this.delegateEvents(),this},back:function(){this._showMainView()},_canGoBack:function(){return"ColorMainView"!==this.currentView},show:function(){h.prototype.show.apply(this,arguments);var a=this.$el.closest(".zd-palette").find(".zd-palette-titlebar"),b=c(a).find('button[value="dialog-back"]'),d=c('<div class="back-label"><b style="vertical-align: middle;">COLOR</b></div>').css({"font-family":"source-sans-pro, sans-serif","font-weight":"bold","font-size":"12px",display:"inline-block","float":"right","padding-left":"6px","letter-spacing":"2px"});b.is(":visible")?(this.$el.css({"margin-top":"30px",height:"calc(100% - 50px)"}),b.find(".back-label").remove(),b.append(d)):this.$el.css({"margin-top":"0px",height:"100%"})},onShowBackButton:function(){this.$el.closest(".zd-palette").find('button[value="dialog-back"]').show()},onHideBackButton:function(){this.$el.closest(".zd-palette").find('button[value="dialog-back"]').hide()}});b.exports=o}()},{"../../Core/MVC":6,"./../ColorMainView/index.js":168,"./../ColorMetricView/index.js":174,"./../ColorSettingsAttrView/index.js":183,"./../ColorSettingsView/index.js":187,"./../GroupedListView/index.js":258,"./../ListView/index.js":275,"./../ObjectFieldItem":309,"./../ViewNavigator/index.js":379,jquery:103,underscore:458}],177:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="color-scale-dragger" style="left: '+(null==(__t=position)?"":__t)+"%; margin-left: "+(null==(__t=offset)?"":__t)+'px;">\n    <div class="color-scale-dragger-top"></div>\n    <div class="color-scale-dragger-line"></div>\n    <input class="color-scale-dragger-input" type="text" value="'+(null==(__t=value)?"":__t)+'" />\n</div>';return __p}},{lodash:456}],178:[function(a,b){b.exports=a(163)},{"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/views/ColorKey/colorItemTemplate.html":163,lodash:456}],179:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="color-scale">\n    <legend class="subhead">COLOR SCALE</legend>\n    <div class="color-scale-wrapper">\n        <div class="color-scale-range"></div>\n        <div class="color-scale-labels"></div>\n        <div class="draggers-wrapper"></div>\n    </div>\n</div>';return __p}},{lodash:456}],180:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("../../utilities/MetricFormatter"),g=a("./colorScaleTemplate.html"),h=a("./colorItemTemplate.html"),i=a("./colorDraggerTemplate.html"),j=e.View.extend({template:g,events:{"keyup .color-scale-dragger-input":"_checkInput","blur .color-scale-dragger-input":"_updateDomain","mousedown .color-scale-dragger":"_setActiveDragger"},initialize:function(){e.View.prototype.initialize.apply(this,arguments),this.controller=this.options.controller,this.controller.state.colorDataObj&&(this.colorMetricLabel=this.controller.state.colorDataObj.get("label")),d.bindAll(this,"render","remove")},render:function(){var a;if(this.colorMetricLabel)return this.colorMetric=this.controller._controller.metrics[this.colorMetricLabel],this.colorMetric[0]&&(this.colorMetric=this.colorMetric[0],this.multiMetric=!0),a=this.controller.fields.findWhere({name:this.colorMetric.metric.name}),this.metricFormatter=new f(a.get("type")),this.$el.empty().append(this.template()),this.initScale(),this.initLabels(),this.initDraggers(),this.delegateEvents(),this},initScale:function(){var a=this.$el.find(".color-scale-range").empty(),b=this.colorMetric.colorRange()||[];3!==b.length&&this.hide(),b.length&&(c.each(b,function(b,c){a.append(h({color:c}))}),a.find(".color-item").css("width",100/b.length+"%"))},initLabels:function(){var a=this,b=this.colorMetric.domain(),d=this.$el.find(".color-scale-labels").empty();b=[b[0],b[b.length-1]],b&&"undefined"!=typeof b[0]&&c.each(b,function(c,e){e>10?b[c]=e=e.toFixed(0):(100*e).toFixed(0)!==(100*e).toString()&&(b[c]=e=e.toFixed(2)),b.length<=4&&d.append('<span class="color-key-label">'+a.metricFormatter.format(e)+"</span>")})},initDraggers:function(){var a=this,b=this.colorMetric.domain(),d=this.$el.find(".draggers-wrapper").empty();c.each(b,function(a,c){a&&a!==b.length-1&&(c>10?b[a]=c=c.toFixed(0):(100*c).toFixed(0)!==(100*c).toString()&&(b[a]=c=c.toFixed(2)),d.append(i({value:c,offset:a-1,position:a/(b.length-1)*100})))}),d.find(".color-scale-dragger").draggable({axis:"x",cursor:"ew-resize",containment:"parent",drag:function(){var b=!0,e=0,f=d.width()-2,g=c(this).index(),h=c(this).position();return 0===g?f=c(this).next().position().left:e=c(this).prev().position().left,h.left>f+3?(c(this).css("left",f+"px"),b=!1):h.left<e-3&&(c(this).css("left",e+"px"),b=!1),a.updateDomainsValues(),a.updateDraggers(),b},stop:function(){a.updateDomainsValues(!0)}}).css("position","absolute"),this.updateDraggers()},_checkInput:function(a){var b=13;a.keyCode===b&&c(a.target).trigger("blur")},_updateDomain:function(a){var b=this.colorMetric.domain(),d=c(a.target),e=d.closest(".color-scale-dragger").index()+1,f=parseFloat(d.val()),g=0;return b[3]-b[0]<10&&(g=2),isNaN(f)?void d.val(b[e].toFixed(g)):(b[e-1].toFixed(g)>f?f=b[e-1]:b[e+1].toFixed(g)<f&&(f=b[e+1]),b[e]=f,d.val(f),this.colorMetric.domainValue=b,void this.updateDraggers())},updateDomainsValues:function(a){var b=this.colorMetric.domain(),c=b[3]-b[0],d=this.$el.find(".color-scale-dragger"),e=this.$el.find(".color-scale-dragger-input"),f=d.parent().width(),g=parseFloat(d.eq(0).css("left"))/f,h=parseFloat(d.eq(1).css("left"))/f,i=0;10>c&&(i=2),parseFloat(d.eq(1).css("left"))+3>=f&&(h=1),b[1]=b[0]+c*g,b[2]=b[0]+c*h,e.eq(0).val(b[1].toFixed(i)),e.eq(1).val(b[2].toFixed(i)),this.colorMetric.domainValue=b,this.initLabels(),a&&(this.controller.colorKey.render(),this.controller.refreshVisualization())},updateDraggers:function(){var a=this.colorMetric.domain(),b=a[3]-a[0],c=100*(a[1]-a[0])/b,d=100*(a[2]-a[0])/b,e=this.$el.find(".color-scale-dragger"),f=this.$el.find(".color-item");isNaN(c)||isNaN(d)||(e.eq(0).css("left",c.toFixed(2)+"%"),e.eq(1).css("left",d.toFixed(2)+"%"),f.eq(0).css("width",c.toFixed(2)+"%"),f.eq(1).css("width",(d-c).toFixed(2)+"%"),f.eq(2).css("width",(100-d).toFixed(2)+"%"))},_setActiveDragger:function(a){c(a.target).closest(".color-scale-dragger").addClass("active").siblings().removeClass("active")},show:function(){this.$el.show()},hide:function(){this.$el.hide()}});b.exports=j}()},{"../../Core/MVC":6,"../../utilities/MetricFormatter":140,"./colorDraggerTemplate.html":177,"./colorItemTemplate.html":178,"./colorScaleTemplate.html":179,jquery:103,underscore:458}],181:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<legend class="subhead">'+__e(label)+"</legend>";return __p}},{lodash:456}],182:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div id="color-palette" class="attribute-color-palette"> \n    <div class="color-palette-content"> \n        <div class="color-palette-auto-color-toggle color-palette-block"> \n            <legend class="subhead">Attribute Color Matching</legend>\n            <div class="radio interact-radio"> \n                <input id="color-palette-asigned-color" type="radio" name="autoColor[]" value="false" ',autoColor||(__p+=" checked "),__p+='>\n                <label for="color-palette-asigned-color">Assigned Colors</label>\n                <br/>\n                <input id="color-palette-auto-color" type="radio" name="autoColor[]" value="true" ',autoColor&&(__p+=" checked "),__p+=' >\n                <label for="color-palette-auto-color">Automatic</label>\n            </div> \n        </div> \n        <div class="color-palette-attr-color-palette color-palette-block" ',autoColor&&(__p+=' style="display: none;" '),__p+=' > \n            <legend class="subhead">Attribute Color Palette</legend> \n            <div class="color-palette-attr-color-list"></div> \n        </div> \n    </div>	\n    <div class="palette-footer"></div>\n</div>	';return __p}},{lodash:456}],183:[function(a,b){!function(){"use strict";var c=(a("jquery"),a("underscore")),d=a("../../Core/MVC"),e=d.Events,f=a("./../ListView"),g=(a("../../controls").ColorPicker,a("./../AttributeColorItem")),h=d.Model.extend({defaults:{value:"",color:"#fff"}}),i=d.Collection.extend({model:h}),j=a("./colorSettingsAttrTemplate.html"),k=a("./attrbuteTitleTemplate.html"),l=d.View.extend({template:j,events:{'click .color-palette-auto-color-toggle input[type="radio"]':"_toggleAutoColor"},initialize:function(){d.View.prototype.initialize.apply(this,arguments),this.controller=this.options.controller,this.colorDataObj=this.controller.state.colorDataObj,this.colorDataObjLabel=this.colorDataObj.getColorKeyLabel(),this.colorSets=[],c.bindAll(this,"render","remove")},render:function(){var a=!!this.colorDataObj.get("autoColor");return this.$el.append(this.template({autoColor:a})),this.$el.css({height:"100%"}),a||this.renderAttributesList(),this.delegateEvents(),this},renderAttributesList:function(){var a,b=this,c=this.colorDataObj.colorRange()||[],d=this.colorDataObj.domain()||[];a=d.map(function(a,b){return{value:a,color:c[b]}}),this.attributesCollection=new i(a),this.attributeValuesList=new f({className:"zd nav nav-tabs nav-stacked",collection:this.attributesCollection,ItemView:g}),this.$el.find(".color-palette-attr-color-list").empty().append(k({label:this.options.selectedAttribute.get("label")})).append(this.attributeValuesList.render().$el),this.listenTo(this.attributesCollection,"changeModelColor",function(a){var c=b.colorDataObj.get("groupColors")||{};c[a.get("value")]=a.get("color"),b.colorDataObj.set("groupColors",c,{silent:!0}),b.controller.refreshVisualization(),e.trigger("undo:saveState")})},_undockParentView:function(){this.$el.closest(".color-palette.docked").removeClass("docked")},_toggleAutoColor:function(){var a=this.$el.find("#color-palette-auto-color").prop("checked");this.colorDataObj.set("autoColor",a,{silent:!0}),a?this.$el.find(".color-palette-attr-color-palette").hide():(this.renderAttributesList(),this.$el.find(".color-palette-attr-color-palette").show()),this.controller.refreshVisualization(),e.trigger("undo:saveState")}});b.exports=l}()},{"../../Core/MVC":6,"../../controls":66,"./../AttributeColorItem":154,"./../ListView":275,"./attrbuteTitleTemplate.html":181,"./colorSettingsAttrTemplate.html":182,jquery:103,underscore:458}],184:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("colorbrewer"),f=a("../../Core/MVC"),g=a("../../controls"),h=a("./../ColorScale"),i=f.Events,j=a("./colorSettingsTemplate.html"),k=a("./colorSetTemplate.html"),l=f.View.extend({template:j,events:{'click .color-palette-legend-toggle input[type="radio"]':"_toggleColorChoose",'click .color-palette-diverging-toggle input[type="radio"]':"_toggleDivergingColor","click .color-set-item":"_selectColorSet"},initialize:function(){var a=this;f.View.prototype.initialize.apply(this,arguments),this.controller=this.options.controller,this.colorMetricLabel=this.controller.state.colorDataObj.get("label"),this.colorMetric=this.controller._controller.metrics[this.colorMetricLabel],this.colorMetric[0]&&(this.colorMetric=this.colorMetric[0],this.multiMetric=!0),this.colorNumb=this.controller.state.colorNumb||2,this.colorSets=[],this.colorSetsName=[],"none"===this.colorMetric.metric.name&&this.controller._updateMetricsDivergingColorRange("gradient"),c.each(e,function(b,c){var d;c[a.colorNumb]?d=c[a.colorNumb]:2===a.colorNumb?d=[c[3][0],c[3][2]]:a.multiMetric&&(d=c[9]),d&&(a.colorSets.push(d),a.colorSetsName.push(b))}),d.bindAll(this,"render","remove")},_changedColor:function(a,b){var c=this.colorMetric.colorRange()||[];c[b]!==a&&(c[b]=a,this.$el.find(".color-set-list .selected").removeClass("selected"),this.colorMetric.multiMetric?(this.colorMetric.setColors(c),this.controller.state.colorDataObj.set({colors:this.colorMetric.metric.colorsData},{silent:!0})):(this.colorMetric.metric.colors=c,this.controller.state.colorDataObj.set("colors",c,{silent:!0})),this.colorScale.render(),this.controller.refreshVisualization(),i.trigger("undo:saveState"))},render:function(){var a,b=this,c=this.colorMetric.colorRange()||[];return a=this.colorMetric.multiMetric?this.colorMetric.domain()||[]:this.colorMetric.metric.colorsData||[],this.$el.append(this.template({colorsData:a,divergingColorRange:this.controller.state.divergingColorRange,isNoneMetric:"none"===this.colorMetric.metric.name,legendType:this.controller.state.legendType||"range",multiMetric:this.multiMetric})),this.$el.css({height:"100%"}),this.colorScale=new h({el:this.$el.find(".color-palette-color-scale"),controller:this.controller}),this.colorScale.render(),this.colorPickers=[],this.$el.find(".color-palette-settings-color-box").each(function(a,d){var e=new g.ColorPicker({el:d,color:c[a]});b.colorPickers.push(e),b.listenTo(e,"change",function(c){b._changedColor(c,a)}),b.listenTo(e,"beforeShow",function(){b._undockParentView()})}),this._renderColorSets(),this.delegateEvents(),this},_renderColorSets:function(){var a=this.$el.find(".color-set-list"),b="none"===this.colorMetric.metric.name,e=this.colorMetric.colorRange()||[];c.each(this.colorSets,function(c,f){var g=f,h=d.isEqual(f,e);b&&(g=[f[0]],h=e[0]===g[0]),a.append(k({colorSet:g,index:c,selected:h}))})},_undockParentView:function(){this.$el.closest(".color-palette.docked").removeClass("docked")},_toggleColorChoose:function(){this.$el.find("#color-palette-color-palette").prop("checked")?(this.$el.find(".color-palette-settings-color-box").hide(),this.$el.find(".color-palette-color-sets").show(),this._resizeColorList(),this._updateLegendType(this.$el.find(".color-palette-color-sets .color-set-item.selected").length?"palette":"range")):(this.$el.find(".color-palette-color-sets").hide(),"none"!==this.colorMetric.metric.name?this.$el.find(".color-palette-settings-color-box").show():this.$el.find(".color-palette-settings-color-box:eq(0)").show(),this._updateLegendType("range"))},_updateLegendType:function(a){var b=this.controller.state;"palette"===a?(b.colorDataObj.unset("colors",{silent:!0}),delete this.colorMetric.metric.colors):(b.colorDataObj.set("colors",[],{silent:!0}),this.colorMetric.metric.colors=[]),b.colorDataObj.set("legendType",a),b.legendType=a},_toggleDivergingColor:function(){var a=this.$el.find('.color-palette-diverging-toggle input[type="radio"]:checked').val();"distinct"===a&&3===this.colorMetric.colorRange().length?this.colorScale.show():this.colorScale.hide(),this.controller._updateMetricsDivergingColorRange(a),this.controller.refreshVisualization(),this.controller.colorKey.render(),this.colorScale.render(),this._resizeColorList(),i.trigger("undo:saveState")},_resizeColorList:function(){var a=40,b=this.$el.find(".color-palette-legend-toggle").outerHeight(),c=this.$el.find(".color-palette-diverging-toggle:visible").outerHeight()||0,d=this.$el.find(".color-palette-color-scale:visible").outerHeight()||0,e=b+c+d+a;this.$el.find(".color-palette-color-sets").css({height:"calc(100% - "+e+"px)"})},_selectColorSet:function(a){var b=c(a.currentTarget),d=b.index(),e=this.colorSets[d];e.length<this.colorNumb&&(e=this.increaseColorSets(e,d,this.colorNumb)),this._updateLegendType("palette"),b.hasClass("selected")||(b.addClass("selected").siblings().removeClass("selected"),c.each(this.colorPickers,function(a,b){b.setColor(e[a])}),this.controller.state.colorDataObj.set({colorSet:this.colorSetsName[d]},{silent:!0}),this.colorMetric.multiMetric?(this.colorMetric.setColors(e),this.controller.state.colorDataObj.set({colors:this.colorMetric.metric.colorsData},{silent:!0})):(this.colorMetric.metric.colors=e,this.controller.state.colorDataObj.set({colors:e},{silent:!0})),this.controller.refreshVisualization(),this.colorScale.render(),i.trigger("undo:saveState"))},increaseColorSets:function(a,b,c){var f,g=d.map(Object.keys(e),function(a,b){return{name:a,index:b}});f="number"==typeof b?d.findWhere(g,{index:b}):d.findWhere(g,{name:b});var h=d.findWhere(g,{index:g.length-1===f.index?0:f.index+1});for(d.each(e[h.name],function(b){a=d.union(a,b)});a.length<c;)a=this.increaseColorSets(a,h.name,c);return a.length>c&&a.splice(c,a.length),a},_resize:function(){this._resizeColorList()}});b.exports=l}()},{"../../Core/MVC":6,"../../controls":66,"./../ColorScale":180,"./colorSetTemplate.html":185,"./colorSettingsTemplate.html":186,colorbrewer:89,jquery:103,underscore:458}],185:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<li class="color-set-item ',selected&&(__p+=" selected "),__p+='" color-set-index="'+(null==(__t=index)?"":__t)+'">\n    <div class="color-set-wrapper">\n    ',colorSet.forEach(function(a){__p+='\n    	<div class="color-item" style="background: '+(null==(__t=a)?"":__t)+';"></div>\n    '}),__p+=" \n    </div>\n</li>";return __p}},{lodash:456}],186:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div id="color-palette" ',multiMetric&&(__p+=' class="multi-metric" '),__p+=' > \n	<div class="color-palette-content"> \n	    <div class="color-palette-legend-toggle color-palette-block"> \n	        <legend class="subhead">Sequential Color Palette</legend>\n	        <div class="radio interact-radio"> \n	            <input id="color-palette-color-palette" type="radio" name="colorPalette[]" value="palette" ',"palette"===legendType&&(__p+=" checked "),__p+='>\n	            <label for="color-palette-color-palette">Color Palette</label>\n	            <input id="color-palette-color-range" type="radio" name="colorPalette[]" value="range" ',"range"===legendType&&(__p+=" checked "),__p+=' >\n	            <label for="color-palette-color-range">Color Range</label>\n	        </div> \n	    </div> \n	    <div class="color-palette-diverging-toggle color-palette-block" ',isNoneMetric&&(__p+=' style="display: none;" '),__p+=' > \n	        <legend class="subhead">DIVERGING COLOR RANGE</legend>\n	        <div class="radio interact-radio"> \n	            <input id="color-palette-distinct" type="radio" name="colorDiverging[]" value="distinct" ',"distinct"===divergingColorRange&&(__p+=" checked "),__p+=' >\n	            <label for="color-palette-distinct">Distinct Colors</label>\n	            <input id="color-palette-gradient" type="radio" name="colorDiverging[]" value="gradient" ',"gradient"===divergingColorRange&&(__p+=" checked "),__p+=' >\n	            <label for="color-palette-gradient">Gradient</label>\n	        </div> \n	    </div> \n	    <div class="color-palette-color-scale color-palette-block" ',"gradient"===divergingColorRange&&(__p+=' style="display: none;" '),__p+=" ></div> \n        ",colorsData.forEach(function(a,b){__p+=' \n            <div class="color-palette-settings-color-box color-palette-block"  ',("palette"===legendType||b&&isNoneMetric)&&(__p+=' style="display: none;" '),__p+=' > \n                <legend class="subhead">'+__e(a.name||a)+"</legend>\n            </div> \n        "}),__p+=' \n	    <div class="color-palette-color-sets color-palette-block" ',"range"===legendType&&(__p+=' style="display: none;" '),__p+=' > \n	        <legend class="subhead">Color Palette</legend> \n	        <ul class="color-set-list"/> \n	    </div> \n	</div>	\n	<div class="palette-footer"></div>\n</div>	';return __p}},{lodash:456}],187:[function(a,b){b.exports=a("./ColorSettingsView")},{"./ColorSettingsView":184}],188:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div id="comparison-palette">   \n    <div class="comparison-palette-content">\n        <div style="margin:10px">\n            <legend class="subhead dark">Comparison mode</legend>\n        </div>\n        <ul id="comparisonModeSettings" class="nav">\n                    <li>\n                        <a href="javascript:void(0)" data-type="OFF">\n                            <div class="zd icon checkmark comparison-accessory"></div> \n                            <div>Off</div>\n                        </a>\n                    </li>\n            ',"ROLLING_HOUR"===timeWindowScale||"HOUR"===timeWindowScale||"DAY"===timeWindowScale||"WEEK"===timeWindowScale?(__p+="\n                ","WEEK"!==timeWindowScale&&(__p+=' \n                    <li>\n                        <a href="javascript:void(0)" data-type="YESTERDAY">\n                            <div class="zd icon checkmark comparison-accessory"></div> \n                            <div>Yesterday</div>\n                        </a>\n                    </li>\n                '),__p+=' \n                <li>\n                    <a href="javascript:void(0)" data-type="WEEK_AGO">\n                        <div class="zd icon checkmark comparison-accessory"></div> \n                        <div>Last Week</div>\n                    </a>\n                </li>\n            '):"MONTH"===timeWindowScale?__p+=' \n                <li>\n                    <a href="javascript:void(0)" data-type="LAST_MONTH">\n                        <div class="zd icon checkmark comparison-accessory"></div> \n                        <div>Last Month</div>\n                    </a>\n                </li>\n                <li>\n                    <a href="javascript:void(0)" data-type="MONTH_YEAR_AGO">\n                        <div class="zd icon checkmark comparison-accessory"></div> \n                        <div>This Month Last Year</div>\n                    </a>\n                </li>\n            ':"YEAR"===timeWindowScale&&(__p+=' \n                <li>\n                    <a href="javascript:void(0)" data-type="LAST_YEAR">\n                        <div class="zd icon checkmark comparison-accessory"></div> \n                        <div>Last Year</div>\n                    </a>\n                </li>\n            '),__p+=' \n            <li>\n                <a href="javascript:void(0)" data-type="SPEC">\n                    <div class="zd icon checkmark comparison-accessory"></div> \n                    <div>Specified Day</div>\n                </a>\n            </li>\n        </ul>\n        <div style="margin-top:30px;" id="comparisonDatePicker"></div> \n    </div>  \n</div>';return __p}},{lodash:456}],189:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC")),e=d.Events,f=a("./comparisonTemplate.html"),g=d.View.extend({className:"comparison-view",events:{"click #comparisonModeSettings li a":"_changeComparisonPeriod"},template:f,initialize:function(){Zoomdata.MVC.View.prototype.initialize.apply(this,arguments),this.waitForStartVisDone=!1
},render:function(){var a=this;this.$el.append(this.template(a.model.attributes));var b=60*(new Date).getTimezoneOffset()*1e3,c=this.model.time.get("max")-b,d=this.model.time.get("min")-b;this.$onOffSwitch=this.$("#comparisononoffswitch"),this.$comparisonMode=this.$("#comparisonModeSettings"),this.$comparisonDatePicker=this.$("#comparisonDatePicker");var e=this.model.get("timeWindowScale"),f=this.model.get("comparisonPeriod"),g=-1==["YESTERDAY","WEEK_AGO","LAST_MONTH","LAST_YEAR"].indexOf(f),h=null;return g?(h=f,f="SPEC"):"ROLLING_HOUR"===e||"HOUR"===e||"DAY"===e?-1===["YESTERDAY","WEEK_AGO"].indexOf(f)&&this.model.set("comparisonPeriod","YESTERDAY"):"WEEK"===e?-1===["WEEK_AGO","SPEC"].indexOf(f)&&this.model.set("comparisonPeriod","WEEK_AGO"):"MONTH"===e?-1===["LAST_MONTH","MONTH_YEAR_AGO"].indexOf(f)&&this.model.set("comparisonPeriod","LAST_MONTH"):"YEAR"===e&&"LAST_YEAR"!==f&&this.model.set("comparisonPeriod","LAST_YEAR"),this.model.get("comparison")?this.$comparisonMode.find("li a[data-type="+f+"]").addClass("active"):this.$comparisonMode.find("li a[data-type=OFF]").addClass("active"),this.$comparisonDatePicker.datepicker({format:"yyyy-mm-dd",noHide:!0,isInline:!0,element:this.$comparisonDatePicker.parent(),startDate:new Date(d-864e5),endDate:new Date(c),onRender:function(a){var b=new Date;return a.valueOf()>b.valueOf()?"disabled":""}}).on("changeDate",function(b){a._changeComparisonDate(b)}),this.$comparisonMode.show(),g&&this.$comparisonDatePicker.show("slide",{direction:"left"}),this.$comparisonDatePicker.toggle(this.model.get("comparison")&&this.model.get("comparisonPeriod")===h),h&&this.$comparisonDatePicker.datepicker("update",h),this},_changeComparisonDate:function(a){this.updateModel({comparisonPeriod:a.format()})},updateModel:function(a){var b,c=this,d=!1;if(this.waitForStartVisDone)return void e.off("thread:startVisDone").once("thread:startVisDone",function(){c.waitForStartVisDone=!1,c.updateModel(a)});for(b in a)if(a.hasOwnProperty(b)&&this.model.get(b)!==a[b]){d=!0;break}d&&(this.waitForStartVisDone=!0,e.off("thread:startVisDone").once("thread:startVisDone",function(){c.waitForStartVisDone=!1}),this.model.set(a),a.comparisonPeriod!==this.model.get("comparisonPeriod")&&this.model.trigger("change:comparisonPeriod"))},_changeComparisonPeriod:function(a){var b=c(a.currentTarget),d=b.data("type");if(this.$comparisonMode.find("li a").removeClass("active"),this.$comparisonMode.find("li a[data-type="+d+"]").addClass("active"),"OFF"===d)return this.updateModel({comparison:!1}),void this.$comparisonDatePicker.hide("slide",{direction:"left"});if("SPEC"===d){this.$comparisonDatePicker.show("slide",{direction:"left"});var e=new Date(this.model.time.get("max")),f=e.getFullYear().toString(),g=(e.getMonth()+1).toString(),h=e.getDate().toString();d=f+"-"+(g[1]?g:"0"+g[0])+"-"+(h[1]?h:"0"+h[0]),this.$comparisonDatePicker.datepicker("update",d)}else this.$comparisonDatePicker.hide("slide",{direction:"left"});this.updateModel({comparison:!0,comparisonPeriod:d}),this.changeComparisonPeriod()},turnOnOffComparison:c.noop,changeComparisonPeriod:c.noop});b.exports=g}()},{"../../Core/MVC":6,"./comparisonTemplate.html":188,jquery:103,underscore:458}],190:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("../../controls"),g=a("./../MetricPalette"),h=a("../../models/ObjectField"),i=a("./../SmallObjectFieldItem"),j=a("./../GroupedListView"),k=a("./../../components/InteractiveElements")(),l={},m=a("./templateRows.html"),n=a("./templateCols.html"),o=a("./templateMetrics.html");l.View=e.View.extend({className:"configure-palette",initialize:function(a){var b=this;if(!a.main)throw new Error("main (old Zoomdata.main) must be defined");return this.options=a,this.$rows=new l.Rows,this.$cols=new l.Cols,this.$metrics=new l.Metrics,this.$rows.__palette__=this,this.$cols.__palette__=this,this.$metrics.__palette__=this,this.animationCSS="",this.__configs__={rows:[],cols:[],metrics:[]},this._refresh_callback=function(){b.refresh()},this.__controller__=a.__controller__,this._getState().on("Configure:change change",this._refresh_callback),this._getMetrics().on("Configure:change change remove",this._refresh_callback),this},_refresh_callback:function(){},animate:function(a){var b=this;switch(a){case"open":b._setAnimation("open");break;case"close":b._setAnimation("close")}},bindResize:function(){var a=this;this.$el.on("resize.Configure",function(){var b=this.$el.width()-200,c=this.$el.height()-this.$cols.getHeight();this.$visualization.animate({width:b+"px",height:c+"px"},{duration:100,progress:function(){a._getController().resize()},done:function(){}})}.bind(this))},unbindResize:function(){this.$el.off("resize.Configure")},_setAnimation:function(a){var b=this,c=this.$rows.getWidth(),d=this.$cols.getHeight();"open"===a?(this.$rows.$el.css("left",-c+"px"),this.$cols.$el.css("top",-d+"px"),this.$rows.$el.animate({left:"+="+c+"px"},{duration:100,progress:function(){},done:function(){}}),this.$cols.$el.animate({top:"+="+d+"px"},{duration:100,progress:function(){},done:function(){}}),this.$visualization.animate({width:"-="+c+"px",height:"-="+d+"px",top:"+="+d+"px",left:"+="+c+"px"},{duration:100,progress:function(){b._getController().resize()},done:function(){b.openCallback()}})):(this.unbindResize(),this.$rows.$el.animate({left:"-="+c+"px"},{duration:100,progress:function(){},done:function(){}}),this.$cols.$el.animate({top:"-="+d+"px"},{duration:100,progress:function(){},done:function(){}}),this.$visualization.animate({width:"+="+c+"px",height:"+="+d+"px",top:"-="+d+"px",left:"-="+c+"px"},{duration:100,progress:function(){b._getController().resize()},done:function(){b.closeCallback()}}))},isPrevented:function(){return this.preventDefault},open:function(){this.preventDefault=!0,this.render(),this.$widget.attr("data-configure","true"),this.animate("open")},openCallback:function(){this.bindResize(),this.preventDefault=!1,this._getState().trigger("Configure:open",this)},close:function(){this.preventDefault=!0,this.animate("close")},closeCallback:function(){this.remove(),this.preventDefault=!1,this._getState().trigger("Configure:close",this)},remove:function(){var a=c(this._getController().element);this._releaseInteractiveElements(this.$rows.$el.find("li")),this._releaseInteractiveElements(this.$cols.$el.find("li")),this._releaseInteractiveElements(this.$metrics.$el.find("li")),a.removeAttr("style"),c(".control-button").removeClass("active"),this.$cols.remove(),this.$rows.remove(),a.parent().hasClass("zd-configure-palette-visualization")&&a.unwrap(".zd-configure-palette-visualization"),a.parent().hasClass("configure-palette")&&a.unwrap(".configure-palette"),a.parent().removeClass("configure-mode"),this.$widget.removeAttr("data-configure"),this._getState().off("Configure:change change",this._refresh_callback),this._getMetrics().off("Configure:change change remove",this._refresh_callback)},onRemove:function(){},_addColsList:function(){var a=this,b=new p,e=this._getAttributes("Column Attributes");b.$parent=this.$cols,b.__palette__=this,e.length>0&&d.each(e,function(b){var e=new l.Remove,f=new l.ListItem;f.__palette__=a,e.$parent=f,e.__palette__=a,d.filter(a._getController().fields.models,function(a){a.attributes.name===b&&f.$el.data("attribute",a)}),f.$el.append(c("<span>").text(f.$el.data().attribute.attributes.label)).append(e.el).attr("title",f.$el.data().attribute.attributes.label),a._registerInteractiveElements(f.el,f.$el.data("attribute"),{list:"cols"}),a.$cols.$el.find("ul").append(f.render().$el)}),this.$cols.$el.find("ul").append(b.render().$el),b.$el.data({button:b,type:"ATTRIBUTE",list:"cols"}),this._registerAddObjectFields(b.el,b.$el.data())},_addRowsList:function(){var a=this,b=new p,e=this._getAttributes("Row Attributes");b.$parent=this.$rows,b.__palette__=this,e.length>0&&d.each(e,function(b){var e=new l.Remove,f=new l.ListItem;f.__palette__=a,e.$parent=f,e.__palette__=a,d.filter(a._getController().fields.models,function(a){a.attributes.name===b&&f.$el.data("attribute",a)}),f.$el.append(c("<span>").text(f.$el.data().attribute.attributes.label)).append(e.el).attr("title",f.$el.data().attribute.attributes.label),a._registerInteractiveElements(f.el,f.$el.data("attribute"),{list:"rows"}),a.$rows.$el.find("ul").append(f.render().$el)}),this.$rows.$el.find("ul").append(b.render().$el),b.$el.data({button:b,type:"ATTRIBUTE",list:"rows",sort:!0}),this._registerAddObjectFields(b.el,b.$el.data())},_isFuncDeprecated:function(a){return a?a.toLowerCase().indexOf("mvel")>=0?!0:!1:!0},_addMetricsList:function(){var a=this,b=new q,e=this.__configs__.metrics;b.$parent=this.$metrics,b.__palette__=this,"Columns"===this._getMetricsDirection()?this.$cols.$el.find("ul").append(this.$metrics.render().$el):this.$rows.$el.find("ul").append(this.$metrics.render().$el),e.models.length>0&&d.each(e.models,function(b){var d=new l.Remove,e=null,f=new l.ListItem,g=c("<table>"),h=c("<tr>"),i=c("<td>"),j=c("<td>");f.__palette__=a,d.$parent=f,d.__palette__=a,e=a._getObjectField(b.get("name")),e.set("func",b.get("func")),f.$el.data("metric",e),a._isFuncDeprecated(f.$el.data("metric").get("func"))?h.attr("class","rounded"):(i.append(c("<span>").append(f.$el.data("metric").get("func"))),i.attr("title",f.$el.data("metric").get("func"))),j.append(c("<span>").text(f.$el.data("metric").get("label"))),j.attr("title",f.$el.data("metric").get("label")),h.append(i),h.append(j),g.append(h),f.$el.append(g).append(d.el),a._registerInteractiveElements(f.el,f.$el.data("metric"),{list:"metrics"}),a.$metrics.$el.find("ul").append(f.render().$el)}),this.$metrics.$el.find("ul").append(b.render().$el),b.$el.data({button:b,type:"NUMBER",list:"metrics"}),this._registerAddObjectFields(b.el,b.$el.data())},_releaseInteractiveElements:function(a){d.each(a,function(a){k.release(a)})},refresh:function(){this._releaseInteractiveElements(this.$rows.$el.find("li")),this._releaseInteractiveElements(this.$cols.$el.find("li")),this._releaseInteractiveElements(this.$metrics.$el.find("li")),this.$rows.$el.find("li").remove(),this.$cols.$el.find("li").remove(),this.$metrics.$el.find("li").remove(),this.__configs__.rows=this._getAttributes("Row Attributes"),this.__configs__.cols=this._getAttributes("Column Attributes"),this.__configs__.metrics=this._getMetrics(),this._addRowsList(),this._addColsList(),this._addMetricsList()},render:function(){var a=c('<div class="zd-configure-palette-visualization">');return this.__configs__.rows=this._getAttributes("Row Attributes"),this.__configs__.cols=this._getAttributes("Column Attributes"),this.__configs__.metrics=this._getMetrics(),this.$widget=c(this._getController().element).parent(),c(this._getController().element).parent().addClass("configure-mode"),c(this._getController().element).wrap(this.el),this.$el=c(this._getController().element).parent(),this.$el.addClass(this.className),this.$el.append(this.$rows.render().$el),this.$el.append(this.$cols.render().$el),c(this._getController().element).wrap(a),this.$visualization=c(this._getController().element).parent(),this._addRowsList(),this._addColsList(),this._addMetricsList(),this.$cols.sizes=this.$cols.$el[0].getBoundingClientRect(),this},_sortable:function(){var a=this;this.$el.find("ul").sortable({stop:function(){function b(a,b,c){for(var d=a.length,e=null,f={changed:!1,type:c,data:[]},g=0;d>g;g++)e=a.eq(g).data(),e&&e.attribute&&(e=e.attribute,e.get("name")!==b[g]&&(f.changed=!0),f.data.push(e.get("name")));return d<b.length&&(f.changed=!0),f}function e(a,b){return a.length>b.length?"add":a.length<b.length?"remove":a.length===b.length?"sort":void 0}var f=c(arguments[1].item[0]),g=f.data(),h=null,i=null,j=null,k=a.__palette__._getMetrics(),l=a.__palette__.$rows.$el.find("ul").eq(0).children().not(".add,.zd-configure-palette-metrics"),m=a.__palette__.$cols.$el.find("ul").eq(0).children().not(".add,.zd-configure-palette-metrics"),n=a.__palette__.$metrics.$el.find("ul").eq(0).children().not(".add"),o=a.__palette__._getAttributes("Row Attributes"),p=a.__palette__._getAttributes("Column Attributes");if(!f.is(".object-field")){if(g.attribute&&(h=b(l,o,"rows"),h.changed?a.__palette__._setAttributes("Row Attributes",h.data):null,h.todo=e(l,o),i=b(m,p,"cols"),i.changed?a.__palette__._setAttributes("Column Attributes",i.data):null,i.todo=e(m,p)),g.metric){var q;j={changed:!1,type:"metric",data:[]},d.each(n,function(a,b){q=c(a).data(),q&&q.metric&&(q=q.metric,q.get("name")!==k.models[b].get("name")&&(j.changed=!0),j.data.push(k.where({label:"Metrics",name:q.get("name")})[0]))}),j.changed&&(k.models=j.data,a.__palette__._getState().trigger("Configure:change-"+j.type,{caller:"sort"}))}return void a.__palette__._animateResize(function(){(null!==h&&h.changed||null!==i&&i.changed)&&(h.changed&&a.__palette__._getState().trigger("Configure:change-"+h.type,{caller:"sort",todo:h.todo}),i.changed&&a.__palette__._getState().trigger("Configure:change-"+i.type,{caller:"sort",todo:i.todo}),a.__palette__._getState().trigger("Configure:change change"))})}},sort:function(){a.$el.addClass("active");var b="",e=c(arguments[1].helper[0]),f=e.data("data");d.isUndefined(f)||(b="ATTRIBUTE"===f.attributes.type?"attribute":"metric",c(arguments[1].item[0]).data(b,f));try{c(arguments[1].item[0]).data().hasOwnProperty("attribute")&&c(arguments[1].placeholder[0]).prevAll("[class*=metrics]").length>0&&c(arguments[1].placeholder[0]).insertBefore(c(arguments[1].placeholder[0]).prevAll("[class*=metrics]"))}catch(g){}try{c(arguments[1].item[0]).hasClass("zd-configure-palette-metrics")&&c(arguments[1].placeholder[0]).parent().append(c(arguments[1].placeholder[0]))}catch(g){}}})},_dragable:function(){this.$el.draggable({start:function(){c(this).parents("[class*=zd-configure-palette]").eq(0).addClass("active");var a=c(arguments[1].helper[0]);a.addClass("zd-configure-palette-metrics-helper"),a.find("ul").remove(),a.append(c("<span>").text("Metrics"))},drag:function(){var a=c(this).parent().offset(),b=arguments[0],d=c(arguments[1].helper[0]).height(),e=b.pageY-a.top,f=b.pageX-a.left;arguments[1].position.top=e-d/2,arguments[1].position.left=f-20,c(this).data()["ui-draggable"].positionAbs.top=a.top+e,c(this).data()["ui-draggable"].positionAbs.left=a.left+f},helper:"clone"})},_dropable:function(){var a=this,b=arguments[0];this.$el.droppable({drop:function(){if(a.__palette__.$rows.$el.removeClass("active"),a.__palette__.$cols.$el.removeClass("active"),a.__palette__.$metrics.$el.removeClass("active"),!(c(arguments[1].draggable[0]).hasClass("zd-configure-palette-metrics")&&c(this).has("[class*=metrics]").length<=0))return c(arguments[1].draggable[0]).trigger("dragend"),!1;c(this).find(".ui-draggable-placeholder").remove();var d=c(arguments[1].draggable[0]);c(this).find("ul").append(d),d.trigger("click"),a.__palette__.$visualization.animate({top:a.__palette__.$cols.getHeight()+"px"},{duration:100,progress:function(){a.__palette__._getController().resize()},done:function(){"rows"===b?(a.__palette__._setMetricsDirection("Rows"),a.__palette__._getState().trigger("Configure:metric-direction")):(a.__palette__._setMetricsDirection("Columns"),a.__palette__._getState().trigger("Configure:metric-direction"))," "!==b&&a.__palette__._getState().trigger("Configure:change-"+b),a.__palette__._getState().trigger("Configure:change change")}}),c(arguments[1].draggable[0]).trigger("dragend")},over:function(){return c(arguments[1].draggable[0]).hasClass("zd-configure-palette-metrics")&&c(this).has("[class*=metrics]").length<=0&&c(this).has("[class=ui-draggable-placeholder]").length<=0?void c(this).find("ul").append(c("<li>").addClass("ui-draggable-placeholder")):!1},out:function(){c(this).find(".ui-draggable-placeholder").remove()},deactivate:function(){c(arguments[1].draggable[0]).trigger("dragend")}})},_attributeOnClick:function(a,b,c){var e=this,f=a.data("attribute"),g="",h=e.__configs__.cols,i=e.__configs__.rows;d.filter(h,function(a,b){a===f.attributes.name&&(g="cols",h[b]=c.attributes.name)}),d.filter(i,function(a,b){if(a===f.attributes.name){g="rows";var h,j=d.filter(e.__configs__.sort,function(a,b){return a.name===f.attributes.name?(h=b,!0):!1});j[0]&&(e.__configs__.sort[h]={name:c.attributes.name,dir:"asc"}),i[b]=c.attributes.name}}),a.data("attribute",c),a.find("span").text(c.attributes.label),b.remove(),""!==g&&this._getState().trigger("Configure:change-"+g),this._getState().trigger("Configure:change change")},_attributeOnRemove:function(a){return[{title:"Remove attributes",icon:"remove",className:"btn-remove",tagName:"div",callback:function(){a.find(".zd.icon.remove").trigger("click")}.bind(this)}]},_attributeFilter:function(a,b){var c=this,e=!!a.get("visible"),f="ATTRIBUTE"==a.get("type"),g=c.__configs__.cols,h=c.__configs__.rows,i=c._getController().state.metrics;a.get("label")===b.get("label")?a.set({selected:!0},{silent:!0}):a.set({selected:!1},{silent:!0});var j=d.filter(g.concat(h),function(b){return b===a.get("name")});j=j[0]?j[0]===b.get("name")?!0:!1:!0;var k=a.get("distinctCount");return k&&(j=j&&!d.filter(i.where({label:"Metrics"}),function(b){return b.get("name")===a.get("name")})[0]),e&&f&&j},_metricOnClick:function(a,b,c){var e=this,f=a.data("metric"),g=e.__configs__.metrics;d.filter(g.models,function(a,b){a.name===f.get("name")&&("count"===c.name?c.func="":null,g.models[b]=c)}),e._getState().trigger("Configure:change-metric",{todo:"CHANGE",caller:"change",changed:f.get("name")}),e._getState().trigger("Configure:change"),g.where({label:"Metrics",name:f.get("name")})[0].set({name:c.name,func:c.func}),a.data("metric",new h(c)),a.find("span").eq(0).text(c.func),a.find("span").eq(1).text(c.label),b.remove()},_metricOnRemove:function(a){return[{title:"Remove metrics",icon:"remove",className:"btn-remove",tagName:"div",callback:function(){a.find(".zd.icon.remove").trigger("click")}.bind(this)}]},_getAttributes:function(a){return"Row Attributes"===a||"Column Attributes"===a?this._getState().config.get("source").variables[a]:[]},_metricFilter:function(a,b){var c=this,d=c.__configs__.rows,e=c.__configs__.cols,f=c.__configs__.metrics,g=f.where({name:a.get("name")}),h=a.get("distinctCount")&&!d.concat(e).filter(function(b){return a.get("name")===b})[0],i="MONEY"===a.get("type")||"INTEGER"===a.get("type")||"NUMBER"===a.get("type")||"FORMULA"===a.get("type")||h,j=a.get("name")===b.get("name");return(j?!0:!g[0])&&i},_addAttribute:function(a,b,d){var e=this,f=new l.Remove,g=new l.ListItem;g.__palette__=this,f.$parent=g,f.__palette__=e,g.$el.data("attribute",d),g.$el.append(c("<span>").text(g.$el.data().attribute.attributes.label)).append(f.el).attr("title",g.$el.data().attribute.attributes.label),e._registerInteractiveElements(g.el,g.$el.data("attribute"),{list:a.list}),c(g.render().$el).insertBefore(a.button.$parent.$el.find(".add").eq(0)),e._animateResize(function(){switch(a.list){case"cols":e._getAttributes("Column Attributes").push(d.get("name"));break;case"rows":e._getAttributes("Row Attributes").push(d.get("name"))}b.remove(),""!==a.list&&e._getState().trigger("Configure:change-"+a.list,{caller:"add"}),e._getState().trigger("Configure:change change")})},_animateResize:function(a){var b=this;b.$visualization.animate({top:b.$cols.getHeight()+"px"},{duration:100,progress:function(){b.$el.trigger("resize")},done:function(){b.$el.trigger("resize"),a()}})},_addMetric:function(a,b,d){var e=this,f=new l.Remove,g=new l.ListItem;g.__palette__=this,f.$parent=g,f.__palette__=e,"count"===d.name?d.func="":null,g.$el.data("metric",new h(d));var i=c("<table>"),j=c("<tr>"),k=c("<td>"),m=c("<td>");g.$el.data("metric").get("func")?k.append(c("<span>").text(g.$el.data("metric").get("func"))):j.attr("class","rounded"),m.append(c("<span>").text(g.$el.data("metric").get("label"))),m.attr("title",g.$el.data("metric").get("label")),j.append(k),j.append(m),i.append(j),g.$el.append(i).append(f.el),e._registerInteractiveElements(g.el,g.$el.data("metric"),{list:a.list}),c(g.render().$el).insertBefore(a.button.$parent.$el.find(".add").eq(0)),e._animateResize(function(){e._getMetrics().add(e._updateMetrics([{name:d.name,func:d.func,type:d.type,label:d.label}])),e._getState().trigger("Configure:change-metric",{caller:"add",added:d.name}),e._getState().trigger("Configure:change"),b.remove()})},_attributeAddFilter:function(a){var b=this,c=!!a.get("visible"),e="ATTRIBUTE"==a.get("type"),f=b.__configs__.rows,g=b.__configs__.cols,h=b._getController().state.metrics,i=d.filter(g.concat(f),function(b){return b===a.get("name")});i=i.length>0?!1:!0;var j=a.get("distinctCount");return j&&(i=i&&!d.filter(h.where({label:"Metrics"}),function(b){return b.get("name")===a.get("name")})[0]),i&&a.get("selected")&&a.set("selected",!1,{silence:!0}),c&&e&&i},_metricAddFilter:function(a){var b=this,c=b.__configs__.rows,d=b.__configs__.cols,e=b.__configs__.metrics,f=e.where({name:a.get("name")}),g=a.get("distinctCount")&&!c.concat(d).filter(function(b){return a.get("name")===b})[0]&&e.where({name:a.get("name")}),h="MONEY"===a.get("type")||"INTEGER"===a.get("type")||"NUMBER"===a.get("type")||"FORMULA"===a.get("type")||g;return!f[0]&&h},_attributeAction:function(a,b,c){var d=c.$el,e=this,g=c.title,h=c.data;d.addClass("active");var k=new f.PalettePopup({containment:this.options.main.$section,customClass:"attributePalette",pointerWidth:14,handlers:c.isAddButton?[]:e._attributeOnRemove(d,h,"attributePalette")}),l=new j({className:"nav nav-tabs nav-stacked",selectable:"radio",selected:function(a){return c.isAddButton?!1:a.get("name")===h.get("name")},ItemView:i,collection:e._getController().fields,groupBy:"type",filter:function(a){return c.isAddButton?e._attributeAddFilter(a,h):e._attributeFilter(a,h)},comparator:function(a){return a.get("label")}});k.onHide=function(){d.removeClass("active")},k.render(l.render().$el,g),k.position({of:a,my:"left+20 top-30",at:"right center",collision:"flipfit flipfit"}),l.listenToOnce(l,"select",function(a){c.isAddButton?e._addAttribute(d.data(),k,a):e._attributeOnClick(d,k,a)})},_metricAction:function(a,b,c){var d=c.$el,e=this,h=c.title,i=c.data;d.addClass("active");var j=new f.PalettePopup({containment:this.options.main.$section,customClass:"metricPalette",pointerWidth:14,handlers:c.isAddButton?[]:e._metricOnRemove(d)}),k=new g({controller:e.__controller__,collection:e._getController().fields,currentItem:c.isAddButton?null:i.attributes,state:this._getController().state,filter:function(a){return c.isAddButton?e._metricAddFilter(a,i):e._metricFilter(a,i)},comparator:function(a){return a.get("label")}});j.onHide=function(){d.removeClass("active")},j.render(k.render().$el,h),j.position({of:b,my:"left+5 center",at:"center center",collision:"flipfit flipfit"}),k.listenTo(k,"select:metric",function(a){c.isAddButton?e._addMetric(d.data(),j,a):e._metricOnClick(d,j,a)})},_registerInteractiveElements:function(a,b,d){var e=this,f={},g="Title",h={};"cols"===d.list&&(g="Column Attribute"),"rows"===d.list&&(g="Row Attribute"),f.action=function(d,f){return e._attributeAction(d,f,{isAddButton:!1,title:g,data:b,$el:c(a)})},f.label=g,"metrics"===d.list&&(g="Metric",f.action=function(d,f){return e._metricAction(d,f,{isAddButton:!1,title:g,data:b,$el:c(a)})}),f.label=g,h.actions=[f],h.interactive=this._getController().isInteractive(),k.register(a,h)},_registerAddObjectFields:function(a,b){var d=this,e={},f="Title",g={};"cols"===b.list&&(f="Column Attribute"),"rows"===b.list&&(f="Row Attribute"),e.action=function(e,g){return d._attributeAction(e,g,{isAddButton:!0,title:f,data:b,$el:c(a)})},"metrics"===b.list&&(f="Metric",e.action=function(e,g){return d._metricAction(e,g,{isAddButton:!0,title:f,data:b,$el:c(a)})}),e.label=f,g.actions=[e],g.interactive=this._getController().isInteractive(),k.register(a,g)},_updateMetrics:function(a){var b=[],c=this;return d.each(a,function(a){c._getMetrics().where({name:a.name})[0]?c._getMetrics().where({name:a.name})[0].set({name:a.name,func:a.func}):b.push({label:"Metrics",name:a.name,func:a.func})}),b},_getMetrics:function(){return this._getState().metrics},_getMetricsDirection:function(){return this._getState().config.get("source").variables["Metric Direction"]},_setMetricsDirection:function(a){this._getState().config.get("source").variables["Metric Direction"]=a},_getState:function(){return this._getController().state},_getController:function(){return this.__controller__._controller},_getObjectField:function(a){return this._getController().fields.where({name:a})[0]},isEqual:function(a,b){return d.isEqual(a,b)},_getVariables:function(){return this._getState().config.get("source").variables},_setAttributes:function(a,b){this._getVariables()[a]=b}}),l.Rows=e.View.extend({tagName:"div",className:"zd-configure-palette-rows",events:{mouseover:"_onMouseOver",mouseleave:"_onMouseLeave"},template:m,remove:function(){this.$el.remove(),e.View.prototype.remove.apply(this,arguments)},getWidth:function(){return 200},render:function(){return this.$el.html(this.template()),this.__palette__._sortable.call(this,"rows"),this.__palette__._dropable.call(this,"rows"),this.$el.find("ul").sortable({connectWith:".zd-configure-palette-cols>div>ul",cancel:".zd-configure-palette-metrics,.zd.icon.add"}),this.$el.attr("rowspan",2),this},_onMouseOver:function(){},_onMouseLeave:function(){}}),l.Cols=e.View.extend({tagName:"div",className:"zd-configure-palette-cols",events:{},template:n,remove:function(){this.$el.remove(),e.View.prototype.remove.apply(this,arguments)},getHeight:function(){return this.$el.children()[0].getBoundingClientRect().height+5},render:function(){return this.$el.html(this.template()),this.__palette__._sortable.call(this,"cols"),this.__palette__._dropable.call(this,"cols"),this.$el.find("ul").sortable({connectWith:".zd-configure-palette-rows>div>ul",cancel:".zd-configure-palette-metrics,.zd.icon.add"}),this}}),l.Metrics=e.View.extend({tagName:"li",className:"zd-configure-palette-metrics",events:{},template:o,remove:function(){this.$el.remove(),Zoomdata.MVC.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template()),this.__palette__._sortable.call(this,"metrics"),this.$el.find("ul").sortable({cancel:".zd.icon.add"}),this.__palette__._dragable.call(this,"metrics"),this}}),l.Remove=e.View.extend({tagName:"div",className:"zd icon remove zd-configure-palette-remove",events:{click:"_onClick"},_onClick:function(){var a=this,b=this.__palette__.__configs__.rows,c=this.__palette__.__configs__.cols,e=this.__palette__.__configs__.metrics,f="",g=[],h=[],i=a.$parent.$el.data("attribute"),j=a.$parent.$el.data("metric");k.release(this.$parent),this.$parent.remove(),this.__palette__._animateResize(function(){d.isUndefined(i)?(e.remove(e.where({label:"Metrics",name:j.get("name")})),a.__palette__._getState().trigger("Configure:change-metric",{todo:"REMOVE",caller:"remove",removed:j.get("name")}),a.__palette__._getState().trigger("Configure:change")):(d.each(b,function(a){a!==i.get("name")?g.push(a):f="rows"}),d.each(c,function(a){a!==i.get("name")?h.push(a):f="cols"}),b=g,c=h,a.__palette__._setAttributes("Row Attributes",g),a.__palette__._setAttributes("Column Attributes",h),""!==f&&a.__palette__._getState().trigger("Configure:change-"+f,{caller:"remove"}),a.__palette__._getState().trigger("Configure:change change",a))})}}),l.ListItem=e.View.extend({tagName:"li",events:{},render:function(){return this}}),l.Metric=e.View.extend({tagName:"li",events:{},render:function(){return this.$el.droppable(function(){}),this}});var p=e.View.extend({tagName:"li",className:"zd icon add attribute",events:{click:"_onClick"},render:function(){return this}}),q=e.View.extend({tagName:"li",className:"zd icon add metric",events:{click:"_onClick"},render:function(){return this}});b.exports=l}()},{"../../Core/MVC":6,"../../controls":66,"../../models/ObjectField":124,"./../../components/InteractiveElements":40,"./../GroupedListView":258,"./../MetricPalette":291,"./../SmallObjectFieldItem":344,"./templateCols.html":191,"./templateMetrics.html":192,"./templateRows.html":193,jquery:103,underscore:458}],191:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div>\n	<legend>Columns</legend>\n	<ul></ul>\n</div>";return __p}},{lodash:456}],192:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<i class="zd icon drag-icon"></i>\n<ul></ul>';return __p}},{lodash:456}],193:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div>\n	<legend>Rows</legend>\n	<ul></ul>\n</div>";return __p}},{lodash:456}],194:[function(a,b){!function(){"use strict";function c(a){var b,c,d,g,h,i,j=0!=f(".dashboard.hide_vistitle").length,k="widget"===e?[5,5]:[5,5],l=0===a.find(".timeLine-control > div:visible").length,m="widget"===e?36:28,n="widget"===e?36:"embedded"===e?94:114,o=parseInt(f(".dashboard .dashboard-description").attr("height-result"),10)||0,p=j?0:56;return p+=o,j?n=10:l&&(n=46),b=[16,16],c=[4,4],d=k[0]*b[0]*2,g=k[1]*b[1]*2,h=f(window).width()-m-d,i=f(window).height()-n-g-p,{min_cols:b[0],max_cols:1/0,min_rows:b[1],widget_base_dimensions:[h/b[0],i/b[1]],max_size_x:b[0],max_size_y:b[1],autogrow_cols:!0,min_size_x:c[0],min_size_y:c[1]}}function d(a,b){var c,d,g,h,i,j,k=parseInt(a.match(/\d(?=-column)/)[0]),l=0!=f(".dashboard.hide_vistitle").length,m=p.getURLParameter("widgetWidth"),n=p.getURLParameter("widgetHeight"),o="widget"===e?[5,5]:[5,5],q=0===b.find(".timeLine-control > div:visible").length,r="widget"===e?36:1!=k?36:82,s="widget"===e?36:"embedded"===e?70:90,t=parseInt(f(".dashboard .dashboard-description").attr("height-result"),10)||0,u=l||1==k?0:56;return l?s=10:q&&(s=46),u+=t,d=[4,4],c=1===k?[4,4]:[4*k,12],g=o[0]*c[0]*2,h=o[1]*c[1]*2,i=f(window).width()-r-g,j=f(window).height()-s-h-u,{min_cols:c[0],max_cols:c[0],min_rows:c[1],widget_base_dimensions:[m||i/c[0],n||j/c[1]],max_size_x:c[0],max_size_y:c[1],autogrow_cols:!1,min_size_x:d[0],min_size_y:d[1]}}var e="",f=a("jquery"),g=a("underscore"),h=a("./../../components/settings"),i=a("../../Core/MVC"),j=i.Model,k=i.View,l=i.Collection,m=i.Events,n=a("../../admin/Settings"),o=a("../../controls"),p=a("../../utilities"),q=o.Notification;p.MODE.WIDGET===p.mode()?e="widget":p.MODE.EMBEDDED===p.mode()?e="embedded":p.MODE.NATIVE===p.mode()&&(e="native");var r=p.getHiddenControls(),s="zd-filters-for-linked-bookmark",t=a("../../collections/Dashboards"),u=a("../../collections/Sources"),v=a("../../collections/Connections"),w=a("../../models/Dashboard"),x=a("./../VisualizationGrid"),y=a("./../DashboardDownload"),z=a("./../DashboardFiltersIndicator"),A=a("./../VisualizationSelector"),B=a("./../../visualizationControls/AddVisualization/index.js"),C=a("../../views/InlineRenameView"),D=a("./../../visualizationControls/Bookmark/index.js"),E=a("./../../visualizationControls/LinkedBookmarks/index.js"),F=a("./../../visualizationControls/Share/index.js"),G=[{name:"Undo",location:"$leftContent",_constructor:a("./../../visualizationControls/Undo/index.js")},{name:"Configure",location:"$leftContent",_constructor:a("./../../visualizationControls/Configure/index.js")},{name:"DataPalette",location:"$leftContent",_constructor:a("./../../visualizationControls/DataPalette/index.js")},{name:"Filters",location:"$leftContent",_constructor:a("./../../visualizationControls/Filters/index.js")},{name:"Compare",location:"$leftContent",_constructor:a("./../../visualizationControls/Comparison/index.js")},{name:"Sort",location:"$leftContent",_constructor:a("./../../visualizationControls/Sort/index.js")},{name:"Color",location:"$leftContent",_constructor:a("./../../visualizationControls/Color/index.js")},{name:"Download",location:"$leftContent",_constructor:a("./../../visualizationControls/Download/index.js")},{name:"Info",location:"$leftContent",_constructor:a("./../../visualizationControls/Info/index.js")},{name:"Style",location:"$leftContent",_constructor:a("./../../visualizationControls/StylePalette/index.js")},{name:"TimePlayer",location:"$leftContent",_constructor:a("./../../visualizationControls/TimePLayer/index.js")},{name:"Defaults",location:"$leftContent",_constructor:a("./../../visualizationControls/DefaultButton/index.js")},{name:"Date",location:"$bottomContent",_constructor:a("./../../visualizationControls/FlexibleTimeControl/index.js")},{name:"PausedIndicator",location:"$bottomContent",_constructor:a("./../../visualizationControls/PausedIndicator/index.js")},{name:"SpeedIndicator",location:"$bottomContent",_constructor:a("./../../visualizationControls/SpeedIndicator/index.js")},{name:"TimeLine",location:"$bottomContent",_constructor:a("./../../visualizationControls/TimeLine/index.js")},{name:"TimeRange",location:"$bottomContent",_constructor:a("./../../visualizationControls/TimeRange/index.js")}],H=j.extend({defaults:{name:"",left:null,top:null,width:null,height:null,docked:!1}}),I=l.extend({model:H}),J=j.extend({defaults:{visId:"",panes:null}}),K=l.extend({model:J}),L=a("./dashboardTemplate.html"),M=k.extend({defaults:{template:L},events:{"click .save":"saveDashboard","click .details":"toggleDescriptions","click .download-control":"downloadDashboard","click .dashboard-title":"initNameChange","click .dashboard-description-text":"initDescriptionChange"},initialize:function(a){var b=this;
if("undefined"==typeof a.main)throw new Error("main must be defined");if(this.childViews=[],this.mergedFilters=null,a=a||{},this.model=this.model||new w,this.mergeFiltersWithLinked(),!a.user)throw Error("options.user must be defined");if(this.user=a.user,delete a.user,a.sources?(this.sources=a.sources,delete a.sources):this.sources=new u,a.bookmarks?(this.bookmarks=a.bookmarks,delete a.bookmarks):this.bookmarks=new t,this.options=f.extend({},this.defaults,a),this.connections=new v,this.sources=new u([],{lightweight:!0}),this.$el.addClass("dashboard"),""!==e&&this.$el.addClass(e),r.length>0){var c="";r.forEach(function(a){c+=" hide_"+a}),this.$el.addClass(c)}return this.paneCollection=new K,this.controlsList=new l(G),this.controls={},this.zoomable=new o.Zoomable({maxScale:2,minScale:"fit"}),this.childViews.push(this.zoomable),this._disableZoomable(),this.widgetGrid=new x({sources:this.sources,collection:this.model.visualizations,model:this.model,user:this.user}),this.childViews.push(this.widgetGrid),this.listenTo(this.model,"sync",this.render),this.listenTo(this.model,"change:layout",this._onLayoutChange),this.listenTo(this.zoomable,"transform:end",this._onTransformationEnd),this.listenTo(this.widgetGrid,"visualization:add",this._onVisualizationAdd),this.listenTo(this.widgetGrid,"visualization:select",this._onVisualizationSelect),this.listenTo(this.widgetGrid,"visualization:blur",this._onVisualizationBlur),this.listenTo(this.widgetGrid,"widget:add",this._onWidgetAdd),this.listenTo(this.widgetGrid,"dashboard:loaded",this._onDashboardLoad),this.listenTo(this.widgetGrid,"widget:remove",this._onVisualizationRemove),this.listenTo(this.widgetGrid,"widget:dragstop",this._onVisualizationDragstop),this.listenTo(this.widgetGrid,"widget:resizeStart",this._onVisualizationResizeStart),this.listenTo(this.widgetGrid,"widget:resize",this._onVisualizationResizeStop),this.listenTo(this.widgetGrid,"widget:fullOn",this._goEditMode),this.listenTo(this.widgetGrid,"widget:fullOff",this._closeEditMode),this.listenTo(this.widgetGrid,"widget:updateControls",this._onWidgetUpdateControls),this.listenTo(m,"visualizationPane:stopDrag",this._onPaneDragged),this.listenTo(m,"visualization:filterAll",this._onVisualizationsFilterAll),this.listenTo(m,"visualization:unfilterAll",this._onVisualizationsUnfilterAll),this.listenTo(m,"visualization:filter",this._onVisualizationsFilter),this.listenTo(m,"bookmark:add",this._updateTitle),this.listenTo(m,"bookmark:add",this._onSavedDashboard),this._oldSizes={width:f(window).width(),height:f(window).height()},f(window).on("resize",g.debounce(function(){b._windowResizeCallback()},300)),this},_onTitleHover:function(a){"mouseover"===a.type&&1!==p.mode()?this.$editIcon.show():this.$editIcon.hide()},_onSavedDashboard:function(){this.bookmarkControl.setUnsaved(!1,!this.widgetGrid.single)},mergeFiltersWithLinked:function(){var a=this,b=p.getHashParameter("linkedTo");if(b){var c=window.localStorage[s];if(c){var d=JSON.parse(c),e=d[b];if(e&&e.filters.length>0){var f=a.model.attributes.visualizations,g=f.reduce(function(a,b){return a===!0&&b.source.sourceId===e.sourceId?!0:!1},!0);g&&e.filters.forEach(function(a){f.forEach(function(b){var c=!1;b.source.filters.forEach(function(b){b.operation===a.operation&&b.path===a.path&&(c=!0,b.value=a.value)}),c||b.source.filters.push({path:a.path,operation:a.operation,value:a.value})})})}}}},_windowResizeCallback:function(a){var b={width:f(window).width(),height:f(window).height()},e=this.model.get("layout");if(e="unset"===e?"1-column":e,!g.isEqual(this._oldSizes,b)||a){switch(this.resize(),e){case"zoomable":this.widgetGrid.setGridOptions(c(this.$el),!0),this._enableZoomable();break;default:this.widgetGrid.setGridOptions(d(e,this.$el),!0),this._disableZoomable()}this.$el.find(".gridster").css({width:this.$el.find(".gridster").width()-(this._oldSizes.width-b.width),height:this.$el.find(".gridster").height()-(this._oldSizes.height-b.height)}),this.widgetGrid.forEachWidget(function(a){a.resize(a.options),a.trigger("resize")}),this._oldSizes=b}},initControls:function(){var a=this,b=h.permissions;p.MODE.EMBEDDED!==p.mode()&&p.MODE.WIDGET!==p.mode()&&p.MODE.NATIVE!==p.mode()&&(this.addVisualizationControl=new B({dashboard:this.model,dashboardOptions:this.options,sources:this.sources,connections:this.connections,user:this.user,settings:h}),this.childViews.push(this.addVisualizationControl),this.listenTo(this.addVisualizationControl,"visualizationSelected",function(c){var d=c.get("visId"),e=c.get("sourceId");a.widgetGrid.addVisualization(d,e),b.dashboards.save&&this.bookmarkControl&&this.bookmarkControl.setUnsaved(!0,!0)}),b.dashboards.save&&p.MODE.WIDGET!==p.mode()&&(this.bookmarkControl=new D({currentDashboard:this.widgetGrid,bookmarks:this.bookmarks,bookmarkId:this.model.id||null,model:this.model,main:this.options.main}),this.childViews.push(this.bookmarkControl))),p.MODE.EMBEDDED!==p.mode()&&p.MODE.WIDGET!==p.mode()&&b.dashboards.share&&(this.shareControl=new F({currentDashboard:this.widgetGrid,bookmarks:new t([],{lightweight:!0}),bookmark:this.model}),this.childViews.push(this.shareControl)),this.controlsList.each(function(b){var c=b.get("name"),d=b.get("location"),e=b.get("_constructor");(p.MODE.EMBEDDED!==p.mode()||"Info"!==c)&&(-1!==a.user.get("roles").indexOf("admin")||"Defaults"!==c)&&(a.user.isDemoUser()&&"Download"===c||(a.controls[c]&&a.removeControls([c]),a.controls[c]=new e({root:a[d]()[0],sources:a.sources,widgetGrid:a.widgetGrid,user:a.user,main:a.options.main}),("Download"===c||"Undo"===c)&&(a.controls[c].widgetGrid=a.widgetGrid),a.childViews.push(a.controls[c])))})},removeControls:function(a){var b=this;a=a||this.controlsList.pluck("name"),g.each(a,function(a){b.controls[a].remove(),b.childViews.pop(b.childViews.indexOf(b.controls[a])),delete b.controls[a]})},render:function(){var a=h.screenshotsEnabled,b=p.mode(),c=h.permissions.dashboards;return this.$el.html(this.options.template({screenshotsEnabled:a,description:this.model.get("description"),editable:1!==b&&c.save})),this.initControls(),this.resize(),this._renderLayout(),this.$mainPane().append(this.zoomable.render().$el),this.$mainContent().append(this.widgetGrid.render().$el),this.bookmarkControl&&this.$topPaneControl().prepend(this.bookmarkControl.render().$el),this.updateLinkedControl(),this.shareControl&&this.$topPaneControl().append(this.shareControl.render().$el),this.addVisualizationControl&&this.$topPaneControl().append(this.addVisualizationControl.render().$el),this.controls.Download||this.$downloadBtn().hide(),this.model.get("id")&&this._checkForWidgets(),this.model.get("description")?this.$dashboardInfo().show():this.$dashboardInfo().hide(),this.$editIcon=this.$el.find(".dashboard-edit-icon"),this.showAll(0),this},initDescriptionChange:function(a){function b(a){var b=f(a.currentTarget).val().replace(/(?:\r\n|\r|\n)/g,"<br />");c.model.set({description:b}),c.updateDashboardModel().done(function(a){m.trigger("bookmark:changed",!1),m.trigger("bookmark:add",a),c.inlineRenameView.restoreChanges(a.get("description")),c.showDashboardDescription()}).fail(function(a){console.error(a)})}var c=this,d=f(a.currentTarget),e=p.mode(),g=h.permissions.dashboards;this.inlineRenameView&&this.inlineRenameView.destroy(),this.inlineRenameView=new C({targetElement:d,inputClass:"dashboard-description-input",value:d.html()}),1!==e&&g.save&&(this.inlineRenameView.render(),this.inlineRenameView.onFocusOut=function(a){b(a)},this.inlineRenameView.onKeyPressed=function(a){13===a.charCode&&b(a)})},initNameChange:function(a){function b(){var a,b=c.inlineRenameView.getValue(),d=c.bookmarks.where({name:b});b!==c.model.get("name")&&0===d.length&&c.model.set({name:b}),c.model.changed.name&&c.model.changed.name.length>0?c.updateDashboardModel().done(function(a){c.$editIcon.hide(),m.trigger("bookmark:changed",!1),m.trigger("bookmark:add",a),c.inlineRenameView.restoreChanges(a.get("name"))}).fail(function(a){console.error(a)}):(a=new q({type:"error"}),a.render("Failed to save bookmark"),c.inlineRenameView.restoreChanges())}var c=this,d=f(a.currentTarget),e=this.model.get("name"),g=p.mode(),i=h.permissions.dashboards;this.inlineRenameView&&this.inlineRenameView.destroy(),this.inlineRenameView=new C({value:e,targetElement:d,inputClass:"dashboard-name-input"}),1!==g&&i.save?(this.inlineRenameView.render(),this.inlineRenameView.onFocusOut=function(){b()},this.inlineRenameView.onKeyPressed=function(a){13===+a.charCode&&b()}):a.preventDefault()},updateDashboardModel:function(){var a,b=new w(this.model.toJSON()),c=f.Deferred();return b.save().done(function(){a=new q({type:"success"}),a.render("Bookmark saved. Your changes have been saved"),c.resolve(b)}).fail(function(a){var b=a.responseJSON;n.showErrorWithMessage("Failed to save bookmark name: "+b.details),c.reject()}),c.promise()},initFilterControl:function(a){if(this.isTheSameSource()&&this.hasFilterIndicator()&&this.widgetGrid.childViews.length){if(!this.filtersIndicator){var b=this.widgetGrid.childViews[0].controller;this.filtersIndicator=new z({$el:this.$filterBtn(),config:b.config,objectFields:b.fields,state:b.state,widgetsViews:this.widgetGrid.childViews,widgetGrid:this.widgetGrid,user:this.user})}a&&this.filtersIndicator.collection.length>0&&a.state.addFilters(this.filtersIndicator.collection.toJSON());var c=null;c="widget"===e?"none":"inline-block",this.$filterBtn().css("display",c)}else this.$filterBtn().css("display","none")},initLinkedControl:function(){return this.linkedBookmarksControl?void this.updateLinkedControl():(this.linkedBookmarksControl=new E({$el:this.$dashboardHeaderControls().find(".links-control").eq(0),currentDashboard:this.widgetGrid,bookmarks:this.bookmarks,bookmarkId:this.model.id||null,model:this.model}),this.childViews.push(this.linkedBookmarksControl),void this.listenTo(this.linkedBookmarksControl,"linked_bookmark_selected",this.saveFiltersForLinkedBookmakrs))},updateLinkedControl:function(){var a=this;if(this.linkedBookmarksControl){var b=h.linked_dashboards,c=a.linkedBookmarksControl.model.get("linkedDashboards");(b===!0||"true"===b)&&Array.isArray(c)&&c.length>0?a.$dashboardHeaderControls().find(".links-control").show():a.$dashboardHeaderControls().find(".links-control").hide()}},isTheSameSource:function(){var a=!0,b=this.model.get("visualizations");return g.each(b,function(c){return b[0].source.sourceId!==c.source.sourceId?(a=!1,!1):void 0}),a},hasFilterIndicator:function(){var a=!0,b=this.model.get("visualizations");return g.each(b,function(b){return-1===b.controls.indexOf("Filters")?(a=!1,!1):void 0}),a},$leftPane:function(){return this.$(".leftPane")},$rightPane:function(){return this.$(".rightPane")},$mainPane:function(){return this.$(".midPane")},$bottomPane:function(){return this.$(".bottomPane")},$topPaneControl:function(){return this.$(".topPane .topControls")},$leftContent:function(){return this.$(".leftPane>.paneContent")},$rightContent:function(){return this.$(".rightPane>.paneContent")},$mainContent:function(){return this.zoomable.$content},$bottomContent:function(){return this.$(".bottomPane .paneContent")},$dashboardHeader:function(){return this.$el.find(".dashboard-header")},$dashboardHeaderControls:function(){return this.$el.find(".dashboard-header .header-controls")},$dashboardDescription:function(){return this.$el.find(".dashboard-description")},$dashboardDescriptionText:function(){return this.$el.find(".dashboard-description-text")},$dashboardInfo:function(){return this.$el.find(".dashboard-header .details")},$downloadBtn:function(){return this.$el.find(".download-control")},$filterBtn:function(){return this.$el.find(".filter-control")},_renderLayout:function(a){switch(a||this.model.get("layout")){case"zoomable":this.widgetGrid.setGridOptions(c(this.$el)),this._enableZoomable();break;case"unset":this.widgetGrid.setGridOptions(d("1-column",this.$el)),this._disableZoomable();break;default:this.widgetGrid.setGridOptions(d(this.model.get("layout"),this.$el)),this._disableZoomable()}},_onLayoutChange:function(a,b){this.model.set(1===a.get("visualizations").length&&"unset"===b?{layout:this.addVisualizationControl._selectedType}:{layout:b}),this._renderLayout(this.model.get("layout"))},_updateTitle:function(a){var b=a?a.get("id"):this.model.get("id"),c=b?this.model.get("name"):"Unsaved Dashboard",d=a?a.get("name"):null;b&&this.$dashboardHeader().find(".dashboard-title").removeClass("unsaved"),a.get("description")?(this.$dashboardInfo().show(),this.$dashboardDescriptionText().text(a.get("description")),this.$dashboardDescription().height()&&this.showDashboardDescription()):(this.$dashboardInfo().hide(),this.$dashboardDescription().height()&&this.hideDashboardDescription()),this.model.get("id")||this.model.set(a.toJSON(),{silent:!0}),this.$dashboardHeader().find(".dashboard-title").text(d||c),this.updateLinkedControl()},_checkForWidgets:function(){var a=this.$mainPane().closest(".zd-main-section");1!=this.widgetGrid.childViews.length?(!a.hasClass("dashboard-widgets")&&a.addClass("dashboard-widgets"),this.$dashboardHeader().show(),this.$mainPane().css({left:12})):(a.removeClass("dashboard-widgets"),this.$dashboardHeader().hide(),this.$mainPane().css({left:72})),this._updateTitle(this.model)},saveDashboard:function(a){var b={at:f(a.target).closest(".save")};m.trigger("dashboard:save",b)},downloadDashboard:function(a){var b=!this.zoomable.isEnabled(),c=new y({$of:f(a.currentTarget),$target:this.$(".midPane"),name:this.model.get("name"),isScrollable:b,controller:this.widgetGrid.selectedVisualizationController,visualizations:this.widgetGrid.childViews,disableXlsExport:!0});b?null:this.showAll(0,1),c.showPopup()},_enableZoomable:function(a){a||(a={}),this.zoomable.isEnabled()||(this.zoomable.enable(),a.silent||(this.trigger("zoomable:enabled",this.zoomable),m.trigger("zoomable:enabled",this.zoomable)))},toggleDescriptions:function(){this.$dashboardDescription().height()?(this.hideDashboardDescription(),this.model.set("showDescription",!1)):(this.showDashboardDescription(),this.model.set("showDescription",!0))},showDashboardDescription:function(){var a=this.$dashboardDescriptionText().outerHeight(),b=this.$dashboardHeader().outerHeight()||47;this.$dashboardDescription().height(a).removeClass("hidden").addClass("visible").attr("height-result",a),this.zoomable.$el.css("top",b+a),this._windowResizeCallback(!0)},hideDashboardDescription:function(){var a=this.$dashboardHeader().outerHeight()||47;this.$dashboardDescription().height(0).removeClass("visible").addClass("hidden").attr("height-result",0),this.zoomable.$el.css("top",a),this._windowResizeCallback(!0)},_disableZoomable:function(a){a||(a={}),this.zoomable.isEnabled()&&(this.zoomable.disable(),a.silent||(this.trigger("zoomable:disabled",this.zoomable),m.trigger("zoomable:disabled",this.zoomable)))},_onPaneDragged:function(a,b){if(f(a.event.target).hasClass("zd-palette")){var c=this.getVisForPanes(this.widgetGrid.selectedVisualizationController.cid),d=this.getPane(a.name,c);delete a.event,delete a.name,d.set(a)}this.listenTo(this.widgetGrid,"widget:remove",function(){b.hide()}),this.listenToOnce(this.widgetGrid,"visualization:select",function(){b.hide()})},getVisForPanes:function(a){var b=this.paneCollection.findWhere({visId:a});return b},getPane:function(a,b){switch(a){case"Attributes":a="DataPalette";break;case"Time Control":a="DataPalette";break;case"Add Visualization":a="DataPalette";break;case"Favorites":a="Bookmark";break;default:a=a}var c=null;return b.attributes.panes.each(function(b){b.get("name")===a&&(c=b)}),c},getVisualizationsForSource:function(a){return g.filter(this.widgetGrid.childViews,function(b){return b.controller.config.sourceId==a})},filterVisualizations:function(a,b,c,d){var e=this.getVisualizationsForSource(a);c=c||[],d&&b.path&&b.path===d.timestampField?g.each(e,function(a){var e=a.controller,g=e.state.isTimeTrends();if(!g&&-1===c.indexOf(e.UUID)){var h=d.timeTrendStep||"MINUTE",i=new Date(b.value[0]),j=new Date(p.time.getEndTimeWithinStep(i,h,null,!0));if(e.state.config.get("source").showTimeLine){e.state.time.set({time:j.getTime(),paused:!0,live:!1},{silent:!0});var k=f.datepicker.formatDate("yy-mm-dd",i)+" "+i.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1");e.state.set("timeWindowScale",k),e.state.time.trigger("updateTimeTable"),e.state.time.trigger("timeFilterApplied",i,j)}else b instanceof Array?e.state.addFilters(b):e.state.addFilter(b)}}):g.each(e,function(a){var e=a.controller;-1===c.indexOf(e.UUID)&&(d&&d.time&&e.state.time.set(d.time.toJSON(),{silent:!0}),b instanceof Array?e.state.addFilters(b):e.state.addFilter(b),e.state.time.trigger("updateTimeTable"))})},unfilterVisualizations:function(a,b,c){var d=this.getVisualizationsForSource(a);c=c||[],g.each(d,function(a){var c=a.controller;c.state.removeFilter(b)})},showAll:function(a,b){var c=this;"zoomable"==this.model.get("layout")?this.zoomable.zoom(b||this.zoomable.getMinScale(),a,function(){c.zoomable.refresh(a)}):null},getSelectedWithThisFilter:function(a,b){function c(a,b){return g.filter(a.models,function(a){return g.isEqual(g.without(a.attributes,a.attributes.value),g.without(b,b.value))&&g.intersection(a.attributes.value,b.value).length>0}).length>0}var d=this.getVisualizationsForSource(a),e=[];return b.length||(b=[b]),g.each(d,function(a){var d=a.controller.state.filters,f=!0;d.length>0&&(b.forEach(function(a){f=f&&c(d,a)}),f&&e.push(a))}),{selected:e,filter:b}},saveFiltersForLinkedBookmakrs:function(){var a=[];if(this.filtersIndicator.checkMergedFilters(),this.model.visualizations.models.forEach(function(b){var c=b.sourceId;-1===a.indexOf(c)&&a.push(c)}),a.length>1)return void(window.localStorage[s]=JSON.stringify({}));var b=window.localStorage[s],c=this.filtersIndicator?this.filtersIndicator.collection.toJSON():[],d=b?JSON.parse(b):{},e=this.model.get("id");d[e]={sourceId:this.sources.models[0].id,filters:c},window.localStorage[s]=JSON.stringify(d)},_onTransformationEnd:function(){this.widgetGrid.setDraggableScale(this.zoomable.getScale())},_onVisualizationsFilterAll:function(a,b,c,d){this.filterVisualizations(a,c,[b],d)},_onVisualizationsUnfilterAll:function(a,b,c){this.unfilterVisualizations(a,c,[b])},_onVisualizationsFilter:function(a,b,c,d,e){function h(b){var d=j.getVisualizationsForSource(a),f=[];1!==d.length&&b&&g.each(d,function(a){var c=a.controller.config;-1===b.indexOf(c)?f.push(c.id):null}),e.time=m.cloneDateRange()?e.time:null,j.filterVisualizations(a,c,f,e),k.hide(),m.remove()}e=e||{};var i,j=this,d=d?d:j.$el,k=new o.PalettePopup({customClass:"visualizations-filter-selector"}),l=this.getSelectedWithThisFilter(a,c),m=new A({collection:j.model.visualizations,cloneDateRange:e.time,selectedWithFilter:l,filter:function(c){return c.sourceId==a&&c.id!==b}});return i=e.trendsLabel?e.trendsLabel:c instanceof Array?c.map(function(a){return a.value[0]}).join(", "):c.value[0],1===j.getVisualizationsForSource(a).length?(k.render(null,f('<span style="font-size: 18px;line-height: 18px!important;position: relative;top: -5px;">There is no other visualization<br>of the same source on this dashboard</span>')),k.$el.css({width:"350px"}),void k.position({of:d,my:"left+20 top-30",at:"center center",collision:"flipfit flipfit"})):(k.render(m.render().$el,f('<span class="zd icon filter"></span>Apply filter to: <span class="filter-value">'+p.htmlEntities(i)+"</span>")),k.$el.css({width:"350px"}),k.position({of:d,my:"left+20 top-30",at:"center center",collision:"flipfit flipfit"}),k.onHide(function(){j.stopListening(m),m.remove()}),void this.listenToOnce(m,"accept",h))},_onVisualizationAdd:function(a){var b=a.config.get("controls"),c=b.map(function(a){return{name:a}});this.paneCollection.add({visId:a.cid}),this.getVisForPanes(a.cid).set("panes",new I(c)),this._checkForWidgets(),m.trigger("visualization:add",a),m.trigger("sync",this.model),this.widgetGrid.updateSizeClasses(),this.initFilterControl(a),this.initLinkedControl()},_onWidgetAdd:function(a){this.scrollToWidget(a)},_onVisualizationSelect:function(a){var b=this.widgetGrid.selectedVisualizationController,c="unset"===this.model.get("layout");b&&((a.editMode||c&&this.options.oldLayout&&1===this.widgetGrid.collection.length)&&this.showLeftPane(),this.detuneControls(),this.enableControls(b.getControlsList()),this.tuneControlsTo(b,b.getControlsList()))},_onWidgetUpdateControls:function(){var a=this.widgetGrid.selectedVisualizationController;if(a){this.detuneControls();try{this.enableControls(a.getControlsList())}catch(b){}this.tuneControlsTo(a,a.getControlsList())}},_goEditMode:function(){this._onVisualizationSelect({editMode:!0})},_closeEditMode:function(){this.hideLeftPane()},_onVisualizationRemove:function(a,b){var c=window.location.hash,d=b&&b.manual;a&&(this.disableControls(),this.detuneControls(),this.hideLeftPane()),0==this.model.get("visualizations").length?(c&&d&&this.addVisualizationControl.showSourcesList(),this.options.oldLayout=this.model.get("layout"),this.model.set("layout","unset")):this.initFilterControl(),this.bookmarkControl&&this.bookmarkControl.setUnsaved(!0,!0)},_onVisualizationDragstop:function(){var a=this;this.zoomable.isEnabled()?(this.zoomable.trigger("transform:end",this.zoomable),setTimeout(function(){a.zoomable.refresh()},300)):this.zoomable.el.scrollHeight>this.zoomable.$content.height()&&(this.zoomable.$el.scrollTop(Math.min(this.zoomable.el.scrollTop,this.zoomable.$content.height()-this.zoomable.$el.height())),this.zoomable.$el.css("overflow","hidden"),setTimeout(function(){a.zoomable.$el.css("overflow","")},300))},_onVisualizationResizeStart:function(){var a=this.model.get("layout");"zoomable"==a&&this.zoomable.disable({resizeStart:!0})},_onVisualizationResizeStop:function(){var a=this.model.get("layout"),b=this;"zoomable"==a?(this.zoomable.enable({resizeStop:!0}),this.zoomable.trigger("transform:end",this.zoomable),setTimeout(function(){b.zoomable.refresh()},300)):this.zoomable.el.scrollHeight>this.zoomable.$content.height()&&(this.zoomable.$el.scrollTop(Math.min(this.zoomable.el.scrollTop,this.zoomable.$content.height()-this.zoomable.$el.height())),this.zoomable.$el.css("overflow","hidden"),setTimeout(function(){b.zoomable.$el.css("overflow","")},300))},_onDashboardLoad:function(){this.model.get("description")&&this.model.get("showDescription")&&this.showDashboardDescription(),console.log("Dashboard Loaded")},_onVisualizationBlur:function(){this.disableControls(),this.detuneControls(),this.hideLeftPane()},scrollToWidget:function(a){{var b=this.zoomable.$el,c=a.$el.position();({width:a.$el.width(),height:a.$el.height()}),{width:b.width(),height:b.height()}}return this.zoomable.isEnabled()||b.scrollTop(c.top),this},showLeftPane:function(){this.$leftPane().show()},enableControls:function(a){var b=this;a=a||this.controlsList.pluck("name"),this.$bottomContent().css("table-layout","auto"),this.updateForAllowedControls(a),g.each(b.controls,function(b,c){-1!==a.indexOf(c)?b.enable():b&&b.disable()});var c=this.$leftPane().find(".control-button > div:visible");0==c.length?this.hideLeftPane():this.showLeftPane();var d=this.$bottomPane().find(".timeLine-control > div:visible");return 0===d.length?(this.$bottomContent().css("table-layout","fixed"),this.$el.addClass("timeLineControlsHidden")):(this.$bottomContent().css("table-layout","auto"),this.$el.removeClass("timeLineControlsHidden")),this._windowResizeCallback(!0),this},updateForAllowedControls:function(a){var b=this,c=h.screenshotsEnabled,d=this.widgetGrid.selectedVisualizationController,e=d.config.get("type");a.forEach(function(a){c&&p.MODE.NATIVE!==p.mode()||"Download"===a&&a in b.controls&&("PIVOT_TABLE"!=e?b.controls[a].$el.hide():b.controls[a].$el.show())})},hideLeftPane:function(){return this.$leftPane().hide(),this},disableControls:function(a){var b=this;return this.$bottomContent().css("table-layout","fixed"),a=a||this.controlsList.pluck("name"),g.each(a,function(a){var c=b.controls[a];c&&c.disable()}),this},tuneControlsTo:function(a,b){var c=this;return b=b||this.controlsList.pluck("name"),m.trigger("visualization:select",a),g.each(b,function(b){var d=c.controls[b];d&&d.tuneTo(a)}),this},detuneControls:function(a){var b=this;return a=a||this.controlsList.pluck("name"),g.each(a,function(a){var c=b.controls[a];c&&c.detune()}),this},resize:function(a){var b=a?a.left:null,c=this.widgetGrid.collection.length,d=this.$bottomPane().find(".timeLine-control > div:visible"),e=0;b=b||c>1?"12px":null,this.$rightPane().css({height:this.$el.height()-this.$bottomPane().height()}),d.length>0&&(e=this.$bottomPane().outerHeight()+5+(parseInt(this.$bottomPane().css("bottom"))?2*parseInt(this.$bottomPane().css("bottom")):0)),this.$mainPane().css({left:b?b:this.$leftPane().outerWidth(),right:this.$rightPane().outerWidth(),bottom:e}),this.widgetGrid.resize()},addVisualization:function(a,b){var c=this.widgetGrid.addVisualization(a,b);return c},remove:function(){this._disableZoomable(),k.prototype.remove.apply(this,arguments)},getControllers:function(){var a=this;return this.widgetGrid.childViews.map(function(b){return a.widgetGrid.getVisualizationController(b)})}});b.exports=M}()},{"../../Core/MVC":6,"../../admin/Settings":10,"../../collections/Connections":12,"../../collections/Dashboards":13,"../../collections/Sources":30,"../../controls":66,"../../models/Dashboard":114,"../../utilities":144,"../../views/InlineRenameView":271,"./../../components/settings":55,"./../../visualizationControls/AddVisualization/index.js":394,"./../../visualizationControls/Bookmark/index.js":399,"./../../visualizationControls/Color/index.js":401,"./../../visualizationControls/Comparison/index.js":403,"./../../visualizationControls/Configure/index.js":405,"./../../visualizationControls/DataPalette/index.js":410,"./../../visualizationControls/DefaultButton/index.js":412,"./../../visualizationControls/Download/index.js":414,"./../../visualizationControls/Filters/index.js":416,"./../../visualizationControls/FlexibleTimeControl/index.js":418,"./../../visualizationControls/Info/index.js":420,"./../../visualizationControls/LinkedBookmarks/index.js":423,"./../../visualizationControls/PausedIndicator/index.js":425,"./../../visualizationControls/Share/index.js":433,"./../../visualizationControls/Sort/index.js":435,"./../../visualizationControls/SpeedIndicator/index.js":438,"./../../visualizationControls/StylePalette/index.js":441,"./../../visualizationControls/TimeLine/index.js":444,"./../../visualizationControls/TimePLayer/index.js":447,"./../../visualizationControls/TimeRange/index.js":450,"./../../visualizationControls/Undo/index.js":452,"./../DashboardDownload":201,"./../DashboardFiltersIndicator":205,"./../VisualizationGrid":381,"./../VisualizationSelector":384,"./dashboardTemplate.html":195,jquery:103,underscore:458}],195:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="topPane">\n    <div class="topControls"></div>\n</div>\n<div class="midPane">\n    <div class="dashboard-header" style="display: none">\n        <div class="dashboard-header-label">\n            <span class="dashboard-title '+(null==(__t=editable?"dashboard-title-editable":"")?"":__t)+' unsaved"></span>',editable&&(__p+='<i class="zd icon fontIcon dashboard-edit-icon">u</i>'),__p+='\n        </div>\n        <div class="dashboard-header-controls">\n            <span class="header-control details"><i class="zd icon info"></i></span>\n            <span class="header-control filter-control" style="display: none;"><i class="zd icon filter"></i></span>\n            <span class="header-control links-control" style="display:none;"><i class="zd icon link"></i></span>\n            <span class="header-control download-control" style="display: '+(null==(__t=screenshotsEnabled?"inline-block":"none")?"":__t)+'"><i class="zd icon download"></i></span>\n        </div>\n        <div class="dashboard-description"><div class="dashboard-description-text '+(null==(__t=editable?"editable":"")?"":__t)+'">'+__e(description)+'</div></div>\n    </div>\n</div>\n<div class="leftPane">\n    <div class="paneContent"></div>\n</div>\n<div class="rightPane hidden">\n    <div class="paneContent"></div>\n</div>\n<div class="bottomPane">\n        <div class="paneContent"></div>\n</div>\n';return __p}},{lodash:456}],196:[function(a,b){b.exports=a("./Dashboard")},{"./Dashboard":194}],197:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../utilities"),f=a("../../Core/MVC/View"),g=a("../../controls"),h=a("./../../components/Screenshotter"),i=g.PalettePopup,j=g.Notification,k=a("./dashboardDownloadTemplate.html"),l=a("./exportToExcelFailMessage.html"),m=a("./spinnerIcon.html"),n=a("./downloadIcon.html"),o=f.extend({template:k,className:"dashboard-download",defaults:{extraHeight:0,extraWidth:0},events:{"click button.download":"_downloadClick"},initialize:function(a){if(a=a||{},!(a.$target instanceof c))throw new Error("$target expected to be a jQuery object");this.$target=a.$target,delete a.$target,f.prototype.initialize.apply(this,arguments),this.disableXlsExport=!!a.disableXlsExport,this.screenshotter=new h,this.$root=c("html")},render:function(){return f.prototype.render.apply(this,arguments),this.$el.html(this.template({disableXlsExport:this.disableXlsExport})),this.goActive(),this.delegateEvents(),this},showPopup:function(){var a=this;this.popup=new i({customClass:"palette-dark"}),this.popup.render(this.render().$el,"Download"),this.popup.position({of:this.options.$of,my:"left+20px top-35px",at:"right bottom",collision:"fit fit"}),this.popup.onHide=function(){a.goNormal()},this.childViews.push(this.popup)},isSpinning:function(a){return!!a.find(".spinner").length},showSpinner:function(a){var b=a.attr("spinnerTittle");a.attr("defaulttitle",a.text()).html(m({title:b}))},hideSpinner:function(a){var b=a.attr("defaulttitle");a.html(n({title:b}))},_downloadClick:function(a){var b=c(a.target);this.isSpinning(b)||(this.showSpinner(b),this.pauseAll(),this.download(b).always(this.resumeAll.bind(this)))},download:function(a){function b(a,b){c("<br>").appendTo(g.$el),c("<a></a>").attr({href:a.src,target:"_blank",download:b,title:b,"class":"thumbnail"}).append(a).appendTo(g.$el),c("<p />").text("Click the link or save the image").appendTo(g.$el)}function d(a){navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0?c("<a>Click here to open PDF</a>").attr({href:a.output("datauristring"),target:"_blank"}).appendTo(g.$el):a.save(h+".pdf")}function f(){g.hideSpinner(a)}var g=this,h=this.options.name||a.attr("filename")||"screenshot",i=a.attr("value"),k=this.$target,m=e.generateUUID(),n=c.Deferred();if("png"===i)setTimeout(function(){g.screenshotter.shoot(k).always(f).done(function(a){b(a,h+".png"),n.resolve()}).fail(function(){n.reject.apply(n,arguments)})},100);else if("xls"===i){var o=this.options.visualizationController.thread;if(!this.isReady())return o.once("thread:notDirtyData",function(){g.download(a)}),n.promise();var p=this.getVisualizationData(),q="service/export/xls/generate/"+m,r="service/export/xls/download/"+m+"/grid-visualization.xlsx/";c.ajax({type:"POST",url:q,contentType:"application/json",dataType:"json",data:JSON.stringify(p),complete:f,success:function(a){setTimeout(function(){window.location.assign(r),n.resolve(a)},0)},error:function(a){var b=new j({type:"error"}),d=a.responseJSON&&a.responseJSON.details||c(a.responseText).html();b.render(l({response:d})),n.reject.apply(n,arguments)}})}else"pdf"===i&&setTimeout(function(){g.screenshotter.shootPDF(k).always(f).done(function(a){d(a),n.resolve()}).fail(function(){n.reject.apply(n,arguments)})},100);return n.promise()},pauseAll:function(){this.getControllers().forEach(function(a){a.saveStateAndPause()})},resumeAll:function(){this.getControllers().forEach(function(a){a.restorePlayState()})},getControllers:function(){var a;return a=this.options.visualizations?this.options.visualizations.map(function(a){return a.controller
}):[this.options.visualizationController]},goActive:function(){this.options.$of&&this.options.$of.parent().addClass("active")},goNormal:function(){this.options.$of&&this.options.$of.parent().removeClass("active"),this.remove()},isReady:function(){return"PIVOT_TABLE"===this.options.controller.config.type||100===this.options.visualizationController.thread._progress},getVisualizationData:function(){function a(e,g){if(g.length)return void c.each(g,a);var h=g.metric,i=h.name,j=f.fields.findWhere({name:i}),k=j.get("label"),l=j.get("type");"none"!==i&&(h.func&&(i+="_"+h.func,k+=" ("+h.func+")"),"FORMULA"===l&&(l="NUMBER"),d.findWhere(b.fields,{name:i})||b.fields.push({name:i,type:l,label:k}))}var b={},f=this.options.controller,g=f.state.config.get("type"),h=f.state.config.get("source").date,i=f.state.time.toJSON(),j=f.metrics.Metrics||f.metrics,k={};return h=h&&"none"!==h?f.fields.findWhere({name:h}):"",b.visualizationName=f.getVisualizationName()||f.state.config.get("name"),b.cid=f.UUID,b.direction="column",b.columnHeaders=[],b.rowHeaders=[],b.fields=[],b.filters=[],b.timeField=h?h.get("label"):h,c.each(j,a),"PIVOT_TABLE"===g?(k=f.scope.visualization,b.direction=k._METRICS_DIRECTION?"column":"row",k._ATTRIBUTES_H.forEach(function(a){a.forEach(function(a){var c=d.findWhere(b.columnHeaders,{header:a.title}),e=d.findWhere(b.rowHeaders,{header:a.title});"ROW"===a.hover_direction?a.title&&!c&&b.columnHeaders.push({objectFieldType:"ATTRIBUTE",header:a.title}):"COL"===a.hover_direction&&a.title&&!e&&b.rowHeaders.push({objectFieldType:"ATTRIBUTE",header:a.title})})})):(b.rowHeaders=f.state.groupBy.map(function(a){var b=f.fields.findWhere({name:a.get("name")});return{objectFieldType:b.get("type"),header:b.get("label")}}),b.data=this.options.visualizationController&&this.options.visualizationController.data||[]),b.filters=function(){var a,c=f.state.filters.toRequest();return b.timeField&&h&&c.push({path:h.get("name"),operation:"BETWEEN",value:[e.convertTimeToStringUTC(i.fromTime),e.convertTimeToStringUTC(i.time)]}),c.forEach(function(b){a=f.fields.findWhere({name:b.path}),b.label=a.get("label")}),c}(),b}});b.exports=o}()},{"../../Core/MVC/View":5,"../../controls":66,"../../utilities":144,"./../../components/Screenshotter":48,"./dashboardDownloadTemplate.html":198,"./downloadIcon.html":199,"./exportToExcelFailMessage.html":200,"./spinnerIcon.html":202,jquery:103,underscore:458}],198:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<button class="zd btn btn-success btn-block download" value="png" filename="screenshot" spinnerTittle="Creating Screenshot">\n    <i class="zd icon download"></i>\n    Export Screenshot (.png)\n</button>\n<button ',disableXlsExport&&(__p+=' style="display: none;" '),__p+=' class="zd btn btn-success btn-block download" value="xls" filename="excel" spinnerTittle="Exporting to Excel file">\n    <i class="zd icon download"></i>\n    Export to Excel\n</button>\n<button class="zd btn btn-success btn-block download" value="pdf" filename="screenshot" spinnerTittle="Exporting as PDF">\n    <i class="zd icon download"></i>\n    Export as PDF\n</button>';return __p}},{lodash:456}],199:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<i class="zd icon download"></i>'+__e(title);return __p}},{lodash:456}],200:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\nFailed to export to excel: '"+__e(response)+"'";return __p}},{lodash:456}],201:[function(a,b){b.exports=a("./DashboardDownload")},{"./DashboardDownload":197}],202:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<i class="zd icon spinner active"></i>'+__e(title);return __p}},{lodash:456}],203:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<label>Name</label>\n<input name="name" class="input-block-level dashboard-name" type="text" value="'+(null==(__t=name)?"":__t)+'" required> \n<label>Description</label>\n<textarea name="description" class="input-block-level" rows="3" maxlength="160">'+__e(description)+'</textarea>\n<div class="linkedBookmarksContainer" style="display: none;">n\n    <label><span class="zd icon link"></span>&nbsp;&nbsp;Available Dashboards</label>n\n    <ul></ul>n\n</div>\n<input type="checkbox" name="rememberTimeCheckbox" id="rememberTimeCheckbox" class="css-checkbox" ',rememberTime&&(__p+=' checked="checked" '),__p+='  /> \n<label for="rememberTimeCheckbox" class="css-label"> Remember time position(s)</label> \n<input type="checkbox" name="share" id="shareCheckbox" class="css-checkbox" ',shared&&(__p+=' checked="checked" '),__p+=' /> \n<label for="shareCheckbox" class="css-label"> Share with all users in my account</label> \n<button value="save" class="zd btn btn-success btn-block">Save</button> ';return __p}},{lodash:456}],204:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("./../../components/settings"),f=a("../../Core/MVC"),g=a("../../collections/Dashboards"),h=a("../../models/Dashboard"),i=(a("../../collections/VisualizationConfigs"),a("../../utilities")),j=a("../../controls"),k=f.View,l=f.Events,m=a("./dashboardEditorTemplate.html"),n=k.extend({defaults:{},template:m,events:{"input .dashboard-name":"validateDashboardName","blur .dashboard-name":"blurDashboardName",'click button[value="save"]':"_onSave","change input#rememberTimeCheckbox":"_onRememberTime","change input#shareCheckbox":"_onShare",'input input[name="name"]':"_onNameChange",'change textarea[name="description"]':"_onDescriptionChange"},initialize:function(a){if(a=a||{},"undefined"==typeof a.main)throw new Error("main must be defined");a.template&&(this.template=a.template,delete a.template),a.bookmarks?(this.bookmarks=a.bookmarks,delete a.bookmarks):this.bookmarks=new g,this.model=this.model||new h,this.options=c.extend({},this.defaults,a),this.model.set("visualizations",this.options.currentDashboard.serialize().collection.toJSON()),this.originalModel=a.originalModel||{}},_onNameChange:function(){this.model.set("name",this.$('input[name="name"]').val())},_onDescriptionChange:function(){this.model.set("description",this.$('textarea[name="description"]').val().replace(/\n/g,"<br/>"))},_rememberTime:function(){return this.$('input[name="rememberTimeCheckbox"]').prop("checked")},_isShared:function(){return this.$('input[name="share"]').prop("checked")},_onShare:function(){this.model.set("shared",this._isShared())},_onRememberTime:function(){this.model.set("rememberTime",this._rememberTime())},_onSave:function(){var a,b=this,c=this.model.get("name");this.bookmarks.fetch().done(function(){var d=b.bookmarks.where({name:c})[0];d&&d.get("id")!==b.model.get("id")?(a=new j.Notification({type:"warning"}),a.render("The following name has already been used as a Favorite. Please try another name.")):(b.model.set("name",c.replace(/^\s+/,"")),b.saveBookmark())})},validateDashboardName:function(a){var b=a&&a.target?c(a.target):null,d=b.val();0===d.length||0===i.lTrim(d).length?this.$saveBtn.attr("disabled",!0):this.$saveBtn.attr("disabled",!1)},blurDashboardName:function(a){var b=a&&a.target?c(a.target):null,d=b.val();this.validateDashboardName(a),b.val(i.lTrim(d))},render:function(){this.model.get("shared")||this.model.set("shared",!1),this.model.get("rememberTime")||this.model.set("rememberTime",!1),this.$el.html(this.template(this.model.toJSON())),this.getLinkedDashboards(),this.$saveBtn=this.$el.find('button[value="save"]'),this.delegateEvents();var a=this;return setTimeout(function(){a.$('input[name="name"]').focus()},200),this},getLinkedDashboards:function(){var a=this,b=e?e.linked_dashboards:[],d=a.$el.find(".linkedBookmarksContainer").eq(0);a.$linkedList=d.children("ul").eq(0),a.linked_dashboards_enabled=b===!0||"true"===b,a.linked_dashboards_enabled&&(d.show(0),c.get("service/bookmarks?fields=name,layout").done(function(b){var d=a.originalModel.attributes.linkedDashboards||[];a.$el.parents(".modal.zd-infopopup.bookmarkDashboard").addClass("withLinkedBookmarks"),b.forEach(function(b){var e=c("<li/>");e.html(b.name),e.prop("data-did",b.id),d.indexOf(b.id)>=0&&e.addClass("linked"),e.click(function(){var b=c(this);b.hasClass("linked")?b.removeClass("linked"):b.addClass("linked"),a.originalModel.attributes.linkedDashboards=[],a.model.attributes.linkedDashboards=[],a.$linkedList.find("li.linked").each(function(){a.originalModel.attributes.linkedDashboards.push(c(this).prop("data-did")),a.model.attributes.linkedDashboards.push(c(this).prop("data-did"))})}),e.appendTo(a.$linkedList)}),a.trigger("resize")}))},saveBookmark:function(){var a,b=this,c=!1,e=this.options.main.currentSection.widgetGrid,f=this.options.currentDashboard.serialize().model.get("layout"),g=this.options.currentDashboard.serialize().collection.toJSON(),h=1==g.length?g[0].type.toLowerCase():null;return this.model.set({layout:f,visualizations:g,icon:h}),this._rememberTime()?d.each(this.model.attributes.visualizations,function(a){if(a.source.startFrom&&a.source.startFrom.indexOf("UTC")<0){var c=d.find(e.childViews,function(b){return b.controller.UUID==a.id}),f=c.controller;a.source.variables._TempLimitPeriod&&(a.source.variables._limitPeriod=a.source.variables._TempLimitPeriod,delete a.source.variables._TempLimitPeriod,a.source.variables._timePeriod=f.state.time.get("time")),f.state.time.get("live")?a.source.startFrom="LIVE":"BEGINNING"===a.source.startFrom?a.source.timeWindowScale="ALL":a.source.startFrom=b.convertToUTCdate(f.time.getEndTime())}}):d.each(this.model.attributes.visualizations,function(a){var b=a.source.variables._TempLimitPeriod;b&&delete a.source.variables._TempLimitPeriod,delete a.source.startFrom,delete a.source.timeWindowScale}),this.model.visualizations.models.forEach(function(a){a.attributes.variables.forEach(function(a){a.colors&&Array.isArray(a.colors)&&(a.colors=JSON.stringify(a.colors))})}),this.skipComponentsForSaving(this.model),this.fixLayoutForSavingSingleWidget(),this.model.get("name")!==this.originalModel.get("name")&&(c=!0,this.model.unset("id")),this.originalModel.set({name:this.model.get("name"),description:this.model.get("description"),rememberTime:this.model.get("rememberTime"),shared:this.model.get("shared"),icon:this.model.get("icon")}),this.model.save().done(function(){c&&b.originalModel.set("id",b.model.get("id")),b.bookmarks.add(b.model,{merge:!0}),a=new j.Notification({type:"success"}),a.render('Bookmark saved. Your dashboard "'+b.model.get("name")+'" has been saved in your Bookmark Library'),l.trigger("bookmark:add",b.model)}).fail(function(b){a=new j.Notification({type:"error"});var c=b.responseJSON.details||b.responseText;a.render("Failed to save bookmark: "+c)}),!1},fixLayoutForSavingSingleWidget:function(){var a=this.model.get("visualizations"),b="unset"===this.model.get("layout");1!==a.length||b||(this.model.set("layout","unset",{silent:!0}),this.model.get("visualizations")[0].layout={col:1,colSpan:1,row:1,rowSpan:1})},convertToUTCdate:function(a){var b=new Date(a),c=b.getUTCMonth()+1;10>c&&(c="0"+c);var d=b.getUTCHours()>=12?" PM ":" AM ",e=b.getUTCHours();return e-=e>12?12:0,a=b.getUTCFullYear()+"/"+c+"/"+b.getUTCDate()+" "+e+":"+(b.getUTCMinutes()<10?"0":"")+b.getUTCMinutes()+":"+(b.getUTCSeconds()<10?"0":"")+b.getUTCSeconds()+d+"UTC"},skipComponentsForSaving:function(a){d.each(a.visualizations.models,function(a){a.get("components")&&a.unset("components",{silent:!0})}),d.each(a.attributes.visualizations,function(a){a.components&&delete a.components})}});b.exports=n}()},{"../../Core/MVC":6,"../../collections/Dashboards":13,"../../collections/VisualizationConfigs":33,"../../controls":66,"../../models/Dashboard":114,"../../utilities":144,"./../../components/settings":55,"./dashboardEditorTemplate.html":203,jquery:103,underscore:458}],205:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("../../Core/MVC"),e=d.View,f=d.Collection,g=d.Events,h=a("../../models/Filter"),i=a("./../FiltersManager"),j=a("./../FiltersIndicator"),k=j.extend({tagName:"span",className:"header-control filter-control",initialize:function(a){return e.prototype.initialize.apply(this,arguments),this.options.objectFields.fetch(),this.collection=new f,this.filtersManager=new i({config:this.options.config.toJSON(),collection:this.collection,objectFields:this.options.objectFields,state:this.options.state,addFilterButton:!0,indicatorCase:!0,className:"filtersManager-list",applyToAll:!0,popupMode:!0,user:a.user,widgetGrid:a.widgetGrid}),this.childViews.push(this.filtersManager),this.listenTo(this.collection,"add remove",this.render),this.listenTo(g,"filter:add",this.updateHeader),this.listenTo(g,"undo:updatedStore",this.checkMergedFilters),this.$el=a.$el,this},_onClick:function(){this.checkMergedFilters(),j.prototype._onClick.apply(this,arguments)},checkMergedFilters:function(){var a=this.options.widgetsViews,b=this;a.length>1&&(b.collection.reset(),a[0].controller.state.filters.each(function(d){var e=d.get("path"),f=d.get("operation"),g=d.get("value"),i=!0;if(c.each(a,function(a){var b=a.controller.state.filters.filter(function(a){var b=a.get("operation")===f&&a.get("path")===e&&c.isEqual(a.get("value"),g);return b});i=i&&!!b.length}),i){var j=new h(d.attributes),k=b.collection.find(function(a){return c.isEqual(a.toJSON(),j.toJSON())});k||b.collection.add(j)}}),this.refreshActiveState())},refreshActiveState:function(){this.$el.toggleClass("header-control-highlighted",!!this.collection.length)},showFiltersList:function(a){var b=this,c={of:a||b.$el,my:a?"left-24px top-35px":"left+10px top-35px",at:a?"right+50px bottom":"left+35px bottom",collision:"flipfit flipfit"};j.prototype.showFiltersList.apply(this,arguments),this.popup.position(c)},setFiltersCollection:function(a){this.collection=a,this.filtersManager.updateCollection(a)}});b.exports=k}()},{"../../Core/MVC":6,"../../models/Filter":117,"./../FiltersIndicator":247,"./../FiltersManager":252,underscore:458}],206:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd icon icon-favorite"></div>  \n<div class="delete-button zd icon delete-item" value="deleteItem"></div>  \n<div title="Delete" class="confirm-delete-button" value="confirmDeleteItem">Delete</div>  \n<a title="'+(null==(__t=attributes.name)?"":__t)+'" href="visualization#'+(null==(__t=attributes.id)?"":__t)+'">\n    '+__e(attributes.name)+"\n    ",attributes.description&&(__p+='\n    	<i title="Details" class="itemDetailsIcon pull-right zd icon info"></i>&nbsp;\n    '),__p+='\n</a>\n<div class="itemDetails" style="display: none;">\n    '+__e(attributes.description)+"\n</div> ";return __p}},{lodash:456}],207:[function(a,b){!function(){"use strict";var c=a("../../models/Dashboard"),d=a("./../ListItem"),e=a("../../Core/MVC").Events,f=(a("underscore"),a("./dashboardItemTemplate.html"));b.exports=d.extend({model:new c,className:"zd-dashboard-item item-description",initialize:function(a){if(d.prototype.initialize.apply(this,arguments),!a.user)throw new Error("User should be defined!");this.user=a.user},defaults:{template:f},events:{"click a":"select","click .itemDetailsIcon":"toggleDetails",'click div[value="deleteItem"]':"deleteItem",'click div[value="confirmDeleteItem"]':"confirmDeleteItem"},render:function(){return d.prototype.render.apply(this,arguments),this.user&&this.user.permissions&&!this.user.permissions.dashboards.save&&this.$el.find(".delete-button").hide(),this.detectIcon(),this},toggleDetails:function(){return this.$(".itemDetails").slideToggle(),!1},select:function(){var a=this.$(".confirm-delete-button");return a.width()>0?(this.$(".itemDetailsIcon").show("fast"),this.$(".delete-button").show("fast"),this.$el.find("a").css("cursor","pointer"),a.animate({width:"0px"},{duration:"fast"},"linear"),!1):(this.model.collection.trigger("select",this.model),void this.model.saveViewCount())},deleteItem:function(){return this.$(".itemDetailsIcon").hide("fast"),this.$(".delete-button").hide("fast"),this.$el.find("a").css("cursor","default"),this.$(".confirm-delete-button").animate({width:"58px"},{duration:"fast"},"linear"),!1},confirmDeleteItem:function(){e.trigger("bookmark:delete",this.model,!0),this.model.destroy()},detectIcon:function(){var a=this.model.get("layout"),b=this.model.get("icon");this.$el.addClass(b?b:a)}})}()},{"../../Core/MVC":6,"../../models/Dashboard":114,"./../ListItem":273,"./dashboardItemTemplate.html":206,underscore:458}],208:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<h4>Select Dashboard Layout</h4>\n<h5>Free-Form Layout</h5>\n<button name="dashboard-type" value="zoomable" class="zd btn btn-link dashboard-type-button" >\n    <i class="zd icon dashboard-type-zoomable"></i> \n</button>\n<p>\n    Zoomable Dashboard <br>\n    Pan/scroll Navigation\n</p>\n<h5>4-Column Layout</h5>\n<button name="dashboard-type" value="4-column" class="zd btn btn-link dashboard-type-button" >\n    <i class="zd icon dashboard-type-4column"></i> \n</button>\n<p>\n    Fixed Sized Visualizations <br>\n    Vertical Scrolling\n</p>';return __p}},{lodash:456}],209:[function(a,b){!function(){"use strict";var c=(a("underscore"),a("../../Core/MVC/View")),d=a("./dashboardTypeSelectorTemplate.html");b.exports=c.extend({className:"dashboard-type-selector",events:{'click button[name="dashboard-type"]':"_onTypeSelect"},defaults:{},template:d,initialize:function(a){return a=a||{},a.template&&(this.template=a.template,delete a.template),c.prototype.initialize.apply(this,arguments),this},_onTypeSelect:function(a){var b=$(a.currentTarget),c=b.val();this.trigger("dashboardType:selected",c)},render:function(){return this.$el.html(this.template()),this}})}()},{"../../Core/MVC/View":5,"./dashboardTypeSelectorTemplate.html":208,underscore:458}],210:[function(a,b){!function(){"use strict";var c=a("./../ListView"),d=a("./../ListItem"),e=a("../../Core/MVC/Model"),f=a("../../Core/MVC/View"),g=a("jquery"),h=a("underscore"),i=a("../../utilities"),j=a("../../Core/MVC/Collection"),k=a("../../utilities/MetricFormatter"),l=e.extend({idAttribute:"_id",initialize:function(){var a=this;return e.prototype.initialize.apply(this,arguments),this.fields=this.collection.fields,this.setFields(),this.on("change",function(){a.setFields()}),this},setFields:function(a){var b=this;this.fields=a||this.fields,h.each(h.keys(this.attributes),function(a){if("_zdFields"!==a){var c=b.fields.findWhere({name:a});b.attributes._zdFields=b.attributes._zdFields||{},b.attributes._zdFields[a]=c&&c.toJSON()||{label:a}}})}}),m=j.extend({model:l,initialize:function(a,b){return b.fields&&(this.fields=b.fields,delete b.fields),j.prototype.initialize.apply(this,arguments),this}}),n=function(a,b){return new k(a,null,b)},o=a("./template.html"),p=(a("./moreButtonTemplate.html"),a("./progressBarTemplate.html")),q=a("./itemTemplate.html"),r=(a("./lpItemTemplate.html"),a("./twitterItemTemplate.html")),s=c.extend({_renderItems:function(){var a=this,b=0;this.limit=this.limit||(this.options.heavyPerformance?30:null),this._removeItems(),h.each(this.collection.models,function(c,d){a.limit&&d>=a.limit||(a._renderItem(c),b=d+1)}),this.limit&&(this.limit=b)},renderNext:function(){var a=this,b=h.clone(this.limit),c=this.limit+a.options.offset;h.each(this.collection.models,function(d,e){a.limit&&a.limit>e||e>=c||(a._renderItem(d),b=e+1)}),this.limit=b,this.$el.css({"margin-bottom":"-20px","padding-bottom":"10px"})}}),t=d.extend({events:{"click button[value='button-item-details']":"_onItemDetailsClick"},toggleItemDetails:function(a){var b=this;a=a||this.$('[data-role="item-holder"]'),a.each(function(){var a=g(this),c=a.find('button[value="button-item-details"]'),d=a.find('[data-role="details-holder"]');a.hasClass("open")?(a.removeClass("open"),a.addClass("minimized"),c.html('Expand <i class="icon-chevron-down"></i>'),b.hideDetails(d)):(a.addClass("open"),a.removeClass("minimized"),c.html('Collapse <i class="icon-chevron-up"></i> '),b.showDetails(d))})},showDetails:function(){return this},hideDetails:function(){return this},_onItemDetailsClick:function(a){var b=g(a.currentTarget),c=b.parents('[data-role="item-holder"]');this.toggleItemDetails(c,b)}});b.exports=f.extend({className:"zd-data-item-details",defaults:{template:o,itemTemplate:q,filter:function(){return!0},search:!1,count:15,offset:0},events:{"click button[value='button-more']":"_onMoreClick"},initialize:function(a){var b=this;a.state&&(this.state=a.state,delete a.state),a.fields&&(this.fields=a.fields,delete a.fields),a.data?(this.data=a.data,delete a.data):this.data={},f.prototype.initialize.apply(this,arguments),this.heavyPerformance=-1!==["IMPALA","SQL"].indexOf(this.options.sourceType),this.collection=this.collection||new m([],{fields:this.fields}),this.list=new s({collection:this.collection,filter:this.options.filter,search:this.options.search,template:this.options.itemTemplate,ItemView:t,heavyPerformance:this.heavyPerformance,offset:30}),this.childViews.push(this.list),this.$progressBar=this.$wrapElement(p({value:100}));var c=this.state.config.get("streamType"),d=this.state.get("streamSourceId"),e=this.state.groupBy.getAttributes(),g=e[0],j=e.length>1,k=this.data.group,l=this.data.key,n=this.data.current.count,o=this.state.filters,u=this.getFormattedTimeDate(a.fromTime),v=this.getFormattedTimeDate(a.toTime),w=this.state.get("timestampField"),x=o.toJSON();x=x.map(function(a){return h.findWhere(b.fields.toJSON(),{name:a.path,type:"TIME"})&&(a.value instanceof Array?a.value=a.value.map(function(a){return i.convertTimeToStringUTC(a,!1)}):"string"==typeof a.value&&(a.value=i.convertTimeToStringUTC(a.value,!1))),{path:a.path,operation:a.operation,value:a.value}});var y={streamSourceId:d,restrictions:x,itemTemplate:q,title:n+" Total Record"+(n>1?"s":"")};switch(this.heavyPerformance&&(y.count=1e3),g!==w&&(j?(x.push({path:e[1],operation:"EQUALS",value:k}),x.push({path:e[0],operation:"EQUALS",value:l})):g?x.push({path:g,operation:"EQUALS",value:k}):null),this.data.filters&&this.data.filters.map(function(a){x.push(a)}),w&&!h.findWhere(x,{path:w})&&x.push({path:w||"",operation:"BETWEEN",value:[u,v]}),c){case"TWEET":y.itemTemplate=r,y.title=n+" Total Tweet"+(n>1?"s":"")}return this.setOptions(y),this},setOptions:function(a){return a=a||{},this.options=g.extend({},this.options,a),this.options.itemTemplate?this.list.options.template=this.options.itemTemplate:null,this},getFormattedTimeDate:function(a){var b=new Date(a),c=i.formattedDateOnly(b,!1,!0).replace(/\//g,"-"),d=b.toUTCString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1");return c+" "+d},render:function(){return this.$el.html(this.options.template({title:this.options.title})),this.$el.append(this.list.render().$el),this.renderDetails(),this.delegateEvents(),this},renderDetails:function(a){function b(a){return g("<div>").text(a).html()}var c=this;this.setOptions(a),this.forbidMore(),this.showLoader(),this.getDetails().done(function(a){var d=a.documents;h.each(d,function(a){var b,d,e,f;for(e in a)if(b=c.fields.findWhere({name:e}),f=b&&b.get("type"),d=b&&b.get("name"),b&&("MONEY"===f||"TIME"===f||"NUMBER"===f)){var g=h.where(c.state.options.fields,{name:d}),i=g&&g[0]&&g[0].timestampGranularity;"PATTERN"!==b.get("timestampFormat")&&(a[e]=n(b.get("type"),i).format(a[e]))}}),c.hideLoader(),c.allowMore(),c.collection.add(d,{silent:!0}),c.collection.forEach(function(a,c){a.index=c+1,g.each(a.attributes,function(c,d){"string"==typeof d&&(a.attributes[c]=b(d))})}),c.list.render(),a.hasNext?c.allowMore():c.forbidMore()}).fail(function(a){c.$el.append(g('<div class="alert alert-error">Failed to fetch documents: '+a.statusText+"</div> "))})},getDetails:function(){{var a=g.Deferred(),b={},c=0;this.state.get("timestampField"),this.state.get("timeWindowScale")}this.fields.bootstrap().done(function(){c++,2==c?a.resolve(b):null}).fail(function(b){a.reject(b)});var d={count:this.options.count,offset:this.options.offset,streamSourceId:this.options.streamSourceId};return d.restrictions=this.options.restrictions,g.ajax({type:"POST",url:"service/stream/preview",data:JSON.stringify(d),contentType:"application/json"}).done(function(d){b=d,c++,2==c?a.resolve(b):null}).fail(function(b){a.reject(b)}),a.promise()},allowMore:function(){var a=this;return this.$el.on("scroll",function(){var b=a.$el.prop("scrollHeight"),c=a.$el.scrollTop(),d=a.$el.height();d>=b-c&&(a.list.limit&&a.list.limit<a.list.collection.length?a.list.renderNext():a.renderDetails({offset:a.collection.length}))}),this},forbidMore:function(){return this.$el.off("scroll"),this},showLoader:function(){this.$el.append(this.$progressBar)},hideLoader:function(){this.$progressBar.remove()}})}()},{"../../Core/MVC/Collection":2,"../../Core/MVC/Model":4,"../../Core/MVC/View":5,"../../utilities":144,"../../utilities/MetricFormatter":140,"./../ListItem":273,"./../ListView":275,"./itemTemplate.html":211,"./lpItemTemplate.html":212,"./moreButtonTemplate.html":213,"./progressBarTemplate.html":214,"./template.html":215,"./twitterItemTemplate.html":216,jquery:103,underscore:458}],211:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="media minimized" data-role="item-holder">\n    <div class="media-body">\n        <div class="media" style="margin-top: 0;">\n            <blockquote data-role="item-holder">\n                <div class="zd-data-item-details-holder" data-role="details-holder">\n                    <table class="table table-striped">\n                        ',_.each(_.keys(attributes),function(a){if(__p+="\n                            ","_id"!==a&&"time"!==a&&"_zdFields"!==a&&attributes._zdFields[a]){__p+="\n                                <tr>\n                                    <td>"+__e(attributes._zdFields[a].label)+"</td>\n                                    <td>\n                                        ";var b=new RegExp("[/|.|w|s]*/(?:image)/");__p+="\n                                        ";var c=new RegExp("(http|https).*?(jpg|gif|png|jpeg|JPG|GIF|PNG|JPEG)");__p+="\n                                        ";var b=new RegExp("(http|https).*?(image)");__p+="\n                                        ";var d=c.test(attributes[a])||b.test(attributes[a]);__p+="\n                                        ",__p+=d?'\n                                            <img style="max-width: 300px" src="'+(null==(__t=attributes[a])?"":__t)+'"/> \n                                        ':" \n                                            "+__e(attributes[a])+"\n                                        ",__p+="\n                                    </td>\n                                </tr>\n                            "}__p+="\n                        "}),__p+='\n                    </table> \n                </div>\n                <button value="button-item-details" class="zd btn-link">\n                    Expand <i class="icon-chevron-down"></i>\n                </button> \n            </blockquote>\n        </div> \n    </div> \n</div> ';return __p}},{lodash:456}],212:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="media minimized" data-role="item-holder">\n    <div class="media-body">\n        <h4 class="media-heading">\n            <span>'+__e(attributes.rep_dn)+'</span>\n            <small class="pull-right">'+(null==(__t=new Date(attributes._ts).toLocaleString())?"":__t)+'</small>\n            <div class="clearfix"></div> \n        </h4>\n        <div class="media">\n            <blockquote>\n                '+__e(attributes.text)+'\n                <br>\n                <div data-role="details-holder" data-itemid="'+(null==(__t=attributes._id)?"":__t)+'" style="display: none;" class="media">\n                    <div class="media-body">\n                        <blockquote>\n                        </blockquote> \n                    </div> \n                </div> \n                <button value="button-item-details" class="zd btn-link">Expand <i class="icon-chevron-down"></i></button> \n            </blockquote>\n        </div> \n    </div> \n</div> ';return __p}},{lodash:456}],213:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<button title="Get More Details" value="button-more" class="zd btn btn-success btn-block">\n	More\n</button>';return __p}},{lodash:456}],214:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="progress progress-striped active">\n    <div class="bar" style="width: '+(null==(__t=value)?"":__t)+'%"></div>\n</div>';return __p}},{lodash:456}],215:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<legend>\n    <h4 class="pull-left">'+__e(title)+'</h4>\n    <div class="clearfix"></div>\n</legend>';return __p}},{lodash:456}],216:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div data-role="item-holder" class="media">\n    <a class="zd pull-left thumbnail" target="_blank" href="https://twitter.com/'+(null==(__t=attributes.user_screen_name)?"":__t)+'" class="pull-left">\n        <img title="'+(null==(__t=attributes.user_name)?"":__t)+'" class="media-object" src="'+(null==(__t=attributes.profile_image_url)?"":__t)+'">\n    </a>\n    <div class="media-body">\n        <h4 class="media-heading">\n            <a title="'+(null==(__t=attributes.user_name)?"":__t)+'" target="_blank" href="https://twitter.com/'+(null==(__t=attributes.user_screen_name)?"":__t)+'">\n            	'+__e(attributes.user_name)+'\n            </a>\n            <small class="pull-right">'+(null==(__t=new Date(attributes.created).toLocaleString())?"":__t)+'</small>\n            <div class="clearfix"></div> \n        </h4>\n        <blockquote>\n            <a  title="'+(null==(__t=attributes.user_name)?"":__t)+'" target="_blank"\n                href="https://twitter.com/'+(null==(__t=attributes.user_screen_name)?"":__t)+"/status/"+(null==(__t=attributes.id)?"":__t)+'">\n            	'+__e(attributes.text)+'\n            </a> \n            <small>\n                <a title="'+(null==(__t=attributes.user_name)?"":__t)+'" target="_blank" href="https://twitter.com/'+(null==(__t=attributes.user_screen_name)?"":__t)+'">\n                    @'+__e(attributes.user_screen_name)+"\n                </a>\n            </small>\n        </blockquote>\n    </div>\n</div>";
return __p}},{lodash:456}],217:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<dt title="'+(null==(__t="Count"===label?"Volume":label)?"":__t)+" "+(null==(__t=func?"("+func+")":"")?"":__t)+'">'+__e("Count"===label?"Volume":label)+" "+(null==(__t=func?"("+func+")":"")?"":__t)+":</dt>\n<dd>"+__e(value)+"</dd>";return __p}},{lodash:456}],218:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<button title="Show Details" value="button-details" class="zd btn btn-success btn-block">Details</button>';return __p}},{lodash:456}],219:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<legend>"+__e(label)+"</legend>";return __p}},{lodash:456}],220:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("../../utilities/MetricFormatter"),e=a("../../Core/MVC/View"),f=a("../../utilities"),g=a("../../components/Vocabulary"),h=function(a){return new d(a)},i=a("./dataItemTemplate.html"),j=a("./timeItemTemplate.html"),k=a("./groupDelimiter.html"),l=a("./detailsButton.html"),m=f.time.getEndTimeWithinStep;b.exports=e.extend({className:"zd-data-item",defaults:{dataItemTemplate:i,timeItemTemplate:j,groupDelimiter:k,detailsButton:l},events:{},initialize:function(a){return a=a||{},a.state&&(this.state=a.state,delete a.state),a.fields&&(this.fields=a.fields,delete a.fields),a.data?(this.data=a.data,delete a.data):this.data={},e.prototype.initialize.apply(this,arguments),this.options=$.extend({},this.defaults,a),this},render:function(a){this.state.get("timeTrendStep");a?this.data=a:a=this.data;var b=this.getCurrentTime(a);return this.$el.empty(),this.renderGroup("Current",a.current,b),a.historical&&this.renderGroup("Historical",a.historical,this.getHistoricalTime(a)),this.delegateEvents(),this},update:function(a){var b=this.data,d=b.group,e=c.where(a,{group:d})[0];return e&&this.render(e),this},isTrends:function(){var a=this;return function(){return a.state.isTimeTrends()}()},getCurrentTime:function(a){var b=this.isTrends(),c=this.state.config.get("source"),d=this.state.get("timeTrendStep"),e=this.state.get("timestampField"),f=this.state.filters.findWhere({path:e}),g=this.fields.findWhere({name:e}),h=null,i=null,j=null,k=this.state.config.get("source").dataResolution||g?g.get("timestampGranularity"):null,l=-1!==["DAY","WEEK","MONTH","YEAR"].indexOf(k);if(f){var n=this.getTimeFilterRange(f);h=n.timeFilterFrom,i=n.timeFilterTo,j=n.timeFrame}if("undefined"==typeof c.date||b){if(b){if(l){var o=new Date(a.group),p=new Date(m(a.group,d,l));return{from:o.getUTCMonth()+1+"/"+o.getUTCDate()+"/"+o.getUTCFullYear(),to:p.getUTCMonth()+1+"/"+p.getUTCDate()+"/"+p.getUTCFullYear()}}return j?{timeFrame:j}:{from:new Date(a.group).toLocaleString(),to:new Date(m(a.group,d,l)).toLocaleString()}}return null}if(l){var o=h||new Date(this.state.time.get("fromTime")),p=i||new Date(this.state.time.get("time"));return{from:o.getUTCMonth()+1+"/"+o.getUTCDate()+"/"+o.getUTCFullYear(),to:p.getUTCMonth()+1+"/"+p.getUTCDate()+"/"+p.getUTCFullYear()}}return j?{timeFrame:j}:(h=h?h.toLocaleString():null,i=i?i.toLocaleString():null,{from:h||new Date(this.state.time.get("fromTime")).toLocaleString(),to:i||new Date(this.state.time.get("time")).toLocaleString()})},getTimeFilterRange:function(a){var b=a.get("value"),c=a.get("operation"),d=null,e=null,g=null,h=1e3;if(b instanceof Array)d=f.getDateObjFromString(b[0]),e=f.getDateObjFromString(b[1]);else{var i=f.getDateObjFromString(b);switch(c){case"EQUALS":g=i;break;case"GE":d=i;break;case"GT":d=new Date(i.getTime()+h);break;case"LE":e=i;break;case"LT":e=new Date(i.getTime()-h)}}return{timeFilterFrom:d,timeFilterTo:e,timeFrame:g}},getHistoricalTime:function(a){var b=this.isTrends(),c=this.state.config.get("source"),d=this.state.get("timeTrendStep");return"undefined"==typeof c.date||b?b?{from:new Date(a.historical.group).toLocaleString(),to:new Date(m(a.historical.group,d)).toLocaleString()}:null:{from:new Date(this.state.time.get("historicalFrom")).toLocaleString(),to:new Date(this.state.time.get("historicalTo")).toLocaleString()}},renderGroup:function(a,b,d){var e=$("<dl></dl>"),f=this.fields;this.$el.append(this.options.groupDelimiter({label:a})).append(e),null!==d?e.append(this.options.timeItemTemplate({label:"Time Window",from:d.from||null,to:d.to||null,timeFrame:d.timeFrame||null})):null;var j=h("NUMBER").format(b.count);j=j+""=="-1"?"No data":j,e.append(this.options.dataItemTemplate({label:"Count",value:j,func:null})),b.metrics&&c.each(b.metrics,function(a,b){var d="";for(var j in a){d=j;var k=c.filter(f.models,function(a){return b===a.get("name")||a.distinctCount}),l=c.find(k,function(a){return a.get("func")&&"distinct_count"===d?a.get("distinctCount"):a.get("func")&&"distinct_count"!==d?d===a.get("func").toLowerCase():"avg"===d||"distinct_count"===d});l||(l=c.find(k,function(a){return a.get("name")===b}));var m=l.get("label"),n=l.get("type");e.append(i({label:m,value:"distinct_count"!==d?h(n).format(a[d]):a[d],func:g.text(d)}))}})},_onShowDetails:function(){this.renderDetails()}})}()},{"../../Core/MVC/View":5,"../../components/Vocabulary":54,"../../utilities":144,"../../utilities/MetricFormatter":140,"./dataItemTemplate.html":217,"./detailsButton.html":218,"./groupDelimiter.html":219,"./timeItemTemplate.html":221,underscore:458}],221:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<dt title="'+(null==(__t=label)?"":__t)+'">'+__e(label)+":</dt>\n<dd>"+(null==(__t=from)?"":__t)+"</dd>\n<dd>"+(null==(__t=to)?"":__t)+"</dd>\n<dd>"+(null==(__t=timeFrame)?"":__t)+"</dd>";return __p}},{lodash:456}],222:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="edit-datasource-btn">\n    <i class="fontIcon">u</i>\n    <span>Edit Data Sources</span>\n</div>';return __p}},{lodash:456}],223:[function(a,b){var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC/View")),e=a("./dataSourcesButtonTemplate.html");b.exports=d.extend({className:"datasource-btn-wrap",template:e,events:{"click .edit-datasource-btn":"_onClick"},initialize:function(a){this.options=c.extend({},this.options,a)},render:function(){return this.$el.html(this.template()),this.delegateEvents(),this},_onClick:function(a){"#sources"===window.location.hash?a.preventDefault():window.location="admin.html#sources"}})},{"../../Core/MVC/View":5,"./dataSourcesButtonTemplate.html":222,jquery:103,underscore:458}],224:[function(a,b){!function(){"use strict";var c=(a("jquery"),a("../../Core/MVC/View")),d=a("./progressBarTemplate.html"),e=a("./progressTextTemplate.html"),f=1e3;b.exports=c.extend({tagName:"div",className:"progressBarBody",templateBar:d,templateText:e,initialize:function(a){if(a=a||{},this.progress=0,this.fullscreen=!1,"undefined"==typeof a.controller)throw new Error("controller must be defined");if(this.controller=a.controller,delete a.controller,this.container=this.controller.$el,this.thread=this.controller.thread,"undefined"==typeof a.grid)throw new Error("grid must be defined");return this.grid=a.grid,delete a.grid,c.prototype.initialize.apply(this,arguments),this.listenTo(this.thread,"thread:start",this.updateProgress),this.listenTo(this.thread,"thread:dirtyData",this.updateProgress),this.listenTo(this.thread,"thread:notDirtyData",this.stopProgress),this.$bar=this.$wrapElement(this.templateBar()),this.$bar.appendTo(this.$el),this.$progressText=this.$wrapElement(this.templateText()),this},render:function(){return this.container=this.grid.single?this.controller.$el.parents(".midPane").eq(0):this.controller.$el.parents(".widget").eq(0),this.$el.parent()[0]!==this.container[0]&&(this.resetUI(0),this.$el.prependTo(this.container,this.$el)),this.$el.is(":hidden")&&this.$el.show(),this.$widgetHead=this.container.find(".widgetHeadProgress, .fsHeader .fsHead").eq(0),this.$progressText.appendTo(this.$widgetHead),this._renderProgress(),this},_renderProgress:function(){var a=this;0!==this.progress?(this.$progressText.html(this.progress+"%"),this.$bar.show().css({width:this.progress+"%"}),100===this.progress&&(this.progress=0,this.$el.fadeOut(f),this.imitReading&&(clearInterval(this.imitReading),this.imitReading=null),setTimeout(function(){a.$progressText&&a.$progressText.remove(),a.resetUI(0,!0)},f))):this.imitReading||(this.imitReading=setInterval(function(){var b,c=a.$progressText.find(".reading .point"),d=!1;c.each(function(a){b=a+1,!d&&c.eq(a).hasClass("active")&&(c.eq(a).removeClass("active"),c[b]?c.eq(b).addClass("active"):c.eq(0).addClass("active"),d=!0)})},200))},updateProgress:function(a){if(a.cid===this.controller.UUID){var b=a&&a.progress;this.progress=b?b:0,this.render()}},stopProgress:function(a){a.cid===this.controller.UUID&&(this.progress=100,this.render())},resetUI:function(a,b){this.animationOff(),this.$bar.width(a),this.animationOn(),b&&(this.$progressText=this.$wrapElement(this.templateText()))},fullOn:function(a){a.controller.UUID===this.controller.UUID&&(this.fullscreen=!0,this.render())},fullOff:function(a){a.controller.UUID===this.controller.UUID&&(this.fullscreen=!1,this.render())},animationOn:function(){this.$bar.addClass("animated")},animationOff:function(){this.$bar.removeClass("animated")}})}()},{"../../Core/MVC/View":5,"./progressBarTemplate.html":225,"./progressTextTemplate.html":226,jquery:103}],225:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="progressBar"></div>';return __p}},{lodash:456}],226:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<b class="progressText">\n	<small class="reading">\n		Reading \n		<span class="point active">.</span>\n		<span class="point">.</span>\n		<span class="point">.</span>\n	</small>\n</b>';return __p}},{lodash:456}],227:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<button title="Hide" class="close" value="close">&times</button> \n<strong>'+__e(title)+"</strong>\n<p>"+__e(description)+"</p>";return __p}},{lodash:456}],228:[function(a,b){!function(){"use strict";var c=a("../../models/Error"),d=a("jquery"),e=(a("underscore"),a("../../Core/MVC").Events),f=a("../../Core/MVC/View"),g=a("./../ModalWarning/index.js"),h=a("./errorItemTemplate.html"),i=f.extend({className:"alert alert-error errorContainer",model:new c,events:{'click button[value="close"]':"hide"},defaults:{template:h},initialize:function(a){this.childViews=[],this.settings=d.extend({},this.defaults,a);var b=this.model.get("object");return this.data=b&&b.data?JSON.parse(b.data):null,this.listenTo(this.model,"change",this.render),this},render:function(){var a=this,b=this.data&&this.data.details,c=b&&b.type;if(null===b||"SERVICE"!==c){if(null!==b&&("VALIDATION"===c||"TOPOLOGY_LIMIT"===c)){var d=new g({title:this.model.attributes.title,description:this.model.attributes.description,handlers:[{label:"Undo",callback:function(){e.trigger("undo:state",a.data.cid)}}]});return d.showup(),null}return"string"==typeof this.data.details&&(this.model.attributes.description=this.data.details),this.$el.html(this.settings.template(this.model.attributes)),this.$("pre").resizable({handles:"s"}),this.delegateEvents(),this}},hide:function(){var a=this;return this.$el.fadeOut(function(){a.remove()}),!1}});b.exports=i}()},{"../../Core/MVC":6,"../../Core/MVC/View":5,"../../models/Error":115,"./../ModalWarning/index.js":298,"./errorItemTemplate.html":227,jquery:103,underscore:458}],229:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->";return __p}},{lodash:456}],230:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC/View")),e=a("../../collections/Errors"),f=a("./../ErrorItem/index.js"),g=a("./errorManagerTemplate.html");b.exports=d.extend({defaults:{template:g},initialize:function(a){this.childViews=[],this.settings=c.extend({},this.defaults,a),this.collection=this.collection||new e,this.listenTo(this.collection,"add",this._renderError)},_renderError:function(a){var b=new f({model:a}),c=b.render();c&&this.$el.append(c.el),this.childViews.push(b)},capture:function(a,b,c){this.collection.add({title:b,description:c,object:a})}})}()},{"../../Core/MVC/View":5,"../../collections/Errors":14,"./../ErrorItem/index.js":228,"./errorManagerTemplate.html":229,jquery:103,underscore:458}],231:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="toggleFacets facet-tab">Facets</div><div class="facets-header">\n    <a class="clearFaceting">\n        <i class="zd icon spinner"></i>\n        <span>Clear All</span>\n    </a>\n    <div style="clear: both;"></div>\n</div>';return __p}},{lodash:456}],232:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<li class="facets-list-item '+(null==(__t=selected?"selected":"")?"":__t)+'">\n    <div>\n        <div class="text title">'+__e(value)+'</div>\n        <div class="text count">('+__e(count)+')</div>\n        <!--div class="accessory" ><input type="checkbox" ',selected&&(__p+="checked"),__p+=" /></div-->\n    </div>\n</li>";return __p}},{lodash:456}],233:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="facet-list-container">\n    <h2>'+__e(title)+'</h2>\n    <ul class="facets-list-for-attribute attribute-'+(null==(__t=facet)?"":__t)+'">\n    </ul>\n</div>';return __p}},{lodash:456}],234:[function(a,b){!function(){"use strict";var c=10,d=1e4,e=a("../../Core/MVC/View"),f=a("../../Core/MVC/Model"),g=a("../../models/Filter"),h=a("jquery"),i=a("underscore"),j=a("../../Core/MVC/Collection"),k=f.extend({defaults:{facet:"",value:"",count:0,selected:!1}}),l=f.extend({defaults:{facet:"",title:"",top:0,items:null}}),m=j.extend({model:k,parse:function(a){var b=[];return a.values.forEach(function(c){var d=new k({id:c.value,facet:a.name,value:c.value,count:c.count,selected:c.selected});b.push(d)}),b}}),n=j.extend({model:l,initialize:function(a,b){j.prototype.initialize.apply(this,arguments),b.url&&(this.url=b.url,delete b.url)},parse:function(a){var b=[];return a.forEach(function(a){if(a.facet===!0||"true"===a.facet){var e=new l({facet:a.name,title:a.label,facetOrder:0===a.facetOrder?d:a.facetOrder,top:c,items:new m([],{facet:a.name,url:s()})});b.push(e)}}),b}}),o=a("./facetTemplate.html"),p=a("./facetItemTemplate.html"),q=a("./facetHeaderTemplate.html"),r=a("./showMoreButtonTemplate.html"),s=function(a,b,c,d){return"service/stream/"+a+"/facet/"+b+"?query="+c+(void 0!==d?"&top="+d:"")};b.exports=e.extend({id:"facet-panel",className:"facet-panel-container",events:{"click .facets-list-item":"onAttributeSelected","click .clearFaceting":"removeAllFiltersFromVisualizations","mousedown .clearFaceting":"_activateButton","mouseup .clearFaceting":"_deactivateButton","mouseleave .clearFaceting":"_deactivateButton","click .toggleFacets":"toggleFacetsPanel","click .show-more-button":"showMore"},initialize:function(){e.prototype.initialize.apply(this,arguments);i.bindAll(this,"render","addFilterToVisualization","updateAttributes","onAttributeSelected","removeAllFiltersFromVisualizations"),this.spinner=h("#spinner"),this.listItems=[],this.model=new f({query:"",sourceId:"",controller:""}),this.dashboard=this.options.dashboard,this.visualizations=this.dashboard.getControllers(),this.$el.append('<div class="facet-lists"></div>'),this.$el.append(q()),this.$container=h(this.$el.find(".facet-lists")[0]),this.$el.hide()},render:function(){return this},_activateButton:function(a){h(a.currentTarget).addClass("active")},_deactivateButton:function(a){h(a.currentTarget).removeClass("active")},updateAttributes:function(a){var b=this,c=h(".text-search-sources-list .sources").text(),d=this.getController(c),e=d.config.sourceId,f=a;this.model.set({query:f,sourceId:e,controller:d}),this.attributesList=new n([],{url:"service/sources/"+e+"/attributes/",comparator:"facetOrder"}),this.$el.find(".facet-list-container").remove(),this.attributesList.fetch().done(function(){b.attributesList.length>0?(b.$el.show(),b.attributesList.forEach(function(a){var c=a.get("items"),d=h(b.$el.find(".attribute-"+a.get("facet")));b.$container.append(o(a.attributes)),b.listenTo(a.get("items"),"add",b.onAdd),d.empty(),c.url=s(e,a.get("facet"),f,a.get("top")+1),c.fetch()})):b.$el.hide()})},onAdd:function(a){var b=a.attributes,c=a.get("facet"),d=h(this.$el.find(".attribute-"+c)),e=this.attributesList.findWhere({facet:c}),f=e.get("top");if(this.applyAlreadySettedFacets(a),d.children().length>=f)d.siblings(".show-more").length||d.parent().append(r({facetName:c})),e.get("items").pop();else{d.append(p(b));var g=d.find(".facets-list-item").last();g.modelValue=a.get("value"),this.listItems.push(g),g.attr("data-value",g.modelValue),g.attr("data-facet",a.get("facet")),this.stopListening(a,"change").listenTo(a,"change",function(){a.get("selected")?g.addClass("selected"):g.removeClass("selected")})}},applyAlreadySettedFacets:function(a){var b=this.model.get("controller").state.filters,c=this.attributesList;i.each(b.models,function(b){var d=c.findWhere({facet:b.get("path")});d&&(-1!=b.get("value").indexOf(a.get("value"))?a.set("selected",!0):null)})},showMore:function(a){var b=h(a.target),c=b.attr("facet"),d=h(this.$el.find(".attribute-"+c)),e=this.model.get("query"),f=this.model.get("sourceId");d.parent().children(".show-more").remove();var g=d.children().length,i=this.attributesList.findWhere({facet:c}),j=i.get("items");i.set("top",2*g),j.url=s(f,c,e,2*g+1),j.fetch({add:!0})},onAttributeSelected:function(a){var b=h(a.currentTarget),c=this.attributesList.findWhere({facet:b.data("facet")}),d=c.get("items").findWhere({value:b.data("value")+""});d.get("selected")===!1||"false"===d.get("selected")?(d.set("selected",!0),this.addFilterToVisualization(b.data("facet"),b.data("value"))):(d.set("selected",!1),this.removeFilterFromVisualizations(b.data("facet"),b.data("value"),this.getControllers())),this.trigger("facets:select",this.$container),this.trigger("facetUpdated")},addFilterToVisualization:function(a,b){for(var c=this.model.get("controller"),d=(this.getControllers()||[c]).filter(function(a){return c.config.sourceId===a.config.sourceId}),e=0;e<d.length;e++){var f=d[e].state.filters,h=null;if(f.findWhere({path:a})){h=f.findWhere({path:a});var j=h.get("value");j.push(b),h.set("value",i.uniq(j))}else h=new g({path:a,operation:"IN",value:[b],editable:!1,label:a,facetFilter:!0});f.add(h),f.trigger("add")}},removeFilterFromVisualizations:function(a,b,c){for(var d=c?c:[this.model.get("controller")],e=0;e<d.length;e++){var f=d[e],g=f.state.filters,h=null;if(g.findWhere({path:a})){h=g.findWhere({path:a});var j=h.get("value"),k=i.without(j,b);0===k.length?g.remove(h):(h.set("value",k),g.add(h))}}},removeAllFiltersFromVisualizations:function(){var a=this,b=this.getControllers();a.attributesList.forEach(function(c){var d=c.get("items"),e=c.get("facet");d.forEach(function(c){var d=c.get("selected"),f=null;d===!0&&(c.set("selected",!1),f=c.get("value"),a.removeFilterFromVisualizations(e,f,b))}),a.$el.find(".selected").removeClass("selected")}),this.trigger("facetUpdated")},removeFacetFilter:function(a){var b,c=this.attributesList.findWhere({facet:a.get("path")});a.get("value").forEach(function(a){b=c.get("items").findWhere({value:a}),b.set("selected",!1)})},getControllers:function(){var a=[];this.visualizations=this.dashboard.getControllers();for(var b=0;b<this.visualizations.length;b++){var c=this.visualizations[b];this.hasTextSearchFeature(c)&&a.push(c)}return a},getController:function(a){this.controllers=this.getControllers();for(var b=0;b<this.controllers.length;b++){var c=this.controllers[b],d=c.config.get("source").sourceName;if(a===d)return c}return this.controllers[0]},getSelectedFacets:function(){var a=[],b=this;return b.attributesList.forEach(function(b){var c=b.get("items"),d=b.get("facet");c.forEach(function(b){var c=b.get("selected"),e=null;if(c===!0){var f=a.filter(function(a){return a.path===d})[0];e=b.get("value"),f?f.value.push(e):a.push({editable:!1,facetFilter:!0,path:d,label:d,operation:"IN",value:[e]})}})}),a},toggleFacetsPanel:function(){this.$el.hasClass("shown")?this.$el.removeClass("shown"):this.$el.addClass("shown")},hasTextSearchFeature:function(a){var b=a.config.get("source"),c=b.sourceFeatures;return c&&c.indexOf("TEXT_SEARCH")>=0?!0:!1}})}()},{"../../Core/MVC/Collection":2,"../../Core/MVC/Model":4,"../../Core/MVC/View":5,"../../models/Filter":117,"./facetHeaderTemplate.html":231,"./facetItemTemplate.html":232,"./facetTemplate.html":233,"./showMoreButtonTemplate.html":235,jquery:103,underscore:458}],235:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<span class="show-more">\n	<a class="show-more-button" facet="'+(null==(__t=facetName)?"":__t)+'">Show More</a>\n</span>';return __p}},{lodash:456}],236:[function(a,b){!function(){"use strict";var c=a("underscore"),d=(a("jquery"),a("./../ListItem")),e=a("../../utilities"),f=(a("moment"),a("./editableFilterTemplate.html")),g=a("./staticFilterTemplate.html"),h=d.extend({defaults:{template:f},className:"filters-item",events:{"click .editable":"_editFilter","click .delete-button":"_deleteFilter"},initialize:function(){d.prototype.initialize.apply(this,arguments);var a=this.model.get("editable"),b=this.model.get("operation"),c="TEXT_SEARCH"===b,e=!!this.model.get("facetFilter");a||c||e||this.model.set("editable",!0,{silent:!0}),this.options.template=this.model.get("editable")?f:g},render:function(){function a(a,b){return e.getStringGmtTime(a,b)}var b=c.clone(this.model.attributes),d=c.findWhere(this.options.objectFields,{name:b.path});if(d&&"TIME"===d.type){var f=["DAY","WEEK","MONTH","YEAR"],g=this.checkTimeFilterGranularity(),h=-1!==f.indexOf(g)?"MM/DD/YYYY":"MM/DD/YYYY hh:mm:ss A";if(b.value instanceof Array)b.value=b.value.map(function(b){return a(b,h)});else{var i=b.value;b.value=a(i,h)}"BETWEEN"===b.operation&&this.$el.addClass("time-filter")}return b.label||(b.label=d.label),this.$el.html(this.options.template({attributes:b})),this.delegateEvents(),this},_resize:function(){var a=this.$el.find(".item-description").height();a&&(this.$el.find(".operation-label, .path").css({height:a+"px"}),this.$el.find(".operation-label").css({"line-height":a+"px"}))},_deleteFilter:function(){return this.model.collection.trigger("filter:delete",this.model),!1},_editFilter:function(){return this.model.collection.trigger("filter:edit",this.model),!1},checkTimeFilterGranularity:function(){var a=this,b=c.filter(this.options.objectFields,function(b){return b.name===a.model.get("path")})[0],d=b.timestampGranularity;return"TIME"===b.type&&d?d:!1}});b.exports=h}()},{"../../utilities":144,"./../ListItem":273,"./editableFilterTemplate.html":237,"./staticFilterTemplate.html":239,jquery:103,moment:457,underscore:458}],237:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="item-header"><div class="delete-button zd icon delete-item"></div>'+__e(attributes.label||attributes.path)+'</div>\n<div class="item-description editable">\n    <div class="operation-label">\n        ',__p+="NOTIN"===attributes.operation?"\n            Exclude\n        ":"BETWEEN"===attributes.operation?"\n            Between\n        ":"EQUALS"===attributes.operation?'\n            <span class="symbol">=</span>\n        ':"GE"===attributes.operation?'\n            <span class="symbol">≥</span>\n        ':"GT"===attributes.operation?'\n            <span class="symbol">></span>\n        ':"LE"===attributes.operation?'\n            <span class="symbol">≤</span>\n        ':"LT"===attributes.operation?'\n            <span class="symbol"><</span>\n        ':"\n            Include\n        ",__p+='\n    </div>\n    <div class="path">\n        ',__p+="BETWEEN"===attributes.operation?"\n            "+__e(attributes.value.join(" to "))+"\n        ":attributes.value&&attributes.value.constructor===Array&&attributes.value.length>1?"\n            "+__e(attributes.value.length+" Selected")+"\n        ":"\n            "+__e(attributes.value)+"\n        ",__p+='\n    <div class="zd icon right-chevron"></div></div>\n</div> \n<div class="item-details">\n    ',attributes.value&&"BETWEEN"!==attributes.operation&&attributes.value.length>1&&(__p+="\n        "+__e(attributes.value.join?attributes.value.join(", "):attributes.value)+"\n    "),__p+="\n</div>";return __p}},{lodash:456}],238:[function(a,b){b.exports=a("./FilterItem")},{"./FilterItem":236}],239:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="item-header">\n	<div class="delete-button zd icon delete-item"></div>\n	'+__e(attributes.label||attributes.path||("TEXT_SEARCH"===attributes.operation?"Search":""))+'\n</div> \n<div class="item-description">    \n    <div class="operation-label">\n        ',__p+="NOTIN"===attributes.operation?" \n            Exclude \n        ":"BETWEEN"===attributes.operation?" \n            Between \n        ":"EQUALS"===attributes.operation?' \n            <span class="symbol">=</span> \n        ':"GE"===attributes.operation?' \n            <span class="symbol">≥</span> \n        ':"GT"===attributes.operation?' \n            <span class="symbol">></span> \n        ':"LE"===attributes.operation?' \n            <span class="symbol">≤</span> \n        ':"LT"===attributes.operation?' \n            <span class="symbol"><</span> \n        ':" \n            Include \n        ",__p+=' \n    </div> \n    <div class="path">',print("BETWEEN"===attributes.operation?attributes.value.join(" to "):attributes.value&&attributes.value.constructor===Array&&attributes.value.length>1?attributes.value.length+" Selected":attributes.value),__p+='</div> \n</div>  \n<div class="item-details">',attributes.value&&"BETWEEN"!==attributes.operation&&"TEXT_SEARCH"!==attributes.operation&&attributes.value.length>1&&print(attributes.value.join?attributes.value.join(", "):attributes.value),__p+=" \n</div> ";return __p}},{lodash:456}],240:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="delete-button zd icon delete-item" value="deleteItem" ',user.name!==data.userName&&(__p+=' style="display: none;" '),__p+=' ></div>\n<div title="Delete" class="confirm-delete-button" value="confirmDeleteItem">Delete</div>\n<div class="filter-set-name" title="'+(null==(__t=data.name)?"":__t)+'">'+__e(data.name)+'</div>\n<div class="filter-set-user">',__p+=user.name===data.userName?"My Filters":__e(data.userName),__p+=" </div>";return __p}},{lodash:456}],241:[function(a,b){!function(){"use strict";var c=(a("underscore"),a("jquery"),a("./../ListItem")),d=a("../../models/FilterSet"),e=a("./filterSetTemplate.html");b.exports=c.extend({template:e,className:"zd-filter-set-item item-description",events:{click:"select",'click div[value="deleteItem"]':"deleteItem",'click div[value="confirmDeleteItem"]':"confirmDeleteItem"},model:new d,initialize:function(a){if(c.prototype.initialize.apply(this,arguments),!a.user)throw new Error("User should be defined!");this.user=a.user},render:function(){var a=this.model.toJSON();return this.$el.html(this.template({data:a,user:this.user})).attr("data-id",a.id),this.$el.addClass("shared"),this.delegateEvents(),this},select:function(){var a=this.$(".confirm-delete-button");return a.width()>0?(this.$(".delete-button").show("fast"),this.$el.find("a").css("cursor","pointer"),a.animate({width:"0px"},{duration:"fast"},"linear"),!1):void this.model.collection.trigger("filterSet:select",this.model)},deleteItem:function(a){this.$(".delete-button").hide("fast"),this.$el.find("a").css("cursor","default"),this.$(".confirm-delete-button").animate({width:"58px"},{duration:"fast"},"linear"),a.stopPropagation()},confirmDeleteItem:function(a){this.model.collection.trigger("filterSet:delete",this.model),this.model.destroy(),a.stopPropagation()}})}()},{"../../models/FilterSet":118,"./../ListItem":273,"./filterSetTemplate.html":240,jquery:103,underscore:458}],242:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("./../ListView"),e=a("./../FilterSetItem"),f=a("../../collections/FilterSets"),g=a("./../SearchBox"),h=a("./../SortingBy"),i=a("../../Core/MVC/Model"),j=a("../../Core/MVC/View"),k=a("../../Core/MVC"),l=k.Events,m=a("./filterSetPaletteTemplate.html"),n=a("./sortTypeTemplate.html");b.exports=j.extend({className:"filterSetPaletteContent",events:{"input .search-query":"renderFilterSetList"},initialize:function(a){if(j.prototype.initialize.apply(this,arguments),!a.user)throw new Error("User should be defined!");return this.user=a.user,this.sourceId=a.sourceId,this.collection=this.collection||new f({sourceId:this.sourceId}),this.searchBox=new g,this.sortingBy=new h({sortTypeTemplate:n,model:new i({sortby:"Filter Name",ascending:!0})}),this.filterSetList=new d({className:"zd nav nav-tabs nav-stacked",ItemView:e,collection:this.collection,user:this.user}),this.listenTo(this.collection,"sync",this.renderFilterSetList),this.listenTo(this.collection,"remove",this.renderFilterSetList),this.listenTo(this.searchBox,"search",this.renderFilterSetList),this.listenTo(this.sortingBy,"change:sortby",this.renderFilterSetList),this.collection.fetch(),this},render:function(){return this.$el.append(m({filterSetNumb:this.collection.length})),this.$el.find(".no-filter-set-message").after(this.searchBox.render().$el),this.$el.find(".zd-tabbar").prepend(this.sortingBy.render().$el),this.checkFilterSetsNumb(),l.trigger("resize:popup"),this},renderFilterSetList:function(){var a,b=(this.sortingBy.model.get("ascending"),this.searchBox.model.get("needle").toLowerCase()),d=this.sortingBy.model.get("sortby");return this.checkFilterSetsNumb(),this.filterSetList.collection=this.collection,b&&(a=c.filter(this.filterSetList.collection.models,function(a){var c=a.get("name")&&a.get("name").toLowerCase();
return-1!==c.indexOf(b)}),this.filterSetList.collection=new f(a)),this.filterSetList.options.sortbyOptions={sortby:d,ascending:this.sortingBy.model.get("ascending")},"Author"===d&&(this.filterSetList.options.sortbyOptions.topValue=this.user.name),this.$el.find(".zd-tabbar-body").empty().append(this.filterSetList.render().$el),this.resizeFilterSetList(),this},checkFilterSetsNumb:function(){this.collection.length?(this.$el.find(".no-filter-set-message").hide(),this.searchBox.$el.show(),this.$el.find(".zd-tabbar").show(),this.collection.length>1?this.sortingBy.$el.show():this.sortingBy.$el.hide()):(this.searchBox.$el.hide(),this.$el.find(".zd-tabbar").hide(),this.$el.find(".no-filter-set-message").show())},resizeFilterSetList:function(){var a=this.$el.closest(".dialog-body"),b=a.children().height()-a.height(),c=this.$el.find(".zd-tabbar-body");b>0&&c.css("max-height",c.height()-b-5+"px")}})}()},{"../../Core/MVC":6,"../../Core/MVC/Model":4,"../../Core/MVC/View":5,"../../collections/FilterSets":15,"./../FilterSetItem":241,"./../ListView":275,"./../SearchBox":326,"./../SortingBy":348,"./filterSetPaletteTemplate.html":243,"./sortTypeTemplate.html":245,underscore:458}],243:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="no-filter-set-message" ',filterSetNumb&&(__p+=' style="display: none;" '),__p+=' > \n    <h5>There are currently no saved filters.</h5> \n    <span>You can save individual or groups of filters for re-use by clicking the <div class="zd icon bookmark filter-sets"></div> icon after you have added filter(s).</span>\n</div> \n<div class="zd-tabbar" ',filterSetNumb||(__p+=' style="display: none;" '),__p+='>\n    <div class="zd-tabbar-body"></div>\n</div>';return __p}},{lodash:456}],244:[function(a,b){b.exports=a("./FilterSetPalette")},{"./FilterSetPalette":242}],245:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="sortList"> \n    <div class="pointer"></div>\n    <ul> \n        <li item-value="Filter Name">Filter Name</li> \n        <li item-value="Author">Author</li> \n    </ul> \n</div>';return __p}},{lodash:456}],246:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<i class="zd icon filter"></i>';return __p}},{lodash:456}],247:[function(a,b){!function(){"use strict";var c=(a("underscore"),a("jquery")),d=a("../../Core/MVC"),e=d.Events,f=a("../../controls"),g=a("./../FiltersManager/index.js"),h=f.PalettePopup,i=a("./filterIndicatorTemplate.html"),j=d.View.extend({tagName:"a",className:"zd-filter-indicator",defaults:{template:i},events:{click:"_onClick"},initialize:function(a){var b=this;if(a=a||{},!a.user)throw Error("options.user must be defined");return this.user=a.user,delete a.user,d.View.prototype.initialize.apply(this,arguments),this.filtersManager=new g({config:this.options.config.toJSON(),collection:this.collection,objectFields:this.options.objectFields,state:this.options.state,addFilterButton:!0,indicatorCase:!0,className:"filtersManager-list",popupMode:!0,user:this.user}),this.childViews.push(this.filtersManager),this.listenTo(this.collection,"add remove",this.validate),this.listenTo(e,"filter:add",this.updateHeader),this.listenTo(e,"filtersList:expand",function(a,c){a===b.options.config.get("id")&&b.showFiltersList(c)}),this.hide(),this},validate:function(){this.blink(),this.render(),e.trigger("filters:validate",this.options.config.get("id"))},hide:function(){this.$el.hide(),this.palette&&this.palette.hide()},render:function(){return this.options.root&&this.$el.insertBefore(c(this.options.root).find(".remove")),this.$el.html(this.options.template()),this.$el.show(),this.$el.css("display","inline-block"),this.delegateEvents(),this},showFiltersList:function(a){var b=this,c={of:a||b.$el,my:a?"left-24px bottom+59px":"left+10px bottom+59px",at:a?"right+50px bottom":"left+30px bottom",collision:"flipfit flipfit"};this.popup=new h({containment:this.$section,customClass:"filter-palette"}),this.filtersManager.setPopup(this.popup),this.popup.render(this.filtersManager.el,"Add Filters"),this.filtersManager.render(),this.popup.onHide=function(){b.goNormal()},this.popup.onBack=function(){b.filtersManager.showAppliedFilters(),b.updateHeader(b.filtersManager.currentState)},this.popup.position(c),this.filtersManager.onShowBackButton=this.popup.showBackButton,this.filtersManager.onHideBackButton=this.popup.hideBackButton,this.filtersManager.options.indicatorCase&&"FL"===this.filtersManager.currentState&&this.filtersManager.$el.closest(".zd-palettepopup .zd-infopopup-body").addClass("negative-background"),this.updateHeader(this.filtersManager.currentState)},updateHeader:function(a){var b=this.filtersManager.$el.closest(".zd-infopopup").find("h3.zd-infopopup-header");switch(a){case"FL":b.text("Add Filters");break;case"FA":b.text("Active Filters");break;case"FE":b.text("Edit Filter")}},blink:function(){var a=this;this.goActive(),setTimeout(function(){a.goNormal()},200)},goNormal:function(){return this.$el.removeClass("active"),this},goActive:function(){return this.$el.hasClass("active")?null:this.$el.addClass("active"),this},_onClick:function(){this.goActive(),this.showFiltersList()},remove:function(){this.stopListening(this.collection),this.stopListening(e),this.palette&&this.palette.hide(),this.$el.remove()}});b.exports=j}()},{"../../Core/MVC":6,"../../controls":66,"./../FiltersManager/index.js":252,"./filterIndicatorTemplate.html":246,jquery:103,underscore:458}],248:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("./../../components/settings/index"),f=a("../../Core/MVC"),g=f.Events,h=a("../../utilities"),i=a("../../controls"),j=a("./../ViewNavigator"),k=a("./../ListView"),l=a("./../FiltersView"),m=a("../../models/FilterSet"),n=a("../../collections/FilterSets"),o=a("./../FilterSetPalette"),p=a("./../AttributeFilterEditor"),q=a("./../NumericFilterEditor"),r=a("./../TimeFilterEditor"),s=a("./../ObjectFieldItem"),t=a("./../GroupedListView"),u=a("./../SegmentedControl"),v=a("./../SaveFilterSet"),w=a("./../Notifications").Popup,x=a("./filterPathNotApplied.html"),y=a("./filtersPaletteTopHeadTemplate.html")(),z=a("./filtersPaletteTopTemplate.html"),A=["NUMBER","MONEY","ATTRIBUTE","INTEGER","TIME"],B=k.extend({sortCollection:function(){}}),C=j.extend({events:{'click button[value="dialog-back"]':"back","click .save-filter-set":"showSaveFilterSetPopup"},initialize:function(a){a=a||{},this.options=c.extend({},this.defaults,a),this.currentState=!1,j.prototype.initialize.apply(this,arguments),a.objectFields&&(this.objectFields=a.objectFields,delete a.objectFields),this.appliedFilterSet=a.appliedFilterSet||null,this.updateCollection(this.collection),this.filterSets=new n([],{sourceId:this.options.config.source.sourceId}),this.listenTo(this.filterSets,"filterSet:select",this.selectFilterSet),this.options.user=e.user,this.options.user.permissions=e.permissions},_onFilterEdit:function(a){var b=this.objectFields.findWhere({name:a.get("path")});this.setAppliedFilterSet(null),this.showFilterEditor(b,a)},_onFilterClear:function(){var a=this;this.collection.each(function(b){a.options.state.removeFilter(b),a.options.applyToAll&&g.trigger("visualization:unfilterAll",a.options.config.source.sourceId,{},b.attributes)}),this.collection.reset().trigger("change"),this.render()},_onFilterDelete:function(a){var b=this.collection.findWhere({path:a.get("path")});b&&this.collection.remove(b),0===this.collection.length&&this.showFiltersList(),this.setAppliedFilterSet(null),this.options.applyToAll&&g.trigger("visualization:unfilterAll",this.options.config.source.sourceId,{},a.attributes)},_onFilterApply:function(a){var b=this.collection.findWhere({path:a.get("path")});b?b.set(a.attributes):this.collection.add(a.attributes,{merge:!0}),this.popToRoot(),this.setAppliedFilterSet(null)},showFilterEditor:function(a,b){this.currentState="FE";var c,d=a.get("type");switch(d){case"ATTRIBUTE":c=new p({config:this.options.config,state:this.options.state,sourceId:this.options.sourceId,objectField:a,filter:b,indicatorCase:this.options.indicatorCase,applyToAll:this.options.applyToAll});break;case"NUMBER":case"INTEGER":case"MONEY":c=new q({config:this.options.config,state:this.options.state,sourceId:this.options.sourceId,objectField:a,filter:b,indicatorCase:this.options.indicatorCase,applyToAll:this.options.applyToAll});break;case"TIME":c=new r({config:this.options.config,state:this.options.state,sourceId:this.options.sourceId,objectField:a,filter:b,indicatorCase:this.options.indicatorCase,applyToAll:this.options.applyToAll,forcedFilters:this.options.forcedFilters})}this.show(c),this.repositionPopup(),this.listenTo(c,"filter:apply",this._onFilterApply),this.listenTo(c,"filter:sync",this.repositionPopup)},back:function(){var a=this;switch(a.currentState){case"FA":break;case"FL":a.showAppliedFilters();break;case"FE":a.showFiltersList();break;default:a.showAppliedFilters()}},showAppliedFilters:function(){this.currentState="FA";var a=new l({collection:this.collection,addFilterButton:this.options.addFilterButton,widgetConfig:this.options.config,objectFields:this.options.objectFields,applyToAll:this.options.applyToAll});this.show(a),this.listenTo(a,"filter:add",this.showFiltersList),0===this.collection.length?this.showFiltersList():(this.updateCollection(this.collection),this.repositionPopup())},showFiltersPaletteTop:function(){var a=this.options.user.permissions;this.$el.find(".filters-palette-top").remove(),this.$el.prepend(z({appliedFilterSet:this.appliedFilterSet,appliedFiltersNumb:this.collection.length,saveFilterEnabled:a.filters.save}))},showFiltersList:function(){var a=this.options.state,b=this.currentState,c=["count"],d=a&&a.get("timestampField"),e=a&&a.groupBy.getAttribute();this.$el.closest(".zd-infopopup-body").css({overflow:"auto"}),d&&(this._hasPlayerOption()||e===d)&&c.push(d),this.options.indicatorCase&&this.options.widgetGrid&&this.options.widgetGrid.childViews.forEach(function(a){var b=a.controller.state,d=b.groupBy.getAttribute(),e=b.get("timestampField");(b._hasPlayerOption()||d===e)&&c.push(e)}),this.currentState="FL";var f=this,h=new t({className:"nav nav-tabs nav-stacked",ItemView:s,ListView:B,collection:this.objectFields,groupBy:"type",selectable:"radio",filter:function(a){var b=!0;return-1===A.indexOf(a.get("type"))||-1!==c.indexOf(a.get("name"))?!1:(f.collection.each(function(c){var d=c.get("path"),e=a.get("name");d===e&&(b=!1)}),b&&a.get("visible"))},comparator:function(a){var b=a.get("label");return b?b.toLocaleLowerCase():b}});this.listenTo(h,"select",function(a){f.showFilterEditor(a)}),b!==this.currentState?(this.segmentedControl=new u({tabs:[{title:"New Filter",icon:"plus"},{title:"Saved Filters",icon:"bookmark"}]}),this.listenTo(this.segmentedControl,"segment:select",this.renderMainView),this.show(h),this.options.hideHeader?this.$el.children(".clearfix").after(this.segmentedControl.render().$el):this.$el.children(".clearfix").before(y).after(this.segmentedControl.render().$el),this.$el.append('<div class="palette-bottom-panel"></div>')):(this.$el.find(".filter-sets-wrapper").hide().remove(),this.segmentedControl.$el.after(h.render().$el)),h.$el.addClass("filters-list-wrapper"),this.options.indicatorCase||h.$el.addClass("negative-background"),g.trigger("filter:add",this.currentState),this.repositionPopup()},_hasPlayerOption:function(){return this.options.state._hasPlayerOption()},renderMainView:function(a){0===a?this.showFiltersList():this.showFilterSetList()},showFilterSetList:function(){var a=new o({collection:this.filterSets,appliedFilters:this.collection,user:this.options.user,sourceId:this.options.sourceId?this.options.sourceId:this.options.state.get("streamSourceId")});this.$el.children(".clearfix").length?(this.$el.find(".filters-list-wrapper").hide().remove(),this.segmentedControl.$el.after(a.render().$el)):(this.show(a),this.options.hideHeader?this.$el.children(".clearfix").after(this.segmentedControl.render().$el):this.$el.children(".clearfix").before(y).after(this.segmentedControl.render().$el),this.$el.append('<div class="palette-bottom-panel"></div>')),a.$el.addClass("filter-sets-wrapper"),this.options.indicatorCase||a.$el.addClass("negative-background"),this.listenTo(a.collection,"sync",this.repositionPopup),this.repositionPopup()},setPopup:function(a){this.popup=a},repositionPopup:function(){this.popup&&this.popup.$el.is(":visible")&&this.popup.position()},checkAppliedFilterSet:function(){var a=this;this.appliedFilterSet&&(this.collection.length!==a.appliedFilterSet.get("filters").length?this.setAppliedFilterSet(null):this.collection.forEach(function(b){var c=a.appliedFilterSet.get("filters").filter(function(a){var c=a.operation===b.get("operation")&&a.path===b.get("path")&&d.isEqual(a.value,b.get("value"));return c});c.length||a.setAppliedFilterSet(null)}))},render:function(){return this.checkAppliedFilterSet(),this.showAppliedFilters(),this.options.indicatorCase&&this.$el.addClass("negative-background").closest(".zd-palettepopup .zd-infopopup-body").addClass("negative-background"),this.delegateEvents(),this},updateCollection:function(a){this.collection=a,this.collection.off("filter:edit").off("filter:delete").off("filter:clear"),this.listenTo(this.collection,"filter:edit",this._onFilterEdit),this.listenTo(this.collection,"filter:delete",this._onFilterDelete),this.listenTo(this.collection,"filter:clear",this._onFilterClear)},showFilterSetPalette:function(a){var b;this.undock(),this.filterSetPalettePopup=new i.PalettePopup({autohide:!1,customClass:"filterSetPalette",pointerWidth:14}),b=new o({collection:this.filterSets,appliedFilters:this.collection,sourceId:this.options.sourceId?this.options.sourceId:this.options.state.get("streamSourceId")}),this.filterSetPalettePopup.render(b.render().$el,"Filter Sets").position({of:c(a.target).addClass("active"),my:"left+30 center",at:"center center",collision:"flipfit flipfit"}),this.filterSetPalettePopup.onHide=function(){c(a.target).removeClass("active"),b.trigger("hide")}},selectFilterSet:function(a){function b(a){var b=new Date(a);return"Invalid Date"===b.toString()&&(b=new Date(a.replace("-","/").replace(" UTC",""))),"Invalid Date"!==b.toString()}var c,e=this,f=this.options.objectFields;if(this.options.state&&(c=this.options.state.config.get("source").date),this.setAppliedFilterSet(this.appliedFilterSet||this.collection.length?null:a),e.showFiltersPaletteTop(),a.get("filters").forEach(function(g){var h,i,j,k=e.collection.findWhere({path:g.path});if(!e.options.applyToAll&&c===g.path&&e._hasPlayerOption()){{var l=f.findWhere({name:g.path}),m=l?l.get("label"):g.path;a.get("name")}return void e.showFilterNotification({type:"warning",title:"Filter path not Applied",description:x({fieldLabel:m,setName:a.get("name")}),timeout:5e3})}k?(h=k.get("value"),i=g.value,j=/IN|OUT/.test(k.get("operation"))?d.union(h,i):"number"==typeof h[0]||"number"==typeof h||b(h[0])||b(h)||"number"==typeof i?i:d.union(h,i),k.set({operation:g.operation,value:j})):e.collection.add(g,{silent:!0})}),this.options.applyToAll){var h=this.collection.toJSON();g.trigger("visualization:filterAll",e.options.config.source.sourceId,{},h,{timestampField:e.options.state.get("timestampField"),timeTrendStep:e.options.state.get("timeTrendStep")})}else this.collection.trigger("change");this.render()},showFilterNotification:function(a){var b=a.type||"",c=a.title||"",d=a.description||"",e=a.timeout||!1,f={title:c,description:d,type:b};e&&(f.timeout=e);var g=new w(f);g.show()},undock:function(){return this.$el.closest(".docked").removeClass("docked").addClass("undocked")},_canGoBack:function(){var a=this;return(this.collection.length>0||"FE"===a.currentState)&&"FA"!==a.currentState},show:function(){j.prototype.show.apply(this,arguments);var a=this.$el.closest(".modal"),b=this.collection.length>0?"FILTERS":"BACK",d=c(a).find('button[value="dialog-back"]'),e=c('<div class="back-label"><b style="vertical-align: middle;">'+b+"</b></div>").css({"font-family":"source-sans-pro, sans-serif","font-size":"12px","font-weight":"bold",display:"inline-block","float":"right",color:"#595959","padding-left":"6px","letter-spacing":"2px"}),f=0;d.is(":visible")&&!this.options.indicatorCase?(f=d.height(),this.$el.css({"margin-top":f+"px",height:"calc(100% - "+f+"px)"}),d.find(".back-label").remove(),d.append(e)):(f=83,this.$el.css({"margin-top":"0",height:"calc(100% - "+f+"px)"}),d.is(":visible")||this.showFiltersPaletteTop()),this.options.popupMode&&this.$el.closest(".zd-palettepopup").addClass("popup-mode")},showSaveFilterSetPopup:function(){var a,b=this;return a=new v({handlers:[{label:"Save Filter Set","class":"btn-save",callback:function(){var d,e={userId:b.options.user.id,sourceId:b.options.state.get("streamSourceId"),accountId:b.options.user.accountId,userName:b.options.user.name,filters:b.collection.toJSON()},f=a.getData();return f.name?b.filterSets.findWhere({name:f.name})?(a.showError('Filter Set name "'+f.name+'" already used.'),!1):(d=new m(c.extend(e,f)),void d.save().done(function(a,c){b.showFilterNotification({title:"Filter Set Saved",description:"The Filter Set <b>"+h.htmlEntities(f.name)+"</b> has been saved, and is now available to use."}),d.set("id",c.id),b.filterSets.add(d.toJSON(),{silent:!0}),b.setAppliedFilterSet(d)}).fail(function(a){console.error("Failed to create filter set "+JSON.stringify(a))})):(a.showError("Filter Set name cannot be empty."),!1)}},{label:"Cancel","class":"btn-cancel"}]}),a.show(),this},setAppliedFilterSet:function(a){this.appliedFilterSet=a,this.showFiltersPaletteTop()}});b.exports=C}()},{"../../Core/MVC":6,"../../collections/FilterSets":15,"../../controls":66,"../../models/FilterSet":118,"../../utilities":144,"./../../components/settings/index":55,"./../AttributeFilterEditor":158,"./../FilterSetPalette":244,"./../FiltersView":255,"./../GroupedListView":258,"./../ListView":275,"./../Notifications":302,"./../NumericFilterEditor":305,"./../ObjectFieldItem":309,"./../SaveFilterSet":324,"./../SegmentedControl":334,"./../TimeFilterEditor":363,"./../ViewNavigator":379,"./filterPathNotApplied.html":249,"./filtersPaletteTopHeadTemplate.html":250,"./filtersPaletteTopTemplate.html":251,jquery:103,underscore:458}],249:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\nTime Filter <b>"+__e(fieldLabel)+"</b> from <b>"+__e(setName)+"</b> not applied as it used as <b>Time Attribute</b> for Visualization.";return __p}},{lodash:456}],250:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<legend class="filters-palette-top-head">Add Filters</legend>';return __p}},{lodash:456}],251:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="filters-palette-top"> \n    ',appliedFilterSet&&(__p+='\n        <div class="applied-filter-set-name">'+__e(appliedFilterSet.get("name"))+"</div>\n    "),__p+='  \n    <div class="save-filter-set" ',saveFilterEnabled&&!appliedFilterSet&&appliedFiltersNumb||(__p+='style="display: none;"'),__p+=' >\n        Save <div class="zd icon bookmark filter-sets"></div>\n    </div> \n    <legend class="subhead">Active Filters</legend> \n    <div class="none-label-box" ',appliedFiltersNumb&&(__p+='style="display: none;"'),__p+=" >NONE</div> \n</div> ";return __p}},{lodash:456}],252:[function(a,b){b.exports=a("./FiltersManager")},{"./FiltersManager":248}],253:[function(a,b){!function(){"use strict";var c="_SubheadFiltersList",d=a("jquery"),e=a("underscore"),f=a("../../Core/MVC"),g=f.Events,h=a("./../FilterItem/index.js"),i=a("./../ListView/index.js"),j=a("./filtersTemplate.html"),k=a("./subheadControlTemplate.html"),l=f.View.extend({template:j,defaults:{addFilterButton:!0},events:{"click div.add-filter":"_addFilter",'change input[type="radio"]':"setSubheadFiltersList"},className:"filters-applied",initialize:function(a){this.options=d.extend({},this.defaults,a),this.childViews=[],this.filtersList=new i({collection:this.collection,ItemView:h,className:"filters-list unstyled",itemOption:{objectFields:this.options.objectFields.toJSON()}}),this.childViews.push(this.filtersList)},_addFilter:function(){this.trigger("filter:add")},_resize:function(){this.filtersList._resize()},render:function(){return this.$el.html(this.filtersList.render().$el),this.options.addFilterButton&&this.$el.append(this.template()),this.options.applyToAll||this.$el.prepend(k()),this.setSubheadFiltersList({restore:!0}),this.updateGranularity(),this},updateGranularity:function(){var a,b=this.options.objectFields;this.collection.models.forEach(function(c){a=b.findWhere({name:c.get("path")}),a&&"TIME"===a.get("type")&&c.set({granularity:a.get("timestampGranularity")},{silent:!0})})},setSubheadFiltersList:function(a){var b=c,f=a.restore,h=this.options.widgetConfig.variables||[],i=e.find(h,function(a){return a.name===b}),j=i?i.defaultValue:"true";if(f)return this.$el.find('.radio input[value="'+j+'"]').attr("checked",!0),void(i||(0===h.length&&(this.options.widgetConfig.variables=h),h.push({name:b,type:"string",defaultValue:j})));var k=a&&a.target&&d(a.target).val();i.defaultValue=k,g.trigger("filters:validate")}});b.exports=l}()},{"../../Core/MVC":6,"./../FilterItem/index.js":238,"./../ListView/index.js":275,"./filtersTemplate.html":254,"./subheadControlTemplate.html":256,jquery:103,underscore:458}],254:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd btn btn-success btn-block add-filter">\n    <div class="zd icon plus"></div>Add New Filter\n</div>';return __p}},{lodash:456}],255:[function(a,b){b.exports=a("./FiltersView")},{"./FiltersView":253}],256:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="subhead small">Show Filters as Subhead</div>\n<div class="radio interact-radio"> \n    <input id="interact" type="radio" name="optionsInteract" value="true">  \n    <label for="interact">Yes</label>  \n    <input id="noninteract" type="radio" name="optionsInteract" value="false">  \n    <label for="noninteract">No</label> \n</div> ';return __p}},{lodash:456}],257:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<legend class="subhead">'+__e(label)+"</legend>";return __p}},{lodash:456}],258:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(c.noop,a("underscore")),e=a("../../Core/MVC"),f=a("../../utilities"),g=a("./../ListItem"),h=a("./../ListView"),i=a("../../Core/MVC/Collection"),j=a("./headerTemplate.html"),k=a("./selectedAttrTemplate.html"),l=e.View.extend({className:"unstyled",defaults:{ItemView:g,ListView:h,groupClassName:"nav nav-tabs nav-stacked",selectable:!1,showSelected:!1,selected:function(){return!1},disabled:function(){return!1},filter:function(){return!0}},events:{},initialize:function(){var a=this;return e.View.prototype.initialize.apply(this,arguments),this.childViews=[],this.groups={},this.collection=this.collection||new i,this.listenTo(this.collection,"add",function(b){var c=a.options.groupBy,d=b.get(c);"undefined"!=typeof d?this._addToGroup(b.get(c),b):null}),this.listenTo(this.collection,"remove",function(b){var c=b.get(a.options.groupBy);"undefined"!=typeof c?this._removeFromGroup(b.get(a.options.groupBy),b):null}),this.listenTo(this.collection,"reset",function(){this._resetGroups()}),this._resetGroups(),this},_createGroup:function(a,b){"undefined"!=typeof this.groups[a]&&this._removeGroup(a);var c=new i(b);this.options.comparator&&(c.comparator=this.options.comparator,c.sort()),this.groups[a]=new this.options.ListView({className:this.options.groupClassName,ItemView:this.options.ItemView,itemOption:this.options.itemOption||null,selectable:this.options.selectable,template:this.options.template,collection:c,selected:this.options.selected,disabled:this.options.disabled,filter:this.options.filter}),this._renderGroup(a),this.childViews.push(this.groups[a]),this.listenTo(this.groups[a],"select",this._onItemSelect),this.listenTo(this.groups[a],"deselect",this._onItemDeselect)},_onItemSelect:function(a){"radio"==this.options.selectable&&d.each(this.groups,function(b){b.childViews.forEach(function(b){b.model!==a&&b.deselect()})}),this.trigger("select",a),this.options.showSelected&&this._renderSelectedAttr()},_onItemDeselect:function(a){this.trigger("deselect",a),this.options.showSelected&&this._renderSelectedAttr()},_removeGroup:function(a){"undefined"!=typeof this.groups[a]&&(this.groups[a].$el.prev().remove(),this.groups[a].remove(),this.childViews.splice(this.childViews.indexOf(this.groups[a]),1),delete this.groups[a])},_clearGroups:function(){var a=this;d.each(this.groups,function(b,c){a._removeGroup(c)})},_removeFromGroup:function(a,b){var c;"undefined"!=typeof this.groups[a]&&(c=this.groups[a].collection.findWhere(b.attributes),c?this.groups[a].collection.remove(c):null,0===this.groups[a].collection.length?this._removeGroup(a):null)},_addToGroup:function(a,b){"undefined"==typeof this.groups[a]&&this._createGroup(a),this.groups[a].collection.add(b,{merge:!0})},_resetGroups:function(){var a=this;this._clearGroups();var b=this.collection.groupBy(function(b){return b.get(a.options.groupBy)});d.each(b,function(b,c){a._createGroup(c,b)})},_renderGroup:function(a){var b=this.groups[a].render().$el;b[0].childNodes.length&&(this.$el.append(j({label:f.toTitleCase(a)})),this.$el.append(this.groups[a].$el))},_sortGroups:function(){var a=this.groups,b={},c=Object.keys(a).sort(function(b,c){return a[b]-a[c]});c.sort();for(var e in a)d.each(c,function(d,e){b[c[e]]=a[d]});this.groups=b},_sortGroupModels:function(a){var b=a.groups,c={};d.each(b,function(a,b){var e=[],f=[];d.each(a.collection.models,function(b,c){var b=a.collection.models[c].get("label");e.push([b,c,a.collection.models[c]])}),e.sort(),d.each(e,function(b,c){var d=e[c][2];a.collection.model[c]=d,f.push(d)}),c[b]=f,a.collection.models=f})},setFilter:function(a){this.options.filter=a,d.each(this.groups,function(b,c){c.options.filter=a})},render:function(){var a=this;return this.empty(),this._sortGroups(),this.options.showSelected&&this._renderSelectedAttr(),d.each(this.groups,function(b,c){a._renderGroup(c)}),this},getSelectedItems:function(){var a=[];return d.each(this.groups,function(b){a=a.concat(b.getSelectedItems())}),a},_renderSelectedAttr:function(){this.$el.find(".selected-attr-box").remove(),this.$el.prepend(k({label:this.options.selectedModel.getColorKeyLabel()}))}});b.exports=l}()},{"../../Core/MVC":6,"../../Core/MVC/Collection":2,"../../utilities":144,"./../ListItem":273,"./../ListView":275,"./headerTemplate.html":257,"./selectedAttrTemplate.html":259,jquery:103,underscore:458}],259:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="selected-attr-box">'+__e(label)+"</div>";return __p}},{lodash:456}],260:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<ul class="help-menu">\n    ',"true"===attributes.zdContactLink&&(__p+='\n    <li class="help-menu-item" id="contact-us">\n        <span>'+(null==(__t=attributes.zdContactVal)?"":__t)+"</span>\n    </li>\n    "),__p+="\n    ","true"===attributes.zdSupportLink&&(__p+='\n    <li class="help-menu-item" id="to-support">\n        <span>'+(null==(__t=attributes.zdSupportVal)?"":__t)+"</span>\n    </li>\n    "),__p+="\n    ",showQuickstartBtn&&"true"===attributes.zdQuickstartLink&&(__p+='\n    <li class="help-menu-item" id="show-quickstart">\n        <span>'+(null==(__t=attributes.zdQuickstartVal)?"":__t)+"</span>\n    </li>\n    "),__p+="\n</ul>\n";return __p}},{lodash:456}],261:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("../../models/Branding"),g=a("../../utilities"),h=a("Zenbox"),i=a("bootbox"),j=e.Events,k=a("./../Quickstart"),l=a("./../../components/settings"),m=a("../../views/ModalWarning"),n=a("./helpMenuTemplate.html"),o=e.View.extend({template:n,className:"zd-help-menu-wrapper",initialize:function(a){var b=this;e.View.prototype.initialize.apply(this,arguments),this.options=c.extend({},this.options,a),this.quickstart=new k({parent:this.options.mainView$El}),this.childViews.push(this.quickstart),this.brandingModel=this.brandingModel||new f,this.brandingModel.fetch({async:!0}).done(function(){b.render()})},events:{"click #contact-us":"toggleZenbox","click #to-support":"redirectToSupport","click #show-quickstart":"showQuickstart"},render:function(){var a=l.user?l.user.roles.indexOf("supervisor")>=0:Zoomdata.pageData.user.roles.indexOf("supervisor")>=0,b=l.user?l.user.roles.indexOf("admin")>=0:Zoomdata.pageData.user.roles.indexOf("admin")>=0,c=this;return this.$el.html(c.template({showQuickstartBtn:!a||b&&a,attributes:c.brandingModel.toJSON()})),this.delegateEvents(),this},initZenbox:function(){function a(){var a=c("#zenbox_container"),b=a.find(".zenbox_header"),d=a.find("#zenbox_body"),e=c(window).height(),f=e-2*b.height();d.css({minHeight:f})}if("undefined"!=typeof h){h.init({dropboxID:"20309938",url:"https://zoomdata.zendesk.com",tabTooltip:"Support",tabImageURL:"https://p6.zdassets.com/external/zenbox/images/tab_support.png",tabColor:"black",tabPosition:"Left",hide_tab:!0}),h.show(),a();var b=d.debounce(a,450);c(window).on("resize",b)}},toggleZenbox:function(a){a&&a.preventDefault();var b=this.brandingModel.get("customMessage"),c=this.brandingModel.get("url");b?i.dialog(b,[{label:"Confirm","class":"btn-primary"}]):c?g.mode()===g.MODE.NATIVE?window.open(c,"_blank"):desktopOpen(c,"_blank"):g.mode()===g.MODE.NATIVE?window.open("https://zoomdata.zendesk.com","_system"):this.initZenbox()},redirectToSupport:function(){var a=window.open("http://zoomdata.zendesk.com/");a.focus()},showQuickstart:function(){var a=this;if(window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),"undefined"==typeof this.options.mainView$El||location.hash.length>0)this.notification=new m({title:"You will be redirected to main page.",description:"If you leave now, your changes will be lost.",background:"#000000",opacity:.8,handlers:[{label:"Stay Here",callback:function(){a.notification.hideModal()}},{label:"Leave Section",callback:function(){a.quickstart.updateUserPreferences(!0).done(function(){a.notification.hideModal(),location.href=location.origin+"/zoomdata/visualization"})},"class":"btn-action warning-leave-btn"}]}),this.notification.showup();else{var b=this.options.mainView$El.find(".zd-home-header"),c=b.find(".quickstart-wrapper").length>0;c||(b.append(this.quickstart.render().$el),j.trigger("quickstart:show",this.options.mainView$El))
}}});b.exports=o}()},{"../../Core/MVC":6,"../../models/Branding":110,"../../utilities":144,"../../views/ModalWarning":298,"./../../components/settings":55,"./../Quickstart":319,"./helpMenuTemplate.html":260,Zenbox:108,bootbox:455,jquery:103,underscore:458}],262:[function(a,b){!function(){"use strict";var c="Favorites",d=a("jquery"),e=a("underscore"),f=a("../../Core/MVC"),g=f.Events,h=a("../../utilities"),i=a("./../ListView"),j=a("./../SortingBy"),k=a("../../collections/Dashboards"),l=a("../../collections/Sources"),m=a("./../VisualizationItem"),n=a("./../SourceItem"),o=a("./../SidePaneControl"),p=a("./../Quickstart"),q=a("./../../collections/UserPreferences"),r=a("./../../collections/Connections"),s=a("./homeTemplate.html"),t=a("./viewAllTemplate.html"),u=a("./visualizationItemTemplate.html"),v=a("./sourceItemTemplate.html"),w=i.extend({render:function(a){a=d.extend({},this.options.sortbyOptions,a);var b=a&&a.sortby?a:null,c=b?b.nextblock:null;return!c&&this.empty(),b?this.sortCollection(b):this.sortCollection(),this.searchBox?this.$el.prepend(this.searchBox.render().$el):null,this._renderItems(c),this},_renderItems:function(a){var b=this,c=this.collection.models,d=b.options.sortbyOptions,f=d&&d.limitShowCount?d.limitShowCount:null,g=f&&a?f+a:null;!a&&this._removeItems(),this.searchBox&&(c=this.collection.search(this.options.search,this.searchBox.model.toJSON())),e.each(e.filter(c,this.options.filter),function(c,d){f&&!a&&d>=f||f&&a&&(f-1>=d||d>=g)||b._renderItem(c)}),a&&f&&(d.limitShowCount=c.length>=g?g:c.length)}}),x=m.extend({className:"carousel-area-snapshot",tagName:"div",events:{click:"_onClick"},initialize:function(){return m.prototype.initialize.apply(this,arguments),this.options.template=u,this},render:function(){return m.prototype.render.apply(this,arguments),this.$el.addClass("loading"),this.$loader=this.$el.find(".loader"),this.$time=this.$el.find(".carousel-area-snapshot-time"),this.model.get("layout")&&this.$el.find("img").attr("href","visualization#"+this.model.get("id")),this.getVisualizationScreen(),this},_onClick:function(a){var b=d(a.target).closest(".carousel-area-snapshot");this.zoomInto(b,!this.model.get("layout"))},zoomInto:function(a,b){function c(){var a=e.model.get("viewsCount");e.model.set({viewsCount:a+=1},{silent:!0}),b?e.goToVisualization(e.model):(e.model.saveViewCount(),document.location.href=e.$el.find("img").attr("href")),d("#transferEffect").remove()}var e=this,f=350,g=a.clone(),h=d(".zd-main-header"),i=a.closest(".zd-home"),j=a.closest(".zd-home-content"),k=a.find("img"),l=a.find("img").attr("src"),m=(a.position(),a.offset());this.model.set({lastAccessed:(new Date).getTime()}),d("#transferEffect").remove(),j.fadeOut(f,function(){j.empty()});var n=k.width()/a.width()*100,o=k.height()/a.height()*100;d('<style id="transferEffect" type="text/css">.zoomin-transfer {                     background-image: url('+l+");                     background-size: "+n+"% "+o+"%;                 }</style>").appendTo("body"),i.append(g.css({top:i.scrollTop()+m.top-h.height(),left:m.left,position:"absolute"})),g.effect("transfer",{to:i,className:"zoomin-transfer"},f,function(){g.remove(),c()}),e.model.has("sourceId")||e.model.set({sourceId:e.model.collection.sourceId})},goToVisualization:function(a){o.prototype.goToVisualization(a,arguments)},getVisualizationScreen:function(){var a=window.URL||window.webkitURL,b=(window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder,new XMLHttpRequest),c=this.model.get("sourceId"),d=this.model.get("visId"),e=this.model.get("id"),f=this.model.get("layout"),g=this;b.onload=function(){if(200===b.status){var c=b.getResponseHeader("Last-Modified"),d=b.response;g.$el.find("img").attr("src",a.createObjectURL(d)),g.setLastTakenScreenTime(c),g.hideLoader()}},c&&d?(b.open("GET","service/screenshot/"+c+"/"+d),b.responseType="blob",b.send()):d&&!c?(b.open("GET","service/screenshot/"+this.model.getSourceId()+"/"+d),b.responseType="blob",b.send()):e&&f&&(b.open("GET","service/screenshot/"+e),b.responseType="blob",b.send(),g.model.visualizations.length>1&&g.$el.addClass("favorites"))},hideLoader:function(){this.$el.removeClass("loading"),this.$loader.hide()},setLastTakenScreenTime:function(a){if(a){var b=a.split(",")[1],b=new Date(b),c=new Date,d=c-b,e=new Date(d),f="",g=Math.floor(d/1e3/60/1440),h=e.getUTCHours(),i=e.getUTCMinutes(),j=e.getUTCSeconds();if(g>0)return f+=g+"d ",f+=h+"h ago",void this.$time.text(f);if(h>0)return f+=h+"h ",f+=i+"m ago",void this.$time.text(f);if(i>0)return f+=i+"m ",f+=j+"s ago",void this.$time.text(f);if(j>0)return f+=j+"s ago",void this.$time.text(f)}}}),y=n.extend({className:"zd-carousel-area-sourceItem",tagName:"section",events:{},initialize:function(a){function b(){var a=c._detectItemsForScreen();c.limitShowCount<a?(c.visualizations=null,c.limitShowCount=a,c.render()):c.calculateElementWidth(),c.checkSectionOverflow()}var c=this;return n.prototype.initialize.apply(this,arguments),this.options=d.extend({},a,this.options),this.model=this.options.model,this.options.template=v,this.limitShowCount=this._detectItemsForScreen(),this._resizeCallback=e.debounce(b,400),d(window).on("resize",this._resizeCallback),this.listenTo(this.model.collection,"source-items:view",this.calculateElementWidth),this.stopListening(this.model,"change",this.render),this},calculateElementWidth:function(a){var b=Math.round(this._detectItemsForScreen()/2),c=314*b;a?(a.$header().addClass("centered").width(c),a.$content().addClass("view-all centered").width(c)):this.$el.width(c)},checkSectionOverflow:function(){var a=this._detectItemsForScreen(),b=this.$el.find(".carousel-area-view-all-link");a>=this.model.visualizations.models.length?b.hide():b.show()},render:function(){return n.prototype.render.apply(this,arguments),this.showVisualizations(),this.calculateElementWidth(),this.delegateEvents(),this},detectVisInfo:function(){var a=this,b=this.model.id;this.model.visualizations.bootstrap().done(function(){e.each(a.model.visualizations.models,function(a){a.set({sourceId:b,lastModified:a.get("lastAccessed")})}),a.checkSectionOverflow()})},showVisualizations:function(){var a=this.model.get("name")===c;a?null:this.detectVisInfo(),this.visualizations=this.visualizations||new i({className:"zd-carousel-area-snapshot-container",tagName:"section",collection:this.model.visualizations,ItemView:x,filter:function(a){return a.get("enabled")},sortbyOptions:{sortby:"Name",ascending:!0,limitShowCount:this.limitShowCount}}),this.$el.append(this.visualizations.render().$el),a&&(this.stopListening(g,"bookmark:add bookmark:delete"),this.listenTo(g,"bookmark:add bookmark:delete",this._updateBookmarkCollection),this.checkSectionOverflow())},_detectItemsForScreen:function(){var a=314,b=54,c=window.innerWidth,d=2*Math.round((c-b)/a-.5);return d>1?d:2},_updateBookmarkCollection:function(a,b){var c=this,d=a.get("id"),e=this.model.visualizations.findWhere({id:d});e&&b?this.model.visualizations.remove(e):b||c.model.visualizations.models.push(a),this.render()}}),z=f.View.extend({className:"zd-home",template:s,defaults:{},initialize:function(a){return a.connections?(this.connections=a.connections,delete a.connections):this.connections=new r,a.sourceCollection?(this.sourceCollection=new l(a.sourceCollection,{connections:this.connections,lightweight:!0}),delete a.sourceCollection):this.sourceCollection=new l([],{connections:this.connections,lightweight:!0}),a.bookmarks?(this.bookmarks=a.bookmarks,delete a.bookmarks):this.bookmarks=new k([],{lightweight:!0}),this.options=d.extend({},a,this.options),this.userPreferences=new q,this.quickstartView=new p({parent:this.$el}),f.View.prototype.initialize.apply(this,arguments),this.model=new f.Model,this.sortingBy=new j,this},goHome:function(){var a=this;return this.bookmarks.bootstrap().done(function(){a.sourceCollection.bootstrap().done(function(){a.showHomeCollection()})}),this},render:function(){var a=this;return this.$el.html(this.template()),this.viewingSource=null,this.sourceCollection._bootstrapped&&this.showHomeCollection(),this.$backButton().click(function(){a.backToSources()}),this.$el.scroll(function(b){a.appendNextBlock(b)}),this.listenTo(this.sortingBy,"change:sortby",function(){a.viewingSource.set("sortingBy",a.sortingBy.model.toJSON()),a.selectSourceViewAll(a.viewingSource)}),this},$backButton:function(){return this.$(".backButton")},$header:function(){return this.$(".zd-home-header")},$content:function(){return this.$(".zd-home-content")},concatSourcesAndBookmarks:function(){this.sourceCollection.findWhere({name:c})||(this.bookmarksModel=this.bookmarksModel||new f.Model({name:c,enabled:!0}),e.each(this.bookmarks.models,function(a){a.set({enabled:!0},{silent:!0})}),this.bookmarksModel.visualizations=this.bookmarks,this.sourceCollection.add(this.bookmarksModel))},addConnectionToSources:function(){var a=this.sourceCollection,b=this.connections.groupBy(function(a){return a.get("id")});a.each(function(a){var c=a.get("storageConfiguration");if(c){var d=b[c.connectionId];c&&d&&(a.connection=d[0])}})},showHomeCollection:function(){var a=this;if(h.MODE.NATIVE!==h.mode()&&this.concatSourcesAndBookmarks(),this.addConnectionToSources(),this.listView=this.listView||new w({className:"zd-carousel-home",collection:this.sourceCollection,ItemView:y,filter:function(b){return a.options.sourceId?b.get("id")===a.options.sourceId:b.get("enabled")},sortOpened:c,sortbyOptions:{sortby:"Popularity",ascending:!0,limitShowCount:10}}),this.$content().empty(),this.$content().append(this.listView.render().$el),this.options.sourceId){var b=this.sourceCollection.get(this.options.sourceId);this.selectSourceViewAll(b)}this.userPreferences.fetch().done(function(){a.quickstartModel=a.userPreferences.get("showQuickstart"),(!a.quickstartModel||JSON.parse(a.quickstartModel.get("value"))&&a.options.quickstartShow)&&a.$header().append(a.quickstartView.render().$el)}),g.trigger("activate:menuItem"),this.listenToOnce(g,"viewAll",a.selectSourceViewAll)},selectSourceViewAll:function(a){var b=this;if(a)this.viewingSource=a||this.viewingSource;else if(this.viewingSource=b.bookmarksModel||b.sourceCollection.findWhere({name:c}),!this.viewingSource&&!this.bookmarks.isBootstrapped())return void this.bookmarks.bootstrap().done(function(){b.concatSourcesAndBookmarks(),b.selectSourceViewAll(b.bookmarksModel)});var d=new y({model:this.viewingSource}),e=this.viewingSource.get("sortingBy");d.model.visualizations.bootstrap(),e&&this.sortingBy.model.set({sortby:e.sortby,ascending:e.ascending});var f=new i({className:"zd-carousel-home",collection:d.model.visualizations,ItemView:x,filter:function(a){return a.get("enabled")},sortbyOptions:{sortby:this.sortingBy.model.get("sortby"),ascending:this.sortingBy.model.get("ascending")}});d.model.set({sourceIcon:"images/"+d.detectIconType().type_image}),this.$backButton().show(),this.$header().addClass("view-all"),this.$header().html(t({attributes:d.model.attributes,FAVORITES:c})),this.$header().append(this.sortingBy.render().$el),this.$content().empty(),this.$content().append(f.render().$el),this.$el.scrollTop(0),this.$el.off("scroll"),this.applyClickEvents(this.$el),this.$el.find(".zd-carousel-home").width(d._detectItemsForScreen()/2*314),this.sourceCollection.trigger("source-items:view",this)},applyClickEvents:function(a){a.find(".itemDetailsIcon").on("click",function(){a.find(".itemDetails").slideToggle()}),this.options.sourceId&&a.find(".backButton").off("click").on("click",function(){window.location="admin.html#sources"}),this.stopListening(g,"goHome"),this.listenToOnce(g,"goHome",this.backToSources)},backToSources:function(){this.$header().removeClass("view-all"),this.$backButton().off("click"),this.stopListening(g,"goHome"),this.stopListening(this.sortingBy,"change:sortby"),this.render()},appendNextBlock:function(a){var b=a.target;if(b.clientHeight+b.scrollTop>=b.scrollHeight){var c={nextblock:10};this.$content().append(this.listView.render(c).$el)}}});b.exports=z}()},{"../../Core/MVC":6,"../../collections/Dashboards":13,"../../collections/Sources":30,"../../utilities":144,"./../../collections/Connections":12,"./../../collections/UserPreferences":32,"./../ListView":275,"./../Quickstart":319,"./../SidePaneControl":340,"./../SortingBy":348,"./../SourceItem":354,"./../VisualizationItem":382,"./homeTemplate.html":263,"./sourceItemTemplate.html":265,"./viewAllTemplate.html":266,"./visualizationItemTemplate.html":267,jquery:103,underscore:458}],263:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="backButton" style="display: none">\n    <a href="#"><span class="zd icon back"></span> Back</a> \n</div>\n<div class="zd-home-header"></div> \n<div class="zd-home-content"></div> ';return __p}},{lodash:456}],264:[function(a,b){b.exports=a("./Home")},{"./Home":262}],265:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<header class="zd-carousel-area-header">\n    <div class="carousel-area-header-leftcontent">\n        <h2>\n            <div class="source-icon-container"> \n                ',__p+="Favorites"===name?'\n                    <div class="zd icon bookmark"></div> \n                ':'\n                    <img data-role="sourceIcon"> \n                ',__p+='\n            </div>  \n            <div class="title">'+__e(name)+'</div>\n        </h2>\n        <div class="source-info-icon fontIcon" style="display: none;">\n            ',description&&(__p+='\n            <i title="Details" class="itemDetailsIcon zd icon info"></i>\n            '),__p+='\n        </div>\n    </div>\n    <a class="carousel-area-view-all-link" href="#details/'+(null==(__t=id||"bookmarks")?"":__t)+'">View All »</a>\n</header>\n<div class="itemDetails" style="display: none;">\n    '+__e(description)+"\n</div> ";return __p}},{lodash:456}],266:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<header class="zd-carousel-area-header">\n    <div class="carousel-area-header-leftcontent">\n        <h2>\n            <div class="source-icon-container">\n                ',__p+="Favorites"===attributes.name?'\n                    <div class="zd icon bookmark"></div> \n                ':'\n                    <img data-role="sourceIcon" src="'+(null==(__t=attributes.sourceIcon)?"":__t)+'"> \n                ',__p+='\n            </div>  \n            <div class="title">'+__e(attributes.name)+'</div>\n        </h2>\n        <div class="source-info-icon fontIcon" style="display:none;" >\n             ',attributes.description&&(__p+='\n             <i title="Details" class="itemDetailsIcon zd icon info"></i>\n            '),__p+='\n        </div>\n    </div>\n</header>\n<div class="itemDetails" style="display: none;">\n    '+__e(attributes.description)+"\n</div> ";return __p}},{lodash:456}],267:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="carousel-area-snapshot-title">'+__e(attributes.name)+'</div>\n<div class="carousel-area-snapshot-time"></div>\n<div class="loader" aria-hidden="true">\n    <div class="spinner"></div>\n    <div class="text">Loading</div>\n</div>\n<div class="screen">\n    <img title="'+(null==(__t=attributes.name)?"":__t)+'" alt="'+(null==(__t=attributes.name)?"":__t)+'" id="visIcon">\n</div>';return __p}},{lodash:456}],268:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC")),e=a("./infoTemplate.html"),f=d.View.extend({className:"info-view",events:{'click button[value="save"]':"_onSave","input input":"showButtons","keypress textarea":"showButtons"},template:e,initialize:function(){d.View.prototype.initialize.apply(this,arguments)},render:function(){var a=this.options.config,b=a.source,c=b.variables,d=c["Visualization Name"];return d&&0!==d.length||(d=this.options.getDefaultTemplate(a.type)),this.$el.append(this.template({name:d,description:c["Visualization Description"],sourceName:b.sourceName,visualizationType:a.type})),this.$name=this.$el.find("#vis-name"),this.$description=this.$el.find("#vis-description"),this.$saveButton=this.$el.find("button[value='save']"),this.$saveButton.hide(),this},showButtons:function(){this.$saveButton.show()},_onCancel:function(){var a=this.options.config,b=a.source,c=b.variables;this.$name.val(c["Visualization Name"]),this.$description.val(c["Visualization Description"]),this.onCancel()},_onSave:function(){var a=this.options.config,b=a.source,c=b.variables;c["Visualization Name"]=this.$name.val(),c["Visualization Description"]=this.$description.val(),this.onSave()},onCancel:c.noop,onSave:c.noop});b.exports=f}()},{"../../Core/MVC":6,"./infoTemplate.html":269,jquery:103,underscore:458}],269:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<ul class="nav nav-tabs nav-stacked info-view">	\n    <li><legend>NAME</legend></li>	\n<li>	\n    <form><input id="vis-name" type="textfield" value="'+(null==(__t=name)?"":__t)+'"/></form>	\n</li>	\n<li><legend>DESCRIPTION</legend></li>	\n<li>	\n    <form>\n        <textarea id="vis-description" type="textarea" value="'+(null==(__t=description)?"":__t)+'" placeholder="Enter Description Here">'+__e(description)+'</textarea>\n    </form>	\n</li>	\n<li><legend>DATA SOURCE</legend></li>	\n<li><p class="data-source-name">'+__e(sourceName)+'</p></li>\n<li><legend>VISUALIZATION TYPE</legend></li>	\n<li class="vis-type">	\n    <div class="thumbnail vis-icon '+(null==(__t=visualizationType.toLocaleLowerCase())?"":__t)+'"/> \n    <span>'+__e(visualizationType)+'</span>\n</li>	\n</ul>	\n<div class="buttons">	\n    <button class="zd btn btn-success btn-block" value="save">Save</button>	\n</div>';return __p}},{lodash:456}],270:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC/main")),e=d.View,f=a("./inlineRenameInputTemplate.html"),g=(d.Events,e.extend({defaults:{inputClass:"inline-rename-input",textArea:!1},template:f,events:{'focusout input[type="text"]':"_onFocusOut",'keypress input[type="text"]':"_onKeyPressed","focusout textarea":"_onFocusOut","keypress textarea":"_onKeyPressed"},initialize:function(a){a=a||{},a.value&&(this.value=a.value,delete a.value),a.targetElement&&(this.$targetElement=a.targetElement,delete a.targetElement),e.prototype.initialize.apply(this,arguments),this._onRender()},getValue:function(){return this.$('input[type="text"]').val()},render:function(){return this.$el.html(this.template({value:this.value,inputClass:this.options.inputClass})),this.$targetElement.before(this.$el).detach(),this.$('input[type="text"]').focus(),this},restoreChanges:function(a){a&&this.$targetElement.text(a),this.$el.before(this.$targetElement).detach(),this.destroy()},destroy:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove()},_onRender:function(){this.onRender()},_onFocusOut:function(a){this.onFocusOut(a)},_onKeyPressed:function(a){this.onKeyPressed(a)},onFocusOut:c.noop,onKeyPressed:c.noop,onRender:c.noop}));b.exports=g}()},{"../../Core/MVC/main":6,"./inlineRenameInputTemplate.html":272,jquery:103,underscore:458}],271:[function(a,b){b.exports=a("./InlineRenameView")},{"./InlineRenameView":270}],272:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="name-input">\n    <input type="text" value="'+(null==(__t=value)?"":__t)+'" class="'+(null==(__t=inputClass)?"":__t)+' name-change-input" required>\n</div>\n';return __p}},{lodash:456}],273:[function(a,b){!function(){"use strict";var c=(a("jquery"),a("underscore")),d=a("../../Core/MVC"),e=d.View,f=d.Model,g=(d.Events,a("./listItemTemplate.html"));b.exports=e.extend({tagName:"li",className:"zd-list-item",preventClickPropagation:!0,model:f,events:{click:"_onClick"},defaults:{template:g,selectedClass:"zd-item-selected",selectable:!1},initialize:function(a){this.selected=!!a.selected,delete a.selected,this.disabled=!!a.disabled,delete a.disabled,this.selectable=a.selectable,delete a.selectable,e.prototype.initialize.apply(this,arguments),this.$el.data("itemView",this),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.$el,b=this.options.template;return a.html(b({attributes:this.model.attributes,index:this.model.index,_:c})),this.selected?this.renderSelected():this.renderDeselected(),this.options.hide_disabled&&this.$el.css("display",this.disabled?"none":"block"),this.$el.toggleClass("disabled-list-item",this.disabled),this.delegateEvents(),this},renderSelected:function(){var a=this.$el,b=this.options.selectedClass;return a.hasClass(b)||a.addClass(b),this},renderDeselected:function(){var a=this.$el,b=this.options.selectedClass;return a.hasClass(b)&&a.removeClass(b),this},select:function(){var a=this;this.selected||this.trigger("select",function(){a.selected=!0,a.renderSelected()})},deselect:function(){var a=this;this.selected&&this.trigger("deselect",function(){a.selected=!1,a.renderDeselected()})},_onClick:function(){var a=this.selectable,b=this.disabled;return a&&!b&&(this.selected?"radio"!==a&&this.deselect():this.select()),this.preventClickPropagation?!1:void 0}})}()},{"../../Core/MVC":6,"./listItemTemplate.html":274,jquery:103,underscore:458}],274:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<table class="table table-striped">\n    <tr>\n        <td>Item No</td>\n        <td>'+__e(index)+"</td>\n    </tr>\n    ",_.each(_.keys(attributes),function(a){__p+="\n    <tr>\n        <td>"+__e(a)+"</td>\n        <td>"+__e(attributes[a])+"</td>\n    </tr>\n    "}),__p+="\n</table> ";return __p}},{lodash:456}],275:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=c.noop,f=a("../../Core/MVC/View"),g=a("../../Core/MVC/Collection"),h=a("./../ListItem"),i=a("./../SearchBox"),j=d.template('            <span class="zd-loader">Loading...</span>         ');b.exports=f.extend({tagName:"ul",className:"unstyled",defaults:{loaderTemplate:j,search:!1,sortable:!1,selectable:!1,sortOptions:{tolerance:"pointer"},sortbyOptions:null,sortOpened:!1,selected:function(){return!1},disabled:function(){return!1},filter:function(){return!0},ItemView:h,selectAll:!1},events:{sortstop:"onSortstop",sortreceive:"onSortreceive",sortremove:"onSortremove"},initialize:function(){return f.prototype.initialize.apply(this,arguments),this.collection=this.collection||new g,this.selected=[],this.selectAllItem=this.options.selectAll?new this.options.ItemView({selectAll:!0}):null,this.removeListeners(),this.applyListeners(),this.options.sortable&&this.$el.sortable(this.options.sortOptions),this.options.search!==!1&&(this.searchBox=new i,this.listenTo(this.searchBox,"search",this._renderItems)),this},applyListeners:function(){this.listenTo(this.collection,"request:collection",this._showLoader),this.listenTo(this.collection,"remove reset sync:collection",this.render),this.listenTo(this.collection,"add",this._onAddItem),this.selectAllItem&&this.listenTo(this.selectAllItem.model,"change",this._selectAll)},removeListeners:function(){this.stopListening(this.collection,"request:collection"),this.stopListening(this.collection,"remove reset sync:collection"),this.stopListening(this.collection,"add"),this.selectAllItem&&this.selectAllItem.model.off("change")},getItemByModel:function(a){var b=this.childViews,c=null;return d.each(b,function(b){b.model==a&&(c=b)}),c},_resize:function(){d.each(this.childViews,function(a){a._resize&&a._resize()})},getSelectedItems:function(){return this.selected},sortCollection:function(a){function b(a,b){d.each(a.models,function(c,d){var f=c.get("name");if(b&&b.indexOf(f)>=0){var g=a.models.splice(d,1);a.models.unshift(g[0])}else if(f===e.options.sortOpened){var g=a.models.splice(d,1);a.models.unshift(g[0])}})}{var c,e=this,f=this.collection.comparator,g=a&&a.sortby,h=a&&a.ascending;a&&a.limitShowCount?a.limitShowCount:null}if(a){if("Name"===g||"Filter Name"===g)if(f)this.collection.sort();else{var c=d.sortBy(this.collection.models,function(a){return a.get("name")?a.get("name").toLowerCase():""});a&&!a.ascending&&c.reverse(),this.collection.models=c}else"Author"===g?(c=d.sortBy(this.collection.models,function(b){var c=(b.get("userName")||"").toLowerCase();return a&&a.topValue===b.get("userName")&&(c=" "+c),a&&!a.ascending?c=d.map(c.split(""),function(a){return String.fromCharCode(-a.charCodeAt(0))}):c}),this.collection.models=c):"Last Used"===g?(c=d.sortBy(this.collection.models,function(a){var b=a.get("lastAccessed")||a.get("lastModified");return h?-b:b}),this.collection.models=c):"Popularity"===g?(c=d.sortBy(this.collection.models,function(a){return h?-a.get("viewsCount"):a.get("viewsCount")}),this.collection.models=c):"Type"===g?(c=d.sortBy(this.collection.models,function(a){return a.get("type")}),this.collection.models=h?c:c.reverse()):"function"==typeof g&&(c=d.sortBy(this.collection.models,g),this.collection.models=h?c:c.reverse());this.options.sortOpened&&("string"==typeof this.options.sortOpened?b(this.collection):b(this.collection,this.options.openedSources)),this.collection.findWhere({selectAll:!0})&&(this.collection.models=d.sortBy(c,function(a){return a.get("selectAll")}))}},onSortstop:function(){this.sortCollection()},onSortreceive:function(a,b){var c=b.item,d=c.data("itemView"),e=d.model;this.collection.add(e,{silent:!0}),this.sortCollection(),this.collection.trigger("add")},onSortremove:function(a,b){var c=b.item,d=c.data("itemView"),e=d.model;this.collection.remove(e,{silent:!0}),this.childViews.splice(this.childViews.indexOf(d),1)},_onAddItem:function(a){return!a||this.searchBox&&!a.matchesSearch(this.options.search,this.searchBox.model.toJSON())?!1:(this._renderItem(a),!1)},_renderItem:function(a){var b=this.selected,d=b.indexOf(a),e=this.options.selectable,f=this.options.selected(a),g=this.options.disabled(a),h=c.extend({},this.options.itemOption,{model:a,template:this.options.template,user:this.options.user,selectable:e,selected:f,disabled:g});f&&(-1==d&&this.selected.push(a),"radio"==e&&b.length>1&&(this.selected.splice(this.selected.length-1,1),h.selected=!1));var i=new this.options.ItemView(h);this.sources&&i.model.set("sources",this.sources),this.$el.append(i.render().$el),this.childViews.push(i),this.listenTo(i,"select",this._onItemSelect(i)),this.listenTo(i,"deselect",this._onItemDeselect(i))},_renderItems:function(){var a=this,b=this.collection.models,c=a.options.sortbyOptions,e=c&&c.limitShowCount?c.limitShowCount:null;this._removeItems(),this.searchBox&&(b=this.collection.search(this.options.search,this.searchBox.model.toJSON())),d.each(d.filter(b,this.options.filter),function(b,c){e&&c>=e||a._renderItem(b)}),this.options.sortable&&this.$el.sortable("refresh"),this.renderSelectAll(b),this._resize()},_removeItems:function(){this._removeChildViews()},_onItemSelect:function(a){function b(b){var e=a.model,h=g.indexOf(e);-1==h&&g.push(e),"radio"==f&&d.forEach(function(b){b!==a&&b.deselect()}),b(),c.renderSelectAll(),c.trigger("select",e)}var c=this,d=this.childViews,f=this.options.selectable,g=this.selected;return f?b:e},_onItemDeselect:function(a){function b(b){var d=a.model,e=f.indexOf(d);-1!==e&&f.splice(e,1),b(),c.renderSelectAll(),c.trigger("deselect",d)}var c=this,d=this.options.selectable,f=this.selected;return d?b:e},render:function(a){a=c.extend({},this.options.sortbyOptions,a);var b=this.options.sortbyOptions||a&&a.sortby?a:null;return this.empty(),b?this.sortCollection(b):this.sortCollection(),this.searchBox&&this.$el.prepend(this.searchBox.render().$el),this._renderItems(),this},_showLoader:function(){this.empty(),this.$el.html(this.options.loaderTemplate())},renderSelectAll:function(a){var b=this,c=!!this.$el.parent().length,d=0,e=!0;this.selectAllItem&&(a=a||this.collection.models,c?a.forEach(function(a,c){var f=b.childViews[c];f&&f.$el.is(":visible")&&(d+=1,e=e&&!!a.get("selected"))}):e=!1,this.selectAllItem.model.set({selected:e},{silent:!0}),a.length&&(this.$el.prepend(this.selectAllItem.render().$el),!d&&c?this.selectAllItem.$el.hide():this.selectAllItem.$el.show()))},_selectAll:function(){var a=this,b=this.collection.models,c=this.selectAllItem.model.get("selected");this.searchBox&&(b=this.collection.search(this.options.search,this.searchBox.model.toJSON())),b.forEach(function(b){var d=a.getItemByModel(b);d&&d.$el.is(":visible")&&b.get("selected")!==c&&d.select()}),this.collection.trigger("change")},remove:function(){f.prototype.remove.apply(this,arguments),this.searchBox&&this.searchBox.remove()},deselectAll:function(){d.each(this.childViews,function(a){a.selected=!1})}})}()},{"../../Core/MVC/Collection":2,"../../Core/MVC/View":5,"./../ListItem":273,"./../SearchBox":326,jquery:103,underscore:458}],276:[function(a,b){!function(){var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=e.View,g=e.Events,h=a("../../utilities"),i=a("../../models/Branding"),j=a("./../../visualizationControls/SearchControl/index.js"),k=a("./../SidePaneControl"),l=a("./../HelpMenu"),m=(a("velocity-animate"),a("../../controls")),n=a("./mainMenuTemplate.html"),o=a("./userInfoTemplate.html"),p=a("./adminMenuTemplate.html"),q=f.extend({tagName:"a",defaults:{target:"_self",href:"#",label:"Link",pointer:!1},initialize:function(a){return a=a||{},this.options=c.extend({},this.defaults,a),this},render:function(a){return a=a||{},this.$el.attr("href",a.href||this.options.href),this.$el.attr("title",a.title||this.options.title||this.options.label),this.$el.attr("target",a.target||this.options.target),this.options.icon&&this.$el.prepend('<div class="zd icon '+this.options.icon+'"></div>&nbsp;'),this.$el.html(this.options.fontIcon?'<span class="fontIcon">'+this.options.fontIcon+"</span>":a.label||this.options.label),this}}),r=f.extend({tagName:"li",defaults:{},initialize:function(a){this.childViews=[],a=a||{},this.options=c.extend({},this.defaults,a),this.link=new q(this.options),this.childViews.push(this.link),this.listenTo(this.model,"change sync",this.render)},render:function(){return this.$el.append(this.link.render().$el),this.$pointer&&this.setPointer(),this},setPointer:function(){this.$pointer=c('<div class="pointer-down"></div>'),this.$el.find(".pointer-down").remove(),this.$el.append(this.$pointer.hide()),this.options.pointer&&this.$pointer.show()},applyEvents:function(a,b){var c=this;this.listenToOnce(g,"admin-control:clicked sidepane:show",function(d){d!=c.el&&c.deactivate(a,b)})},activate:function(a,b){this.setPointer(),this.$el.addClass("active").siblings(".active").removeClass("active"),this.$pointer.show(),this.$el.find(a).show(),g.trigger("admin-control:clicked",this.el),this.applyEvents(a,b),this.trigger("menu-item:open",this)},deactivate:function(a,b){this.$el.removeClass("active"),this.$pointer.remove(),this.$el.find(a).remove(),c(".main-menu").find(b).remove(),this.trigger("menu-item:close",this)},setActiveLink:function(a){if(a&&!a.target)c(a).addClass("active").siblings(".active").removeClass("active"),this.hideSettingsMenu();else if(a&&a.target){var b=c(a.target);b.parent().parent().find("li.active").removeClass("active").removeClass("current"),b.parent().addClass("active"),this.$pointer&&this.options.pointer?this.$pointer.show():this.setPointer(!0),this.hideSettingsMenu()
}else this.$el.parent().find("li.active").removeClass("active"),this.$el.addClass("active"),this.$pointer&&this.options.pointer?this.$pointer.show():this.setPointer(!0)},hideSettingsMenu:function(){g.trigger("dialog:show")}}),s=(r.extend({className:"dropdown",initialize:function(){return r.prototype.initialize.apply(this,arguments),this.link.$el.addClass("dropdown-toggle"),this},render:function(){var a=this;return this.$el.append(this.link.render().$el),this.link.$el.append('&nbsp;<b class="caret"></b>'),this.link.$el.attr("data-toggle","dropdown"),this.$dropdown=c('<ul class="dropdown-menu"></ul>'),d.each(this.items,function(b){b.model=a.model;var c=new r(b);a.$dropdown.append(c.render().$el),a.childViews.push(c)}),this.$el.append(this.$dropdown),this}}),{custom:["Favorites","Home","Slider","Search","Help","UserInfo"],user:["Favorites","Home","Slider","Search","Help","UserInfo"],admin:["Favorites","Settings","Home","Slider","Sources","Studios","Users","Preferences","Search","Help","UserInfo"],supervisor:["Accounts","Customize","LdapConfig","Advanced","Help","UserInfo"],ROLE_MANAGE_SOME_SOURCES:["Settings","Sources"],ROLE_MANAGE_ALL_SOURCES:["Settings","Sources"],ROLE_CREATE_SOURCES:["Settings","Sources"]}),t={Home:r.extend({className:"admin-control",defaults:{className:"icon home",href:"visualization#",label:"Home",icon:"home",fontIcon:".",pointer:!0},events:{click:"goHome"},render:function(){var a=this;return this.$el.append(this.link.render({label:this.model.get("account")}).$el),this.setPointer(),this.listenToOnce(g,"activate:menuItem",function(){a.options.mainMenu.selectItem("Home")}),this},goHome:function(){g.trigger("goHome admin-control:clicked"),this.activate()}}),Accounts:r.extend({defaults:{className:"accounts",href:"admin.html#accounts",label:"Accounts",pointer:!0},events:{click:"setActiveLink"}}),Customize:r.extend({defaults:{className:"customize",href:"admin.html#customize",label:"Customize UI",pointer:!0},events:{click:"setActiveLink"}}),LdapConfig:r.extend({defaults:{className:"ldap-settings",href:"admin.html#ldap",label:"Security",pointer:!0},events:{click:"setActiveLink"}}),Advanced:r.extend({defaults:{className:"advanced",href:"admin.html#advanced",label:"Advanced",pointer:!0},events:{click:"setActiveLink"}}),Preferences:r.extend({defaults:{className:"users",href:"admin.html#preferences",label:"Preferences"},events:{click:"setActiveLink"}}),Users:r.extend({defaults:{className:"users",href:"admin.html#users",label:"Users & Groups"},events:{click:"setActiveLink"}}),Sources:r.extend({defaults:{className:"users",href:"admin.html#sources",label:"Sources"},events:{click:"setActiveLink"}}),Connections:r.extend({defaults:{className:"connections",href:"admin.html#connections",label:"Connections"},events:{click:"setActiveLink"}}),Search:j.extend({tagName:"li",defaults:{}}),UserInfo:r.extend({className:"admin-control",template:o,defaults:{className:"icon userinfo",href:null,title:"User Info",fontIcon:"D"},events:{"click a.userinfo":"toggleInfo","click #logout-btn":"logout"},initialize:function(a){this.version=a.version||{},r.prototype.initialize.apply(this,arguments);var b=c(".navbar-inner");return this.$background=c('<div class="zd-userinfo-background"></div>'),this.$background.css({width:b.width()+"px",height:c(document).height()-b.height()-20+"px",position:"absolute",top:b.height()+"px",right:"0","z-index":"2"}),this.model.set({version:this.version.version,revision:this.version.revision}),this},toggleInfo:function(){var a=this,b=this.$el.hasClass("active"),d=this.model.isDemoUser()?"Home":"Logout",e=new i(window.Zoomdata.pageData&&window.Zoomdata.pageData.branding?window.Zoomdata.pageData.branding:null);e.bootstrap({success:function(){var f=e.get("terms"),g=e.get("copyright");g?"On"===g?g="©2014 Zoomdata, Inc. All Rights Reserved.":"Off"===g&&(g=""):g="",f=""===f?'<a href="http://www.zoomdata.com/terms" target="_blank">Terms of Service</a>':"Off"!==f?'<a href="'+f+'" target="_blank">Terms of Service</a>':"",b?(a.deactivate(".zd-userinfo",".zd-userinfo-background"),a.trigger("menu-item:close",a)):(a.$el.append(a.template({label:d,name:a.model.get("name"),version:a.model.get("version"),revision:a.model.get("revision"),copyright:g,terms:f})),a.activate(".zd-userinfo",".zd-userinfo-background"),c(".main-menu").append(a.$background),a.$background.one("click",function(){c(a).remove(),a.deactivate(".zd-userinfo",".zd-userinfo-background")}),a.trigger("menu-item:open",a))}})},logout:function(){h.turnOffPrompt(),this.model.isDemoUser()?location.href="/zoomdata/visualization":c.ajax({type:"POST",url:"logout"}).success(function(){location.href="/zoomdata/login"}).fail(function(a){console.error(a)})}}),Help:r.extend({className:"admin-control",defaults:{className:"icon help",href:"#",title:"Help",target:"_system",label:"",fontIcon:"C",pointer:!0},events:{click:"toggle"},initialize:function(a){r.prototype.initialize.apply(this,arguments),this.options=c.extend({},a,this.options),this.helpMenu=new l({mainView$El:this.options.main})},toggle:function(a){var b=this.$el.hasClass("active"),d=this;b?this.deactivate(".zd-help-menu-wrapper",".zd-settings-background"):(this.$el.append(this.helpMenu.render().$el).hide().velocity("fadeIn",{duration:100}),this.$background=c('<div class="zd-settings-background"></div>'),this.$background.css({width:c(document).width(),height:c(document).height()-92,position:"absolute",top:36,left:0,zIndex:1}),c(".main-menu").append(this.$background),this.activate(".zd-help-menu-wrapper",".zd-settings-background"),this.$background.off("click mousewheel").on("click mousewheel",function(){d.deactivate(".zd-help-menu-wrapper",".zd-settings-background")})),a.preventDefault()}}),Studios:r.extend({defaults:{className:"users",href:"admin.html#visualizations",label:"Visualization Studio"},events:{click:"setActiveLink"}}),Settings:r.extend({className:"admin-control",defaults:{className:"icon settings",href:null,title:"Settings",fontIcon:"B"},events:{"click a.settings":"toggleSettings"},initialize:function(a){var b=this;return r.prototype.initialize.apply(this,arguments),this.options=c.extend({},a,this.options),this.listenTo(g,"dialog:show",function(){b.toggleSettings("hide")}),this.$background=c('<div class="zd-settings-background"></div>'),this.$background.css({width:c(document).width(),height:c(document).height()-92,position:"absolute",top:72,left:0,"z-index":2054}),this},toggleSettings:function(a){var b=this.$el.hasClass("active");if("hide"===a&&this.adminMenu&&this.adminMenu.active&&this.deactivate(".zd-settings",".zd-settings-background"),"hide"!==a||b){var c=this.adminMenu||new v({user:this.model}),d=window.location,e=this;b?(this.deactivate(".zd-settings",".zd-settings-background"),c.active=!1):(this.$el.append(c.render().$el),c.active=!0,d.pathname.match("admin.html")||(this.$el.append(this.$background),this.$background.one("click mousewheel",function(a){var b=a.originalEvent.wheelDelta,c=e.options.main.find("div.zd-home");b&&c.is(":visible")&&c.scrollTop(Math.abs(b)),e.deactivate(".zd-settings",".zd-settings-background")})),this.activate(".zd-settings",".zd-settings-background")),this.adminMenu=c}}}),Favorites:k,Slider:f.extend({tagName:"li",className:"menu-item-slider",defaults:{minScaleGap:.2,minScaleLimit:.1},initialize:function(){this.zoomable=null,f.prototype.initialize.apply(this,arguments),this.slider=new m.Slider({orientation:"horizontal"}),this.childViews.push(this.slider),this.listenTo(this.slider,"slide:stop",this._onSlideStop),this.listenTo(g,"zoomable:enabled",this._onZoomabledEnabled),this.listenTo(g,"zoomable:disabled",this._onZoomabledDisabled),this.disable()},_onSlideStop:function(a){var b,c,d,e=this,f=this.options.minScaleGap,g=this.options.minScaleLimit,h=this.slider.min(),i=this.slider.max(),j=(a-h)/(i-h);null!==this.zoomable&&(b=Math.max(this.zoomable.getMinScale()-f,g),c=this.zoomable.getMaxScale(),d=Math.max(g,j*(c-b)+b),this.zoomable.zoom(d,function(){var a=e.zoomable.getMinScale();a>d?(e.zoomable.setMinScale(d),e.zoomable.refresh()):e._onZoomableTransform(e.zoomable)}))},_onZoomableTransform:function(a){var b=this.options.minScaleGap,c=this.options.minScaleLimit,d=a.getScale(),e=Math.max(a.getMinScale()-b,c),f=a.getMaxScale(),g=(d-e)/(f-e),h=this.slider.min(),i=this.slider.max();this.slider.value(Math.max(0,g*(i-h)+h))},_onZoomabledEnabled:function(a){this.zoomable&&this.zoomable!==a&&this.disable(),this.zoomable=a,this.enable(),this._onZoomableTransform(this.zoomable)},_onZoomabledDisabled:function(){this.disable(),this.zoomable=null},render:function(){return this.$el.html(this.slider.render().$el),this},enable:function(){return this.$el.show(),this.listenTo(this.zoomable,"transform:end",this._onZoomableTransform),this},disable:function(){return this.$el.hide(),this.stopListening(this.zoomable,"transform:end",this._onZoomableTransform),this}})},u=f.extend({template:n,className:"main-menu",defaults:{role:"user"},initialize:function(a){var b=this;this.childViews=[],a=a||{},this.version=a.version,delete a.version,this.user=a.user,delete a.user,this.activeItemName=null,this.options=c.extend({},this.defaults,a),this.listenTo(g,"switch:section",function(){"use strict";b.setActiveItem(null)})},leftItems:function(){return this.$(".nav.pull-left")},rightItems:function(){return this.$(".nav.pull-right")},openItem:function(a){d.each(this.childViews,function(b){b.$el.removeClass("current"),b instanceof t[a]&&b.$el.children().click()})},selectItem:function(a){var b=this;b.activeItem=null,d.each(this.childViews,function(c){c.$el.removeClass("current"),a&&c instanceof t[a]?(c.$el.addClass("current"),c.setActiveLink(),b.activeItem=c):a||c.$el.removeClass("active")})},setActiveItem:function(a){this.activeItemName=a,this.selectItem(a)},refreshActiveItem:function(){var a=this.leftItems().find(".active").length;this.activeItem&&0===a?this.activeItem.$el.addClass("active").removeClass("highlight"):this.activeItem&&a>1&&this.activeItem.$el.removeClass("active").addClass("highlight")},render:function(){var a=this;this.$el.html(this.template());var b=a.user.get("roles");b=b.concat(a.user.get("groupRoles")),-1!=b.indexOf("supervisor")&&c(".branding").attr("href","admin.html#");var e=[];for(var f in b)b.hasOwnProperty(f)&&d.each(s[b[f]],function(c){var d;if(t[c]&&-1===e.indexOf(c)){switch(e.push(c),d=new t[c]({model:a.user,dashboards:a.options.dashboards,sources:a.options.sources,main:a.options.mainView$El,version:a.version,mainMenu:a}),c){case"Favorites":case"Settings":case"Home":case"Accounts":case"Customize":case"LdapConfig":case"Advanced":case"Slider":-1!=["ROLE_MANAGE_SOME_SOURCES","ROLE_MANAGE_ALL_SOURCES","ROLE_CREATE_SOURCES"].indexOf(b[f])&&"Settings"===c?d.render().$el.insertAfter(a.leftItems().find(".admin-control:first-child")):a.leftItems().append(d.render().$el);break;case"Search":case"UserInfo":case"LogInOut":case"Help":a.rightItems().append(d.render().$el)}a.listenTo(d,"menu-item:open menu-item:close",a.refreshActiveItem),a.childViews.push(d)}});return this.selectItem(this.activeItemName),this}}),v=u.extend({className:"admin-menu",template:p,initialize:function(){u.prototype.initialize.apply(this,arguments);var a=this,b=["Sources","Connections","Studios","Users","Preferences"];return this.user.bootstrap().done(function(){var c=a.user.get("roles");c=c.concat(a.user.get("groupRoles")),a.childViews=[];var e=[];for(var f in c)c.hasOwnProperty(f)&&d.each(s[c[f]],function(c){if(t[c]&&b.indexOf(c)>=0&&-1===e.indexOf(c)){var d=new t[c]({model:a.user});e.push(c),a.leftItems().append(d.render().$el),a.childViews.push(d),a.detectFirstOpened(d)}})}),c(window).on("resize",d.debounce(function(){a.resize()},300)),this},render:function(){var a=this;return this.$el.html(this.template()),this.resize(),d.each(this.childViews,function(b){a.leftItems().append(b.render().$el),a.detectFirstOpened(b),b.$el.click(function(a){b.setActiveLink(a)})}),this},resize:function(){this.$el.find(".zd-settings").width(c(".main-menu").width())},detectFirstOpened:function(a){var b=window.location.hash.replace("#",""),c=a.options.href,d=c?c.substring(c.indexOf("#")+1):null;d&&b&&d===b&&a.setActiveLink(a.$el)}});b.exports=u}()},{"../../Core/MVC":6,"../../controls":66,"../../models/Branding":110,"../../utilities":144,"./../../visualizationControls/SearchControl/index.js":430,"./../HelpMenu":261,"./../SidePaneControl":340,"./adminMenuTemplate.html":277,"./mainMenuTemplate.html":279,"./userInfoTemplate.html":280,jquery:103,underscore:458,"velocity-animate":459}],277:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd navbar zd-settings">\n    <div class="navbar-inner">\n        <ul class="nav pull-left">\n        </ul>\n        <ul class="nav pull-right">\n        </ul>\n    </div>\n</div>';return __p}},{lodash:456}],278:[function(a,b){b.exports=a("./MainMenu.js")},{"./MainMenu.js":276}],279:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd navbar navbar-inverse">\n    <div class="navbar-inner">\n        <ul class="nav pull-left">\n        </ul>\n        <ul class="nav pull-center">\n            <a href="visualization#" class="branding">\n                <img src="./service/branding/images/headerLogo"></ul>\n        </a>\n        <ul class="nav pull-right">\n        </ul>\n    </div>\n</div>';return __p}},{lodash:456}],280:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd-userinfo">\n    <div class="header">\n        <b>'+__e(name)+'</b>\n    </div>\n    <div class="info">\n        <a class="logout" id="logout-btn">\n            <span>'+__e(label)+'</span>\n        </a>\n        <div class="revision server"><b>Zoomdata Server v. '+(null==(__t=version)?"":__t)+' </b></div>\n        <div class="revision">Rev. '+(null==(__t=revision)?"":__t)+'</div>\n        <div class="copyright">\n            <span>'+(null==(__t=copyright)?"":__t)+"</span><br>\n            <span>"+(null==(__t=terms)?"":__t)+"</span>\n        </div>\n    </div>\n</div>";return __p}},{lodash:456}],281:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC/View")),e=a("../../Core/MVC").Events,f=a("../../utilities");b.exports=d.extend({className:"zd-main",defaults:{},initialize:function(a){return d.prototype.initialize.apply(this,arguments),a=a||{},this.options=c.extend({},this.defaults,a),this.currentHeader=null,this.currentSection=null,this.currentFooter=null,this.$header=c('<header class="zd-main-header"></header>'),this.$section=c('<section class="zd-main-section"></section>'),this.$footer=c('<footer class="zd-main-footer"></footer>'),(f.mode()==f.MODE.WIDGET||f.mode()==f.MODE.EMBEDDED)&&(this.$header=null),this.$header&&this.$el.append(this.$header),this.$el.append(this.$section),this.$el.append(this.$footer),this},switchHeader:function(a){return this.currentHeader&&this.currentHeader.remove&&this.currentHeader.remove(),a instanceof d?(this.currentHeader=a,this.$header&&this.$header.html(this.currentHeader.el),this.render()):this.currentHeader=null,this.resize(),this},switchSection:function(a){return this.currentSection&&this.currentSection.remove&&this.currentSection.remove(),a instanceof d?(this.currentSection=a,this.$section.html(this.currentSection.el),this.render()):this.currentSection=null,this.resize(),e.trigger("switch:section",this.currentSection),this},switchFooter:function(a){return this.currentFooter&&this.currentFooter.remove&&this.currentFooter.remove(),a instanceof d?(this.currentFooter=a,this.$footer.html(this.currentFooter.el),this.render()):this.currentFooter=null,this.resize(),this},render:function(){return this.currentHeader&&this.currentHeader.render(),this.currentSection&&this.currentSection.render(),this.currentFooter&&this.currentFooter.render(),this.resize(),this},resize:function(){return this.$section.css({top:this.$header?this.$header.height():0,bottom:this.$footer.height()}),this},_removeChildViews:function(){d.prototype._removeChildViews.apply(this,arguments),this.currentHeader&&this.currentHeader.remove&&this.currentHeader.remove(),this.currentSection&&this.currentSection.remove&&this.currentSection.remove(),this.currentFooter&&this.currentFooter.remove&&this.currentFooter.remove()}})}()},{"../../Core/MVC":6,"../../Core/MVC/View":5,"../../utilities":144,jquery:103,underscore:458}],282:[function(a,b){"use strict";var c=(a("jquery"),a("underscore")),d=a("../../../Core/MVC/View"),e=a("./../MetricItem"),f=a("./groupTemplate.html"),g=d.extend({className:"metricGroup",template:f,defaults:{filter:function(){return!0}},events:{},initialize:function(a){if(!a.state)throw Error("options.state must be defined");return this.state=a.state,delete a.state,d.prototype.initialize.apply(this,arguments),this.name=a.name,this.items=a.metrics,this.selected=a.selected||{},this.listenTo(this,"update:disabled",this.updateDisabled),this.render(),this},select:function(a){this.trigger("select",a)},render:function(){var a=this,b=this.options.multiselect,d=this.template({label:"NONE"==this.name?"":this.name,multiselect:b});this.items=this.items.filter(this.options.filter),0===this.items.length&&(d=""),this.$el.html(d);var f=this.$el.find("ul.metricItems");return this.metrics=this.items.map(function(d){var f=null;f=a.selected instanceof Array?c.findWhere(a.selected,{name:d.get("name"),type:d.get("type")}):a.selected;var g=f&&f.name===d.get("name");return g&&d.set("func",f.func),new e({multiselect:b,metric:d,selected:g,selectedItem:f,$parentView:a.$el,state:a.state,sourceType:a.options.sourceType})}),this.metrics.forEach(function(b){f.append(b.render().$el),b.on("select",function(b){a.trigger("select",b)}),b.on("deselect",function(b){a.trigger("deselect",b)}),b.on("disable:metrics",function(b){a.trigger("disable:metrics",b)})}),this},updateDisabled:function(){this.metrics.forEach(function(a){a.render()})},remove:function(){this.metrics.forEach(function(a){a.off("select"),a.off("deselect")}),d.prototype.remove.apply(this,arguments)}});b.exports=g},{"../../../Core/MVC/View":5,"./../MetricItem":288,"./groupTemplate.html":283,jquery:103,underscore:458}],283:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<legend class="subhead">'+__e(label)+'</legend>\n<ul class="metricItems values-list '+(null==(__t=multiselect?"multiselect":"singleselect")?"":__t)+'"></ul>';return __p}},{lodash:456}],284:[function(a,b){b.exports=a("./Group")},{"./Group":282}],285:[function(a,b){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../../utilities"),f=a("../../../components/Vocabulary"),g=a("./../../../controls/index.js"),h=a("../../../Core/MVC/View"),i=e.isNumericAttributeType,j=a("./functionItemTemplate.html"),k=a("./functionsTemplate.html"),l=a("./metricFunctionTemplate.html"),m=h.extend({className:"functionList",fTemplate:k,functionItemTemplate:j,events:{"click .functionItem":"select"},initialize:function(a){if(!a.state)throw Error("options.state must be defined");return this.state=a.state,delete a.state,h.prototype.initialize.apply(this,arguments),this.selected=a.selected,this.render(),this},select:function(a){var b=a.target.textContent.toLowerCase();this.$el.find("li.functionItem.selected").removeClass("selected"),c(a.target).addClass("selected"),this.trigger("select",b.replace(" ","_"))},render:function(){var a=this,b=this.fTemplate({}),c=e.getFunctionsForMetric(this.state),d=a.selected.toLowerCase(),g="";d=d.replace(" ","_"),"count"===d&&(d="distinct_count"),this.$el.html(b),this.options.distinctCountEnabled&&c.push("distinct_count");var h=this.$el.find("ul.functions");return c.forEach(function(b){var c=f.text(b);g+=a.functionItemTemplate({label:c,selected:b===d?"selected":""})}),h.html(g),this}}),n=h.extend({className:"metricItem values-list-item",tagName:"li",functionTemplate:l,selectTemplate:'<div class="zd icon checkmark"></div>',events:{click:"toggle","click .metricFunction":"openFunctionList"},defaults:{multiselect:!1},initialize:function(a){if(!a.state)throw Error("options.state must be defined");return this.state=a.state,delete a.state,h.prototype.initialize.apply(this,arguments),this.data={name:a.metric.get("name"),label:a.metric.get("label"),type:a.metric.get("type"),selected:a.selected,func:this.getDefaultFunc(a.metric)},"count"===this.data.name&&(this.data.func=""),this.disabledMetric=this.checkDisabledMetric(this.options.metric),this},toggle:function(){var a=this.$el.hasClass("selected"),b=this.options.multiselect;a?b&&this.deselect():this.select()},deselect:function(){this.$el.removeClass("selected").find(".zd.icon.checkbox.radio>span").removeClass("selected"),this.trigger("deselect",this.data)},select:function(){var a=this.options.multiselect;return this.disabledMetric?void this.state.metrics.trigger("metric:unsupported",this.options.metric,{removeAll:!0}):(a||this.deselectAll(),this.$el.addClass("selected").find(".zd.icon.checkbox.radio>span").removeClass("selected").addClass("selected"),this.trigger("select",this.data),void(a&&"last_value"===this.data.func&&this.disableMultiMetrics()))},deselectAll:function(){this.$el.parent().parent().parent().find(".selected").removeClass("selected").find(".zd.icon.checkbox.radio>span").removeClass("selected")},openFunctionList:function(a){this._undockParentView();var b=this.options.metric,d=b.get("type");if(-1!==["ATTRIBUTE","TEXT"].indexOf(d))return!1;var e=this,f=new g.SmallPopup({customClass:"funcPalette",pointerWidth:"14"}),h=new m({selected:a.target.text,state:this.state,distinctCountEnabled:this.checkDistinctCountFunc(b)});f.render(h.$el),f.position({of:c(a.target),my:"left+15 center",at:"right center",collision:"flipfit flipfit",pointerTop:10}),h.on("select",function(a){e.data.func=a,e.render(),f.hide(),f.closeModal(),e.select(),e.$el.closest(".modal").fadeOut(300)}),a.stopPropagation()},_undockParentView:function(){this.options.$parentView.closest(".metricPalette.docked").removeClass("docked")},render:function(){var a=this.options.metric.get("type"),b=-1!==["ATTRIBUTE","TEXT"].indexOf(a),c="distinct_count"===this.data.func&&b,g=this.functionTemplate({func:f.text(this.data.func),disabled:c?" disabled":""}),h=d.template(this.selectTemplate,{selected:this.data.selected?" selected":""}),i='<div class="text">'+e.htmlEntities(this.data.label)+"</div>";return this.data.selected&&this.$el.addClass("selected"),this.$el.html(h),this.$el.append(i),"count"!==this.data.name&&"none"!==this.data.name&&"FORMULA"!==this.data.type&&this.$el.append(g),this.$el.attr("data-name",this.data.name),this.$el.attr("data-func",this.data.func),this.$el.attr("data-label",this.data.label),this.$el.attr("data-type",this.data.type),this.$el.attr("disabled",this.disabledMetric),this},disableMultiMetrics:function(){this.trigger("disable:metrics",this.data)},checkDisabledMetric:function(a){var b=!1,c=this.options.sourceType,d=this.options.selectedItem,e=this.state.isLastValueFunc(),f=this.state.metrics.findWhere({func:"distinct_count"}),g=-1!==["IMPALA","SQL"].indexOf(c),h=i(a.get("type"))&&"count"!==a.get("name")&&"Volume"!==a.get("label");return e&&(d&&"last_value"!==d.func||this.state.isMultiMetric()&&!d)&&(a.get("distinctCount")||h)&&(b=!0),f&&g&&d&&"distinct_count"!==d.func&&a.get("distinctCount")&&!h&&(b=!0),b},getDefaultFunc:function(a){function b(){var a,b=!1;return d.groupBy.models.forEach(function(c){a=c.get("sort"),b=b||!!a.func&&a.name!==f}),b}function c(a){a=a||{};var b=!1;return d.metrics.forEach(function(c){b=b||!!c.get("func")&&a.name!==c.get("name")}),b}var d=this.state,e=this.options.selectedItem,f=a.get("name"),g="avg",h="FORMULA"===a.get("type"),j=i(a.get("type"))&&"count"!==a.get("name")&&"Volume"!==a.get("label");return!a.get("func")||b()||h?a.get("distinctCount")&&!j?g="distinct_count":h&&(g="mvel"):(g=a.get("func").toLowerCase(),"last_value"!==g||e&&!c(e)||(g="avg")),g},checkDistinctCountFunc:function(a){var b=a.get("distinctCount"),c=this.options.selectedItem,d="IMPALA"===this.options.sourceType,e=this.state.metrics.findWhere({func:"distinct_count"});return e&&d&&c&&"distinct_count"!==c.func&&(b=!1),b}});b.exports=n},{"../../../Core/MVC/View":5,"../../../components/Vocabulary":54,"../../../utilities":144,"./../../../controls/index.js":66,"./functionItemTemplate.html":286,"./functionsTemplate.html":287,"./metricFunctionTemplate.html":289,jquery:103,underscore:458}],286:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<li class="functionItem '+(null==(__t=selected)?"":__t)+'">'+__e(label)+"</li>";return __p}},{lodash:456}],287:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<ul class="functions"></ul>';return __p}},{lodash:456}],288:[function(a,b){b.exports=a("./MetricItem")},{"./MetricItem":285}],289:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<a class="metricFunction'+(null==(__t=disabled)?"":__t)+'">'+__e(func)+"</a>";return __p}},{lodash:456}],290:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../utilities"),f=e.isNumericAttributeType,g=a("../../Core/MVC/Collection"),h=a("../../Core/MVC/View"),i=a("./Group"),j={COUNT_OF:"COUNT OF",NONE:"NONE"},k=h.extend({className:"metricPaletteContent",defaults:{multiselect:!1,filter:function(){return!0}},events:{},initialize:function(a){var b=a.currentItem;if(!a.state)throw Error("options.state must be defined");return this.state=a.state,delete a.state,h.prototype.initialize.apply(this,arguments),this.childViews=[],this.groups=[],this.selected=b,this.collection=this.collection||new g,this},_sortGroups:function(a){var b={},c=Object.keys(a).sort();return-1!==c.indexOf("NONE")&&(c.splice(c.indexOf("NONE"),1),c.unshift("NONE")),d.each(c,function(d,e){b[c[e]]=a[d]}),b},render:function(){function a(a){h||"count"!==a.name&&"none"!==a.name||g.$el.closest(".modal").fadeOut(300),g.trigger("select:metric",a)}function b(a){g.trigger("deselect:metric",a)}function e(){g.childViews.forEach(function(a){a.trigger("update:disabled")})}var g=this,h=this.options.multiselect,k=[];this.collection.models.forEach(function(a){var b=a.get("type"),c=a.get("distinctCount"),e=["COUNT OF","FORMULA","TIME"];d.contains(e,b)||"ATTRIBUTE"===b&&!c||k.push(a)}),this.collection.formulas.models.forEach(function(a){k.push(a)});var l=this.prepareMetricGroups(k),m=this.options.controller.source.get("type");for(var n in l)if(l.hasOwnProperty(n)&&(f(n)||n==j.NONE&&!h||n==j.COUNT_OF)){l[n].sort(function(a,b){return a.attributes.label>b.attributes.label});var o=new i({multiselect:h,name:n,metrics:l[n],selected:g.selected,filter:g.options.filter,sourceType:m,state:g.state});g.childViews.push(o),o.render().$el.appendTo(g.$el),g.listenTo(o,"select",a),g.listenTo(o,"deselect",b),g.listenTo(o,"disable:metrics",e)}return this.on("hide",function(){c(".zd-smallpopup.funcPalette").hide()}),this},prepareMetricGroups:function(a){var b=this,c=d.groupBy(a,function(a){var c=a.get("type"),d=a.get("distinctCount");return b.checkSupportedFunc(a),f(c)||d!==!0?c:j.COUNT_OF});return c=this._sortGroups(c)},checkSupportedFunc:function(a){var b=this.state.isMultiGroups(),c=this.state.isMultiMetric();"LAST_VALUE"===a.get("func")&&(b||c)&&(a.attributes.func="SUM")}});b.exports=k}()},{"../../Core/MVC/Collection":2,"../../Core/MVC/View":5,"../../utilities":144,"./Group":284,jquery:103,underscore:458}],291:[function(a,b){b.exports=a("./MetricPalette.js")},{"./MetricPalette.js":290}],292:[function(a,b){var c=a("jquery"),d=a("underscore"),e=a("../../utilities/transducers"),f=a("../GroupedListView"),g=a("../../collections/ObjectFields"),h=a("../MetricPickerItem"),i=a("../MetricPickerGroup"),j=e.map(function(a){return a.toJSON()}),k=e.filter(function(a){return a.isValidMetric()}),l=d.compose(k,j);b.exports=f.extend({defaults:d.extend({},f.prototype.defaults,{ItemView:h,ListView:i,selectable:"radio",groupBy:"type",groupClassName:"metricItems values-list"}),initialize:function(a){"use strict";var b;if(!a.fields)throw Error("options.fields must be defined");b=a.fields.transduce(l),delete a.fields,this.collection=new g(b),this.collection.map(function(b){var c=a.metrics.where({name:b.get("name")})[0];c&&b.set("func",c.get("func"))}),f.prototype.initialize.apply(this,arguments)},_renderGroup:function(a){"use strict";f.prototype._renderGroup.apply(this,arguments);var b=this.groups[a].el,d=c(b).prev("legend.subhead");"ATTRIBUTE"==a&&d.text("COUNT OF"),b.childNodes.length&&c([d[0],b]).wrapAll('<div class="metricGroup"></div>')}})},{"../../collections/ObjectFields":27,"../../utilities/transducers":149,"../GroupedListView":258,"../MetricPickerGroup":295,"../MetricPickerItem":297,jquery:103,underscore:458}],293:[function(a,b){b.exports=a("./MetricPicker")},{"./MetricPicker":292}],294:[function(a,b){var c=a("../ListView");b.exports=c.extend({render:function(){"use strict";c.prototype.render.apply(this,arguments);var a=this.options.selectable;switch(a){case"radio":this.$el.hasClass("singleselect")||this.$el.addClass("singleselect");break;case"checkbox":this.$el.hasClass("multiselect")||this.$el.addClass("multiselect")}return this}})},{"../ListView":275}],295:[function(a,b){b.exports=a("./MetricPickerGroup")},{"./MetricPickerGroup":294}],296:[function(a,b){var c=a("jquery"),d=a("underscore"),e=function(){},f=a("../../components/Vocabulary"),g=a("../../utilities/transducers"),h=g.append,i=g.transduce,j=g.map(function(a){return{func:a,label:f.text(a)}}),k=a("../../controls"),l=(a("../../Core/MVC/View"),a("../ListView")),m=a("../ListItem"),n=m.extend({tagName:"li",className:"functionItem",defaults:{template:d.template("<%- attributes.label %>"),selectedClass:"selected",selectable:"radio"}}),o=d.template('        <a class="metricFunction"><%- func %></a>    '),p=d.template('        <div class="zd icon checkmark"></div>        <div class="text"><%-attributes.label%></div>    '),q=a("../../Core/MVC/Collection");b.exports=m.extend({className:"metricItem values-list-item",events:d.extend({},m.prototype.events,{"click a.metricFunction":"_onFuncClick"}),defaults:d.extend({},m.prototype.defaults,{template:p,selectedClass:"selected"}),render:function(){m.prototype.render.apply(this,arguments);var a=this.model.get("func");return a&&"mvel"!==a.toLowerCase()&&"count"!==this.model.get("name")&&this.renderFuncPicker(),this},renderFuncPicker:function(){var a=this.model.get("func"),b=f.text(a.toLowerCase());return this.$func=c(o({func:b})),this.$el.append(this.$func),this},showFunctionList:function(){var a=this,b=this.model,d=b.getAvailableFuncs(),f=new q(i(j,h,d)),g=c('<div class="functionList"></div>'),m=new k.SmallPopup({customClass:"funcPalette",pointerWidth:"14",docked:!1}),o=new l({className:"functions",ItemView:n,selectable:"radio",selected:function(a){return a.get("func")==b.get("func")},collection:f});this.childViews.push(m),this.childViews.push(o),m.render(g.append(o.render().$el)).position({of:this.$func,my:"left+15 center",at:"right center",collision:"flipfit flipfit",pointerTop:10}),m.onHide=function(){a.stopListening(o,"select"),o.remove(),a.popChildView(o)},a.listenTo(o,"select",function(b){var c=b.get("func");m.hide(),a.popChildView(m),a.model.set("func",c),a.trigger("select",e)})},_onFuncClick:function(a){var b=this.model.get("type"),c="FORMULA"===b;return a.stopPropagation(),a.preventDefault(),c||this.showFunctionList(),console.log("Function: ",this.model.get("func")),!1}})},{"../../Core/MVC/Collection":2,"../../Core/MVC/View":5,"../../components/Vocabulary":54,"../../controls":66,"../../utilities/transducers":149,"../ListItem":273,"../ListView":275,jquery:103,underscore:458}],297:[function(a,b){b.exports=a("./MetricPickerItem")
},{"./MetricPickerItem":296}],298:[function(a,b){var c=a("jquery"),d=a("underscore"),e=a("bootbox"),f=a("../../Core/MVC/View"),g=a("./modelWarningTemplate.html");b.exports=f.extend({className:"zd-warning",template:g,initialize:function(a){return this.options=c.extend({},this.options,a),this.options.handlers&&d.each(this.options.handlers,function(a){a["class"]||(a["class"]="btn-action")}),this},render:function(){return this.$el.html(this.template({title:this.options.title||"",hideIcon:this.options.hideIcon,description:this.options.description})),this.delegateEvents(),this},showup:function(){this.bootbox=e.dialog(this.render().$el,this.options.handlers).addClass(this.className),this.options.background&&c(".modal-backdrop").css({background:this.options.background,opacity:this.options.opacity||1})},hideModal:function(){this.$el.hide(),c(".modal-backdrop").hide()}})},{"../../Core/MVC/View":5,"./modelWarningTemplate.html":299,bootbox:455,jquery:103,underscore:458}],299:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)title&&(__p+='\n	<div class="header"> '+__e(title)+" </div>\n"),__p+='\n<div class="warn" style="display: '+(null==(__t=hideIcon?"none":"")?"":__t)+'" >\n	<i class="zd icon warning"></i> <span>WARNING</span>\n</div>\n<div> '+(null==(__t=description)?"":__t)+" </div>";return __p}},{lodash:456}],300:[function(a,b){!function(){"use strict";var c=(a("underscore"),a("jquery")),d=a("../../Core/MVC/View"),e=a("./noDataIndicatorTemplate.html");b.exports=d.extend({template:e,defaults:{root:c("body")},initialize:function(a){this.settings=c.extend({},this.defaults,a),this.inside(),this.render(),this.hide()},inside:function(){this.$el.prependTo(this.settings.root)},render:function(){this.$el.append(this.template())},show:function(){this.$el.show()},hide:function(){this.$el.hide()}})}()},{"../../Core/MVC/View":5,"./noDataIndicatorTemplate.html":301,jquery:103,underscore:458}],301:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="data-message-layer no-data-message">\n    No Data for Selected Period\n</div>';return __p}},{lodash:456}],302:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC/View")),e=(a("velocity-animate"),4e3),f=a("./notificationsTemplate.html"),g=a("../../utilities"),h=d.extend({className:"zd-notification-popup",defaults:{type:null,autoHide:!0,timeout:e},events:{"click .close":"hide"},initialize:function(a){return this.options=c.extend({},this.options,this.defaults),this.options=c.extend({},this.options,a),this},render:function(){return this.options.removeAll&&c("body ."+this.className).remove(),this.$el.html(f({title:this.options.title,description:this.options.description})),this.options.type&&this.$el.addClass(this.options.type),this.onRender(),this.delegateEvents(),this},onRender:function(){var a=this;setTimeout(function(){a.setCssPosition()},10)},show:function(){var a=this;c("body").append(this.render().$el),this.options.autoHide&&(this.autoClose=setTimeout(function(){a.hide()},this.options.timeout))},hide:function(){var a=this;this.autoClose&&clearTimeout(this.autoClose),this.$el.velocity("fadeOut",{duration:300,complete:function(){a.setCssPosition(!0)}}),this.remove(),this.onHide()},onHide:function(){},setCssPosition:function(a){if(!this.options.removeAll){var b,d,e,f,g=c("."+this.className);(g.length>1||a)&&g.each(function(h,i){b=c(i),(h>0||a)&&(d=g.eq(h-1||0).height(),e=g.eq(h-1||0).position().top,f=20,0===h&&e>46&&(e=46,d=0,f=0),b.velocity({top:d+e+f},{duration:300}))})}}}),i=a("./sourceFinishNotificationTemplate.html"),j=d.extend({id:"source-finish-notification",events:{"click .open-visualizations":"switchToEditedSource"},initialize:function(a){var b=this;this.options=c.extend({},this.options,a),this.$content=c("#content"),this.$content.css({top:150}),c(window).on("hashchange",function(){b.hide()})},render:function(){var a=this.options.model.get("name"),b="The data source <i>"+g.htmlEntities(a)+"</i> has been saved.";return this.$el.html(i({notification:b,model:this.model.toJSON()})),c("body").css({position:"relative"}),this},switchToEditedSource:function(){window.location="visualization#details/"+this.model.get("id")},hide:function(){"none"!==this.$el.css("display")&&"#sources"!==window.location.hash&&(this.$el.remove(),this.$content.css({top:50}),c("body").css({position:""}))}});b.exports={Popup:h,SourceFinish:j}}()},{"../../Core/MVC/View":5,"../../utilities":144,"./notificationsTemplate.html":303,"./sourceFinishNotificationTemplate.html":304,jquery:103,underscore:458,"velocity-animate":459}],303:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd-notification-head">\n    <span>'+__e(title)+'</span>\n    <div class="zd icon close" title="Close"></div>\n</div>\n<div class="zd-notification-body">\n    <div class="zd-notification-icon"></div>\n    <div class="zd-notification-description">'+(null==(__t=description)?"":__t)+"</div>\n</div>";return __p}},{lodash:456}],304:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="source-finish-popup">\n    <div class="success-icon-wrap">\n        <i class="source-finish-icon success-icon fontIcon">9</i>\n    </div>\n    <div class="message-wrap">\n        <span class="source-finish-message">'+(null==(__t=notification)?"":__t)+"</span><br>\n        ",model.enabled&&(__p+='\n        <span class="open-visualizations"><span>See Visualizations</span> &raquo;</span>\n        '),__p+="\n    </div>\n</div>";return __p}},{lodash:456}],305:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=e.View,g=e.Model,h=e.Collection,i=a("../../models/Filter"),j=a("../../utilities/MetricFormatter"),k=g.extend({defaults:{value:"",selected:!1}}),l=e.Events,m=(h.extend({model:k,parse:function(a){var b=[];return a.forEach(function(a){var c=new k({value:a});b.push(c)}),b}}),a("./numericFilterTemplate.html")),n=a("./numericFilterDatarangeTemplate.html"),o=a("./numericFilterOperatorTemplate.html");b.exports=f.extend({className:"create-filter",min:null,max:null,step:null,from:null,to:null,val:null,operator:null,template:m,events:{"click button[value='applyFilter']":"applyFilter","click #datarange-operator-switch .btn":"onSegmentedControlChange","click #operator-switch .item":"onOperatorSelected","blur #range-from":"onRangeFromBlur","blur #range-to":"onRangeToBlur","input #range-from":"onRangeFromInput","input #range-to":"onRangeToInput","input #operator-value":"onOperatorInput","blur #operator-value":"onOperatorBlur","keypress #range-from":"_isNumberKey","keypress #range-to":"_isNumberKey","keypress #operator-value":"_isNumberKey"},initialize:function(){f.prototype.initialize.apply(this,arguments);var a={};this.metricFormatter=function(a){return new j(a)},this.options.filter?(a=d.clone(this.options.filter.attributes),this.model=new i({label:this.options.objectField.get("label"),path:a.path,value:d.clone(a.value),operation:a.operation,editable:!0})):this.model=new i({label:this.options.objectField.get("label"),path:this.options.objectField.get("name"),operation:"BETWEEN",value:[this.options.objectField.get("min"),this.options.objectField.get("max")],editable:!0}),this.isRange="BETWEEN"===this.model.get("operation"),this.min=this.options.objectField.get("min"),this.max=this.options.objectField.get("max"),this.step=Math.abs(this.max)<10&&Math.abs(this.min)<10?.01:1,this.isRange?(this.from=this.model.get("value")[0],this.to=this.model.get("value")[1],this.val=this.min,this.operator="EQUALS"):(this.from=this.min,this.to=this.max,this.val=this.model.get("value"),this.operator=this.model.get("operation"))},render:function(){var a=this.options.objectField.get("label"),b=this.min===this.max,d="ADD FILTER";return this.options.filter&&(d="EDIT FILTER"),this.$el.append(this.template({title:d,label:a,disabled:b})),this.$ul=c(this.$el.find("ul")),this.model.hasValue()?this.$("button[value='applyFilter']").prop("disabled",b):this.$("button[value='applyFilter']").prop("disabled",!0),this.isRange?this.showDataRange():this.showOperator(),this},remove:function(){this.$el.remove()},onSegmentedControlChange:function(a){var b=c(a.currentTarget);b.hasClass("selected")||(this.isRange=!this.isRange,this.isRange?this.showDataRange():this.showOperator())},onRangeFromBlur:function(a){var b=c(a.currentTarget),d=this.options.objectField.get("type"),e=this.metricFormatter(d).format(this.from);b.val(e).attr("title",e)},onRangeToBlur:function(a){var b=c(a.currentTarget),d=this.options.objectField.get("type"),e=this.metricFormatter(d).format(this.to);b.val(e).attr("title",e)},onRangeFromInput:function(a){var b=c(a.currentTarget),d=parseFloat(b.val().replace(/[$,]/g,""));isNaN(d)||(d>this.to?d=this.to-this.step:d<this.min&&(d=this.min),this.from=d,this.$el.find("#datarange-slider").slider({values:[this.from,this.to]}))},onRangeToInput:function(a){var b=c(a.currentTarget),d=parseFloat(b.val().replace(/[$,]/g,""));isNaN(d)||(d<this.from?d=this.from+this.step:d>this.max&&(d=this.max),this.to=d,this.$el.find("#datarange-slider").slider({values:[this.from,this.to]}))},showDataRange:function(){var a=this.min===this.max;this.$el.find("#show-operator").removeClass("active"),this.$el.find("#show-datarange").addClass("active"),this.$(".zd-tabbar-body").find(".values").remove(),this.$(".zd-tabbar-body").append(n({disabled:a}));var b=this,d=this.options.objectField.get("type"),e=function(){var a=b.metricFormatter(d).format(b.from),c=b.metricFormatter(d).format(b.to);b.$el.find("#range-from").attr({min:b.min,max:b.to-1,step:b.step,title:a}),b.$el.find("#range-from").val(a),b.$el.find("#range-to").attr({min:b.from+1,max:b.max,step:b.step,title:c}),b.$el.find("#range-to").val(c)},f=function(a,d){var f=c(d).offset(),g=f.left,h=f.left+c(d).width();a.pageX<g?(b.from=b.min,e()):a.pageX>h&&(b.to=b.max,e())};this.$el.find("#datarange-slider").slider({range:!0,min:this.min,max:this.max,step:this.step,values:[this.from,this.to],slide:function(a,c){b.from=c.values[0],b.to=c.values[1],f(a,this),e()},stop:function(a){var d=c(this).find("a.ui-slider-handle"),g=c(this).slider("values");b.from=g[0],b.to=g[1],d.eq(0).offset().left!==d.eq(1).offset().left&&f(a,this),e()}}),e()},onOperatorSelected:function(a){var b=c(a.currentTarget);b.hasClass("selected")||(this.$el.find("#operator-switch .item.selected").removeClass("selected"),b.addClass("selected"),this.operator=b.data("operation"))},onOperatorBlur:function(a){var b=c(a.currentTarget),d=parseFloat(b.val().replace("$",""));isNaN(d)?d=this.min:d<this.min?(d=this.min,b.val(d)):d>this.max&&(d=this.max,b.val(d)),this.val=d,b.val(this.val)},onOperatorInput:function(a){var b=c(a.currentTarget),d=b.val();"-"!==d&&"."!==d[d.length-1]&&(this.val=parseFloat(b.val().replace("$","")))},showOperator:function(){var a=this.options.objectField.get("type"),b=this.metricFormatter(a).format(this.val),c=this.min===this.max;this.$el.find("#show-datarange").removeClass("active"),this.$el.find("#show-operator").addClass("active"),this.$(".zd-tabbar-body").find(".values").remove(),this.$(".zd-tabbar-body").append(o({disabled:c})),this.$el.find(".operator-input").attr({min:this.min,max:this.max,step:this.step}),this.$el.find("#operator-switch .item").removeClass("selected"),this.$el.find("#operator-switch [data-operation='"+this.operator+"']").addClass("selected"),this.$el.find(".operator-input").val(b)},applyFilter:function(){this.model.set(this.isRange?{value:[this.from,this.to],operation:"BETWEEN"}:{value:this.val,operation:this.operator}),this.trigger("filter:apply",this.model),this.options.applyToAll&&l.trigger("visualization:filterAll",this.options.config.source.sourceId,{},this.model.attributes,{timestampField:this.options.state.get("timestampField"),timeTrendStep:this.options.state.get("timeTrendStep")})},_isNumberKey:function(a){var b=a.which?a.which:event.keyCode,d=45,e=46,f=c(a.target).val().replace(/\,/,""),g=parseFloat(f.replace("$",""));return b===d||b===e?!0:f&&"-"!==f&&"$"!==f?b>31&&(48>b||b>57)?!1:!isNaN(g):!(48>b||b>57)||36===b&&"$"!==f?!0:!1}})}()},{"../../Core/MVC":6,"../../models/Filter":117,"../../utilities/MetricFormatter":140,"./numericFilterDatarangeTemplate.html":306,"./numericFilterOperatorTemplate.html":307,"./numericFilterTemplate.html":308,jquery:103,underscore:458}],306:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="values"> \n    <div class="range-hint">Select the range for your filter</div>\n    <div class="operator-hint form-horizontal">\n        <div id="datarange-slider"></div> \n        <div class="control-group">\n            <label class="operator-label">\n                FROM<br /> \n                <input class="operator-input embed pull-right" type="text" id="range-from" step="0.01" '+(null==(__t=disabled?"disabled":"")?"":__t)+'/>\n            </label>\n            <label class="operator-label">\n                TO<br /> \n                <input class="operator-input embed pull-right" type="text" id="range-to" step="0.01" '+(null==(__t=disabled?"disabled":"")?"":__t)+"/>\n            </label>\n        </div>	\n    </div>	\n</div> ";return __p}},{lodash:456}],307:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="values"> \n    <div class="segmented-control multiple centered" id="operator-switch">	\n        <div class="item selected" id="operator-equal" data-operation="EQUALS">=\n        </div><div class="item" id="operator-greater-than-or-equal" data-operation="GE">≥\n        </div><div class="item" id="operator-greater" data-operation="GT">>\n        </div><div class="item" id="operator-less-than-or-equal" data-operation="LE">≤\n        </div><div class="item" id="operator-less" data-operation="LT"><\n        </div>	\n    </div>	\n    <div>	\n        <div class="operator-hint">Input a number for selected operator:</div>	\n        <input class="operator-input" id="operator-value" type="text" step="0.01" '+(null==(__t=disabled?"disabled":"")?"":__t)+"/>	\n    </div>	\n</div>	";return __p}},{lodash:456}],308:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<legend>Add Filter: </legend>\n<div class="buttons">\n    <button class="zd btn btn-success btn-block" value="applyFilter">Apply</button>\n</div>\n<div class="values-controls">\n    <div class="subhead dark">'+__e(label)+'</div>\n    <div class="zd-tabbar-head" id="datarange-operator-switch">\n        <div value="segment" class="zd btn btn-link active" id="show-datarange">Range</div>\n        <div value="segment" class="zd btn btn-link" id="show-operator">Operator</div>\n    </div>\n    <div class="zd-tabbar">\n        <div class="zd-tabbar-body">\n            <div class="values">\n                <div class="segmented-control multiple centered" id="operator-switch">\n                    <div class="left item selected" id="operator-equal">=</div>\n                    <div class="middle item" id="operator-greater-than-or-equal">≥</div>\n                    <div class="middle item" id="operator-greater">></div>\n                    <div class="middle item" id="operator-less-than-or-equal">≤</div>\n                    <div class="right item" id="operator-less"><</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';return __p}},{lodash:456}],309:[function(a,b){!function(){"use strict";var c=(a("jquery"),a("underscore"),a("../../models/Source")),d=a("./../ListItem"),e=a("./objectFieldItemTemplate.html"),f=d.extend({model:new c,className:"object-field",defaults:{template:e}});b.exports=f}()},{"../../models/Source":129,"./../ListItem":273,"./objectFieldItemTemplate.html":310,jquery:103,underscore:458}],310:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="object-field-container ">\n    <div title="'+(null==(__t=attributes.type.toLowerCase())?"":__t)+'" class="zd icon drag-icon '+(null==(__t=attributes.type.toLowerCase())?"":__t)+'"></div>\n    <div class="text">'+__e(attributes.label)+'</div>\n    <i class="zd icon right-chevron" style="display: none"></i>\n</div>';return __p}},{lodash:456}],311:[function(a,b){!function(){"use strict";var c=a("./../ListView/index.js"),d=c.extend({sortCollection:function(){}});b.exports=d}()},{"./../ListView/index.js":275}],312:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="palette-bottom-panel">\n    <button class="btn zd-button btn-success blue" value="apply">Apply</button>\n    <button class="btn zd-button btn-cancel" value="cancel">Cancel</button>\n</div>';return __p}},{lodash:456}],313:[function(a,b){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("../SortAttributeItem"),g=a("../../models/SortAttributeItem"),h=e.View,i=(e.Events,["MONEY","NUMBER","INTEGER","FORMULA"]),j=a("./OrderingPalette.html");b.exports=h.extend({className:"ordering-palette-wrap",template:j,events:{'click button[value="cancel"]':"revertToCurrent",'click button[value="apply"]':"applySorting"},render:function(){var a=this,b=this.model.groupBy.pluck("name"),c=-1===this.options.config.source.sourceFeatures.indexOf("LIVE_PLAYER"),e=this.model.options.fields.filter(function(a){var d=-1!==b.indexOf(a.name);return a.visible&&(-1!==i.indexOf(a.type)||!c&&a.distinctCount&&!d||c&&(a.distinctCount||d))});return this.$el.html(this.template()),this.fields=d.sortBy(e,function(a){return a.label}),this.sortAttributeViews=[],this.model.groupBy.forEach(function(b,c){a.renderGroupBySort(b,c)}),this.hideBottomButtons(),this},renderGroupBySort:function(a,b){var c,e=this,h=this.fields,i=this.model.groupBy.length>1,j=new g({sort:d.clone(a.get("sort")),limit:a.get("limit")}),k=e.model.groupBy.filter(function(b){return b.get("name")!==a.get("name")}),l=h.filter(function(b){var c=!!k.filter(function(a){return a.get("name")===b.name})[0];return"ATTRIBUTE"!==b.type||b.distinctCount&&!c||b.name===a.get("name")}),m="Sort By";i&&(m="GROUP "+(b+1)+": "+m),c=new f({title:m,model:j,fields:l,groupByName:a.get("name"),source:e.options.source,state:e.model,maxLimitLength:Math.floor(9/this.model.groupBy.length)}),e.sortAttributeViews.push(c),e.$el.append(c.render().$el),e.listenTo(j,"change",function(){e.showBottomButtons()})},sortChange:function(a,b){this.model.groupBy.at(b).set({sort:a.get("sort"),limit:a.get("limit")})},revertToCurrent:function(){this.onCancel()},applySorting:function(){var a=this;this.sortAttributeViews.forEach(function(b,c){a.sortChange(b.model,c)}),this.onApply()},showBottomButtons:function(){this.$el.find(".palette-bottom-panel").show()},hideBottomButtons:function(){this.$el.find(".palette-bottom-panel").hide()},onApply:c.noop,onCancel:c.noop,onChangeSortOrder:c.noop})},{"../../Core/MVC":6,"../../models/SortAttributeItem":127,"../SortAttributeItem":347,"./OrderingPalette.html":312,jquery:103,underscore:458}],314:[function(a,b){b.exports=a("./OrderingPalette")},{"./OrderingPalette":313}],315:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../collections/UserPreferences"),f=a("../../Core/MVC"),g=f.Events,h=a("../../models/UserPreference"),i=a("./../../components/settings"),j="https://zoomdata.zendesk.com/hc/en-us/",k="/zoomdata/files/Sample_Sales.csv",l=a("./quickStartTemplate.html"),m=a("./exploreVisSidebarTemplate.html"),n=a("./dashboardVisSidebarTemplate.html"),o=a("./connectDataSidebarTemplate.html"),p=f.View.extend({className:"quickstart-wrapper",template:l,initialize:function(a){function b(){var a=h.getVideoScreenSize();h.setVideoSize(a),h.calculateSidebarSize(a),h.$sideBarWrapper.show(),a&&h.calculateOverlayEls(a)}var h=this;f.View.prototype.initialize.apply(this,arguments),this.options=c.extend({},a,this.options),this._resizeCallback=d.debounce(b,400),this.userPreferences=new e,c(window).on("resize",function(){h.$sideBarWrapper&&(h.$sideBarWrapper.hide(),h._resizeCallback())}),g.unbind("quickstart:show"),this.listenTo(g,"quickstart:show",function(){h.updateUserPreferences(!0).done(function(a){"showQuickstart"===a.key&&"true"===a.value&&h.enableQuickstart()})})},render:function(){var a=!1;return this.currentUser=i.user,(-1!==this.currentUser.roles.indexOf("admin")||-1!==this.currentUser.roles.indexOf("custom")&&-1!==this.currentUser.groupRoles.indexOf("ROLE_CREATE_SOURCES"))&&(a=!0),this.$el.html(this.template({btnDisplayed:a})),this.$el.addClass("closed"),this.$youtubeContainer=this.$el.find("#qs-youtube-container"),this.$videoWrapper=this.$el.find(".youtube-video-wrapper"),this.$sideBarWrapper=this.$el.find(".sidebar-wrapper"),this.$buttonContainer=this.$el.find(".qs-button-container"),this.$qsHeader=this.$el.find(".qs-header"),this.$colorOverlay=this.$el.find(".video-color-overlay"),this.$spinner=this.$el.find(".loading-spinner"),this.$homeHeader=this.options.parent.find(".zd-home-header"),this.videoPlayer=this.$el.find("#video-player")[0],this.mp4source=this.$el.find("source.mp4"),this.webmSource=this.$el.find("source.webm"),this.enableQuickstart(),this},events:{"click .qs-hide-btn":"disableQuickstart","mousedown .qs-btn-wrap":"_onMouseDown","mouseup .qs-btn-wrap":"_onMouseUp"},_onMouseDown:function(a){var b=this.$activeBtn=c(a.currentTarget);b.hasClass("pushed")?(b.addClass("activating"),this.btnPushed=!0):(b.addClass("activating").siblings(".activating").removeClass("activating"),this.btnPushed=!1),this.$buttonContainer.off("mouseup").on("mouseup",this._onMouseUp())},_onMouseUp:function(){var a=this.$activeBtn;a.hasClass("activating")&&!this.btnPushed?(a.removeClass("activating").addClass("pushed").siblings(".pushed").removeClass("pushed"),this.quickstartStateController()):a.hasClass("activating")&&this.btnPushed&&(a.removeClass("pushed"),a.removeClass("activating"),this.btnPushed=!1,this.hideYoutubeContainer())},enableQuickstart:function(){var a=this;this.$el.removeClass("closed"),this.$homeHeader.addClass("zero-margin-top"),this.$el.slideDown(500,function(){a.$el.css({opacity:1})})},disableQuickstart:function(){var a=this,b=c(".help span");this.$el.children().velocity({opacity:0},{duration:300}),this.$el.velocity("slideUp",{duration:400,delay:400,begin:function(){b.addClass("spin-help-icon")},complete:function(){a.$homeHeader.removeClass("zero-margin-top")}}),this.updateUserPreferences(!1),window.setTimeout(function(){a.$el.remove(),b.removeClass("spin-help-icon")},1200)},updateUserPreferences:function(a){var b=c.Deferred();this.userPreferences.setUserId(i.user.id);var d=new h({key:"showQuickstart"});return d.set({value:a}),this.userPreferences.add(d,{merge:!0}),this.userPreferences.get("showQuickstart").save().success(function(a){console.warn("Quickstart Preferences Updated"),b.resolve(a)}).error(function(a,c){b.reject(a,c),console.error(c)}),b.promise()},quickstartStateController:function(){var a=this.$activeBtn.data("qsid"),b=["#6c655b","#3d656d","#684f48"],c=this;window.setTimeout(function(){c.$el.velocity({backgroundColor:"#5a5a5a"},{duration:.075}),c.$qsHeader.velocity({opacity:0,heigth:0},{duration:200}),c.showVideoContainer(c.getVideoScreenSize())},0),this.$colorOverlay.css({background:b[a-1],display:"none"}),this.loadQsVideo(a)},calculateOverlayEls:function(a){this.$colorOverlay.css({width:a.width,height:a.height});var b=a.width/100*10,c=b/2;this.$spinner.css({width:b,height:b,marginLeft:-c,marginTop:-c})},showVideoContainer:function(a){var b=this;this.$buttonContainer.addClass("opened"),this.sidebar&&this.sidebar.remove(),this.sidebar=new q({parentView:this}),this.$sideBarWrapper.html(this.sidebar.render().$el).hide(),this.$youtubeContainer.css({display:"block",width:a.width,height:a.height}),this.calculateSidebarSize(a),this.calculateOverlayEls(a),this.$buttonContainer.css({marginTop:10}),this.$videoWrapper.velocity({opacity:1},{duration:400,complete:function(){b.$videoWrapper.show()}}),this.$youtubeContainer.velocity({opacity:1},{duration:400}),window.setTimeout(function(){b.$sideBarWrapper.show(),b.$colorOverlay.show()},400)},loadQsVideo:function(a){var b=this.getVideoScreenSize(),d=null,e=this;this.$sideBarWrapper.hide(),c(this.videoPlayer).prop({width:b.width,height:b.height}),this.$colorOverlay.show(),1===a?(d="videos/change_a_viz_v4",this.sidebarTpl=m):2===a?(d="videos/build_a_dashboard_v3",this.sidebarTpl=n):3===a&&(d="videos/connect_your_data_v3",this.sidebarTpl=o),this.mp4source.attr("src",d+".mp4"),this.webmSource.attr("src",d+".webm"),this.videoPlayer.loop=!0,this.videoPlayer.volume=0,this.videoPlayer.load(),this.videoPlayer.play(),this.videoPlayer.onplay=function(){e.$colorOverlay.velocity("fadeOut",{duration:400})}},setVideoSize:function(a){c(this.videoPlayer).hide().attr({width:a.width,height:a.height}).show(),this.$youtubeContainer.css({width:a.width,height:a.height})},calculateSidebarSize:function(a){var b=((c(window).width()-a.width)/2,(a.height-this.$sideBarWrapper.height())/2),d=10,e=this.$el.find(".qs-container");this.$sideBarWrapper.css({right:0,top:b+this.$buttonContainer.height(),width:(e.width()-this.$youtubeContainer.width())/2-d})},hideYoutubeContainer:function(){var a=this;this.$buttonContainer.removeClass("opened"),this.$el.find(".qs-btn-wrap").removeClass("pushed"),this.$youtubeContainer.css({opacity:0}),window.setTimeout(function(){a.$youtubeContainer.css({height:0}),a.$sideBarWrapper.hide(),a.$el.velocity({backgroundColor:"#3eab52"},{duration:.075}),a.$buttonContainer.css({marginTop:"70px"}),a.$videoWrapper.css({opacity:0}).hide()},500),window.setTimeout(function(){a.$qsHeader.velocity({opacity:1}),a.videoPlayer.pause()},900),this.videoPlayer.pause()},getVideoScreenSize:function(){var a=16/9,b=c(window).height(),d=c(window).width(),e=d/100*15,f=d/100*15,g=188,h=100,i=!0,j=b-g-h,k=j*a;return d>k+e+f?(i=!1,console.log("doesn't in the width")):(k=d-e-f,j=k/a),{width:k,height:j}},destroy:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),f.View.prototype.remove.call(this)}}),q=f.View.extend({className:"quickstart-sidebar",initialize:function(a){f.View.prototype.initialize.apply(this,arguments),this.options=c.extend({},this.options,a)},render:function(){return this.$el.html(this.options.parentView.sidebarTpl({zendesk_url:j,csv_dl_link:k})),this}});b.exports=p}()},{"../../Core/MVC":6,"../../collections/UserPreferences":32,"../../models/UserPreference":135,"./../../components/settings":55,"./connectDataSidebarTemplate.html":316,"./dashboardVisSidebarTemplate.html":317,"./exploreVisSidebarTemplate.html":318,"./quickStartTemplate.html":320,jquery:103,underscore:458}],316:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="qs-sidebar sidebar-header">Further Reading</div>\n<span>&raquo; &nbsp;<a target="_blank" href="'+(null==(__t=zendesk_url)?"":__t)+'articles/200686066">Quickstart Guide</a></span><br>\n<span>&raquo; &nbsp;<a target="_blank" href="'+(null==(__t=zendesk_url)?"":__t)+'categories/200162227">Connect Your Data</a></span><br>\n<a target="_blank" href="'+(null==(__t=csv_dl_link)?"":__t)+'" class="thumblink csv-download"></a>\n<p>Download this<br><a target="_blank" href="'+(null==(__t=csv_dl_link)?"":__t)+'">Sample Data</a> to<br>try it yourself</a/>\n';return __p}},{lodash:456}],317:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="qs-sidebar sidebar-header">Further Reading</div>\n<span>&raquo; &nbsp;<a target="_blank" href="'+(null==(__t=zendesk_url)?"":__t)+'articles/202970713">Dashboards</a></span><br>\n<span>&raquo; &nbsp;<a target="_blank" href="'+(null==(__t=zendesk_url)?"":__t)+'articles/201126243">Visualizations 101</a></span>\n';return __p}},{lodash:456}],318:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="qs-sidebar sidebar-header">Further Reading</div>\n<span>&raquo; &nbsp;<a target="_blank" href="'+(null==(__t=zendesk_url)?"":__t)+'articles/200686066">Quickstart Guide</a></span><br>\n<span>&raquo; &nbsp;<a target="_blank" href="'+(null==(__t=zendesk_url)?"":__t)+'articles/201126243">Visualizations 101</a></span>\n';return __p}},{lodash:456}],319:[function(a,b){b.exports=a("./Quickstart")},{"./Quickstart":315}],320:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="qs-container">\n    <div class="qs-header"><span>Quickstart</span> - 60 Seconds to Big Data Visualizations</div>\n    <ol class="qs-button-container">\n        <li data-qsId="1" class="qs-btn-wrap">\n            <div class="qs-btn pushbutton-yellow">\n                <span>Explore a Visualization</span>\n            </div>\n        </li>\n        <li data-qsId="2" class="qs-btn-wrap">\n            <div class="qs-btn pushbutton-blue">\n                <span >Build a Dashboard</span>\n            </div>\n        </li>\n        ',btnDisplayed&&(__p+='\n        <li data-qsId="3" class="qs-btn-wrap">\n            <div class="qs-btn pushbutton-red">\n                <span >Connect Your Data</span>\n            </div>\n        </li>\n        '),__p+='\n    </ol>\n    <div class="qs-youtube-container" id="qs-youtube-container">\n        <div class="youtube-video-wrapper">\n            <div id="html5-video">\n                <video id="video-player" controls>\n                    <source type="video/mp4" class="mp4">\n                    <source type="video/webm" class="webm">\n                </video>\n            </div>\n        </div>\n        <div class="video-color-overlay">\n            <div class="loading-spinner"></div>\n        </div>\n    </div>\n    <div class="sidebar-wrapper"></div>\n    <div class="qs-hide-btn"><span class="fontIcon qs-xbox" >R</span> Hide Quickstart</div>\n</div>\n';return __p}},{lodash:456}],321:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../utilities"),f=a("../../Core/MVC/View"),g=a("./searchResultTemplate.html"),h=a("./keyValueTemplate.html");b.exports=f.extend({className:"record-details-view",template:g,events:{"click .expand-button":"expandClicked"},initialize:function(){f.prototype.initialize.apply(this,arguments),d.bindAll(this,"render","expandClicked"),this.query=this.options.query,this.textFields=this.options.textFields,this.isExpanded=!1},preg_quote:function(a){return(a+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")
},highlightMatchedWords:function(a){var b=a;return"string"==typeof b&&(b=a.replace(new RegExp("("+this.preg_quote(this.query)+")","gi"),"<span class='selected-result'>$1</span>")),b},getTime:function(){if(!this.model.time)return"";var a=new Date(this.model.time);return e.formattedDateMonth(a)+" "+e.formattedTimeOnly(a)},isVisible:function(a){return"id"!=a&&"_id"!=a&&"labels"!=a&&"_ts"!=a&&"time"!=a&&"_version_"!=a&&this.model[a]},createAttributeElement:function(a,b){return b=b.toString().replace(/,/gi,", "),h({key:a,value:b})},renderStructuredAttributes:function(){for(var a in this.model)if(this.model.hasOwnProperty(a)&&this.isVisible(a)){var b=a.toLowerCase();if(c.inArray(b,this.textFields)>=0)continue;var d=this.model[a],e=this.createAttributeElement(this.getAttributeLabelByName(this.model.labels,b),d);this.structuredAttributes.append(e);var f=this.structuredAttributes.children(":last-child").find(".record-attribute-value");f.html(this.highlightMatchedWords(f.html()))}},renderUnstructuredAttributes:function(){this.unstructuredAttributes.hide();for(var a in this.model)if(this.model.hasOwnProperty(a)&&this.isVisible(a)){var b=a.toLowerCase();if(-1==c.inArray(b,this.textFields))continue;this.unstructuredAttributes.show();var d=this.model[a],e=this.createAttributeElement(this.getAttributeLabelByName(this.model.labels,b),d);this.unstructuredAttributes.append(e);var f=this.structuredAttributes.children(":last-child").find(".record-attribute-value");f.html(this.highlightMatchedWords(f.html()))}},getAttributeLabelByName:function(a,b){for(var c=b,d=0;d<a.length;d++)b===a[d].name&&(c=a[d].label);return c},renderAttributes:function(){this.renderStructuredAttributes(),this.renderUnstructuredAttributes()},render:function(){var a=this.getTime(),b=this.template({time:a});return this.$el.append(b),this.structuredAttributes=this.$(".record-attributes-structured"),this.unstructuredAttributes=this.$(".record-attributes-unstructured"),this.renderAttributes(),this},expandClicked:function(){this.isExpanded?this.$el.removeClass("expanded"):this.$el.addClass("expanded"),this.isExpanded=!this.isExpanded,this.$(".expand-button span.text").text(this.isExpanded?"Collapse":"Expand")}})}()},{"../../Core/MVC/View":5,"../../utilities":144,"./keyValueTemplate.html":322,"./searchResultTemplate.html":323,jquery:103,underscore:458}],322:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="record-attribute">\n    <span class="record-attribute-key">'+__e(key)+'</span> =\n    <span class="record-attribute-value">'+__e(value)+"</span>\n</div>";return __p}},{lodash:456}],323:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="record-time">'+(null==(__t=time)?"":__t)+'</div>\n<div class="record-attributes-structured"/>\n<div class="record-attributes-unstructured"/>\n<div class="expand-button"><span class="text">Expand</span><span class="expand-button-icon glyphicon glyphicon-collapse-down"></span></div>';return __p}},{lodash:456}],324:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("jquery"),e=a("../../Core/MVC/View"),f=a("bootbox"),g=a("./saveFilterSetTemplate.html");b.exports=e.extend({className:"zd-custom-modal zd-save-filter-set",template:g,initialize:function(a){return this.options=d.extend({},this.options,a),this.options.handlers&&c.each(this.options.handlers,function(a){a["class"]||(a["class"]="btn-action")}),this},render:function(){return this.$el.html(this.template()),this.delegateEvents(),this},getData:function(){var a={name:this.$el.find(".filter-set-name").val().trim(),scope:this.$el.find(".filter-set-scope").prop("checked")?"PUBLIC":"PRIVATE"};return a.name||this.$el.find(".filter-set-name").focus(),a},show:function(){this.bootbox=f.dialog(this.render().$el,this.options.handlers).addClass(this.className),this.options.background&&d(".modal-backdrop").css({background:this.options.background,opacity:1})},showError:function(a){this.$el.find(".validation-msg").html(a).show()}})}()},{"../../Core/MVC/View":5,"./saveFilterSetTemplate.html":325,bootbox:455,jquery:103,underscore:458}],325:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="header">Save Filter Set</div>\n<div class="save-filter-set-content">\n    <label for="filter-set-name"><b>What do you want to name this Filter Set?</b></label>\n    <div class="input">\n        <input id="filter-set-name" class="input-xlarge filter-set-name" type="text" required pattern="^(\\w).{0,28}(\\w)$|^(\\w{1,30})$">\n    </div>\n    <input id="filter-set-scope" type="checkbox" class="filter-set-scope zd icon checkmark">\n    <label for="filter-set-scope">Share this Filter Set with my colleagues</label>\n    <div class="validation-msg error" style="display: none;"></div>\n</div>';return __p}},{lodash:456}],326:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC/View")),e=a("../../Core/MVC/Model"),f=e.extend({defaults:{needle:"",caseSensitive:!1,regExp:!1,words:!1}}),g=a("./searchBoxMinTemplate.html"),h=a("./searchBoxNormalTemplate.html");b.exports=d.extend({className:"row-fluid zd-searchbox",events:{'keyup input[name="needle"]':"_onNeedleChange",'keypress input[name="needle"]':"keyEnterPressed",'click button[name="search"]':"_onSearchClick",'click button[name="clear"]':"_onClearClick",'change input[value="caseSensitive"]':"_onIfCaseChange",'change input[value="regExp"]':"_onIfRegExpChange",'change input[value="words"]':"_onIfWordsChange"},defaults:{mode:"min"},initialize:function(a){switch(d.prototype.initialize.apply(this,arguments),a=a||{},this.options=c.extend({},this.defaults,a),this.options.mode){case"min":this.template=g;break;default:this.template=h}return a.template&&(this.template=a.template,delete this.options.template),this.model=this.model||new f,this},clear:function(){this.$el.find("input").val("")},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this},keyEnterPressed:function(a){var b=13;a.keyCode===b&&a.preventDefault()},_onNeedleChange:function(){this.model.set("needle",this.$('input[name="needle"]').val()),this.trigger("search",this.model),this.$('input[name="needle"]').focus()},_onIfCaseChange:function(){this.model.set("caseSensitive",this.$('input[value="caseSensitive"]').prop("checked")),this.trigger("search",this.model)},_onIfRegExpChange:function(){var a=this.$('input[value="regExp"]').prop("checked");this.model.set("regExp",a),a?(this.model.set("words",!1),this.$('input[value="words"]').prop("checked",!1),this.$('input[value="words"]').prop("disabled",!0)):this.$('input[value="words"]').prop("disabled",!1),this.trigger("search",this.model)},_onIfWordsChange:function(){this.model.set("words",this.$('input[value="words"]').prop("checked")),this.trigger("search",this.model)},_onSearchClick:function(){this.trigger("search",this.model)},_onClearClick:function(){this.model.set("needle",""),this.trigger("search",this.model)}})}()},{"../../Core/MVC/Model":4,"../../Core/MVC/View":5,"./searchBoxMinTemplate.html":327,"./searchBoxNormalTemplate.html":328,jquery:103,underscore:458}],327:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-group">\n    <div class="zd icon magnifying-glass"/> \n    <input type="text" class="search-query input-block-level" name="needle" value="'+(null==(__t=needle)?"":__t)+'">\n</div> ';return __p}},{lodash:456}],328:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="input-prepend">\n    <div class="btn-group">\n        <button class="btn" title="Search" name="search">\n            <div class="zd icon magnifying-glass"></i>\n        </button>\n        <button class="btn dropdown-toggle" title="Search Options" data-toggle="dropdown">\n            <span class="caret"></span>\n        </button>\n        <ul class="dropdown-menu">\n            <li>\n                <a>\n                    <label class="checkbox">\n                        <input type="checkbox" value="caseSensitive" ',caseSensitive&&(__p+="checked"),__p+='>\n                               Case Sensitive\n                    </label> \n                </a>\n            </li><li>\n                <a>\n                    <label class="checkbox">\n                        <input type="checkbox" value="words" ',words&&(__p+="checked"),__p+='>\n                               Whole Words\n                    </label> \n                </a>\n            </li>\n        </ul>\n    </div> \n    <input type="text" name="needle" value="'+(null==(__t=needle)?"":__t)+'">\n    <button name="clear" title="Clear" class="close"><i class="icon-remove"></i> </button> \n</div> ';return __p}},{lodash:456}],329:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="text-search-header-view">\n    <div class="subhead">SOURCE</div>\n    <div class="text-search-sources-list">\n        <i class="zd icon down-chevron"></i>\n        <div class="sources">'+__e(selectedSource)+'</div>\n    </div>\n    <div class="text-search-sort">\n        <i class="zd icon down-chevron"></i>\n        <div class="sort">'+__e(selectedSort.replace("_"," "))+'</div>\n    </div>\n    <label class="text-search-results-count"><text></text> Results Found</label>\n</div>\n<div id="search-results-view"></div>';return __p}},{lodash:456}],330:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC/View"),f=a("../../Core/MVC/Model"),g=a("../../controls"),h=a("./../RecordDetailsView/index.js"),i=a("Spinner"),j="TEXT_SEARCH",k={SPINNER:{lines:9,length:5,width:2,radius:2,corners:0,rotate:0,direction:1,color:"#000",speed:1,trail:100,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"}},l=a("./headerTemplate.html"),m=a("./sourceItemTemplate.html"),n=a("./sortTemplate.html");b.exports=e.extend({template:l,events:{"click .text-search-sources-list":"showSourcesList","click .text-search-sort":"showSortList"},initialize:function(a){this.options=c.extend({},this.options,a),this.controllers=this.options.controllers,this.facetsPanel=this.options.facetsPanel,this.sourceNames=this.getSourceNames(this.controllers),this.model=new f({selectedSource:this.sourceNames[0],selectedSort:"best_match",sourceId:"",tsField:"",query:this.options.query,counts:0}),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.get("selectedSource");return this.$el.html(this.template(this.model.toJSON())),this.$spinner=c('<div id="spinner"></div>'),this.$results=this.$el.find("#search-results-view"),this.$counts=this.$el.find(".text-search-results-count text"),this.$sourcesList=this.$el.find(".text-search-sources-list .sources"),this.$sortList=this.$el.find(".text-search-sort .sort"),this.$counts.text(this.model.get("counts")),this.updateSearchResults(this.getController(a)),this.delegateEvents(),this},showSourcesList:function(){var a=this;if(!this.sourcesList&&1!==this.sourceNames.length){this.sourcesList=new g.SmallPopup({customClass:"sources-popup"}),this.$sourcesOptions=c('<ul class="popup-list"></ul>');for(var b=0;b<this.sourceNames.length;b++)this.$sourcesOptions.append(m({source:this.sourceNames[b]}));this.sourcesList.render(this.$sourcesOptions),this.sourcesList.position({of:this.$sourcesList,my:"center bottom",at:"center top-22px",collision:"flip flip",pointerTop:10}),this.sourcesList.$pointer.css({width:"0",left:"20px","-webkit-transform":"scale(1, -1)"}),this.sourcesList.onHide=function(){a.sourcesList=null},this.$sourcesOptions.find("li").off("click"),this.$sourcesOptions.find("li").on("click",function(b){var d=c(b.target).text().trim();a.model.set("selectedSource",d),a.sourcesList.remove(),a.sourcesList=null})}},showSortList:function(){var a=this;this.sortList||(this.sortList=new g.SmallPopup({customClass:"sort-popup"}),this.sortList.render(n),this.sortList.position({of:this.$sortList,my:"center bottom",at:"center top-22px",collision:"flip flip",pointerTop:10}),this.sortList.$pointer.css({width:"0",left:"20px","-webkit-transform":"scale(1, -1)"}),this.sortList.onHide=function(){a.sortList=null},this.sortList.$el.find("li").off("click"),this.sortList.$el.find("li").on("click",function(b){var d=c(b.target).attr("data-value");a.model.set("selectedSort",d),a.sortList.remove(),a.sortList=null}))},getSourceNames:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c].config.get("source").sourceName;-1==b.indexOf(d)&&b.push(d)}return b},updateSearchResults:function(a,b){var c=[],e=this;this.model.set("tsField",a.config.get("source").date,{silent:!0});var f=this.model.get("query"),g=a.state.get("streamSourceId");this.settings={offset:0,pageSize:15,restrictions:[{operation:j,value:f}],first:!0,next:!0,loading:!1},this.$results.empty(),this.facetsPanel.model.get("query")!==f||this.facetsPanel.model.get("sourceId")!==g?this.facetsPanel.updateAttributes(f):(c=this.facetsPanel.getSelectedFacets(),console.log("FACETS FOR SEARCH UPDATE",c),this.settings.restrictions=d.union(this.settings.restrictions,c)),this.model.get("sort")!=b&&this.model.set("sort",b,{silent:!0}),this.model.set("sourceId",g,{silent:!0}),this.loadNextPage(),this.$results.scroll(function(){this.scrollHeight-e.$results.height()-this.scrollTop<100&&e.settings.next&&!e.settings.loading&&(console.log("Load next page"),e.loadNextPage())})},loadNextPage:function(){var a=this;this.settings&&this.settings.next&&!this.settings.loading&&(this.settings.loading=!0,this.showSpinner(),c.ajax({type:"POST",url:"service/stream/search",data:JSON.stringify({pageSize:this.settings.pageSize,offset:this.settings.offset,restrictions:this.settings.restrictions,streamSourceId:this.model.get("sourceId"),sort:this.getSort()}),contentType:"application/json",success:function(b){console.log("Search result",b),a.showResults(b),a.settings.loading=!1,a.settings.first=!1,a.settings.next=b.hasNext,a.settings.offset+=b.documents.length}}))},showResults:function(a){var b=a.documents,d=a.totalCount,e=a.textFields,f=this.getLabelFields(this.model.get("sourceId")),g=this.model.get("query");this.model.set("counts",d,{silent:!0}),this.hideSpinner();for(var i=0;i<b.length;i++){var j=b[i];j.labels=f;var k=new h({model:j,query:g,textFields:e});this.$results.append(k.render().$el);var l=c("div.record-attributes-structured").find("div.record-attribute"),m=c("div.record-attributes-unstructured").find("div.record-attribute");l.length>=1||m.length>=1?c("div.expand-button").show():c("div.expand-button").hide()}},getController:function(a){var b=d.find(this.controllers,function(b){return a===b.config.get("source").sourceName});return b},getLabelFields:function(){var a=[],b=this.getController(this.model.get("selectedSource"));return d.each(b.fields.model,function(b){a.push(b.toJSON())}),a},getSort:function(){return"best_match"!=this.model.get("selectedSort")?{name:this.model.get("tsField"),dir:"desc"}:null},showSpinner:function(){this.$results.append(this.$spinner),this._spinner=new i(k.SPINNER),this._spinner.spin(this.$("#spinner")[0])},hideSpinner:function(){c(this._spinner.el).remove(),this.$spinner.remove(),this.$counts.text(this.model.get("counts"))}})}()},{"../../Core/MVC/Model":4,"../../Core/MVC/View":5,"../../controls":66,"./../RecordDetailsView/index.js":321,"./headerTemplate.html":329,"./sortTemplate.html":331,"./sourceItemTemplate.html":332,Spinner:107,jquery:103,underscore:458}],331:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<ul class="popup-list text-search-sort">\n    <li class="best-match" data-value="best_match">best match</li>\n    <li class="most-recent" data-value="most_recent">most recent</li>\n</ul>';return __p}},{lodash:456}],332:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<li class="text_search_source_item" data-value="'+(null==(__t=source)?"":__t)+'">\n    '+__e(source)+"\n</li>";return __p}},{lodash:456}],333:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<button value="segment" class="zd btn btn-link">\n    <div class="zd icon '+(null==(__t=icon)?"":__t)+'" style="display:'+(null==(__t=icon?"":"none")?"":__t)+'"></div> \n    <div class="text">'+__e(title)+"</div>\n</button>";return __p}},{lodash:456}],334:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC")),e=a("./buttonTemplate.html"),f=d.View.extend({className:"zd-tabbar-head",defaults:{scaledWidth:!0},events:{'click button[value="segment"]':"_segmentSelected"},template:e,initialize:function(a){d.View.prototype.initialize.apply(this,arguments),this.options=c.extend({},this.options,this.defaults),this.options=c.extend({},this.options,a)},render:function(){var a=this;if(this.$el.empty(),this.options.tabs.forEach(function(b){b.icon=b.icon?b.icon:"",b.$el=a.$wrapElement(a.template(b)),a.$el.append(b.$el)}),this.options.scaledWidth){var b=this.options.tabs.length>1?Math.floor(99/this.options.tabs.length):100;this.$el.find(".zd.btn.btn-link").css("width",b+"%")}return this.$el.find("button:nth-child(1) ").addClass("active"),this.selectedIndex=0,this},_segmentSelected:function(a){var b=this;this.$el.find("button").removeClass("active"),this.$el.find("button").each(function(c,d){a.currentTarget==d&&(b.select(c),b.$el.find("button:nth-child("+(c+1)+")").addClass("active"),b.selectedIndex!==c&&(b.selectedIndex=c,b.trigger("segment:select",c)))})},getSelectedIndex:function(){return this.selectedIndex},select:c.noop});b.exports=f}()},{"../../Core/MVC":6,"./buttonTemplate.html":333,jquery:103,underscore:458}],335:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC/View")),e=a("../../models/Share"),f=a("./shareEditorTemplate.html"),g=a("./askForSaveTemplate.html"),h=a("./askForSaveNewTemplate.html");b.exports=d.extend({className:"zd-share",defaults:{},template:f,events:{'change input[type="radio"]':"setInteractive",'click button[value="yes"]':"saveBookmark",'click button[value="no"]':"notSaveBookmark","click button.export-screenshot":"exportScreenshot"},initialize:function(){return d.prototype.initialize.apply(this,arguments),this.model=this.model||new e,this.dashboard=this.options.currentDashboard,this.fromBookmark=!!this.dashboard.model.get("id"),this},render:function(){var a=this.dashboard.model.get("id");return this.fromBookmark=!!a,!a&&this.options.bookmarkChanged?this.$el.html(h(this.model.toJSON())):this.options.bookmarkChanged?this.$el.html(g(this.model.toJSON())):(this.getLink(this.model.get("interactive")),this.$el.html(this.template(this.model.toJSON()))),this.delegateEvents(),this},exportScreenshot:function(){var a=JSON.stringify(this.dashboard.model.toJSON()),b="service/screenshot/snapshot?width="+window.screen.availWidth+"&height="+window.screen.availHeight,d=c("button.export-screenshot").find("i");d.removeClass("icon-camera"),d.addClass("icon-time"),c.ajax({url:b,type:"POST",contentType:"application/json",data:a}).error(function(a,b){d.removeClass("icon-time"),d.addClass("icon-camera"),console.error(b)}).done(function(a){var b="service/screenshot/snapshot/"+a.bookmarkId;window.location.assign(b),d.removeClass("icon-time"),d.addClass("icon-camera")})},saveBookmark:function(){this.trigger("saveBookmark")},notSaveBookmark:function(){this.getLink(this.model.get("interactive"))},renderEditor:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this},setInteractive:function(a){var b=c(a.target).val();this.model.set("interactive",b),this.getLink(b)},getLink:function(a){var b=this,c=this.options.selectedVis,d=c.get("source").sourceId,e=c.get("source").sourceName,f=c.get("visId"),g=c.get("name"),h=window.location.protocol+"//"+window.location.host+window.location.pathname,i={visId:f,visName:g,sourceName:e,fromBookmark:this.fromBookmark};this.dashboard.model.get("id")?(this.model.unset("sourceId"),i.bookmarkId=this.dashboard.model.get("id")):i.sourceId=d,this.model.set(i),this.model.fetch().done(function(c){var e,g=c.id;"true"===a?(e=b.fromBookmark?h+"?__target=embedded&key="+g+window.location.hash:h+"?__target=embedded&key="+g+"#"+d+"-"+f,b.model.set("link",e),b.model.set("embedCode",b.getIframeCode(e))):(e=b.fromBookmark?h+"?__target=widget&key="+g+window.location.hash:h+"?__target=widget&key="+g+"#"+d+"-"+f,b.model.set("link",e),b.model.set("embedCode",b.getIframeCode(e))),b.renderEditor(),b.$el.find('input[value="'+a+'"]').attr("checked",!0),b.$el.find('input[type="text"]').select()})},getIframeCode:function(a){return'<iframe frameborder="0" src="'+a+'" style="overflow: hidden; height: 100%; width: 100%"></iframe>'}})}()},{"../../Core/MVC/View":5,"../../models/Share":125,"./askForSaveNewTemplate.html":336,"./askForSaveTemplate.html":337,"./shareEditorTemplate.html":339,jquery:103,underscore:458}],336:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div><center>Visualization was changed. You need to bookmark this visualization before sharing.</br> Do you want to save bookmark?</center></div>\n<div class="dialog-buttons">\n    <button value="yes" class="zd btn btn-success">Yes</button>\n    <button value="no" class="zd btn btn-success">No</button>\n</div>';return __p}},{lodash:456}],337:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div><center>Bookmark changed.</br> Do you want to save bookmark before sharing?</center></div>\n<div class="dialog-buttons">\n    <button value="yes" class="zd btn btn-success">Yes</button>\n    <button value="no" class="zd btn btn-success">No</button>\n</div>';return __p}},{lodash:456}],338:[function(a,b){b.exports=a("./ShareEditor")},{"./ShareEditor":335}],339:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div> \n    ",fromBookmark||(__p+=" \n    <div class='source-name'><b>"+__e(sourceName)+": "+__e(visName)+"</b></div>\n    "),__p+=" \n    <div class='radio interact-radio'> \n        <input id='interact' type='radio' name='optionsInteract' value='true'>  \n        <label for='interact'>Interactive</label>  \n        <input id='noninteract' type='radio' name='optionsInteract' value='false'>  \n        <label for='noninteract'>Non-Interactive</label> \n    </div> \n    <label>Link to Share \n        <input type='text' class='input-block-level' value='"+(null==(__t=link)?"":__t)+"'> \n    </label> \n    <label>Embed Code \n        <textarea type='text' class='input-block-level' rows='6'>"+(null==(__t=embedCode)?"":__t)+"</textarea>\n    </label> \n</div> ";return __p}},{lodash:456}],340:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=e.View,g=e.Events,h=a("../../controls"),i=a("../../utilities"),j=a("../../collections/Dashboards"),k=a("../../collections/Sources"),l=(a("../../models/User"),a("./../ListView")),m=a("./../DashboardItem"),n=a("./../SearchBox"),o=a("./../SortingBy"),p=a("./../SourceItem"),q=a("./../SourceBrowser"),r=a("./../DataSourcesButton"),s=a("./../SegmentedControl"),t=a("./../TabBar"),u=a("./sidePaneControlTemplate.html"),v=a("./loaderTemplate.html");b.exports=f.extend({tagName:"li",className:"admin-control",template:u,events:{'click a[value="showSidePane"]':"onActivate"},defaults:{},initialize:function(a){a=a||{};var b=this;a.template&&(this.template=a.template,delete a.template),f.prototype.initialize.apply(this,arguments),this.sidePane=new h.SidePane({user:this.model}),this.sidePane.show=function(){c(".zd-side-pane").parent("div").hide(),this.$el.show(),b.$el.addClass("active").siblings(".active").removeClass("active"),b.searchBox.model.set("needle",""),b.searchBox.$el.find("input").val(""),b.dataSourcesList.listenTo(b.dataSourcesList,"showSourceList",function(){b.showSearched(b.dataSourcesList)})},this.sidePane.hide=function(){this.$el.hide(),b.$el.removeClass("active"),b.$pointer.hide(),b.dataSourcesList.stopListening(b.dataSourcesList,"showSourceList")},this.sidePane.close=function(){this.$el.remove(),b.$el.removeClass("active"),b.$pointer.hide()},this.childViews.push(this.sidePane);var d=[];this.renderTabs(d),this.segmentedControl=new s({tabs:d}),this.tabBar=new t({tabs:d}),this.segmentedControl.select=this.tabBar.select,this.childViews.push(this.segmentedControl),this.childViews.push(this.tabBar),this.sidePane.render(this.tabBar.el),this.renderSearch(),this.renderSortingBy(),this.sidePane.$header.append(this.searchBox.render().$el),this.sidePane.$header.append(this.segmentedControl.render().$el),this.sidePane.$header.append(this.sortingBy.render().$el),this._activatePanels()},_renderItem:function(a,b){var c=this,d=new b.options.ItemView({model:a,template:b.options.template,selectable:"radio",user:this.model});b.$el.append(d.render().$el),b.childViews.push(d),b.listenTo(d,"select",function(a){c.trigger("select",a)})},renderSortingBy:function(){var a=this;this.sortingBy=new o,i.MODE.NATIVE!==i.mode()&&this.dashboardList.listenTo(this.sortingBy,"change:sortby",function(b){a.dashboardList.render(b.toJSON()),a.showSearched(a.dashboardList)}),this.dataSourcesList.listenTo(this.sortingBy,"change:sortby",function(b){a.dataSourcesList.render(b.toJSON()),a.showSearched(a.dataSourcesList)}),this.tabBar.sortingBy=this.sortingBy},renderSearch:function(){var a,b=this;this.searchBox=new n,this.listenTo(this.tabBar,"tab:select",function(d){this.sortingBy.$el.show(),c(".zd-side-pane .zd-side-pane-body").css("top","156px"),this.searchBox.model.get("needle")&&d.collection.bootstrap().done(function(){b.showSearched(d)}),b.searchBox.$el.find("input").focus(),b.sortingBy.$list&&b.sortingBy.$list.hide(),a=d,b.calcBodyHeight()}),this.listenTo(this.searchBox,"search",function(){b.showSearched(a)})},calcBodyHeight:function(){var a,b=this.tabBar._tab.view,c=this.tabBar.$body;0!==c.length&&b.options.dataSrcButton?(a=b.options.dataSrcButton.$el.find(".edit-datasource-btn"),c.height("calc(100% - "+a.height()+"px)")):c.height("calc(100% - 10px)")},showSearched:function(a){var b=this,c=this.searchBox.model.toJSON(),e=function(a){var b=a.attributes.hasOwnProperty("enabled")?a.get("enabled"):!0;return b&&a.matchesSearch("name",c)};a.selectedSource&&(b.dataSourcesList.showSourceList({silent:!0}),b.searchBox.$el.find("input").focus()),d.each(a.childViews,function(a){a.remove()}),a.childViews=[],a.options.filter=e,a.render({sortBy:this.sortingBy.model.toJSON(),silent:!0})},renderTabs:function(a){var b=this;i.MODE.NATIVE!==i.mode()&&(this.dashboardList=new l({title:"Favorites",tabValues:"bookmarks",className:"zd nav nav-tabs nav-stacked",collection:this.options.bookmarks||new j([],{lightweight:!0}),ItemView:m,itemOption:{user:this.model},loaderTemplate:v}),this.dashboardList.listenTo(g,"bookmark:add",function(a){b.dashboardList.collection.add(a,{merge:!0})}),this.listenTo(this.dashboardList.collection,"select",function(){b.sidePane.hide()}),this.listenTo(this.dashboardList.collection,"remove",function(){b.searchBox.model.get("needle")&&b.showSearched(b.dashboardList)}),a.push({title:this.dashboardList.options.title,tabValues:this.dashboardList.options.tabValues,icon:"bookmark",view:this.dashboardList})),this.dataSourcesList=this.dataSourcesList||new q({user:this.model,collection:this.options.sources||new k,sidePane:!0,search:!1,tabValues:"sources",ItemView:p,className:"zd nav nav-tabs nav-stacked",title:"Data Sources",dataSrcButton:new r}),this.childViews.push(this.dataSourcesList),this.listenTo(this.dataSourcesList.model,"change:visId",function(a){b.goToVisualization(a),a.get("sourceId")&&a.get("visId")&&b.sidePane.hide()}),a.push({title:this.dataSourcesList.options.title,tabValues:this.dataSourcesList.options.tabValues,icon:"connectors",view:this.dataSourcesList})},goToVisualization:function(a){if(a.get("sourceId")&&a.get("visId")){var b=i.getURLParameter("single");if(b)window.location="visualization?sourceId="+a.get("sourceId")+"&visId="+a.get("visId")+"&single=true";else{var c=[a.get("sourceId"),a.get("visId")],d="#"+c.join("-");window.location.hash===d?window.location.reload():window.location="visualization"+d}}},onActivate:function(){this._activate()},_activate:function(){{var a=this;this.$el.hasClass("active")}this.sidePane.visible()?(this.sidePane.hide(),this.$pointer.hide(),this.trigger("menu-item:close",this)):(this.sidePane.show(),this.tabBar.render(),this.$pointer.show(),this.trigger("menu-item:open",this)),g.trigger("admin-control:clicked",this.el),this.listenToOnce(g,"admin-control:clicked sidepane:manualhide",function(b){b!==a.el&&a.sidePane.hide(),a.trigger("menu-item:close",a)}),this.calcBodyHeight()},_activatePanels:function(){this.sidePane.$loading.hide(),this.sidePane.$header.show(),this.sidePane.$body.show()},render:function(){return this.$el.html(this.template()),this.$pointer=c('<div class="pointer-down"></div>'),this.$el.append(this.$pointer.hide()),this.delegateEvents(),this}})}()},{"../../Core/MVC":6,"../../collections/Dashboards":13,"../../collections/Sources":30,"../../controls":66,"../../models/User":133,"../../utilities":144,"./../DashboardItem":207,"./../DataSourcesButton":223,"./../ListView":275,"./../SearchBox":326,"./../SegmentedControl":334,"./../SortingBy":348,"./../SourceBrowser":351,"./../SourceItem":354,"./../TabBar":356,"./loaderTemplate.html":341,"./sidePaneControlTemplate.html":342,jquery:103,underscore:458}],341:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<legend>Loading...</legend>";return __p}},{lodash:456}],342:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<a value="showSidePane" class="icon sidepane">\n    <div class="fontIcon">A</div> \n</a>';return __p}},{lodash:456}],343:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="attributeItem">\n    <div class="text">'+__e(attributes.label)+"</div>\n</div>";return __p}},{lodash:456}],344:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("./../ObjectFieldItem"),f=a("./attributeAxisItemTemplate.html"),g=e.extend({className:"",selectTemplate:d.template('<span class="zd icon checkbox radio"><span class="zd checked <%=selected %>"></span></span>'),defaults:{template:f,selectedClass:"selected",checkbox:!0},initialize:function(a){return e.prototype.initialize.apply(this,arguments),this.options=c.extend({},this.defaults,a),this
},render:function(){if(e.prototype.render.apply(this,arguments),this.options.checkbox){var a=this.selected,b=this.disabled,c=this.selectTemplate({selected:a?" selected":""});this.$el.prepend(c),b&&this.$el.addClass("disabled")}else this.$el.addClass("minimal");return this},renderSelected:function(){var a=this.$(".checkbox.radio .checked");a.addClass("selected"),e.prototype.renderSelected.apply(this,arguments)},renderDeselected:function(){var a=this.$(".checkbox.radio .checked");a.removeClass("selected"),e.prototype.renderDeselected.apply(this,arguments)}});b.exports=g}()},{"./../ObjectFieldItem":309,"./attributeAxisItemTemplate.html":343,jquery:103,underscore:458}],345:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="sort-attribute-wrap">\n    <legend class="subhead">'+__e(title)+'</legend>\n    <div class="input">\n        <select class="sort-attribute-name">\n            ',fields.forEach(function(a){__p+='\n                <option value="'+__e(a.name)+'"\n                    '+__e(a.name===name?"selected":"")+"\n                    "+__e(-1!==disabledOptions.indexOf(a.name)?"disabled":"")+" >\n                        "+__e(a.label)+"\n                </option>\n            "}),__p+='\n        </select>\n        <select class="sort-attribute-func">\n            ',functions.forEach(function(a){__p+='\n                <option value="'+__e(a.name)+'" '+__e(a.name===func?"selected":"")+" >\n                    "+__e(a.label)+"\n                </option>\n            "}),__p+='\n        </select>\n    </div>\n    <div class="sorting-attribute-dir-wrap radio-buttons">\n        <span class="radio-button" value="asc">\n            <span class="zd icon checkbox radio selected checked">\n                <span class="zd radio-inner selected"></span>\n            </span>\n            <div class="radio-label">Alphabetical</div>\n        </span>\n        <span class="radio-button" value="desc">\n            <span class="zd icon checkbox radio selected">\n                <span class="zd radio-inner selected"></span>\n            </span>\n            <div class="radio-label">Reverse Alphabetical</div>\n        </span>\n    </div>\n    <div class="sorting-metric-dir-wrap radio-buttons">\n        <span class="radio-button" value="desc">\n            <span class="zd icon checkbox radio selected checked">\n                <span class="zd radio-inner selected"></span>\n            </span>\n            <div class="radio-label">Descending</div>\n        </span>\n        <span class="radio-button" value="asc">\n            <span class="zd icon checkbox radio selected">\n                <span class="zd radio-inner selected"></span>\n            </span>\n            <div class="radio-label">Ascending</div>\n        </span>\n    </div>\n    <div class="sorting-time-dir-wrap radio-buttons">\n        <span class="radio-button" value="asc">\n            <span class="zd icon checkbox radio selected checked">\n                <span class="zd radio-inner selected"></span>\n            </span>\n            <div class="radio-label">Chronological</div>\n        </span>\n        <span class="radio-button" value="desc">\n            <span class="zd icon checkbox radio selected">\n                <span class="zd radio-inner selected"></span>\n            </span>\n            <div class="radio-label">Reverse Chronological</div>\n        </span>\n    </div>\n    <legend class="subhead">Limit</legend>\n    <div class="input">\n        <input type="number" class="sort-attribute-limit" value="'+__e(limit)+'" min="'+__e(MIN_VALUE)+'" max="'+__e(MAX_VALUE)+'" />\n    </div>\n</div>';return __p}},{lodash:456}],346:[function(a,b){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC")),e=d.View,f=(d.Events,a("./SortAttributeItem.html")),g=["MONEY","NUMBER","INTEGER","FORMULA"],h=["ATTRIBUTE","TEXT"],i=[{name:"sum",label:"Sum"},{name:"avg",label:"Avg"},{name:"min",label:"Min"},{name:"max",label:"Max"},{name:"distinct_count",label:"Count"},{name:"last_value",label:"Last Value"}];b.exports=e.extend({events:{"change select.sort-attribute-name":"sortAttrNameChange","change select.sort-attribute-func":"sortAttrFuncChange","blur input.sort-attribute-limit":"sortLimitBlur","input input.sort-attribute-limit":"sortLimitInput","click .radio-button":"_radioButtonClick"},template:f,initialize:function(a){e.prototype.initialize.apply(this,arguments),this.fields=a.fields||[],this.title=a.title||"SORT ATTRIBUTE",this.groupByName=a.groupByName,this.maxLimitLength=a.maxLimitLength||4,this.MAX_VALUE=Math.pow(10,this.maxLimitLength)-1,this.MIN_VALUE=1,this.options.source.get("features").indexOf("LV_METRIC")<0&&i.forEach(function(a,b){"last_value"===a.name&&i.splice(b,1)})},render:function(){var a=this.model.get("sort"),b=this.getDisableDistinct(),c=this.options.state.metrics,d=[];return b&&this.fields.forEach(function(a){-1===h.indexOf(a.type)||c.findWhere({name:a.name})||d.push(a.name)}),this.$el.empty().append(this.template({title:this.title,fields:this.fields,functions:i,name:a.name,func:a.func,limit:this.model.get("limit"),disabledOptions:d,MIN_VALUE:this.MIN_VALUE,MAX_VALUE:this.MAX_VALUE})),this.$func=this.$el.find(".sort-attribute-func"),this.$name=this.$el.find(".sort-attribute-name"),this.renderSortOrderValue(),this},renderSortOrderValue:function(){var a=this.getName().split(":")[0],b=this.getField(a),c=this.isMetric(b),d=this.isVolume(b),e=this.isFormula(b),f=this.model.get("sort").dir,g=c||b.distinctCount&&b.name!==this.groupByName;this.$el.find(".input").toggleClass("metric-attribute",g&&!d&&!e),this.$func.removeAttr("disabled").children().removeAttr("disabled"),g&&!c?this.$func.attr("disabled",!0).val("distinct_count"):(!b.distinctCount||this.getDisableDistinct())&&(this.$func.find('[value="distinct_count"]').attr("disabled",!0),this.$func.val(this.getFunc())),"last_value"===this.getFunc()||this.options.state.isLastValueFunc()?(this.$func.attr("disabled",!0),this.$name.attr("disabled",!0)):this.$func.find('[value="last_value"]').attr("disabled",!0),this.$el.find(".radio-buttons").hide(),g?this.$el.find(".sorting-metric-dir-wrap").show():"TIME"===b.type?this.$el.find(".sorting-time-dir-wrap").show():this.$el.find(".sorting-attribute-dir-wrap").show(),this.$el.find(".radio-button > .radio.checked").removeClass("checked"),this.$el.find('.radio-button[value="'+f+'"] > .radio').addClass("checked")},isMetric:function(a){return-1!==g.indexOf(a.type)},isVolume:function(a){return"count"===a.name},isFormula:function(a){return"FORMULA"===a.type},getField:function(a){return this.fields.filter(function(b){return b.name===a})[0]},getName:function(){return this.$el.find(".sort-attribute-name").val()},getLimit:function(){return this.$el.find(".sort-attribute-limit").val()},getFunc:function(){var a=this.getName(),b=this.getField(a),c=this.$el.find(".sort-attribute-func").val();return this.isFormula(b)&&(c="mvel"),!this.isMetric(b)||b.distinctCount&&!this.getDisableDistinct()||(c=c||"avg"),c},getDir:function(){return this.$el.find(".radio-button:visible > .radio.checked").parents(".radio-button").attr("value")},getDisableDistinct:function(){var a=this.options.source.get("type"),b=this.options.state.metrics,c=-1!==["IMPALA","SQL"].indexOf(a)&&b.where({func:"distinct_count"}).length>0;return c},sortAttrNameChange:function(){var a=this.getName(),b=this.getField(a),c=this.isMetric(b)||b.distinctCount&&b.name!==this.groupByName;this.renderSortOrderValue(),!c||this.isVolume(b)?this.model.unsetSort("func",{silent:!0}):this.model.setSort("func",this.getFunc(),{silent:!0}),this.model.setSort("name",this.getName())},sortAttrFuncChange:function(){this.model.setSort("func",this.getFunc())},_radioButtonClick:function(a){var b=c(a.currentTarget);b.find(".radio.checked").length||(b.find(".radio").addClass("checked"),b.siblings().find(".radio").removeClass("checked"),this.sortAttrValueChange())},sortAttrValueChange:function(){this.model.setSort("dir",this.getDir())},sortLimitInput:function(){var a=parseInt(this.getLimit(),10);isNaN(a)&&(a=this.MIN_VALUE),a>this.MAX_VALUE?a=this.MAX_VALUE:a<this.MIN_VALUE&&(a=this.MIN_VALUE),this.model.set("limit",a)},sortLimitBlur:function(){var a=this.model.get("limit");this.$el.find(".sort-attribute-limit").val(a)}})},{"../../Core/MVC":6,"./SortAttributeItem.html":345,jquery:103,underscore:458}],347:[function(a,b){b.exports=a("./SortAttributeItem")},{"./SortAttributeItem":346}],348:[function(a,b){!function(){var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC/Model")),e=a("../../Core/MVC/View"),f=d.extend({defaults:{sortby:"Name",ascending:!0}}),g=a("./sortTemplate.html"),h=a("./sortTypeTemplate.html");b.exports=e.extend({className:"row-fluid zd-sortby",defaults:{sortTypeTemplate:h},events:{"click .currentSort":"showSortType","click .switcher":"changeSortAsc","click li":"changeSortType"},initialize:function(){return e.prototype.initialize.apply(this,arguments),this.model=this.model||new f,this.template=g,this.$background=c('<div class="zd-sortby-background"></div>'),this.$background.css({width:c(document).width()+"px",height:c(document).height()+"px",position:"fixed",right:"0",top:"0","z-index":"99"}),"function"==typeof this.options.sortTypeTemplate&&(this.options.sortTypeTemplate=this.options.sortTypeTemplate()),this.listenTo(this,"change:sortby",this.render),this},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.$sortList=c(this.options.sortTypeTemplate),1===this.$sortList.find("li").length&&this.$el.find(".currentSort").addClass("disabled"),this},changeSortAsc:function(){this.model.set("ascending",!this.model.get("ascending")),this.trigger("change:sortby",this.model)},showSortType:function(){var a,b=this;return this.$list?(this.$list.hide(),void this.$background.remove()):(a=c(this.options.sortTypeTemplate),void(1!==a.find("li").length&&(this.$el.append(this.$background),this.$list=a,this.$list.hide=function(){b.$list.remove(),b.$list=null,b.$background.remove()},this.$el.append(this.$list),this.$background.on("click",function(){b.$list&&b.$list.hide(),c(this).remove()}))))},changeSortType:function(a){var b=this,d=c(a.target).attr("item-value");d!=this.model.get("sortby")&&(this.model.set("sortby",d),this.trigger("change:sortby",this.model)),b.$list.hide()}})}()},{"../../Core/MVC/Model":4,"../../Core/MVC/View":5,"./sortTemplate.html":349,"./sortTypeTemplate.html":350,jquery:103,underscore:458}],349:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd icon switcher"> \n    <div class="zd icon up '+(null==(__t=ascending)?"":__t)+'" switcher="up"></div>\n    <div class="zd icon down '+(null==(__t=!ascending)?"":__t)+'" switcher="down"></div>\n</div>\n<div class="sortText"><span>Sort by</span> \n    <span class="currentSort"><b>'+(null==(__t=sortby)?"":__t)+"</b></span>\n</div> ";return __p}},{lodash:456}],350:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="sortList"> \n    <div class="pointer"></div>\n    <ul> \n        <li item-value="Name">Name</li> \n        <li item-value="Popularity">Popularity</li> \n        <li item-value="Last Used">Last Used</li> \n    </ul> \n</div> ';return __p}},{lodash:456}],351:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("./../../components/settings"),g=e.View,h=e.Model,i=e.Events,j=a("../../collections/Sources"),k=a("../../collections/SourceVisualizations"),l=a("./../ListView"),m=a("./../SourceItem").extend({className:"sourceItem"}),n=a("./../VisualizationItem"),o=a("./loaderTemplate.html"),p=a("./sourceBrowserTemplate.html");b.exports=g.extend({model:null,template:p,defaults:{search:"name",filter:function(){return!0}},events:{'click button[value="button-back"]':"showSourceList"},widgetSources:[],initialize:function(a){var b=this;this.childViews=[],a=a||{},a.template&&(this.template=a.template,delete a.template),g.prototype.initialize.apply(this,arguments),this.model=new h,this.collection=this.collection||new j,this.visualizations=new k,this.listenTo(i,"sync",function(a){var c=a.get("visualizations");b.dashboardVis=c,c.forEach(function(a){var c=a.source.sourceName;b.widgetSources.indexOf(c)<0&&b.widgetSources.push(c)}),b.widgetSources.sort()}),this.listenTo(i,"source:enabled",function(a){d.each(b.collection.models,function(b){b.get("id")===a.id&&b.set("enabled",a.enabled)})}),this.listenTo(i,"visualization:enabled",function(a){b.collection.each(function(b){var c=b.visualizations.findWhere({visId:a.id});c&&b.visualizations.isBootstrapped(!1)})}),this.listenTo(i,"source:add source:remove",function(){b.collection.fetch()})},selectVisualiation:function(a){this.model.unset("visId",{silent:!0}),this.model.set({visId:a.get("visId")})},selectSource:function(a){var b=this,d=a.visualizations;return this.model.set("sourceId",a.get("id")),this.model.set("sourceName",a.get("name")),this.selectedSource=a,d.fetch().done(function(){b.showVisualizationsList(d),b.sortBy.width()>0&&(b.sortBy.hide(),c(".zd-side-pane .zd-side-pane-body").css("top","99px"),b.$el.parent().addClass("full-height"))}).fail(function(){console.log("Error",arguments)}),this},showVisualizationsList:function(a){var b;return this.visualizations.reset(a.toJSON()),this.trigger("showVisualizationList",this.visualizations),b=new l({className:"zd nav nav-tabs nav-stacked",ItemView:n,collection:this.visualizations,loaderTemplate:o,selectable:"radio",filter:function(a){return a.get("enabled")},sortbyOptions:{sortby:function(a){var b=a.get("name"),c=a.get("type");return"PIVOT_TABLE"===c?"":b},ascending:!0}}),this.listenToOnce(b,"select",this.selectVisualiation),this.show(b,{title:this.model.get("sourceName"),backButton:!0}),this},showSourceList:function(a,b){var c=this;this.collection.bootstrap().done(function(){c.displaySourceList(a,b)})},displaySourceList:function(a,b){this.trigger("showSourcesList");var e=this.options.filter;if(this.sortBy=c(".zd-side-pane div.row-fluid.zd-sortby"),this.collection.length>0){this.sortBy.show(),c(".zd-side-pane .zd-side-pane-body").css("top","156px");var g=this.options.openedSources||[];d.each(this.dashboardVis,function(a){g.indexOf(a.source.sourceName)<0&&g.push(a.source.sourceName)}),b&&this.addConnectionToSources(b);var h=new l({className:"zd nav nav-tabs nav-stacked",selectable:"radio",filter:function(a){return e(a)&&a.get("enabled")},ItemView:m,collection:this.collection,loaderTemplate:o,sortOpened:!0,openedSources:g,sortbyOptions:{sortby:a&&a.sortby,ascending:a&&a.ascending}});this.listenToOnce(h,"select",this.selectSource);var i={backButton:!1},j=a&&a.silent,k=-1!==f.user.roles.indexOf("admin");a&&a.sortby&&(i.sortby=a.sortby,i.ascending=a.ascending),this.show(h,i),this.getListPosition(),this.selectedSource=null,j||this.trigger("showSourceList"),this.options.dataSrcButton&&0===this.$el.find(".edit-datasource-btn").length&&k&&this.$el.append(this.options.dataSrcButton.render().$el).addClass("bottom-margin")}else this.$el.html('<div class="no-sources-added">No data sources <br>have been added.</div>');return this},addConnectionToSources:function(a){var b=this.collection,c=a.groupBy(function(a){return a.get("id")});b.each(function(a){var b=a.get("storageConfiguration");if(b){var d=c[b.connectionId];b&&d&&(a.connection=d[0])}})},show:function(a,b){this.empty(),this.$el.html(this.template({title:b.title,backButton:b.backButton})),this.$el.append(a.render().$el),this.childViews.push(a)},getListPosition:function(){var a=this.model.get("sourceName");if(a){var b=c('li.sourceItem a[title="'+a+'"]'),d=c(b).parent("li");c(b).focus(function(){c(d).addClass("selected")}),c(b).focus(),c(b).blur()}},render:function(a,b){return this.showSourceList(a,b),this}})}()},{"../../Core/MVC":6,"../../collections/SourceVisualizations":28,"../../collections/Sources":30,"./../../components/settings":55,"./../ListView":275,"./../SourceItem":354,"./../VisualizationItem":382,"./loaderTemplate.html":352,"./sourceBrowserTemplate.html":353,jquery:103,underscore:458}],352:[function(a,b){b.exports=a(341)},{"/var/lib/jenkins/workspace/Zoomdata-Release/server/web/src/main/webapp/js/views/SidePaneControl/loaderTemplate.html":341,lodash:456}],353:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n",backButton&&(__p+='\n<button value="button-back" title="Back" class="btn-link">\n    <span class="zd icon back"></span>DATA SOURCES\n</button>\n'),__p+="\n",title&&(__p+="\n<legend>\n    <span>"+__e(title)+"</span>\n</legend>\n");return __p}},{lodash:456}],354:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("../../models/Source"),e=a("./../ListItem"),f=a("../../utilities"),g=a("./sourceItemTemplate.html");b.exports=e.extend({model:new d,className:"sourceItem item-description",events:{"click a":"_onClick","click .itemDetailsIcon":"toggleDetails"},defaults:{template:g,icon:!0},toggleDetails:function(){return this.$(".itemDetails").slideToggle(),!1},render:function(){var a=this.detectIconType().type_image,b="images/"+a;return c.compose(this.$el.html.bind(this.$el),this.options.template,function(a){return a.id=a.id||"",a.description=f.keepLinebreaks(f.htmlEntities(a.description||"")),a},c.pick)(this.model.attributes,["name","description","id"]),this.delegateEvents(),this.$('[data-role="sourceIcon"]').prop("src",b),this.model.set("sourceIcon",b),this},detectIconType:function(){{var a=Boolean(this.model.get("enabled"))?"checked":"",b=c.extend(this.model.toJSON(),{enabled:a});this.model.get("storageConfiguration")}b.type_image="bug/Bug_Zoomdata_API.png?v=01081831";var d=b.type;if("SQL"===d&&(d=this.model.get("subStorageType")),"SPARK"===d&&b.storageConfiguration&&b.storageConfiguration.parameters){var e=b.storageConfiguration.parameters.PATH_TO_FILE;d=this.model._detectTypeViaPathFile(e,d),b.subType=d}switch(d){case"GOOGLE":b.type_image="bug/Bug_GoogleDocs.png?v=01081831";break;case"IMPALA":b.type_image="bug/Bug_Cloudera.png?v=01081831";break;case"MONGO":switch(b.streamType){case"TWEET":b.type_image="bug/Bug_Twitter.png?v=01081831";break;case"API":b.type_image="bug/Bug_Zoomdata_API.png?v=01081831";break;case"CSV":b.type_image="bug/FlatFile_bug.png?v=01081831";break;case"KINESIS":b.type_image="bug/Bug_Kinesis.png?v=01081831";break;case"MONGO":b.type_image="bug/Bug_MongoDB.jpg?v=01081831";break;case"DEMO_RECORD":b.type_image="bug/Bug_Zoomdata_API.png?v=01081831";break;default:b.type_image="bug/Bug_MongoDB.png?v=01081831"}break;case"CLOUD_SEARCH":b.type_image="bug/Bug_ClouderaSearch.png?v=01081831";break;case"SOLR":b.type_image="bug/Bug_Solr.png?v=01081831";break;case"SQL":b.type_image="bug/Bug_SQL.png?v=01081831";break;case"REDSHIFT":b.type_image="bug/Bug_AmazonRedshift.png?v=01081831";break;case"RDS":b.type_image="bug/Bug_AmazonRDS.png?v=01081831";break;case"ORACLE":b.type_image="bug/Bug_Oracle.png?v=01081831";break;case"MYSQL":b.type_image="bug/Bug_MySQL.png?v=01081831";break;case"SPARKSQL":b.type_image="bug/SparkSQL_Bug.png?v=01081831";break;case"SQLSERVER":b.type_image="bug/Bug_SQLServer.png?v=01081831";break;case"POSTGRESQL":b.type_image="bug/Bug_PostgreSQL.png?v=01081831";break;case"PRESTO":b.type_image="bug/Bug_Presto.png?v=01081831";break;case"ELASTIC_SEARCH":b.type_image="bug/Bug_ElasticSearch.png?v=01081831";break;case"SPARK":b.type_image="bug/Bug_Spark.png?v=01081831";break;case"S3":b.type_image="bug/Bug_AmazonS3.png?v=01081831";break;case"HDFS":b.type_image="bug/Bug_Hadoop.png?v=01081831";break;default:b.type_image="bug/Bug_Zoomdata_API.png?v=01081831"}return this.model.type_image=b.type_image,["CLOUD_SEARCH","IMPALA"].indexOf(b.type)>=0&&"CSV"===b.streamType&&(console.warn("Deleted streamType for:",b),delete b.streamType),b}})}()},{"../../models/Source":129,"../../utilities":144,"./../ListItem":273,"./sourceItemTemplate.html":355,underscore:458}],355:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd icon-data-sources"> \n    <img data-role="sourceIcon"> \n</div>  \n<a title="'+(null==(__t=name)?"":__t)+'" href="#" data-id="'+__e(id)+'">\n    <span class="source-name-data">'+__e(name)+"</span>\n    ",description&&(__p+='\n    <i title="Details" class="itemDetailsIcon pull-right zd icon info"></i>\n    '),__p+='\n</a>\n<div class="itemDetails" style="display: none;">\n    '+(null==(__t=description)?"":__t)+"\n</div> ";return __p}},{lodash:456}],356:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("./tabBarTemplate.html"),g=(a("./../../collections/Connections"),e.View.extend({className:"zd-tabbar",defaults:{},events:{'click button[value="button-back"]':"showSourceTabList"},_tab:null,initialize:function(a){d.bindAll(this,"render","select"),a=a||{},this.options=c.extend({},this.defaults,a),this.template=f},render:function(){return this.$el.html(this.template()),this.$body=this.$el.find(".zd-tabbar-body"),this._tab?this.$body.append(this._tab.view.render().$el):this.select(0),this},showSourceTabList:function(){this._tab.view.showSourceList()},select:function(a){var b=this;a<this.options.tabs.length&&(this._tab&&this._tab.view.$el.hide(),this._tab=this.options.tabs[a],this._tab.view.$el.show(),"sources"===this._tab.tabValues?b._tab.view.collection.bootstrap({lightweight:!0}).done(function(){b.$body.append(b._tab.view.render(b.sortingBy.model.toJSON()).$el),b.trigger("tab:select",b.options.tabs[a].view)}):this._tab.view.collection.bootstrap({lightweight:!0}).done(function(){b.$body.append(b._tab.view.render(b.sortingBy.model.toJSON()).$el),b.trigger("tab:select",b.options.tabs[a].view)}))}}));b.exports=g}()},{"../../Core/MVC":6,"./../../collections/Connections":12,"./tabBarTemplate.html":357,jquery:103,underscore:458}],357:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd-tabbar-body">\n</div>';return __p}},{lodash:456}],358:[function(a,b){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../utilities"),f=a("../../Core/Settings"),g=a("../../Core/MVC"),h=a("./timeControlTemplate.html"),i=null,j=a("./timePickerTemplate.html"),k=g.View.extend({events:{"click #apply-timewindow.enabled":"applyCustomTimeWindow","click #back-button":"popView",dragstart:"_preventDrag"},id:"time-control-content",animating:!1,_preventDrag:function(){return!1},initialize:function(){g.View.prototype.initialize.apply(this,arguments),d.bindAll(this,"render","remove","pushView","popView","popToRootView","timeWindowItemSelected","applyCustomTimeWindow","showBackButton","hideBackButton","willClose","didShow"),i=this,this.childViews=[];var a=new Date;a.setHours(0),a.setMinutes(0),a.setSeconds(0);var b=new Date;b.setSeconds(0),this.collection=new g.Collection([new g.Model({name:"Custom",value:f.TIME_WINDOW_SCALE.CUSTOM,from:a,to:b,live:this.options.state.time.get("live")})]);var c=this.options.state.config.get("streamType");if("CSV"!==c){var e=this.options.state.time.get("minSpeed");60>=e&&(this.collection.add(new g.Model({name:"Rolling Hour",value:f.TIME_WINDOW_SCALE.ROLLING_HOUR})),this.collection.add(new g.Model({name:"This Hour",value:f.TIME_WINDOW_SCALE.HOUR}))),3600>=e&&this.collection.add(new g.Model({name:"Today",value:f.TIME_WINDOW_SCALE.DAY})),this.collection.add(new g.Model({name:"This Calendar Week",value:f.TIME_WINDOW_SCALE.WEEK})),this.collection.add(new g.Model({name:"This Calendar Month",value:f.TIME_WINDOW_SCALE.MONTH})),this.collection.add(new g.Model({name:"This Calendar Quarter",value:f.TIME_WINDOW_SCALE.QUARTER})),this.collection.add(new g.Model({name:"This Calendar Year",value:f.TIME_WINDOW_SCALE.YEAR}))}this.collection.add(new g.Model({name:"All",value:f.TIME_WINDOW_SCALE.ALL})),this.render()},render:function(){return this.$el.append(h()),this.pushView(new m({state:this.options.state,collection:this.collection}),!1),this},pushView:function(a){if(a&&!this.animating){this.animating=!0;var b=this,c=this.childViews.length,d=function(){if(c>0){var d=b.childViews[c-1];d.$el.hide()}"function"==typeof a.loaded&&a.loaded(),b.animating=!1};d(),a.render(),this.$el.find("#time-control").append(a.el),this.childViews.push(a),this.childViews.length>1&&this.showBackButton()}},popView:function(){var a=this.childViews.length,b=this;if(a>1){var c=function(){if(a>0){var c=b.childViews.pop();c.remove()}},d=this.childViews[a-2];this.$el.find("#time-control").append(d.el),d.$el.show(),"function"==typeof d.update&&d.update(),c(),1===b.childViews.length&&b.hideBackButton()}},popToRootView:function(){var a=this.childViews.length,b=this;if(a>1){var c=function(){for(;b.childViews.length>1;){var a=b.childViews.pop();a.remove()}},d=this.childViews[0];this.$el.find("#time-control").append(d.el),d.$el.show(),c(),b.hideBackButton()}},timeWindowItemSelected:function(a){var b=this.options.state.get("timeTrendStep");if(!b){var d=c(a.currentTarget),e=d.attr("data-value");c(d).addClass("checked").siblings(".checked").removeClass("checked"),c(".checked.true").removeClass("true"),c(d[0].children[0].children[0]).removeClass("false").addClass("true"),e===f.TIME_WINDOW_SCALE.CUSTOM?this.pushView(new r({state:this.options.state,source:this.options.source,scale:this.collection.at(0)}),!0):e&&this.options.state.get("timeWindowScale")!==e&&("ALL"===e&&"LIVE"===this.options.source.get("startFrom")?(this.options.state.time.set({time:null,live:!this.options.state.time.get("paused")},{silent:!0}),this.options.state.set("timeWindowScale",e)):(this.options.state.time.set({time:(new Date).getTime(),live:!this.options.state.time.get("paused")},{silent:!0}),this.options.state.set("timeWindowScale",e)))}},applyCustomTimeWindow:function(){var a=this.options.state,b=this.collection.at(0),d=b.get("value"),e=b.get("from"),f=c.datepicker.formatDate("yy-mm-dd",e)+" "+e.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1"),g={fromTime:e.getTime(),paused:!b.get("live"),live:b.get("live"),timeWindow:d};g.time=b.get("live")?null:b.get("to").getTime(),a.get("timeWindowScale")!==f?(a.time.set(g,{silent:!0}),a.set({timeWindowScale:f})):a.time.set(g),this.popToRootView()},showBackButton:function(){this.onShowBackButton(),this.backButton||(this.$el.prepend('<button value="back" id="back-button" class="btn btn-link pull-right"><i class="icon-chevron-left"></i>Back</button>'),this.backButton=this.$("#back-button"))},hideBackButton:function(){this.onHideBackButton(),this.backButton&&(this.backButton.remove(),this.backButton=null)},willClose:function(){this.popToRootView()},didShow:function(){this.$(".time-window-item").on("click",this.timeWindowItemSelected)},onShowBackButton:c.noop,onHideBackButton:c.noop}),l=d.template('    <div class="subhead">TIME WINDOW</div>     <ul class="unstyled"></ul>	'),m=g.View.extend({attributes:{id:"time-window"},render:function(){var a=this;this.$el.append(l());var b=this.$("ul");return this.collection.forEach(function(c){new p({state:a.options.state,el:b,model:c})}),this.validate(),this},validate:function(){var a=this.options.state.get("timeWindowScale");isNaN(Date.parse(a))||(a=f.TIME_WINDOW_SCALE.CUSTOM);var b=this.options.state.get("timeTrendStep"),d=c("li.time-window-item");d.each(function(d,e){console.warn(c(e).data().value),b?(c(e).addClass("disabled"),c(e).removeClass("checked")):(c(e).removeClass("disabled"),c(e).data().value===a?c(e).addClass("checked"):c(e).removeClass("checked"))})}}),n=d.template('    <li class="time-window-item <% if (checked) { %>checked <% } else { %><% } if (timeTrendStep) { %>disabled<% } else { %><% } if (custom) { %>custom<% } else { %><% } %>" data-value="<%= value %>">	        <!-- <div class="checkbox fontIcon"></div>-->	        <div class="zd icon checkbox radio"><div class="zd checked <%=checked %>"></div></div>        <div class="name"><%- name %></div>	    </li>	'),o=a("../../models/TimeWindowScale"),p=g.View.extend({model:o,initialize:function(){g.View.prototype.initialize.apply(this,arguments),d.bindAll(this,"render","remove"),this.render()},render:function(){var a=this.options.state.get("timeWindowScale"),b=d.keys(f.TIME_WINDOW_SCALE);(!isNaN(Date.parse(a))||b.indexOf(a)<0)&&(a=f.TIME_WINDOW_SCALE.CUSTOM);var c=a===this.model.get("value"),e=this.options.state.get("timeTrendStep"),g=this.model.get("value");return this.$el.append(n({name:this.model.get("name"),value:g,checked:c,timeTrendStep:e,custom:g===f.TIME_WINDOW_SCALE.CUSTOM})),this}}),q=d.template('    <legend>Specify Date Range</legend>	    <label>From:</label>    <div class="control-group">        <button class="date day btn zd btn" id="day-from">	            <div class="text"><%- day_from %></div>	            <div class="zd icon date"/>	        </button>	        <button class="date time zd btn" id="time-from">	            <div class="text"><%- time_from %></div>	            <div class="zd icon clock"/>	        </button>    </div>	    <label>To:</label>    <div class="to-container" id="live">     </div>     <div class="control-group" id="to-radio" <% if (disabledLive) { %>style="display: none;"<% } %> >	        <label class="radio">Live View<input id="live" type="radio" name="to" value="live" <% if (live) { %>checked<% } %> /></label>          <label class="radio">Specific Time<input id="select" type="radio" name="to" value="select" <% if (!live) { %>checked<% } %> /></label>    </div>	    <div id="select-date-to">         <div class="control-group">            <button class="date day btn zd btn" id="day-to">	                <div class="text"><%- day_to %></div>	                <div class="zd icon date"/>	            </button>	            <button class="date time zd btn" id="time-to">	                <div class="text"><%- time_to %></div>	                <div class="zd icon clock"/>	            </button>	        </div>    </div>	    <div id="apply-timewindow" class="zd btn btn-success btn-block">Apply</div>	'),r=g.View.extend({className:"zd form-inline",events:{"click .date.day":"showDayPicker","click .date.time":"showTimePicker","click #live":"onLive","click #select":"onSelect"},isLive:!0,initialize:function(){g.View.prototype.initialize.apply(this,arguments),d.bindAll(this,"render","remove","showDayPicker","showTimePicker","onLive","onSelect","update","validate");var a=this.options.state.get("timeWindowScale"),b=new Date(this.options.state.time.get("time"));isNaN(Date.parse(a))?this.options.scale.set("from",new Date(this.options.state.time.get("min"))):this.options.scale.set("from",new Date(a)),isNaN(b)?this.options.scale.set("to",new Date(this.options.state.time.get("max"))):this.options.scale.set("to",new Date(b))},render:function(){var a=["CSV","SPARK"],b=this.options.scale.get("from"),d=this.options.scale.get("to"),f=this.options.state.config,g=f.get("streamType")||this.options.source.get("type");this.isLive=this.options.scale.get("live");var h={day_from:c.datepicker.formatDate("mm/dd/yy",b),time_from:e.formattedTimeOnly(b),day_to:c.datepicker.formatDate("mm/dd/yy",d),time_to:e.formattedTimeOnly(d),live:this.isLive,disabledLive:-1!==a.indexOf(g)};return this.$el.append(q(h)),this.isLive?c(this.$el.find("#select-date-to")).hide():c(this.$el.find("#select-date-to")).show(),this.validate(),this
},showDayPicker:function(a){var b=c(a.currentTarget),d=b.attr("id"),e=null,f=this.options.scale.get("from"),g=this.options.scale.get("to"),h=new Date(this.options.state.time.get("min")),j=new Date(this.options.state.time.get("max"));e=new t("day-from"===d?{state:this.options.state,date:f,startDate:h,endDate:j}:{state:this.options.state,date:g,startDate:h,endDate:j}),i.pushView(e,!0)},showTimePicker:function(a){var b=c(a.currentTarget),d=b.attr("id"),e=null;e=new u("time-from"===d?{state:this.options.state,date:this.options.scale.get("from"),startDate:null,endDate:this.options.scale.get("to"),showSeparators:!0}:{state:this.options.state,date:this.options.scale.get("to"),startDate:this.options.scale.get("from"),endDate:new Date,showSeparators:!0}),i.pushView(e,!0)},onLive:function(){c(this.$el.find("#select-date-to")).hide("fast"),this.options.scale.set("live",!0),this.validate()},onSelect:function(){c(this.$el.find("#select-date-to")).show("fast"),this.options.scale.set("live",!1),this.validate()},update:function(){var a=this.options.scale.get("from"),b=this.options.scale.get("to");c(this.$el.find("#day-from .text")).text(c.datepicker.formatDate("mm/dd/yy",a)),c(this.$el.find("#time-from .text")).text(e.formattedTimeOnly(a)),c(this.$el.find("#day-to .text")).text(c.datepicker.formatDate("mm/dd/yy",b)),c(this.$el.find("#time-to .text")).text(e.formattedTimeOnly(b)),this.validate()},validate:function(){var a=this.$("#apply-timewindow"),b=this.options.scale.get("from"),c=this.options.scale.get("to"),d=this.options.scale.get("live");d&&(c=(new Date).getTime());var e=1e3*this.options.state.time.get("minSpeed");c-b>e?a.addClass("enabled").removeClass("btn-success.disabled").addClass("btn-success"):a.removeClass("enabled").removeClass("btn-success").addClass("btn-success.disabled")}}),s=d.template('    <% if (showBackButton) { %>        <button id="back-date-picker" value="back" class="btn btn-link pull-right"><i class="icon-chevron-left"></i>Back</button>	    <% } %>    <div id="day-datepicker-container"/>	    <% if (showApplyButton) { %>        <div id="apply-day" class="zd btn btn-success btn-block disabled">Apply</div>	    <% } %>'),t=g.View.extend({className:"day-picker",defaults:{showBackButton:!1,showApplyButton:!0},events:{"click #apply-day.enabled":"apply","click #back-date-picker":"onBackView"},initialize:function(){this.options=c.extend({},this.options,this.defaults),g.View.prototype.initialize.apply(this,arguments),d.bindAll(this,"render","remove","loaded","apply"),this.isEndDate=!1,this.startingState=d.clone(this.options)},render:function(){var a=this,b=this.options.startDate,d=this.options.endDate;this.$el.append(s({showApplyButton:this.options.showApplyButton,showBackButton:this.options.showBackButton})),this.$applyDayBtn=this.$el.find("#apply-day"),this.isEndDate=!1,b&&(b=new Date(b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear()+" 00:00:00 UTC")),d?d=new Date(d.getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear()+" 23:59:59 UTC"):this.isEndDate=!0,this.$datePickerContainer=this.$("#day-datepicker-container"),this.$datePickerContainer.datepicker({isInline:!0,noHide:!0,startDate:b,endDate:d}).on("changeDate",function(){a.validateApplyBtn(b,d)}),this.validateApplyBtn(b,d);var e=c.datepicker.formatDate("yy-mm-dd",this.options.date);return this.$datePickerContainer.datepicker("update",new Date(e)),this.delegateEvents(),this},validateApplyBtn:function(a,b){var c=this,d=this.getDate();a&&b&&(d>a||d>b?c.$applyDayBtn.removeClass("disabled").addClass("enabled"):c.$applyDayBtn.addClass("disabled").removeClass("enabled"))},loaded:function(){},getDate:function(){return this.$datePickerContainer.datepicker("getDate")},onBackView:c.noop,onApply:c.noop,apply:function(){var a=this.$datePickerContainer.datepicker("getDate"),b=new Date(a),c=new Date(this.options.date),d=!1;if(b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0),d=b.getTime()===c.getTime(),this.options.date.setFullYear(a.getFullYear()),this.options.date.setMonth(a.getMonth()),this.options.date.setDate(a.getDate()),this.isEndDate)if(d){var e=this.startingState.date;this.options.date.setHours(e.getHours()),this.options.date.setMinutes(e.getMinutes()),this.options.date.setSeconds(e.getSeconds())}else this.options.date.setHours(23),this.options.date.setMinutes(59),this.options.date.setSeconds(59);this.onApply(),i&&i.popView()}}),u=g.View.extend({className:"time-picker",defaults:{showBackButton:!1,showApplyButton:!0},events:{"click .hour .next":"nextHour","click .hour .previous":"previousHour","click .minute .next":"nextMinute","click .minute .previous":"previousMinute","click .second .next":"nextSecond","click .second .previous":"previousSecond","click .ampm .previous":"changeAMPM","click .ampm .next":"changeAMPM","click #apply-time.enabled":"apply","click #back-time-picker":"onBackView","keydown .time-input":"editTimeValue","focusout .time-input":"editTimeValue","keyup .time-input":"editTimeValue"},_onTimeChange:function(){this.onTimeChange(this.getDate())},editTimeValue:function(a){var b=this.$(a.currentTarget),c=b.val(),d="number"==typeof a.which?a.which:a.keyCode,e=b.data("maxValue");if("focusout"===a.type)0===c.length&&b.val(e),this.validate();else if("keyup"===a.type)Number(c)>e&&b.val(e),this.validate();else if("keydown"===a.type){if((48>d||d>57)&&!isNaN(Number(c))&&8!==d)return!1;this.validate()}this._onTimeChange()},initialize:function(){this.options=c.extend({},this.options,this.defaults),g.View.prototype.initialize.apply(this,arguments),d.bindAll(this,"render","remove","loaded","nextHour","previousHour","nextMinute","previousMinute","nextSecond","previousSecond","changeAMPM","update","apply","validate")},render:function(){return this.$el.append(j({showApplyButton:this.options.showApplyButton,showBackButton:this.options.showBackButton,showSeparators:this.options.showSeparators,tabindex:this.options.tabindex})),this.update(),this.delegateEvents(),this.validate(),this},loaded:function(){},nextHour:function(){var a=parseInt(this.$el.find(".hour input").val(),10);a+=1,a>12&&(a=1),this.$el.find(".hour input").val(a),this.validate(),this._onTimeChange()},previousHour:function(){var a=parseInt(this.$el.find(".hour input").val(),10);a-=1,1>a&&(a=12),this.$el.find(".hour input").val(a),this.validate(),this._onTimeChange()},nextMinute:function(){var a=parseInt(this.$el.find(".minute input").val(),10);a+=1,a>59&&(a=0),this.$el.find(".minute input").val(10>a?"0"+a:a),this.validate(),this._onTimeChange()},previousMinute:function(){var a=parseInt(this.$el.find(".minute input").val(),10);a-=1,0>a&&(a=59),this.$el.find(".minute input").val(10>a?"0"+a:a),this.validate(),this._onTimeChange()},nextSecond:function(){var a=parseInt(this.$el.find(".second input").val(),10);a+=1,a>59&&(a=0),this.$el.find(".second input").val(10>a?"0"+a:a),this.validate(),this._onTimeChange()},previousSecond:function(){var a=parseInt(this.$el.find(".second input").val(),10);a-=1,0>a&&(a=59),this.$el.find(".second input").val(10>a?"0"+a:a),this.validate(),this._onTimeChange()},changeAMPM:function(){var a=this.$el.find(".ampm input").val();this.$el.find(".ampm input").val("AM"===a?"PM":"AM"),this.validate(),this._onTimeChange()},update:function(){var a=this.options.date;this.$el.find(".minute input").val(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes()),this.$el.find(".second input").val(a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds());var b=a.getHours();b>=12?(this.$el.find(".hour input").val(12===b?b:b-12),this.$el.find(".ampm input").val("PM")):(this.$el.find(".hour input").val(0===b?12:b),this.$el.find(".ampm input").val("AM"))},apply:function(){var a=parseInt(this.$el.find(".hour input").val(),10),b=parseInt(this.$el.find(".minute input").val(),10),c=parseInt(this.$el.find(".second input").val(),10),d=this.$el.find(".ampm input").val();this.options.date.setHours("AM"===d?12===a?0:a:12===a?12:a+12),this.options.date.setMinutes(b),this.options.date.setSeconds(c),this.onApply(),i&&i.popView()},onBackView:c.noop,onApply:c.noop,validate:function(){var a=this.options.state.time.toJSON(),b=new Date(a.min),d=new Date(a.max),e=this.getDate(),f=c(this.$el.find("#apply-time"));b>e||e>d?f.removeClass("enabled").addClass("disabled"):f.removeClass("disabled").addClass("enabled")},getDate:function(){var a=new Date(this.options.date),b=parseInt(this.$el.find(".hour input").val(),10),c=parseInt(this.$el.find(".minute input").val(),10),d=parseInt(this.$el.find(".second input").val(),10),e=this.$el.find(".ampm input").val();return a.setHours("AM"===e?12===b?0:b:12===b?12:b+12),a.setMinutes(c),a.setSeconds(d),a},onTimeChange:c.noop});b.exports={TimeControl:k,DayPickerView:t,TimePickerView:u,CustomTimeWindowView:r}},{"../../Core/MVC":6,"../../Core/Settings":7,"../../models/TimeWindowScale":131,"../../utilities":144,"./timeControlTemplate.html":360,"./timePickerTemplate.html":361,jquery:103,underscore:458}],359:[function(a,b){b.exports=a("./TimeControl")},{"./TimeControl":358}],360:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div id="time-control" >\n</div>';return __p}},{lodash:456}],361:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n\n",showBackButton&&(__p+='\n<button id="back-time-picker" value="back" class="btn btn-link pull-right"><i class="icon-chevron-left"></i>Back\n</button>\n'),__p+='\n<div id="time-timepicker-container">\n    <table>\n        <tbody>\n        <tr>\n            <td class="hour">\n                <a class="next"><i class="icon-chevron-up"></i></a><br>\n                <input tabindex="'+(null==(__t=tabindex?tabindex:1)?"":__t)+'" type="text" class="input-mini time-input" data-max-value="12"><br>\n                <a class="previous"><i class="icon-chevron-down"></i></a>\n            </td>\n            ',showSeparators&&(__p+='\n                <td class="separator">:</td>\n            '),__p+='\n            <td class="minute">\n                <a class="next"><i class="icon-chevron-up"></i></a><br>\n                <input tabindex="'+(null==(__t=tabindex?tabindex:1)?"":__t)+'" type="text" class="input-mini time-input" data-max-value="59"><br>\n                <a class="previous"><i class="icon-chevron-down"></i></a>\n            </td>\n            ',showSeparators&&(__p+='\n                <td class="separator">:</td>\n            '),__p+='\n            <td class="second">\n                <a class="next"><i class="icon-chevron-up"></i></a><br>\n                <input tabindex="'+(null==(__t=tabindex?tabindex:1)?"":__t)+'" type="text" class="input-mini time-input" data-max-value="59"><br>\n                <a class="previous"><i class="icon-chevron-down"></i></a>\n            </td>\n            <td class="ampm">\n                <a class="next"><i class="icon-chevron-up"></i></a><br>\n                <input tabindex="'+(null==(__t=tabindex?tabindex:1)?"":__t)+'" type="text" class="input-mini" readonly><br>\n                <a class="previous"><i class="icon-chevron-down"></i></a>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</div>\n',showApplyButton&&(__p+='\n<div id="apply-time" class="zd btn btn-success btn-block disabled">Apply</div>\n'),__p+="\n";return __p}},{lodash:456}],362:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("moment")),e=a("../../Core/MVC"),f=e.Events,g=a("../../utilities"),h=a("./../TimeControl"),i=a("./../NumericFilterEditor/index.js"),j=a("./timeRangeFilterTemplate.html"),k=a("./timeFilterOperatorTemplate.html"),l=h.DayPickerView,m=h.TimePickerView.extend({validate:function(){c(this.$el.find("#apply-time")).removeClass("disabled").addClass("enabled")}}),n=(a("velocity-animate"),h.CustomTimeWindowView.extend({initialize:function(a){e.View.prototype.initialize.apply(this,arguments),a.$parentEl&&(this.$parentEl=a.$parentEl,delete a.$parentEl),a.timestampGranularity&&(this.timestampGranularity=a.timestampGranularity,delete a.timestampGranularity),this.model=this.model||new e.Model({from:this.options.from,to:this.options.to,max:this.options.max,min:this.options.min,val:this.options.val||this.options.from})},events:{"click div.date":"initManualTimeChange","focus div.date":"initManualTimeChange"},initManualTimeChange:function(a){var b=this,d=c(a.currentTarget),e=d.attr("id"),f=this.$el.find(".picker-container"),h=d.parent(),i=h.find(".picker-container");1===i.children().length||d.hasClass("icon")||(this.$el.find(".icon-wrapper.active").removeClass("active"),d.find(".icon-wrapper").addClass("active"),d.off("keydown keyup").on("keydown",function(a){b.validateKeyCodes(a),13===a.keyCode&&(d.hasClass("day")?b.applyDate(e):b.applyTime(e),b.trigger("view:back"))}).on("keyup",function(a){var c,f=d.find('input[type="text"]'),h=f.val(),j=(new Date).getFullYear(),k=a.target.defaultValue;if(g.validateDateInput(h)&&d.hasClass("day"))k=8===h.length?h.slice(0,-2)+j:h,c=b.getSelectedDate(e,k),b.dayPickerView.$datePickerContainer.datepicker("update",b.validateTimePeriod(c)?k:a.target.defaultValue);else if(d.hasClass("time")){c=b.getSelectedDate(e,h);var l,m,n,o,p=b.validateTimePeriod(c);p&&c&&(l=c.getHours(),m=c.getMinutes(),n=c.getSeconds(),o=l>=12?"PM":"AM",i.find('td.hour input[type="text"]').val(l),i.find('td.minute input[type="text"]').val(m),i.find('td.second input[type="text"]').val(n),i.find('td.ampm input[type="text"]').val(o))}}),this.resetUnsaved(),f.hide().empty(),d.hasClass("day")?this.showDayPicker(a,i):d.hasClass("time")&&this.showTimePicker(a,i),f.parent().removeClass("open"),i.parent().addClass("open"),d.find('input[type="text"]').focus())},resetUnsaved:function(){var a,b,c=this.$el.find(".open"),e=c.find('input[type="text"]'),f=e.data();f&&(a="date"===f.type?"MM/DD/YYYY":"hh:mm:ss A",b=d.utc(this.model.get(f.period)).format(a),e.val(b))},validateKeyCodes:function(a){-1===c.inArray(a.keyCode,[13,32,8,191,65,80,77,37,39,9])&&(a.shiftKey&&186===a.keyCode||a.shiftKey&&65===a.keyCode||a.shiftKey&&80===a.keyCode||a.shiftKey&&77===a.keyCode||(a.shiftKey||a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105)&&a.preventDefault())},render:function(){var a=this.model.toJSON(),b=["DAY","WEEK","MONTH","YEAR"],c={day_from:d.utc(a.from).local().format("MM/DD/YYYY"),time_from:d.utc(a.from).local().format("hh:mm:ss A"),day_to:d.utc(a.to).local().format("MM/DD/YYYY"),time_to:d.utc(a.to).local().format("hh:mm:ss A"),show_time:b.indexOf(this.timestampGranularity)<0};return this.options.operator?(c.day_from=d.utc(a.val).local().format("MM/DD/YYYY"),c.time_from=d.utc(a.val).local().format("hh:mm:ss A"),this.$el.html(k(c)),this.$el.find('#operator-switch [data-operation="'+this.options.operatorValue+'"]').addClass("selected")):this.$el.html(j(c)),this.delegateEvents(),this},showDayPicker:function(a,b){{var e=this,f=c(a.currentTarget),g=f.attr("id"),h=null,i=new Date(this.model.get("from")),j=new Date(this.model.get("to")),k=new Date(this.model.get("min")),m=new Date(this.model.get("max"));new Date(this.model.get("val"))}h=this.options.operator?{date:i,startDate:k,endDate:m,showBackButton:!1}:"day-from"===g?{date:i,startDate:k,endDate:m,showBackButton:!1}:{date:j,startDate:i,endDate:m,showBackButton:!1},this.dayPickerView&&this.dayPickerView.remove(),this.dayPickerView=new l(h),this.dayPickerView.onBackView=function(){e.trigger("view:back")},this.dayPickerView.onApply=function(){e.applyDate(g),e.validateTimePeriod(),e.trigger("view:back")},b.html(this.dayPickerView.render().$el).hide().velocity("slideDown",{duration:300}),this.dayPickerView.$datePickerContainer.datepicker().on("changeDate",function(a){var b=a.date,c=d(b).format("MM/DD/YYYY"),h=e.dayPickerView.$el.find("#apply-day");e.validateTimePeriod(e.getSelectedDate(g,c))?(f.find('input[type="text"]').val(c),h.removeClass("disabled").addClass("enabled")):h.removeClass("enabled").addClass("disabled")})},applyDate:function(a){this.options.operator?this.model.set("val",this.dayPickerView.options.date):"day-from"===a?this.model.set("from",this.dayPickerView.options.date):this.model.set("to",this.dayPickerView.options.date)},showTimePicker:function(a,b){var e=this,f=c(a.currentTarget),g=f.attr("id"),h=null;h=this.options.operator?{date:new Date(this.model.get("val")),startDate:null,endDate:new Date(this.model.get("to")),showBackButton:!1}:"time-from"===g?{date:new Date(this.model.get("from")),startDate:null,endDate:new Date(this.model.get("to")),showBackButton:!1}:{date:new Date(this.model.get("to")),startDate:new Date(this.model.get("from")),endDate:new Date,showBackButton:!1},h.showSeparators=!1,h.tabindex=-1,this.timePickerView&&this.timePickerView.remove(),this.timePickerView=new m(h),this.timePickerView.onBackView=function(){e.trigger("view:back")},this.timePickerView.onApply=function(){e.applyTime(g),e.validateTimePeriod(),e.trigger("view:back")},this.timePickerView.onTimeChange=function(a){var b=d.utc(a).local().format("hh:mm:ss A"),c=e.timePickerView.$el.find("#apply-time");e.validateTimePeriod(e.getSelectedDate(g,b))?(f.find('input[type="text"]').val(b),c.removeClass("disabled").addClass("enabled")):c.removeClass("enabled").addClass("disabled")},b.html(this.timePickerView.render().$el).hide().velocity("slideDown",{duration:300})},applyTime:function(a){this.options.operator?this.model.set("val",this.timePickerView.options.date):"time-from"===a?this.model.set("from",this.timePickerView.options.date):this.model.set("to",this.timePickerView.options.date)},validateTimePeriod:function(a){var b=this.model.get("from"),c=this.model.get("to"),d=this.model.get("min"),e=this.model.get("max");return b>c&&this.model.set({from:c}),a?a>=d&&e>=a:void 0},getSelectedDate:function(a,b){var c=this.model.get("from"),d=this.model.get("to"),e="day-from"===a||"time-from"===a?c:d,f=a.indexOf("day")>=0?b+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds():e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+b;return new Date(f)}})),o=i.extend({initialize:function(){function a(a){var b;return b=d.utc(isNaN(new Date(a))?g.noUTCString(a):a)}i.prototype.initialize.apply(this,arguments),this.from="string"==typeof this.from?a(this.from):d.utc(this.from),this.to="string"==typeof this.to?a(this.to):d.utc(this.to),this.max="string"==typeof this.max?a(this.max):d.utc(this.max),this.min="string"==typeof this.min?a(this.min):d.utc(this.min),this.val="string"==typeof this.val?a(this.val):d.utc(this.val),this.timeRangeFilterPicker=new n({from:this.from.toDate(),to:this.to.toDate(),max:this.max.toDate(),min:this.min.toDate(),operator:!1,$parentEl:this.$el,timestampGranularity:this.options.objectField.get("timestampGranularity")}),this.timeRangeFilterOperator=new n({from:this.from,to:this.to,max:this.max,min:this.min,val:this.val,operator:!0,operatorValue:this.operator,$parentEl:this.$el,timestampGranularity:this.options.objectField.get("timestampGranularity")}),this.childViews.push(this.timeRangeFilterPicker),this.childViews.push(this.timeRangeFilterOperator),this.listenTo(this.timeRangeFilterPicker,"view:back",this.onPickerBack),this.listenTo(this.timeRangeFilterOperator,"view:back",this.onPickerBack),this.listenTo(this.timeRangeFilterPicker.model,"change",this.onChange),this.listenTo(this.timeRangeFilterOperator.model,"change",this.onChange)},render:function(){return i.prototype.render.apply(this,arguments),this.delegateEvents(),this},onPickerBack:function(){this.$el.empty(),this.render(),this.$el.find(".item").removeClass("selected"),this.$el.find('#operator-switch [data-operation="'+this.operator+'"]').addClass("selected")},onChange:function(){this.isRange?(this.from=this.timeRangeFilterPicker.model.get("from"),this.to=this.timeRangeFilterPicker.model.get("to")):this.val=this.timeRangeFilterOperator.model.get("val")},showDataRange:function(){var a=this.$(".zd-tabbar-body");this.$el.find("#show-datarange").addClass("active"),this.$el.find("#show-operator").removeClass("active"),a.html(this.timeRangeFilterPicker.render().$el),this.options.forcedFilters&&a.css({"max-height":a.outerHeight(!0)})},showOperator:function(){var a=this.$(".zd-tabbar-body");this.$el.find("#show-datarange").removeClass("active"),this.$el.find("#show-operator").addClass("active"),a.html(this.timeRangeFilterOperator.render().$el),this.options.forcedFilters&&a.css({"max-height":a.outerHeight(!0)})},applyFilter:function(){var a="YYYY-MM-DD HH:mm:ss";if(this.isRange){var b=d.utc(this.from).format(a),c=d.utc(this.to).format(a);this.model.set({value:[b,c],operation:"BETWEEN"})}else{var e=d.utc(this.val).format(a);this.model.set({value:e,operation:this.operator})}if(this.trigger("filter:apply",this.model),this.options.applyToAll){var g=this.options.state.get("timestampField"),h=this.options.state.get("timeTrendStep");f.trigger("visualization:filterAll",this.options.config.source.sourceId,{},this.model.attributes,{timestampField:g,timeTrendStep:h})}}});b.exports=o}()},{"../../Core/MVC":6,"../../utilities":144,"./../NumericFilterEditor/index.js":305,"./../TimeControl":359,"./timeFilterOperatorTemplate.html":364,"./timeRangeFilterTemplate.html":365,jquery:103,moment:457,underscore:458,"velocity-animate":459}],363:[function(a,b){b.exports=a("./TimeFilterEditor")},{"./TimeFilterEditor":362}],364:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="values">\n    <div class="segmented-control multiple centered" id="operator-switch">\n        <div class="item" id="operator-equal" data-operation="EQUALS">=</div>\n        <div class="item" id="operator-greater-than-or-equal" data-operation="GE">≥</div>\n        <div class="item" id="operator-greater" data-operation="GT">></div>\n        <div class="item" id="operator-less-than-or-equal" data-operation="LE">≤</div>\n        <div class="item" id="operator-less" data-operation="LT"><</div>\n    </div>\n    <div class="operator-pickers">\n        <div class="operator-hint">Select a time date for selected operator:</div>\n        <div class="control-group operator">\n            <div class="picker-group">\n                <div class="date day btn zd btn" id="day-from">\n                    <div class="icon-wrapper">\n                        <div class="zd icon date"/>\n                    </div>\n                    <input type="text" class="text" placeholder="mm/dd/yyyy" value="'+(null==(__t=day_from)?"":__t)+'" maxlength="10" tabindex="-1">\n                </div>\n                <div class="picker-container"></div>\n            </div>\n            ',show_time&&(__p+='\n                <div class="picker-group">\n                    <div class="date time zd btn" id="time-from">\n                        <div class="icon-wrapper">\n                            <div class="zd icon clock"/>\n                        </div>\n                        <input type="text" class="text" placeholder="hh:mm:ss AM/PM" value="'+(null==(__t=time_from)?"":__t)+'" maxlength="11" tabindex="-1">\n                    </div>\n                    <div class="picker-container"></div>\n                </div>\n            '),__p+="\n        </div>\n    </div>\n</div>\n";return __p}},{lodash:456}],365:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<legend>Specify Date Range</legend>\n<label>From:</label>\n<div class="control-group range">\n    <div class="picker-group">\n        <div class="date day btn zd btn" id="day-from">\n            <div class="icon-wrapper">\n                <div class="zd icon date"/>\n            </div>\n            <input type="text" class="text" value="'+(null==(__t=day_from)?"":__t)+'" maxlength="10" tabindex="-1" data-type="date" data-period="from">\n        </div>\n        <div class="picker-container"></div>\n    </div>\n    ',show_time&&(__p+='\n    <div class="picker-group">\n        <div class="date time zd btn" id="time-from">\n            <div class="icon-wrapper">\n                <div class="zd icon clock"/>\n            </div>\n            <input type="text" class="text" placeholder="hh:mm:ss AM/PM" value="'+(null==(__t=time_from)?"":__t)+'" maxlength="11" tabindex="-1"\n                   data-type="time" data-period="from">\n        </div>\n        <div class="picker-container"></div>\n    </div>\n    '),__p+='\n</div>\n<label>To:</label>\n<div id="select-date-to">\n    <div class="control-group range">\n        <div class="picker-group">\n            <div class="date day btn zd btn" id="day-to">\n                <div class="icon-wrapper">\n                    <div class="zd icon date"/>\n                </div>\n                <input type="text" class="text" placeholder="mm/dd/yyyy" value="'+(null==(__t=day_to)?"":__t)+'" maxlength="10" tabindex="-1" data-type="date" data-period="to">\n            </div>\n            <div class="picker-container"></div>\n        </div>\n        ',show_time&&(__p+='\n        <div class="picker-group">\n            <div class="date time zd btn" id="time-to">\n                <div class="icon-wrapper">\n                    <div class="zd icon clock"/>\n                </div>\n                <input type="text" class="text" placeholder="hh:mm:ss AM/PM" value="'+(null==(__t=time_to)?"":__t)+'" maxlength="11" tabindex="-1"\n                       data-type="time" data-period="to">\n            </div>\n            <div class="picker-container"></div>\n        </div>\n        '),__p+="\n    </div>\n</div>\n";return __p}},{lodash:456}],366:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("./../Notifications").Popup,g=a("./timePlayerTemplate.html"),h=a("../../utilities"),i=e.View.extend({className:"time-config-view",events:{"change #select-time-attribute":"onTimeAttrChange","change #start-from-type":"onStartFromChange","input #start-from-time":"onStartTimeInput","change #start-from-time":"onStartFromChange","keydown #start-from-delay":"onDelayNumKeyDown","input #start-from-delay":"onDelayNumInput","change #start-from-delay":"onStartFromChange","change #start-from-delay-unit":"onStartFromChange","change #source-time-scale":"onTimeWindowChange","change #time-player":"onTimePlayerChange",'click button[value="applyTime"]':"applyTimeConfig",'click button[value="cancelTime"]':"cancelTimeConfig"},template:g,initialize:function(){e.View.prototype.initialize.apply(this,arguments),this.source=this.options.source,this.visSourceConfig=this.options.model.config.get("source"),this.timeFields=this.model.options.fields.filter(function(a){return"TIME"===a.type||"NONE"===a.type}),this.hasTimestampField=this.timeFields.length>0},render:function(){var a={timeFields:this.timeFields,streamType:this.source.get("streamType")};return this.$el.append(this.template(a)),this.collapseFooter(),this.renderTimeLine(),this.renderDateAttributes(),this.renderStartFrom(),this.renderTimeWindowScale(),this.renderTimeAttr(),this},getApplyBtn:function(){return(!this.$applyBtn||this.$applyBtn.length)&&(this.$applyBtn=this.options.palette.$el.find('.apply-time-buttons button[value="applyTime"]')),this.$applyBtn},renderTimeLine:function(){var a=this.visSourceConfig.hasOwnProperty("showTimeLine")?this.visSourceConfig.showTimeLine:this.source.get("showTimeLine");this.$timeLine=this.$el.find("#time-player"),this.$timeLine.prop("checked",a)},renderDateAttributes:function(){this.$selectTimeAttr=this.$el.find("#select-time-attribute");var a=this.model.get("timestampField");a?this.$selectTimeAttr.val(a):(this.$selectTimeAttr.val("none"),this.$timeLine.prop("checked",!1).attr("disabled",!0))},renderStartFrom:function(){var a=this.visSourceConfig.hasOwnProperty("showTimeLine")?this.visSourceConfig.showTimeLine:this.source.get("showTimeLine");this.$selectStartFrom=this.$el.find("#start-from-type"),this.$selectStartFromTime=this.$el.find("#start-from-time").hide(),this.$selectStartFromDelay=this.$el.find("#start-from-delay").hide(),this.$selectStartFromDelayUnit=this.$el.find("#start-from-delay-unit").hide(),this.$selectStartFrom.attr("disabled",!a);var b=this.visSourceConfig;void 0!==b.startFrom&&b.startFrom?(this.$selectStartFrom.val(b.startFrom),"TIME"===b.startFrom?this.$selectStartFromTime.val(b.startFrom).show():this.model.get("delay")?(this.$selectStartFrom.val("DELAY"),this.$selectStartFromDelay.val(this.model.get("delay")).show(),this.$selectStartFromDelayUnit.val(this.model.get("delayUnit")).show()):"BEGINNING"!==b.startFrom&&"LIVE"!==b.startFrom&&(this.$selectStartFrom.val("TIME"),this.$selectStartFromTime.val(b.startFrom).show())):this.$selectStartFrom.val(""),this.hasTimestampField||this.$selectStartFrom.attr("disabled","disabled"),this.source.hasLiveOption()||this.$selectStartFrom.find('[value="LIVE"], [value="DELAY"]').remove()},renderTimeWindowScale:function(){var a=this.visSourceConfig.hasOwnProperty("showTimeLine")?this.visSourceConfig.showTimeLine:this.source.get("showTimeLine");this.$timeScale=this.$el.find("#source-time-scale"),this.$timeScale.val(this.model.get("timeWindowScale")),this.$timeScale.attr("disabled",!a)},renderTimeAttr:function(){"none"===this.$selectTimeAttr.val()?this.$timeLine.prop("checked",!1).attr("disabled",!0):this.$timeLine.removeAttr("disabled")},onTimeAttrChange:function(){this.renderTimeAttr(),this.onTimePlayerChange(),this.expandFooter()},onDelayNumKeyDown:function(a){var b=a.keyCode;return a.shiftKey||a.altKey||(46>b||b>57)&&(95>b||b>106)&&-1===[37,39,8].indexOf(b)?!1:void 0},onDelayNumInput:function(){this.expandFooter(),this.getApplyBtn().attr("disabled",0===this.$selectStartFromDelay.val().length)},onStartTimeInput:function(){var a=this.$selectStartFromTime.val(),b=this.$selectStartFromTime.attr("pattern"),c=new RegExp(b),d=h.getDateObjFromString(a),e=a&&c.exec(a)&&"Invalid Date"!==d.toString();this.getApplyBtn().attr("disabled",!e)},onStartFromChange:function(){var a=this.$selectStartFrom.val();this.$selectStartFromTime.hide(),this.$selectStartFromDelay.hide(),this.$selectStartFromDelayUnit.hide(),"DELAY"===a?(this.$selectStartFromDelay.show(),this.$selectStartFromDelayUnit.show()):"TIME"===a&&this.$selectStartFromTime.show(),this.expandFooter()},onTimeWindowChange:function(){this.expandFooter()},onTimePlayerChange:function(){var a=this.$timeLine.prop("checked");this.$selectStartFrom.attr("disabled",!a),this.$timeScale.attr("disabled",!a),a?(this.$selectStartFrom.val(this.source.get("startFrom")),this.$timeScale.val(this.source.get("timeWindowScale")),this.source.get("delay")&&(this.$selectStartFrom.val("DELAY").show(),this.$selectStartFromDelay.val(this.source.get("delay")).show(),this.$selectStartFromDelayUnit.val(this.source.get("delayUnit")).show())):(this.$selectStartFrom.val("BEGINNING"),this.$timeScale.val("ALL"),this.$selectStartFromTime.val("").hide(),this.$selectStartFromDelay.val("").hide(),this.$selectStartFromDelayUnit.val("SECONDS").hide()),this.expandFooter()},collapseFooter:function(){this.$el.addClass("collapsed-footer")},expandFooter:function(){this.$el.removeClass("collapsed-footer");var a=this.$selectStartFrom.val();"DELAY"===a?this.onDelayNumInput():"TIME"===a?this.onStartTimeInput():this.getApplyBtn().attr("disabled",!1)},showTimeAttrNotification:function(a){var b=new f(a);b.show()},checkTimeForFilterUsed:function(a){var b=this.model.filters.findWhere({path:a});b&&(this.model.filters.remove(b,{silent:!0}),this.showTimeAttrNotification({type:"warning",title:"Filter removed",description:"Filter <b>"+h.htmlEntities(b.get("label"))+"</b> no longer applied as this field used as Time Attribute."}))
},applyTimeConfig:function(){var a=this.$timeLine.prop("checked"),b=this.$timeScale.val(),c=this.$selectTimeAttr.val(),e=this.$selectStartFrom.val(),f=this.$selectStartFromTime.val(),g=this.$selectStartFromDelay.val(),i=this.$selectStartFromDelayUnit.val(),j=d.findWhere(this.timeFields,{name:c}),k={},l={};if(this.model.time.set({min:j.min,max:j.max},{silent:!0}),a||(e="BEGINNING",b="ALL"),this.source.get("startFrom")!==e){this.model.unset("delay",{silent:!0}),this.model.unset("delayUnit",{silent:!0}),delete this.visSourceConfig.delay,delete this.visSourceConfig.delayUnit;var m,n;switch(e){case"LIVE":this.model.time.set({live:!0,paused:!1,time:null},{silent:!0});break;case"BEGINNING":m=new Date(this.model.time.get("min")),m.setHours(m.getHours()+1),n="NONE"===j.type?null:m.getTime(),this.model.time.set({live:!1,paused:!0,time:n},{silent:!0});break;case"DELAY":e="LIVE",m=new Date(this.model.time.get("time")),"SECONDS"===i?m.setSeconds(m.getSeconds()-delay):"MINUTES"===i?m.setMinutes(m.getMinutes()-delay):"HOURS"===i?m.setHours(m.getHours()-delay):"DAYS"===i&&m.setHours(m.getHours()-24*delay),this.visSourceConfig.delay=parseInt(g),this.visSourceConfig.delayUnit=i,this.model.set({delay:parseInt(g),delayUnit:i},{silent:!0}),this.model.time.set({time:m.getTime()},{silent:!0});break;case"TIME":e=f,m=h.getDateObjFromString(f),this.model.time.set({live:!1,time:m.getTime()},{silent:!0})}}else"LIVE"===e&&(this.model.unset("delay",{silent:!0}),this.model.unset("delayUnit",{silent:!0}),delete this.visSourceConfig.delay,delete this.visSourceConfig.delayUnit,this.model.time.set({live:!0,paused:!1,time:null},{silent:!0}));this.checkTimeForFilterUsed(c),k.startFrom=e,k.timestampField=c,k.timeWindowScale=b,l.showTimeLine=a,l.startFrom=e,this.model.set(k,{silent:!0}),this.model.config.get("source").showTimeLine=a,this.model.config.get("source").timeWindowScale=b,this.model.config.get("source").startFrom=e,this.model.time.set("timeWindow",b,{silent:!0}),this.visSourceConfig.startFrom=e,c?this.visSourceConfig.date=c:delete this.visSourceConfig.date,this.model.trigger("change"),this.onApply()},cancelTimeConfig:function(){this.onCancel()},onApply:c.noop,onCancel:c.noop});b.exports=i}()},{"../../Core/MVC":6,"../../utilities":144,"./../Notifications":302,"./timePlayerTemplate.html":367,jquery:103,underscore:458}],367:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="nav nav-tabs nav-stacked time-config-view">	\n    <label><strong>Time Attribute</strong></label>\n    <div class="input">\n        <select id="select-time-attribute">\n            ',timeFields.forEach(function(a){return a.visible?void(__p+='\n            <option value="'+(null==(__t=a.name)?"":__t)+'">'+__e(a.label)+"</option>\n            "):!1}),__p+='\n        </select>\n    </div>\n    <label for="time-player">\n        <strong>Time Player</strong>&nbsp;\n        <input id="time-player" class="zd icon checkmark" name="time-player" type="checkbox" />\n    </label>\n    <label><strong>Start From</strong></label> \n    <div class="input"> \n        <select id="start-from-type"> \n            <option value="LIVE">Live Mode</option> \n            <option value="BEGINNING">Beginning</option> \n            <option value="DELAY">Delay Mode</option> \n            <option value="TIME">Specified Date/Time</option> \n        </select> \n        <div id="source-start-from-newline" style="height: 5px;">&nbsp;</div> \n        <input class="input-small" id="start-from-delay" size="5"\n               type="text" pattern="\\d{1,}" required> \n        <select id="start-from-delay-unit" class="input-small"> \n            <option value="SECONDS">Seconds</option> \n            <option value="MINUTES">Minutes</option> \n            <option value="HOURS">Hours</option> \n            <option value="DAYS">Days</option> \n        </select> \n        <input class="input-large" id="start-from-time" size="30" type="text"\n               pattern="\\d\\d\\d\\d\\-\\d\\d?-\\d\\d? \\d\\d?:\\d\\d:\\d\\d(| UTC)"\n               placeholder="2013-01-04 21:00:00 UTC">\n    </div> \n    <label><strong>Time Window</strong></label> \n    <div class="input"> \n        <select id="source-time-scale"> \n            ',"CSV"!==streamType&&(__p+=' \n            <option value="ROLLING_HOUR">Rolling Hour</option> \n            <option value="HOUR">Hour</option> \n            <option value="DAY">Day</option> \n            <option value="WEEK">Week</option> \n            <option value="MONTH">Month</option> \n            <option value="QUARTER">Quarter</option> \n            <option value="YEAR">Year</option> \n            '),__p+=' \n            <option value="ALL">All</option> \n        </select> \n    </div> \n</div> \n<div class="apply-time-buttons"> \n    <button class="left item zd btn btn-success btn-block" value="applyTime">Apply</button> \n    <button class="right item zd btn btn-cancel btn-block" value="cancelTime">Cancel</button>   \n</div> ';return __p}},{lodash:456}],368:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../controls"),f=a("../../Core/MVC/Collection"),g=a("../../Core/MVC/View"),h=a("./../ListView"),i=a("./../ListItem"),j=a("./timeScaleControlTemplate.html"),k=a("./timeFieldScaleTemplate.html"),l=[{name:"MINUTE",selected:""},{name:"HOUR",selected:""},{name:"DAY",selected:""},{name:"WEEK",selected:""},{name:"MONTH",selected:""},{name:"YEAR",selected:""}],m=i.extend({className:"scale-item",template:d.template("<%- name %>"),render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("selected")),this},_onClick:function(){i.prototype._onClick.apply(this,arguments)}}),n=i.extend({template:k,optionTemplate:a("./timeFieldScaleItemTemplate.html"),tagName:"li",className:"scaleItem values-list-item",events:{click:"select","click .scaleOption":"showScaleOptions"},initialize:function(a){var b=this;i.prototype.initialize.apply(this,arguments),this.options=c.extend({},this.options,a);var e=b.model.get("timestampGranularity"),g=d.clone(l);g.forEach(function(a,b){a.name===e&&g.splice(0,b)}),g.forEach(function(a){a.selected=a.name===b.options.currentScale?"selected":""}),this.scalesView=new h({className:"scales-options unstyled",collection:new f(g),ItemView:m,selectable:"radio"}),this.scalesView.sortCollection=c.noop,this.listenTo(this.scalesView,"select",function(a){b.model.set("_scale",a.get("name"),{silent:!0}),b._onClick()})},render:function(){return this.$el.html(this.template({attributes:this.model.toJSON()})),this.$el.addClass(this.model.get("selected")),this.model.get("selected")&&this.$el.append(this.optionTemplate({scale:this.options.currentScale})),this},_onClick:function(){i.prototype._onClick.apply(this,arguments)},showScaleOptions:function(a){this._undockParentView();this.scalesPalette=new e.SmallPopup({customClass:"funcPalette",pointerWidth:"14"}),this.scalesPalette.render(this.scalesView.render().$el),this.scalesPalette.position({of:c(a.target),my:"left+15 center",at:"right center",collision:"flipfit flipfit",pointerTop:10}),a.stopPropagation(),this.delegateEvents()},_undockParentView:function(){this.options.$parentView.parent().parent().closest(".timeScalePaletteContainer.docked").removeClass("docked")}}),o=g.extend({className:"timeScaleContent",template:j,initialize:function(){var a=this;g.prototype.initialize.apply(this,arguments),this.controller=this.options.controller,this.timeFields=this.controller.fields.filter(function(a){return"TIME"===a.get("type")});var b=l.map(function(a){return a.name});this.timeFields.forEach(function(c){var d="",e=a.controller.state.get("timeTrendStep"),f=c.get("timestampGranularity");a.controller.state.get("timestampField")===c.get("name")&&(d="selected"),b.forEach(function(a,c){a===e&&b.indexOf(f)>c&&(e=f)}),c.set({selected:d,_scale:e})}),this.collection=new f(this.timeFields),this.timeFieldsView=new h({className:"scalesList values-list singleselect",collection:this.collection,ItemView:n,selectable:"radio",itemOption:{currentScale:this.options.currentItem,$parentView:this.$el}}),this.listenTo(this.timeFieldsView,"select",function(b){a.checkForUsedSameFilter(b),a.trigger("select:scale",b)})},checkForUsedSameFilter:function(a){var b=a.get("name"),c=this.controller.state,d=c.filters.findWhere({path:b});d&&(c.filters.trigger("filter:unsupported",d),c.filters.remove(d,{silent:!0}))},render:function(){return this.$el.append(this.timeFieldsView.render().$el),this}});b.exports=o}()},{"../../Core/MVC/Collection":2,"../../Core/MVC/View":5,"../../controls":66,"./../ListItem":273,"./../ListView":275,"./timeFieldScaleItemTemplate.html":369,"./timeFieldScaleTemplate.html":370,"./timeScaleControlTemplate.html":371,jquery:103,underscore:458}],369:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<a class="scaleOption">'+__e(scale)+"</a>";return __p}},{lodash:456}],370:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd icon checkmark"></div>\n<div class="text">'+__e(attributes.label)+"</div>";return __p}},{lodash:456}],371:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<ul class="scalesList values-list singleselect"></ul>';return __p}},{lodash:456}],372:[function(a,b){!function(){"use strict";var c=a("../../utilities"),d=a("underscore"),e=a("../../Core/MVC/View"),f=(a("backbone"),a("./timeTableTemplate.html"));b.exports=e.extend({initialize:function(){var a,b;return e.prototype.initialize.apply(this,arguments),d.bindAll(this,"render","update"),a=this.options.controller,b=a.state,this.$el.appendTo(this.options.container),this.model.on("change updateTimeTable",this.update),b.on("change",this.update),b.filters.on("add remove change",this.update),this},render:function(){var a=this.options.timeTableEnabled;return this.$el.html(f({timeTableName:""})),this.$timeTableName=this.$(".time-table-name"),a?this.$timeTableName.show():this.$timeTableName.hide(),this},update:function(){function a(){i.html(""),h.html(""),g.html("")}var b,c=this.model,e=this.options.controller,f=e.state,g=this.$(".time-attribute"),h=this.$(".time-element"),i=this.$(".time-table-name");if(this.timestampField=f.get("timestampField"),this.timestampField){if(f.filters.findWhere({path:this.timestampField}))return void a();var j=this.model.get("time"),k=window.sourceInfo&&window.sourceInfo.name||"",l=e.config.get("source").dataResolution||e.fields.findWhere({name:this.timestampField}).get("timestampGranularity");this._utc=-1!==["MONTH","DAY","YEAR"].indexOf(l),l="NONE"===l||"SECOND"===l?!1:l,this.dataResolution=l;var m=d.findWhere(f.options.fields,{name:this.timestampField}).label;this.$(".head-source-name").text(k),this.$(".time-attribute").text(m),j&&"TRENDS"!==f.config.get("type")&&!f.get("timeTrendStep")?(this.$(".top-container .time-table:first").show(),i.text(this.model.get("live")?"LIVE":""),b=c.getStartTime(!1,!0,l),b.indexOf("NaN")<0?h.html(this.getPrettyTime()):a()):a()}},getPrettyTime:function(){function a(){var a,b;return m?(b=c.time.getMaxStep("HOUR",m,n),a="HOUR"!==b):a=!1,a}function b(a,b){var c=a.getUTCHours(),d=a.getUTCMinutes(),f=a.getUTCSeconds();void 0!==b&&(c+=b);var g="",h="";return 0===c?(h=" AM",c=12):12===c?h=" PM":c>12?(c-=12,h=" PM"):h=" AM",g=c+":"+e(d)+":"+e(f)+h}function d(a){var c=a.getTimezoneOffset()/-60;return b(a,c)}function e(a){var b=a+"";return b.length<2?"0"+b:b}function f(a){var b=["JAN","FEB","MAR","APR","MAY","JUNE","JULY","AUG","SEP","OCT","NOV","DEC"];return b[a]}var g,h,i,j,k,l,m=this.dataResolution,n=this._utc,o=a(),p="",q=this.model.get("fromTime")||this.model.get("min"),r=this.model.get("time"),s="",t="",u="",v="",w=new Date(q),x=new Date(r),y="",z="";return n?(g=w.getUTCDate(),h=w.getUTCMonth(),i=w.getUTCFullYear(),u=b(w),j=x.getUTCDate(),k=x.getUTCMonth(),l=x.getUTCFullYear(),v=b(x)):(g=w.getDate(),h=w.getMonth(),i=w.getFullYear(),u=d(w),j=x.getDate(),k=x.getMonth(),l=x.getFullYear(),v=d(x)),s=g+" "+f(h)+" "+i,t=j+" "+f(k)+" "+l,n||(y=" ("+c.timeZoneFromTime(w)+")",z=" ("+c.timeZoneFromTime(x)+")"),o?p=s===t?s:s+" - "+t:(p=s===t?s+", "+u+" - "+v+y:s+", "+u+y+" - "+t+", "+v+z,n&&(p+=" (UTC)")),p}})}()},{"../../Core/MVC/View":5,"../../utilities":144,"./timeTableTemplate.html":373,backbone:454,underscore:458}],373:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="time-table">\n    <div class="head-source-name"></div>\n    <div class="head-time-value">\n        <div class="time-table-name"></div>\n        <div class="time-attribute"></div>\n        <div class="time-element" class="time"></div>\n        <div class="time-zone-element" class="time"></div>\n    </div>\n</div>';return __p}},{lodash:456}],374:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("./toolbarTemplate.html"),g=e.View.extend({subviews:[],initialize:function(){d.bindAll(this,"render","remove","addSubview")},render:function(){var a=f;return c(this.el).append(a),this},remove:function(){},addSubview:function(a){a&&(this.subviews.push(a),a.setElement(c(this.el).find("ul")),a.render())},layout:function(){var a=c(this.el).find("> ul"),b=this.$el.innerWidth(),d=a.find("> li"),e=0,f=[],g=0;d.each(function(a,b){var d=c(b);d.is(":hidden")||(d.hasClass("right")||d.hasClass("left")?e+=d.outerWidth():(f.push(d),g+=parseInt(d.css("padding-left"),10)+parseInt(d.css("padding-right"),10)))});var h=parseInt(a.css("padding-left"),10),i=parseInt(a.css("padding-right"),10),j=Math.floor((b-e-h-i-g)/f.length);f.forEach(function(a){a.outerWidth(j);var b=a.find("> div");b.outerWidth(j)}),this.subviews.forEach(function(a){a.layout&&a.layout()})}});b.exports=g}()},{"../../Core/MVC":6,"./toolbarTemplate.html":375,jquery:103,underscore:458}],375:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<ul></ul>";return __p}},{lodash:456}],376:[function(a,b){!function(){"use strict";var c=(a("jquery"),a("underscore")),d=a("../../Core/MVC"),e=d.Events,f=a("./undoTemplate.html"),g=d.View.extend({className:"undo-indicator",events:{click:"backupState"},template:f,initialize:function(){d.View.prototype.initialize.apply(this,arguments),this.model=new d.Model({enabled:!1}),this.collection=new d.Collection,this.widget=this.options.widget,this.widgetGrid=this.options.widget.widgetGrid,this.controller=this.options.controller,this.catchChange=!0,this.listenTo(this.model,"change",this.render),this.listenTo(e,"undo:state",this.backupState),this.listenTo(this.controller.eventDispatcher,"undo:state",this.backupState),this.listenTo(e,"thread:start thread:time",this.updateStore),this.listenTo(e,"undo:saveState",this.saveState)},render:function(){var a=this.model.get("enabled");return this.$el.html(this.template({display:a?"block":"none"})),this},isTrends:function(){return!!this.controller.state.config.get("variables").filter(function(a){return"time"===a.groupType})[0]},saveState:function(){var a,b=this.collection.models[this.collection.length-1];b&&(a=b.get("msg"),this.updateStore(a,!0))},updateStore:function(a,b){var d,f,g,h,i,j,k=this.options.controller;if(this.catchChange){if(a.cid===k.UUID){if("START_FROM_TIME"!==a.type){var l=a.request.cfg.filters,m=this.collection.models[this.collection.length-1],n=m&&m.attributes.msg.request.cfg?m.attributes.msg.request.cfg.filters:null,o=m&&JSON.stringify(m.attributes.groupBy),p=m&&JSON.stringify(m.attributes.metrics),q=JSON.stringify(k.state.groupBy.toJSON(!0)),r=JSON.stringify(k.state.metrics.toJSON()),s=m&&m.attributes.sourceConfig.variables,t=this.controller.config.attributes.source.variables;if("PIVOT_TABLE"===k.state.config.get("type")&&(h=c.clone(k._controller.scope.visualization._ROWS_SORT),i=c.clone(k._controller.scope.visualization._COLS_SORT),j=c.clone(k._controller.scope.visualization._METRICS_SORT)),m&&"PIVOT_TABLE"===m.get("config").type&&(d=m.get("_ROWS_SORT"),f=m.get("_COLS_SORT"),g=m.get("_METRICS_SORT")),o===q&&p===r&&c.isEqual(k.state.toJSON(),m.attributes.state)&&c.isEqual(l,n)&&c.isEqual(h,d)&&c.isEqual(i,f)&&c.isEqual(j,g)&&c.isEqual(s,t))return}this.collection.add({state:k.state.toJSON(),groupBy:k.state.groupBy.toJSON(!0),time:k.state.time.toJSON(),config:k.state.config.toJSON(),sourceConfig:JSON.parse(JSON.stringify(k.state.config.get("source"))),filters:k.state.filters.toJSON(),metrics:k.state.metrics.toJSON(),visId:k.state.config.get("visId"),msg:a,fromState:!!b,_ROWS_SORT:h,_COLS_SORT:i,_METRICS_SORT:j}),e.trigger("undo:updatedStore",this.collection)}this.collection.length>1?this.model.set("enabled",!0):this.model.set("enabled",!1)}},backupState:function(){var a=this.collection.pop().toJSON(),b=this.controller,c=this.collection.pop().toJSON();"START_VIS"===c.msg.type&&"START_VIS"===a.msg.type?c.visId!==b.state.config.get("visId")?this.switchToVisualization(b,c,a):this.setVisualizationConfig(b,c,a):"START_VIS"===c.msg.type&&"START_FROM_TIME"===a.msg.type?(this.catchChange=!0,b.state.time.set("time",c.msg.request.time,{silent:!0}),b.state.trigger("change")):"START_FROM_TIME"===c.msg.type&&"START_FROM_TIME"===a.msg.type?(a.fromState&&this.setVisualizationConfig(b,c,a,!0),b.state.time.set("time",c.msg.request.time)):"START_FROM_TIME"===c.msg.type&&"START_VIS"===a.msg.type&&(this.catchChange=!1,c.visId!==b.state.config.get("visId")?(this.switchToVisualization(b,c,a),this.collection.push(c)):(this.setVisualizationConfig(b,c,a),b.startFromTime(b.state.time,c.msg.request.time))),e.trigger("undo:updatedStore",this.collection)},switchToVisualization:function(a,b){var c=a.inheritanceManager.getPrev(),d=c.config,e=c.state;e.config.attributes.source=b.sourceConfig,e.time.attributes.time=b.time.time,b._ROWS_SORT&&e.set("_ROWS_SORT",b._ROWS_SORT),b._COLS_SORT&&e.set("_COLS_SORT",b._COLS_SORT),b._METRICS_SORT&&e.set("_METRICS_SORT",b._METRICS_SORT),"PIVOT_TABLE"===e.config.get("type")&&e.groupBy.reset(),a.setVisualization(d,!0,e)},isEqualGroupBy:function(a,b){function d(a){return{name:a.name,limit:a.limit,sort:JSON.stringify(a.sort)}}var e=a.map(d),f=b.map(d);return c.isEqual(e,f)},setVisualizationConfig:function(a,b,d,e){var f=a.state.config.get("type"),g=this.isEqualGroupBy(d.groupBy,b.groupBy),h=JSON.stringify(b.metrics)===JSON.stringify(d.metrics);if(e=!!e,b.config.source=b.sourceConfig,1===b.groupBy.length&&this.isTrends()&&(a.state.time.set(b.time,{silent:!0}),a.state.groupBy.at(0).setAttribute(b.groupBy[0].name,{silent:!0})),a.state.config.set(b.config,{silent:e}),b.metrics.length!==d.metrics.length?a.state.set(b.state,{silent:!0}):a.state.set(b.state,{silent:e}),(d.filters.length===b.filters.length||g)&&(d.filters.length!==b.filters.length||g)?d.filters.length===b.filters.length?a.state.filters.set(b.filters,{silent:e}):(a.state.filters.set(b.filters,{silent:!0}),e||a.state.filters.trigger("change")):a.state.filters.set(b.filters,{silent:!0}),b.metrics.length===d.metrics.length?h||!g?a.state.metrics.set(b.metrics,{silent:!0}):a.state.metrics.set(b.metrics,{silent:e}):a.state.metrics.reset(b.metrics),a._configureMetricAccessors(),1===b.groupBy.length?a.state.groupBy.at(0).set({name:b.groupBy[0].name,sort:b.groupBy[0].sort,limit:b.groupBy[0].limit,groupColors:b.groupBy[0].groupColors},{silent:e}):b.groupBy.forEach(function(b,c){if(JSON.stringify(b)!==JSON.stringify(d.groupBy[c])){var f=a.state.groupBy.at(c);f.setAttribute(b.name,{silent:e}),f.set({autoColor:b.autoColor,sort:b.sort,limit:b.limit,groupColors:b.groupColors},{silent:e})}}),h||g||a.state.metrics.trigger("change",a.state.metrics.at(0)),"PIVOT_TABLE"===f){var i=!1,j=!1,k=a._controller.scope.visualization;c.each(d.metrics,function(a){var d=c.filter(b.metrics,function(b){return a.name===b.name});d.length<=0?i=!0:null}),c.isEqual(d._ROWS_SORT,b._ROWS_SORT)&&c.isEqual(d._COLS_SORT,b._COLS_SORT)&&c.isEqual(d._METRICS_SORT,b._METRICS_SORT)||(j=!0,k._ROWS_SORT=b._ROWS_SORT,k._COLS_SORT=b._COLS_SORT,k._METRICS_SORT=b._METRICS_SORT),i&&j||e||a.state.trigger("change")}b.msg.request.comparison===d.msg.request.comparison||e||a.state.trigger("change:comparison"),b.sourceConfig.showTimeLine===d.sourceConfig.showTimeLine||e||this.widgetGrid.trigger("widget:updateControls"),this.catchChange=!0}});b.exports=g}()},{"../../Core/MVC":6,"./undoTemplate.html":378,jquery:103,underscore:458}],377:[function(a,b){b.exports=a("./UndoStateIndicator")},{"./UndoStateIndicator":376}],378:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+=' <!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd icon undo" style="display: '+(null==(__t=display)?"":__t)+'"/>';return __p}},{lodash:456}],379:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC/View")),e=a("./template.html");b.exports=d.extend({template:e,defaults:{},initialize:function(a){a=a||{},a.template&&(this.template=a.template,delete a.template),d.prototype.initialize.apply(this,arguments)},show:function(a,b){var c,d=this.childViews;if(-1!==d.indexOf(a))for(c=d.indexOf(a);c+1<d.length;)this._popView(d[c+1],b||{});else this._pushView(a,b||{})},back:function(a,b){var c=this.childViews;arguments.length<2&&(b=arguments[0],a=1),this.show(c[c.length-a-1],b||{})},popToRoot:function(){this.childViews.length>0&&this.show(this.childViews[0],{})},_renderView:function(a,b){b.back=this.childViews.indexOf(a)>0?!0:!1,this.$el.html(this.template(b)),this.$el.append(a.el),a.render(),"function"==typeof a._resize&&a._resize(),a.delegateEvents()},_pushView:function(a,b){this.childViews.push(a),this._renderView(a,b||{}),this._canGoBack()?this.onShowBackButton():this.onHideBackButton()},_popView:function(a,b){var c=this.childViews;a.remove(),c.splice(c.indexOf(a),1),this._renderView(c[c.length-1],b||{}),this.childViews.length<=1&&this.onHideBackButton()},_canGoBack:function(){return this.childViews.length>1},onShowBackButton:c.noop,onHideBackButton:c.noop})}()},{"../../Core/MVC/View":5,"./template.html":380,jquery:103,underscore:458}],380:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n",back&&(__p+='\n    <div class="clearfix"></div>\n');return __p}},{lodash:456}],381:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../utilities"),f="";e.MODE.WIDGET===e.mode()?f="widget":e.MODE.EMBEDDED===e.mode()?f="embedded":e.MODE.NATIVE===e.mode()&&(f="native");var g=a("./../WidgetGrid/index.js"),h=a("../../models/VisualizationConfig"),i=a("../../collections/VisualizationConfigs"),j=a("./../VisualizationWidget/index.js"),k=a("./../Toolbar/index.js"),l=a("../../controls"),m=a("./../ModalWarning/index.js"),n="widget"===f?[5,5]:[5,5],o=[1,1],p=[1,1],q=n[0]*o[0]*2,r=n[1]*o[1]*2,s="widget"===f?36:110,t="widget"===f?36:"embedded"===f?94:114,u=c(window).width()-s-q,v=c(window).height()-t-r-32;b.exports=g.extend({widgetView:j,defaults:{widget_margins:n,widget_base_dimensions:[u/o[0],v/o[1]],min_cols:p[0],min_rows:p[1],serialize_params:function(a,b){return{row:b.row,col:b.col,colSpan:b.size_x,rowSpan:b.size_y}},draggable:{handle:".dashboard-widgets .dragHandle *, .dashboard-widgets .dragHandle, .dashboard-widgets .widgetFooter .time-table-container *, .dashboard-widgets .widgetHeadLabel",limit:!1}},initialize:function(a){if(!a.sources)throw new Error("options.sources must be defined");if(this.sources=a.sources,delete a.sources,!a.user)throw new Error("options.user must be defined");this.user=a.user,delete a.user,g.prototype.initialize.apply(this,arguments),this.collection=this.collection||new i,this._loadedVisualizations=0,this.selectedVisualizationController=null,this.selectedUndoController=null,this.toolbar=new k({el:c("#toolbar")}),this.listenTo(this,"widget:select",this._onWidgetSelect),this.listenTo(this,"widget:deselect",this._onWidgetDeselect),this.listenTo(this,"widget:remove",this._onVisualizationRemove),this.listenTo(this,"widget:remove visualization:add widget:resize widget:dragstop",this.serialize),this.listenTo(this,"visualization:start",this._onVisualizationStart)},render:function(){var a=this;return this._loadedVisualizations=0,g.prototype.render.apply(this,arguments),this.collection.each(function(b){var c=b.get("layout"),d=a._grid,e={cols:d.cols,rows:d.rows};c.col-1+c.colSpan>e.cols&&(d.add_faux_cols(c.col-1+c.colSpan-e.cols),d.set_dom_grid_width(d.cols)),c.row-1+c.rowSpan>e.rows&&(d.add_faux_rows(c.row-1+c.rowSpan-e.rows),d.set_dom_grid_height(d.rows*d.min_widget_height))}),this.collection.fetchModels().progress(function(b,c){var d,e=b.get("name");"success"==c[1]?a.renderVisualization(b):(a.collection.remove(b),d=new l.Notification({type:"error"}),d.render("Failed to load visualization: "+e))}).always(function(b){a.trigger("visualizations:loaded",b)}),this},getVisualizationController:function(a){var b=a?a.controller:null;return b},addVisualization:function(a,b){var d=this,e=c.Deferred(),f=new h({visId:a},{sourceId:b});return this.collection.add(f),f.fetch().done(function(a){d.renderVisualization(f),1===d.childViews.length&&d.childViews[0].select(),e.resolve(a)}).fail(function(a){var b='Visualization not associated with any sources.Open <a href="admin.html#sources">Manage Visualizations</a> for your desired data source and configure your visualization.',c=new m({background:"#EEE",title:"",description:b,handlers:[{label:"OK",callback:function(){"function"==typeof document.onVisNotAssociated?document.onVisNotAssociated():window.location="admin.html#sources"}}]});c.showup(),e.reject(a)}),e.promise()},renderVisualization:function(a){var b,d=this,e=c.Deferred(),f=a.getSourceId(),g=this.sources.get(f);return g=g||this.sources.add({id:f}).get(f),g.bootstrap().done(function(c){var f=a.get("source").sourceName,h=a.get("layout");b=d.addWidget({at:h,head:f}).createController(a,g),1===d.childViews.length?b.select():(b.select(),b.deselect(),d.trigger("visualization:blur")),d.trigger("visualization:add",b.controller),e.resolve(c)}).fail(function(a,b){e.reject(b)}),e},_onVisualizationRemove:function(a){var b=this.getVisualizationController(a);this.collection.remove(b.config)},_onVisualizationAdd:function(a){var b=this.getVisualizationController(a);this.collection.add(b.config)},_onVisualizationStart:function(){this._loadedVisualizations++,this.collection.length==this._loadedVisualizations&&this.trigger("dashboard:loaded")},_onWidgetDeselect:function(a){var b=this.getVisualizationController(a);b&&b._controller&&"function"==typeof b._controller.selection&&b._controller.selection(!1)},_onWidgetSelect:function(a){if(c(".modal-backdrop.zd-overlay").remove(),a){var b=this.getVisualizationController(a),d=e.mode();1!=d&&a.$el.addClass("selectedWidget").siblings(".selectedWidget").removeClass("selectedWidget"),this.selectedVisualizationController=b||null,this.selectedUndoController=a.undoController,this.trigger("visualization:select",b),b&&b._controller&&"function"==typeof b._controller.selection&&b._controller.selection(!0)}else this.trigger("visualization:blur")},serialize:function(){var a=this.childViews,b=this;return d.each(a,function(a){var c;a instanceof b.widgetView&&(c=b.getVisualizationController(a),c.config.set({source:c.state.convertToBookmark(c.source),layout:a.getLayout()}))}),this},updateSizes:function(){var a=this.getGridSizes();return this.$el.width(a.width),this.$el.height(a.height),this},getGridSizes:function(){var a={width:0,height:0},b={width:this.options.widget_base_dimensions[0],height:this.options.widget_base_dimensions[1],margins:n};return a.width=this._grid.cols*b.width+2*(this._grid.cols+1)*b.margins[0],a.height=this._grid.rows*b.height+2*(this._grid.rows+1)*b.margins[1],a},setDraggableScale:function(a){this._grid.drag_api.options.scale=a,this._grid.$widgets.each(function(){c(this).find(".resizable").resizable("option","scale",a)})}})}()},{"../../collections/VisualizationConfigs":33,"../../controls":66,"../../models/VisualizationConfig":138,"../../utilities":144,"./../ModalWarning/index.js":298,"./../Toolbar/index.js":374,"./../VisualizationWidget/index.js":387,"./../WidgetGrid/index.js":393,jquery:103,underscore:458}],382:[function(a,b){!function(){"use strict";var c=(a("underscore"),a("../../Core/MVC/View"),a("./../ListItem")),d=a("./visualizationItemTemplate.html");b.exports=c.extend({events:{"click a":"_onClick","click .itemDetailsIcon":"toggleDetails"},defaults:{template:d,selectedClass:"zd-item-selected",selectable:!1},toggleDetails:function(){return this.$(".itemDetails").slideToggle(),!1}})}()},{"../../Core/MVC/View":5,"./../ListItem":273,"./visualizationItemTemplate.html":383,underscore:458}],383:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<a title="'+__e(attributes.name)+'" class="'+__e(attributes.type&&attributes.type.toLowerCase())+'" href="#">\n    <div class="thumbnail vis-icon">\n        <img title="'+__e(attributes.name)+'" alt="'+__e(attributes.name)+'" id="visIcon" src="'+__e(attributes.thumbnailUrl)+'">\n    </div>\n    <span class="zd icon checkbox" style="display: none"></span>\n    <span class="name">'+__e(attributes.name)+"</span>\n    ",attributes.description&&(__p+='\n    	<i title="Details" class="itemDetailsIcon icon-info-sign pull-right"></i>\n    '),__p+='\n</a>\n<div class="itemDetails" style="display: none;">\n    '+__e(attributes.description)+"\n</div>";return __p}},{lodash:456}],384:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("../../Core/MVC/View"),e=a("./../VisualizationItem"),f=a("./../ListView"),g=a("./visualizationsSelectorTemplate.html");b.exports=d.extend({defaults:{template:g,label:"Apply Filter to Selections"},events:{'click button[name="accept"]':"_onAccept",'change input[value="clone-date-range"]':"_onCloneDateRange"},initialize:function(){return d.prototype.initialize.apply(this,arguments),this.visualizationsList=new f({className:"zd nav nav-tabs nav-stacked",selectable:"checkbox",collection:this.collection,filter:this.options.filter,ItemView:e}),this},render:function(){return this.$el.html(this.visualizationsList.render().$el),this.$el.append(this.options.template({label:this.options.label,cloneDateRange:this.options.cloneDateRange})),this.delegateEvents(),this.showAlreadySelectedFilter(),this},_onAccept:function(){var a=this.visualizationsList.getSelectedItems();this.trigger("accept",a)},cloneDateRange:function(){return this.$("#clone-date-range").prop("checked")},showAlreadySelectedFilter:function(){var a=this,b=this.options.selectedWithFilter.selected,d=this.options.selectedWithFilter.filter;b.length>0&&c.each(b,function(b){var e=b.controller.UUID,f=a.visualizationsList.childViews;c.each(f,function(f){f.model.id===e&&(f._onClick(),f.listenTo(a,"accept",function(a){0===c.filter(a,function(a){return a.id===e}).length||0===a.length?b.controller.state.removeFilter(d):null}))})})}})}()},{"../../Core/MVC/View":5,"./../ListView":275,"./../VisualizationItem":382,"./visualizationsSelectorTemplate.html":385,underscore:458}],385:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});
{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n",cloneDateRange&&(__p+=' \n    <input type="checkbox" name="clone-date-range" value="clone-date-range" id="clone-date-range" class="css-checkbox"/>   \n    <label for="clone-date-range" class="css-label clone-date-range">Clone date range</label>    \n'),__p+='  \n<button name="accept" class="zd btn btn-success btn-block">'+__e(label)+"</button>";return __p}},{lodash:456}],386:[function(a,b){"use strict";{var c=a("jquery"),d=a("underscore"),e=a("../../utilities/transducers"),f=e.map(function(a){return a.toMetric()}),g=e.append,h=function(){return!0},i=a("../../Core"),j=i.MVC,k=j.Events,l=i.DataStreamProvider,m=a("../../utilities"),n=a("../../controls"),o=a("./../../components/InteractiveElements")(),p="_SubheadFiltersList",q=a("./../../components/VisualizationController"),r=a("../ModalWarning"),s=a("./../Notifications").Popup,t=a("./../SmallObjectFieldItem"),u=a("./../ListView"),v=a("./../MetricPicker"),w=a("./../NoDataIndicator"),x=a("./../DirtyDataIndicator"),y=a("./../ErrorManager"),z=a("./../FiltersIndicator"),A=a("./../AxisLabel"),B=a("./../TimeTable"),C=a("./../UndoStateIndicator"),D=a("./../WidgetChangeStyle"),E=a("./../Widget");a("moment")}b.exports=E.extend({events:c.extend({"click .expand .expbtn":"expandFilters"},E.prototype.events),initialize:function(a){a=a||{},E.prototype.initialize.apply(this,arguments),this.user=this.widgetGrid.user,this.controller=null,this.listenTo(k,"filters:validate",this.renderAppliedFilters)},createController:function(a,b){var c=this,d="widget"!==this.widgetGrid.displayMode,e=a.get("controls"),f=this.controller=new q({config:a,source:b,el:this.getContent(),$header:this.getHandle(),interactiveMode:d},l.getStream());return this.childViews.push(f),f.loadVisualization().done(function(){c.controller.initVisualization(),c.controller.startVisualization()}),this.hasFilterControl=-1!==e.indexOf("Filters"),this.hasStyleControl=-1!==e.indexOf("Style"),this.hasNoDataIndicator=-1!==e.indexOf("NoDataIndicator"),this._createNoDataIndicator(),this._createErrorIndicator(),this._createFiltersIndicator(),this._createWidgetChangeStyle(b),this._createTimeTable(),this._createDirtyDataIndicator(),this.createUndoStateIndicator(),this._createAppliedFiltersList(),this.renderIndicators(),c.$el.attr({"data-cid":a.cid,id:"cid-"+a.cid}),this.listenTo(f,"visualization:name",this._onVisNameChange),this.listenTo(f,"visualization:loading",function(){c.$el.find(".widgetLoadingIndicator").show()}),this.listenTo(f,"visualization:loaded",function(){this.widgetGrid.trigger("widget:select",this),this.selected=!0,this._scopeCSS(),c.$el.find(".widgetLoadingIndicator").hide()}),this.listenTo(f,"visualization:change",function(){this._updateFiltersIndicator(),this._createTimeTable(),this.renderIndicators(),c.applyCollectionsEvents(),c.widgetGrid.trigger("widget:select",c)}),this.listenTo(f,"visualization:start",function(){c.getHead().text(c.controller.getVisualizationName()),c.trigger("visualization:start"),c.widgetGrid.trigger("visualization:start",c)}),this.listenTo(f,"visualization:stop",function(){c.trigger("visualization:stop"),c.widgetGrid.trigger("visualization:stop",c)}),this.listenTo(f,"visualization:actionList:open",this._onActionListShow),this.listenTo(f,"visualization:actionList:close",this._onActionListHide),this.listenTo(f,"label:create",this._createAxisLabel),this.listenTo(f,"attributePicker:show",this._onAttributePickerShow),this.listenTo(f,"metricPicker:show",this._onMetricPickerShow),this.on("resize",function(){c.controller.trigger("resize")}),this.listenTo(f.thread,"thread:notDirtyData",function(){"ZOOMABLE_MAP"!==f.config.get("type")&&m.visualizationStarted(c.controller._controller?c.controller._controller:c.controller,c.widgetGrid.collection.length)}),this.listenTo(f.eventDispatcher,"filter:unsupported",this.showFilterNotification),this.applyCollectionsEvents(),this},applyCollectionsEvents:function(){this.listenTo(this.controller.state.filters,"filter:unsupported",this.showFilterNotification),this.listenTo(this.controller.state.groupBy,"groupBy:invalid",this.showWrongGroupBySettingsMessage),this.listenTo(this.controller.state.metrics,"metric:unsupported",this.showMetricNotification)},_onVisNameChange:function(){var a=this.controller.getVisualizationName();this.getHead().text(a),this._fs&&this._fs.$head&&this._fs.$head.length>0&&this._fs.$head.text(a)},_onAttributePickerShow:function(a,b){var c=this,d=this.controller,e=d.fields,f=b.position,g=b.title,i=b.filter||h,j=b.removable,k=b.applicable,l=[],m=new u({className:"nav nav-tabs nav-stacked",ItemView:t,collection:e,selectable:"radio",selected:b.selected,disabled:b.disabled,filter:function(a){var b=!!a.get("visible"),c="ATTRIBUTE"===a.get("type");return b&&c&&i(a)},comparator:function(a){return a.get("label")}}),o=new n.PalettePopup({customClass:"attributePalette",pointerWidth:14,docked:!1});j&&l.push({title:"Remove attributes",icon:"remove",className:"btn-remove",tagName:"div",callback:function(){a.remove(m.getSelectedItems()),o.hide()}}),k&&l.push({title:"Apply",className:"zd btn btn-success btn-block",tagName:"button",callback:function(){a.apply(m.getSelectedItems()),o.hide()}}),o.showHandlers(l).render(m.render().el,g).position({of:f.of,my:f.my||"left+20 top-30",at:f.at||"right center",collision:f.collision||"flipfit flipfit"}),a.show(m.getSelectedItems()),c.listenTo(m,"select",function(b){a.select(b)}),c.listenTo(m,"deselect",function(b){a.deselect(b)}),o.onHide=function(){var b=m.getSelectedItems();c.stopListening(m),m.remove(),a.hide(b)}},_onMetricPickerShow:function(a,b){var c=this,d=this.controller,i=d.fields,j=d.state.metrics,k=b.position,l=b.title,m=b.filter||h,o=b.removable,p=b.applicable,q=[],r=new v({fields:i,metrics:j,selected:b.selected,disabled:b.disabled,filter:function(a){var b=!!a.get("visible"),c=a.id===i.noneField.id;return b&&m(a)&&!c},comparator:function(a){return a.get("label")}}),s=new n.PalettePopup({customClass:"metricPalette",pointerWidth:14,docked:!1});o&&q.push({title:"Remove metrics",icon:"remove",className:"btn-remove",tagName:"div",callback:function(){var b=r.getSelectedItems(),c=e.transduce(f,g,b);a.remove(c),s.hide()}}),p&&q.push({title:"Apply",className:"zd btn btn-success btn-block",tagName:"button",callback:function(){var b=r.getSelectedItems(),c=e.transduce(f,g,b);a.apply(c),s.hide()}}),s.showHandlers(q).render(r.render().el,l).position({of:k.of,my:k.my||"left+20 top-30",at:k.at||"right center",collision:k.collision||"flipfit flipfit"}),a.show(r.getSelectedItems()),c.listenTo(r,"select",function(b){a.select(b.toMetric())}),c.listenTo(r,"deselect",function(b){a.deselect(b.toMetric())}),s.onHide=function(){var b=r.getSelectedItems(),d=e.transduce(f,g,b);c.stopListening(r),r.remove(),a.hide(d)}},_onActionListShow:function(a){k.trigger("actionList:open",a)},_onActionListHide:function(a){k.trigger("actionList:close",a)},_createNoDataIndicator:function(){var a=this.controller,b=this;this.hasNoDataIndicator&&"undefined"==typeof this.noDataIndicator&&"undefined"!=typeof a&&(this.noDataIndicator=new w({root:this.$el[0]}),this.childViews.push(this.noDataIndicator),this.listenTo(a.thread,"thread:noData",function(){b.noDataIndicator.show()}),this.listenTo(a.thread,"thread:message",function(){b.noDataIndicator.hide()}))},_createErrorIndicator:function(){var a=this.controller,b=this;"undefined"==typeof this.errorLog&&"undefined"!=typeof a&&(this.errorLog=new y({el:this.$el[0]}),this.childViews.push(this.errorLog),this.listenTo(a.thread,"thread:error",function(a){b.errorLog.capture(a,"Internal Server Error",a&&a.details&&a.details.message?a.details.message:""),console.error(a&&a.details?JSON.stringify(a.details):"thread:error")}))},_updateFiltersIndicator:function(){this.filtersIndicator&&this.filtersIndicator.remove(),this.filtersIndicator=null,delete this.filtersIndicator,this._createFiltersIndicator()},_createFiltersIndicator:function(){var a=this.controller,b=this;this.hasFilterControl&&"undefined"==typeof this.filtersIndicator&&"undefined"!=typeof a&&(this.filtersIndicator=new z({root:this.getHeader()[0],config:a.config,collection:a.state.filters,objectFields:a.fields,state:a.state,user:this.user}),this.childViews.push(this.filtersIndicator),this.listenTo(a.thread,"thread:startVisDone",function(){b.filtersIndicator.validate()}))},_createWidgetChangeStyle:function(a){var b=this.controller,c=this;this.hasStyleControl&&"undefined"==typeof this.widgetChangeStyle&&"undefined"!=typeof b&&(this.widgetChangeStyle=new D({root:this.getHeader()[0],config:b.config,collection:b.state.filters,objectFields:b.fields,state:b.state,source:a,visualizationController:b}),this.childViews.push(this.widgetChangeStyle),this.listenTo(b.thread,"thread:startVisDone",function(){c.widgetChangeStyle.validate()}))},_createTimeTable:function(){var a=this.controller.config.get("controls"),b=-1!==a.indexOf("TimeTable");return this.timeTableView&&(this.timeTable&&this.timeTable instanceof this.timeTableView&&this.timeTable.remove(),this.timeTable=new this.timeTableView({timeTableEnabled:b,container:this.getFooter(),model:this.controller.state.time,controller:this.controller,className:"time-table-container"}),this.childViews.push(this.timeTable)),b?this.$el.removeClass("no-timeTable"):this.$el.addClass("no-timeTable"),this},_createDirtyDataIndicator:function(){return this.dirtyDataIndicator=new x({controller:this.controller,grid:this.widgetGrid}),this.childViews.push(this.dirtyDataIndicator),this},_createAppliedFiltersList:function(){this.off("resize",this.renderAppliedFilters),this.on("resize",this.renderAppliedFilters)},_createAxisLabel:function(a){var b=this.controller,d=new A(c.extend({},a,{controller:b,elementsManager:o})),e=d.render().$el,f=this.getBody(),g=this.getContent();switch(a.position){case"left":var h=f.find(".widgetLabel.left").eq(0);h&&0!==h.length||(h=c('<div class="widgetLabel left"/>'),f.prepend(h)),g.css({left:"36px"}),h.append(e);break;case"right":var i=f.find(".widgetLabel.right").eq(0);i&&0!==i.length||(i=c('<div class="widgetLabel right"/>'),f.prepend(i)),g.css({right:"36px"}),i.append(e);break;case"top":var j=f.find(".widgetLabel.top").eq(0);j&&0!==j.length||(j=c('<div class="widgetLabel top"/>'),f.prepend(j)),g.css({top:"50px"}),j.append(e);break;case"bottom":var k=f.find(".widgetLabel.bottom").eq(0);k&&0!==k.length||(k=c('<div class="widgetLabel bottom"/>'),f.prepend(k)),g.css({bottom:"36px"}),k.append(e)}return d.position(),e.hide().show(0),b.axisLabels.push(d),e},_getFilterInfo:function(a,b){var c=a.operation,e="",f=[],g="",h=null,i=d.find(b,function(b){return b.get("name")===a.path}),j="YYYY/MM/DD hh:mm:ss A",k=["DAY","WEEK","MONTH","YEAR"];a.granularity&&(-1!=k.indexOf(a.granularity)?j="YYYY/MM/DD":null),"TEXT_SEARCH"!==c&&i&&(e=i.get("label"),g="NOTIN"===c?"Exclude - ":"",f=a.value.slice?a.value.slice(0):a.value),"TEXT_SEARCH"===c&&(e="Search",f=[a.value]),"BETWEEN"===c&&(h=" - ",i&&"TIME"===i.get("type")&&(f=f.map(function(a){return m.getStringGmtTime(a,j)})));var l="";switch(a.operation){case"GT":l=">";break;case"GE":l="≥";break;case"EQUALS":l="=";break;case"LE":l="≤";break;case"LT":l="<"}return a.value instanceof Array||(f=i&&"TIME"===i.get("type")?[l+" "+m.getStringGmtTime(a.value,j)]:[l+" "+a.value]),{label:e,values:f,operation:g,separator:h}},_scopeCSS:function(){var a=-1!==navigator.userAgent.toLowerCase().indexOf("msie")||navigator.userAgent.match(/Trident\/7\./);if(a){var b=this.controller.config.attributes.visId,c=this.$(".widgetBody"),d=this.$("style[data-visid="+b+"]"),e="css-scoped-"+b,f="."+e+" "+d.html().replace(/}/g,"} ."+e);c.addClass(e),d.html(f)}},showWrongGroupBySettingsMessage:function(){var a,b,c=this.controller,d=c.config.sourceId,e="Group By Error";a="SOLR"===c.source.get("type")&&"PIVOT_TABLE"===c.config.get("type")?'Table visualization is disabled for Solr source. You can add <a href="admin.html#clsearch-source">Search</a> or <a href="admin.html#elastic-source">Elastic Search</a> source to use Table.':'You have wrong settings for Visualization or Source. Go to <a href="admin.html#source/'+d+'">Source Settings</a> and set correct groupBy Attribute.',b=new r({title:e,description:a,handlers:[{label:"OK",callback:function(){}}]}),b.showup()},showFilterNotification:function(a){var b=this.controller.state.config.get("name"),c="Time Filter <b>"+m.htmlEntities(a.get("label"))+"</b> not applied as it used as <b>Time Attribute</b> for <b>"+b+"</b> visualization.",d=new s({type:"warning",title:"Filter path not Applied",description:c,timeout:5e3});d.show()},showMetricNotification:function(a,b){b=b||{};var c=this.controller.state.config.get("name"),d="Metric <b>"+m.htmlEntities(a.get("label"))+"</b> not supported according to current visualization state for <b>"+c+"</b> visualization.",e=new s({type:"warning",title:"Metric not supported",description:d,timeout:5e3,removeAll:b.removeAll});e.show()},renderIndicators:function(){this.noDataIndicator&&this.noDataIndicator.render(),this.errorLog&&this.errorLog.render(),this.filtersIndicator&&this.filtersIndicator.render(),this.dirtyDataIndicator&&this.dirtyDataIndicator.render(),this.timeTable&&(this.timeTable.render(),this.timeTable.update())},showSubheadFiltersList:function(){var a=this.$(".applied-filters"),b=d.find(this.controller.config.get("variables"),function(a){return a.name===p});if(b){var c=b.defaultValue;"false"===c?a.hide():a.show()}},renderAppliedFilters:function(){this.showSubheadFiltersList();var a=this,b=this.filtersIndicator,c=b?b.collection.toJSON():null,e=this.controller.fields.models,f=c?c.length:null,g=0,h="";c&&(d.each(c,function(b){var d=a._getFilterInfo(b,e),i=d.label,j=d.values,k=d.operation,l=d.separator;if(!(g>0)){if(i){h+="<b>"+m.htmlEntities(i)+":</b> "+k;for(var n=0;n<j.length;n++)h+=n!==j.length-1?m.htmlEntities(j[n])+(l?l:", "):m.htmlEntities(j[n])+(c.length>1?"; ":" ");f--}a.$appliedFiltersList.html(h);var o=a.getFiltersList().width(),p=a.$appliedFiltersList[0].scrollWidth;p>.9*o-170?(g=f,a.$appliedFiltersExpand.show()):a.$appliedFiltersExpand.hide()}}),this.$appliedFiltersList.html(h),g?a.$appliedFiltersExpand.find(".count-info").text("+"+g+" more filters "):a.$appliedFiltersExpand.find(".count-info").empty(),this.options.bodyCssTop=this.options.bodyCssTop||parseInt(this.getBody().css("top"),10),c.length>0?this.getBody().css("top",this.options.bodyCssTop+10):(this.$appliedFiltersExpand.hide(),this.getBody().css("top",this.options.bodyCssTop)))},expandFilters:function(){this.widgetGrid.model.visualizations.length>1?k.trigger("filtersList:expand",this.controller.UUID,this.$appliedFiltersExpand):k.trigger("filtersPalette:show")},timeTable:{},timeTableView:B,dirtyDataIndicator:{},createUndoStateIndicator:function(){this.undoController=new C({controller:this.controller,widget:this}),this.getFooter().append(this.undoController.render().el),this.childViews.push(this.undoController)},getHeader:function(){return this.$el.find(".dragHandle")},getLegend:function(){return this.getContent().find(".zd-legend")},getSearchQuery:function(a){var b=a.find(function(a){return"TEXT_SEARCH"===a.get("operation")});return b?b.get("value"):null},select:function(){E.prototype.select.apply(this,arguments),this.$overlay=this.$overlay||c('<div class="zd-widget-overlay"></div>'),this.selected&&this.$overlay.remove()},deselect:function(){E.prototype.deselect.apply(this,arguments),this.$overlay=this.$overlay||c('<div class="zd-widget-overlay"></div>'),this.controller.state.interactiveMode&&this.getContent().append(this.$overlay)},goFullScreen:function(){var a=this,b=this.controller.config.get("visId");return E.prototype.goFullScreen.apply(this,arguments).done(function(){a.$('style[data-visid="'+b+'"]').scopedPolyFill()}),this.listenToOnce(this._fs,"close",function(){try{a.controller.trigger("resize"),a.$('style[data-visid="'+b+'"]').scopedPolyFill()}catch(c){setTimeout(function(){a.controller.trigger("resize"),a.$('style[data-visid="'+b+'"]').scopedPolyFill()},300)}}),this.listenToOnce(this._fs,"open",function(){try{a.controller.trigger("resize")}catch(b){setTimeout(function(){a.controller.trigger("resize")},300)}}),!1}})},{"../../Core":8,"../../controls":66,"../../utilities":144,"../../utilities/transducers":149,"../ModalWarning":298,"./../../components/InteractiveElements":40,"./../../components/VisualizationController":53,"./../AxisLabel":161,"./../DirtyDataIndicator":224,"./../ErrorManager":230,"./../FiltersIndicator":247,"./../ListView":275,"./../MetricPicker":293,"./../NoDataIndicator":300,"./../Notifications":302,"./../SmallObjectFieldItem":344,"./../TimeTable":372,"./../UndoStateIndicator":377,"./../Widget":389,"./../WidgetChangeStyle":391,jquery:103,moment:457,underscore:458}],387:[function(a,b){b.exports=a("./VisualizationWidget")},{"./VisualizationWidget":386}],388:[function(a,b){!function(){"use strict";var c=a("underscore"),d=a("jquery"),e=a("../../utilities"),f=a("../../controls"),g=a("../../Core/MVC"),h=g.View,i=g.Events,j=a("./../../components/settings"),k=a("./widgetTemplate.html"),l=a("./../InlineRenameView"),m=f.Notification,n=(a("../../models/Dashboard"),a("../../collections/Sources")),o=a("../../admin/Settings");b.exports=h.extend({tagName:"li",className:"widget well well-small",events:{"click span.remove":"showDelete","click span.delete":"close","click span.itemControl":"goFullScreen",click:"select",dragstart:"preventClick",dragend:"offPreventClick","click .widgetHeadLabel":"initWidgetRenaming"},defaults:{template:k,colSpan:1,rowSpan:1,minCols:1,minRows:1},initialize:function(a){var b=this;if(c.bindAll(this,"updateSizeClass"),!a.widgetGrid)throw new Error("widgetGrid is not defined");this.widgetGrid=a.widgetGrid,delete a.widgetGrid,h.prototype.initialize.apply(this,arguments),this.sources=new n,this.sources.fetch(),this.selected=!1;var d=e.mode();this.widgetGrid.user.getSourcesAcl().then(function(a){var e=c.findWhere(a,{id:b.controller.config.get("source").sourceId}).write;b.can_edit_dashboards=e&&b.widgetGrid.user.canCreateBookmarks()&&1!==d}),this.$el.on("resizestart",function(a,c){b.widgetGrid.trigger("widget:resizeStart",b,a,c)}),this.$el.on("resizestop",function(a,c){var d=b.widgetGrid,e={colSpan:Math.ceil(c.size.width/(d.options.widget_base_dimensions[0]+2*d.options.widget_margins[1]))||1,rowSpan:Math.ceil(c.size.height/(d.options.widget_base_dimensions[1]+2*d.options.widget_margins[0]))||1};c.element.css({width:"",height:""}),b.resize(e)}),this.on("resize",this.updateSizeClass),this.listenTo(this.widgetGrid,"widget:select",function(a){a!=b&&b.deselect()})},render:function(a,b){return this.$el.html(this.options.template({editableHeader:this.can_edit_dashboards})),this.$deleteBtn=this.$(".delete"),this.$removeBtn=this.$(".remove"),this.$appliedFiltersList=this.$(".applied-filters .filters-list"),this.$appliedFiltersExpand=this.$(".applied-filters .expand"),this.getHead().text(b),this.getBody().append(a),this.applyResizableOptions(),this.updateSizeClass(),this},initWidgetRenaming:function(a){function b(){var a=g.inlineRenameView.$el.find('input[type="text"]').val(),b=g.sources.findWhere({id:g.controller.config.sourceId}),d=b.get("visualizations"),e=c.filter(d,function(a){return a.visId===g.controller.config.get("visId")}),h=e[0].source.variables["Visualization Name"];h!==a?(e[0].source.variables["Visualization Name"]=a,b.save(null,{patch:!0}).done(function(){f=new m({type:"success"}),f.render("Visualization name successfully updated"),g.inlineRenameView.restoreChanges(a)}).fail(function(a){var b=a.responseJSON;o.showErrorWithMessage("Failed to save visualization name: "+b.details),g.inlineRenameView.restoreChanges(!1)})):(f=new m({type:"error"}),f.render("Failed to save bookmark "),g.inlineRenameView.restoreChanges(!1))}if(this.can_edit_dashboards){{var f,g=this,h=d(a.currentTarget),i=e.mode(),k=j.permissions.dashboards,n="visualization-name-input";this.controller.config.get("visId")}this.inlineRenameView&&this.inlineRenameView.destroy(),this.inlineRenameView=new l({targetElement:h,inputClass:n,value:h.html()}),1!==i&&k.save?(this.inlineRenameView.render(),this.inlineRenameView.onFocusOut=function(){b()},this.inlineRenameView.onKeyPressed=function(a){13===a.charCode&&b()}):a.preventDefault()}},showDelete:function(){var a=this;this.$removeBtn.hide(),this.$deleteBtn.slideToggle("fast"),this.$el.one("click",function(){a.hideDelete()})},hideDelete:function(){this.$deleteBtn.hide(),this.$removeBtn.slideToggle("fast")},updateSizeClass:function(){var a=this.$el,b=this.getContent(),c=a.width(),d=a.height(),f=e.getWidgetSizeClass(c,d);a.removeClass("small medium large"),b.removeClass("small medium large"),a.addClass(f),b.addClass(f)},resize:function(a){var b=this.options;a=a||{},"undefined"!=typeof a.colSpan&&(a.colSpan=Math.max(a.colSpan,b.minCols)),"undefined"!=typeof a.rowSpan&&(a.rowSpan=Math.max(a.rowSpan,b.minRows)),this.widgetGrid.resizeWidget(this,a)},initResponsiveLabel:function(a,b){var c=20,d=this.getLabels(),e=b.colSpan*a.min_widget_width-c,f=d.find(".axisLabel"),g=f.length,h=4*parseInt(f.eq(0).css("margin-right")),i=e/g-h-3;i&&!isNaN(i)&&f.css("max-width",i+"px")},applyResizableOptions:function(){var a=this.widgetGrid.options;this.$(".resizable").resizable({grid:[a.widget_base_dimensions[0]+2*a.widget_margins[1],a.widget_base_dimensions[1]+2*a.widget_margins[0]],helper:"resizable-helper",maxWidth:this.getMaxWidth(),maxHeight:this.getMaxHeight(),minWidth:this.getMinWidth(),minHeight:this.getMinHeight()})},getBody:function(){return this.$(".widgetBody")},getContent:function(){return this.$(".widgetContent")},getLabels:function(){return this.$(".widgetLabel")},getStyles:function(){return this.$("style")},getHead:function(){return this.$(".widgetHeadLabel")},getHandle:function(){return this.$el.find(".dragHandle")},getFooter:function(){return this.$(".widgetFooter")},getToolbar:function(){return this.$(".widgetBody").find(".zd-visualization-toolbar")},getFiltersList:function(){return this.$(".applied-filters")},getMinWidth:function(){var a=this.options.minCols-1||0,b=this.widgetGrid.options.widget_base_dimensions[0],c=this.widgetGrid.options.widget_margins[1];return a*b+c*(2*a+1)},getMaxWidth:function(){var a=this.widgetGrid.options.max_size_x,b=this.widgetGrid.options.widget_base_dimensions[0],c=this.widgetGrid.options.widget_margins[1];return a*b+c*(2*a+1)},getMinHeight:function(){var a=this.options.minRows-1||0,b=this.widgetGrid.options.widget_base_dimensions[1],c=this.widgetGrid.options.widget_margins[0];return a*b+c*(2*a+1)},getMaxHeight:function(){var a=this.widgetGrid.options.max_size_y,b=this.widgetGrid.options.widget_base_dimensions[1],c=this.widgetGrid.options.widget_margins[0];return a*b+c*(2*a+1)},getLayout:function(){var a=this.$el.data().coords&&this.$el.data().coords.grid;if(!a){var b=this;a=function(){var a=b.$el.attr("data-col"),c=b.$el.attr("data-row"),d=b.$el.attr("data-sizex"),e=b.$el.attr("data-sizey");return{col:parseInt(a,10),row:parseInt(c,10),size_x:parseInt(d,10),size_y:parseInt(e,10)}}()}return{col:a.col,row:a.row,colSpan:a.size_x,rowSpan:a.size_y}},goFullScreen:function(){var a=this;return!this.selected&&this.select(),this._fs instanceof f.FullScreenView||(this._fs=new f.FullScreenView,this._fs.$el.addClass("zd-visualization"),this.listenTo(this._fs,"startClosing",function(){a.widgetGrid.trigger("widget:startClosing",a),i.trigger("widget:startClosing")}),this.listenTo(this._fs,"close",function(){a._fs.setActive(!1),a._fs.remove(),a.widgetGrid.trigger("widget:fullOff",a),i.trigger("widget:fullOff")})),this.widgetGrid.trigger("widget:fullOn",this),this._fs.setActive(!0),i.trigger("widget:fullscreen",this.controller.config.get("source")),this._fs.render(this)},deselect:function(a){this.selected&&(a!==!0&&(this.$el.removeClass("selectedWidget"),this.widgetGrid.trigger("widget:deselect",this)),this.selected=!1)},select:function(a){return"widget"===this.options.displayMode?(this.deselect(),!1):a&&d(a.target).hasClass("prevent-click")?(d(a.target).removeClass("prevent-click"),!1):(this.selected||(a!==!0&&(this.$el.addClass("selectedWidget"),this.widgetGrid.trigger("widget:select",this)),this.selected=!0),!1)},preventClick:function(a){d(a.target).addClass("prevent-click")},offPreventClick:function(){this.$el.find(".prevent-click").removeClass("prevent-click")},close:function(){return this.remove({manual:!0}),!1},remove:function(a){this.widgetGrid.removeWidget(this,a),h.prototype.remove.apply(this,arguments)}})}()},{"../../Core/MVC":6,"../../admin/Settings":10,"../../collections/Sources":30,"../../controls":66,"../../models/Dashboard":114,"../../utilities":144,"./../../components/settings":55,"./../InlineRenameView":271,"./widgetTemplate.html":390,jquery:103,underscore:458}],389:[function(a,b){b.exports=a("./Widget")},{"./Widget":388}],390:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="resizable">\n    <div class="dragHandle">\n        <div class="widgetHead">\n            <div class="widget-label-wrapper '+(null==(__t=editableHeader?"editable":"")?"":__t)+'">\n                <span class="widgetHeadLabel"></span>\n                <i class="zd icon fontIcon widget-edit-icon">u</i>\n            </div>\n            <div class="widgetHeadProgress"></div>\n        </div>\n        <div class="header-controls">\n            <span class="header-control details"><i class="zd icon info"></i></span>\n            <span class="header-control remove"><i class="zd icon remove-item"></i></span>\n            <span class="header-control delete" style="display: none">Delete</span>\n            <span class="header-control itemControl"><i class="zd icon fullscreen"></i></span>\n        </div>\n        <div class="applied-filters">\n            <div class="filters-list"></div>\n            <div class="expand" style="display: none;">\n                <div class="count-info"></div>\n                <div class="expbtn">Expand</div>\n            </div>\n            <div class="clearfix"></div>\n        </div>\n    </div>\n    <div class="exitFullscreen"><i class="zd icon exit-fullscreen"></i></div>\n    <div class="widgetLoadingIndicator"/>\n    <div class="widgetBody">\n        <div class="widgetContent">\n            <div class="zd-legend" style="display: none;"></div>\n        </div>\n    </div>\n    <div class="widgetFooter"/>\n</div>\n';return __p}},{lodash:456}],391:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("../../controls"),g=a("../../utilities"),h=a("./../ListView"),i=a("./../VisualizationItem"),j=d.template('            <i class="zd icon style"></i>        '),k=e.Events,l=a("../../models/SourceVisualization");b.exports=e.View.extend({tagName:"a",className:"zd-widget-change-style",defaults:{template:j},events:{click:"_onClick"},initialize:function(a){return a=a||{},e.View.prototype.initialize.apply(this,arguments),this.source=a.source,this.visualizationController=a.visualizationController,this.hide(),this},validate:function(){this.blink(),this.render(),k.trigger("filters:validate",this.options.config.get("id"))},hide:function(){this.$el.hide(),this.popup&&this.popup.hide()},render:function(){return this.options.root&&this.$el.insertAfter(c(this.options.root).find(".details")),this.$el.html(this.options.template()),this.$el.show(),this.$el.css("display","inline-block"),this.delegateEvents(),this},showVisualizationsList:function(a){var b=this,c={of:a||b.$el,my:a?"left-24px bottom+59px":"left+10px bottom+59px",at:a?"right+50px bottom":"left+30px bottom",collision:"flipfit flipfit"},d={ascending:!0,sortby:function(a){var b=a.get("name")||"",c=a.get("type");return"PIVOT_TABLE"===c?"":b.toLowerCase()}},e=new h({className:"zd nav",ItemView:i,selectable:"radio",search:"name"});this.popup=new f.PalettePopup({customClass:"style-palette"}),this.popup.render(e.render(d).$el,"Change Style"),this.popup.onHide=function(){b.goNormal()},this.popup.position(c),this.popup.onHide=function(){b.$el.removeClass("active"),b.stopListening(e.collection),e.remove()},b.listenToOnce(e,"select",function(a){var c=b.options.config,d=c.get("visId"),e=c.get("type");if(d===a.id)return void b.popup.hide();var f=g.getURLParameter("single");c.stateBackup&&(c.toRequest=c.stateBackup.toRequest),f?window.location="visualization?sourceId="+a.collection.sourceId+"&visId="+d+"&single=true":a.fetch().done(function(){-1===["TRENDS","MULTI_METRIC_TREND"].indexOf(e)&&(b.source.date=c.get("source").date,b.source.startFrom=c.get("source").startFrom,b.source.timeWindowScale=c.get("source").timeWindowScale,b.source.showTimeLine=c.get("source").showTimeLine),b.source.filters=b.options.state.filters.toJSON(),b.visualizationController.setVisualization(new l(a.toJSON())),b.popup.hide()})}),this.source.visualizations.bootstrap().done(function(){e.collection.reset(b.source.visualizations.models),e.render(d),b.popup.position()})},blink:function(){var a=this;this.goActive(),setTimeout(function(){a.goNormal()},200)},goNormal:function(){return this.$el.removeClass("active"),this},goActive:function(){return this.$el.hasClass("active")||this.$el.addClass("active"),this},_onClick:function(){this.goActive(),this.showVisualizationsList()},remove:function(){this.stopListening(this.collection),this.stopListening(k),this.popup&&this.popup.hide(),this.$el.remove()}})}()},{"../../Core/MVC":6,"../../controls":66,"../../models/SourceVisualization":130,"../../utilities":144,"./../ListView":275,"./../VisualizationItem":382,jquery:103,underscore:458}],392:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=e.View,g=e.Model,h=e.Collection.extend({model:g}),i=a("./../Widget/index.js"),j=a("../../utilities"),k=j.getURLParameter("__target");b.exports=f.extend({widgetView:i,defaults:{serialize_params:function(a,b){return{row:b.row,col:b.col,colSpan:b.size_x,rowSpan:b.size_y,element:b.el}},draggable:{handle:".dashboard-widgets .dragHandle .widgetHead, .dashboard-widgets .widgetFooter .time-table-container *, .dashboard-widgets .widgetHeadLabel",limit:!1}},events:{tap:"_blur"},widgetsData:new h,initialize:function(a){var b=this;return this.displayMode=k,this.single=!0,a.widgetView&&(this.widgetView=a.widgetView,delete a.widgetView),f.prototype.initialize.apply(this,arguments),this.options.draggable.start=function(){b.trigger("widget:dragstart",b)},this.options.draggable.drag=function(){b.trigger("widget:drag",b)},this.options.draggable.stop=function(){b.trigger("widget:dragstop",b)},this.options.collision={},this.options.draggable.disabled=j.MODE.NATIVE===j.mode(),this._grid=c('<ul class="gridster unstyled"></ul>').appendTo(this.$el).gridster(this.options).data("gridster"),this},forEachWidget:function(a){var b=this,e=0;return a="function"==typeof a?a:c.noop,d.each(this.childViews,function(c){c instanceof b.widgetView&&a.call(this,c,e++)}),this},getGridDataSizes:function(){var a={cols:1,rows:1};return this.forEachWidget(function(b){var c=b.getLayout(),d={col:c.col-1+c.colSpan,row:c.row-1+c.rowSpan};d.col>a.cols&&(a.cols=d.col),d.row>a.rows&&(a.rows=d.row)}),a.cols=Math.max(a.cols,this.options.min_cols),a.rows=Math.max(a.rows,this.options.min_rows),a},setGridOptions:function(a,b){var d=this,e=this._grid.options,f=this.options;return this._grid.remove_style_tags(),this.options=c.extend({},f,a),this._grid.options=c.extend({},e,a),this.forEachWidget(function(a){b||(a.$el.attr("data-col",1),a.$el.attr("data-row",1),a.$el.attr("data-sizex",d._grid.options.min_cols),a.$el.attr("data-sizey",d._grid.options.min_rows)),a.options.minCols=d.options.min_size_x,a.options.minRows=d.options.min_size_y,a.applyResizableOptions()}),this._grid.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this._grid.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this._grid.generate_grid_and_stylesheet(),this._grid.get_widgets_from_DOM(),this._grid.set_dom_grid_height(),this._grid.set_dom_grid_width(),this
},createWidget:function(a){var b=new this.widgetView({colSpan:Math.min(a&&a.colSpan,this._grid.cols),rowSpan:Math.min(a&&a.rowSpan,this._grid.rows),minCols:this.options.min_size_x,minRows:this.options.min_size_y,widgetGrid:this,displayMode:this.displayMode});return b},addWidget:function(a){var b=a||{},d=b.at||this.getDefaultPosition(),e=this.createWidget(d);return e.options.colSpan+d.col-1>this._grid.cols&&this._grid.add_faux_cols(e.options.colSpan+d.col-1-this._grid.cols),this._grid.add_widget(e.render(b.body,b.head).$el,e.options.colSpan,e.options.rowSpan,d.col,d.row),this._grid.recalculate_faux_grid(),this.childViews.push(e),this.trigger("widget:add",e),c("#visLoading").remove(),this.childViews.length==this.collection.length&&this.childViews.length>1&&c(".resizable .ui-resizable-handle").each(function(){this.style.setProperty("display","block","important")}),this.setSingleWidgetView(),e},setSingleWidgetView:function(){1===this.childViews.length?(this.single=!0,this.$el.addClass("single"),this.$el.find(".dragHandle").on("mousedown",function(a){a.stopPropagation()})):(this.single=!1,this.$el.removeClass("single"),this.$el.find(".dragHandle").off("mousedown"))},getMaxSpaceInGridster:function(){function a(a,b){for(var c=b.coordinates.i,d=b.coordinates.j,e=b.coordinates.ii,f=b.coordinates.jj,g=d;f>=g;g++)for(var h=c;e>=h;h++)if(a[g]instanceof Array||(a[g]=[]),1===a[g][h])return!0;return!1}var b,c,d,e,f=this.getGridDataSizes(),g=[[0]],h=0,i={};this.forEachWidget(function(a){for(var b=a.getLayout(),c=0;c<b.rowSpan;c++)for(var d=0;d<b.colSpan;d++)g[b.row-1+c]instanceof Array||(g[b.row-1+c]=[]),g[b.row-1+c][b.col-1+d]=1});var j=f.rows,k=f.cols;for(c=0;j>c;c++)for(b=0;k>b;b++){var l=b,m=c;for(e=m;j>e;e++)for(d=l;k>d;d++)if(!a(g,{coordinates:{i:b,j:c,ii:d,jj:e}})){var n=(e-c+1)*(d-b+1);n>h&&(h=n,i={col:b+1,row:c+1,colSpan:d-b+1,rowSpan:e-c+1})}}return i},removeWidget:function(a,b){var c=a.$el.coords();return c.grid&&this._grid.remove_widget(a.el),this.childViews.splice(this.childViews.indexOf(a),1),this.trigger("widget:remove",a,b),this},resizeWidget:function(a,b,d){var e=this,f=a.getLayout(),g={colSpan:f.colSpan,rowSpan:f.rowSpan};return a.$el.off("transitionend").on("transitionend",function(d){/height|width/i.test(d.originalEvent.propertyName)&&c(d.target).hasClass("widget")&&(a.trigger("resize"),e.trigger("widget:resize",a,b,g))}),b.colSpan&&(a.options.colSpan=b.colSpan),b.rowSpan&&(a.options.rowSpan=b.rowSpan),this._grid.resize_widget(a.$el,b.colSpan,b.rowSpan,d),a.initResponsiveLabel(this._grid,b),this},getWidgets:function(){return this.childViews},getLargestWidget:function(){var a,b=this.getWidgets(),c=0;return d.each(b,function(b){var d=b.getLayout(),e=d.colSpan*d.rowSpan;e>c&&(c=e,a=b)}),a},updateSizeClasses:function(){return this.forEachWidget(function(a){a.updateSizeClass()}),this},validateGrid:function(){var a={cols:this._grid.cols,rows:this._grid.rows};return this._grid.$widgets.each(function(){var b=c(this);parseInt(b.attr("data-col"),10)-1+parseInt(b.attr("data-sizex"),10)>a.cols&&(a.cols=parseInt(b.attr("col"),10)+parseInt(b.attr("sizex"),10)),parseInt(b.attr("data-row"),10)-1+parseInt(b.attr("data-sizey"),10)>a.rows&&(a.rows=parseInt(b.attr("data-row"),10)+parseInt(b.attr("data-sizey"),10))}),a.cols>this._grid.cols&&this._grid.add_faux_cols(a.cols-this._grid.cols),a.rows>this._grid.rows&&this._grid.add_faux_rows(a.rows-this._grid.rows),this},getDefaultPosition:function(){function a(a){var b=a.getLayout(),c={};b.colSpan>=b.rowSpan?(c.colSpan=Math.floor(b.colSpan/2),c.rowSpan=b.rowSpan,h.colSpan=b.colSpan-c.colSpan,h.rowSpan=b.rowSpan,h.col=b.col+c.colSpan,h.row=b.row):(c.colSpan=b.colSpan,c.rowSpan=Math.floor(b.rowSpan/2),h.colSpan=b.colSpan,h.rowSpan=b.rowSpan-c.rowSpan,h.col=b.col,h.row=b.row+c.rowSpan),f.resizeWidget(a,c)}function b(){h.col=i.col,h.row=i.row,h.colSpan=Math.min(i.colSpan,f.options.max_size_x),h.rowSpan=Math.min(i.rowSpan,f.options.max_size_y)}function c(){var a=f.getGridDataSizes();h.col=1,h.row=a.rows+1,h.colSpan=g.colSpan,h.rowSpan=g.rowSpan}var d,e,f=this,g={colSpan:this.options.min_size_x,rowSpan:this.options.min_size_y},h={col:1,row:1,colSpan:this.options.max_size_x,rowSpan:this.options.max_size_y},i=this.getMaxSpaceInGridster();return i.colSpan>=g.colSpan&&i.rowSpan>=g.rowSpan?b():this.childViews.length?(d=this.getLargestWidget(),e=d.getLayout(),Math.floor(e.colSpan/2)>=g.colSpan||Math.floor(e.rowSpan/2)>=g.rowSpan?a(d):c()):c(),h},setWidgetPosition:function(a,b){var c=this,e={col:b.first?1:b.col,row:b.first?1:b.row,size_x:b.first?this.options.max_size_x:b.size_x,size_y:b.first?this.options.max_size_y:b.size_y};if(b.first)this.options.widgetsPrevCoords={},d.each(this.childViews,function(a,b){c.options.widgetsPrevCoords[b]=a.$el.coords().grid}),this._grid.mutate_widget_in_gridmap(a,a.coords().grid,e);else if(!b.first&&this.options.widgetsPrevCoords){var f=this.options.widgetsPrevCoords;this._grid.mutate_widget_in_gridmap(a,a.coords().grid,e),d.each(this.childViews,function(b,d){b.$el!==a&&c._grid.mutate_widget_in_gridmap(b.$el,b.$el.coords().grid,f[d])}),delete this.options.widgetsPrevCoords}},serialize:function(){return this._grid.serialize()},deselect:function(){this.trigger("widget:select",null)},render:function(){return this.resize(),this},resize:function(){this._grid.recalculate_faux_grid()},_blur:function(a){var b=c(a.target),e=this.getWidgets(),f=!0;d.each(e,function(a){(a.$el.is(b)||a.$el.has(b).length)&&(f=!1)}),f&&e.length>1&&this.deselect()},remove:function(){var a=this.childViews.length;for(this._grid.destroy();a>0;)this.childViews[0].remove(),a--},getFullScreenEl:function(){if(this.single)return this.$el;for(var a=this.getWidgets(),b=0;b<a.length;b++){var d=a[b];if(d._fs&&d._fs.isActive())return console.log(c(d._fs.currentBody)),c(d._fs.currentBody)}return null}})}()},{"../../Core/MVC":6,"../../utilities":144,"./../Widget/index.js":389,jquery:103,underscore:458}],393:[function(a,b){b.exports=a("./WidgetGrid")},{"./WidgetGrid":392}],394:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC"),d=a("./../ControlButton"),e=a("./../../views/SourceBrowser"),f=a("../../controls").PalettePopup,g=a("./../../views/SearchBox"),h=(a("./../../views/DashboardTypeSelector"),a("jquery")),i=a("underscore"),j=c.Events,k=a("./spinnerTemplate.html"),l=a("./template.html"),m=d.extend({className:"visualization-control control-button right",template:l,defaults:{},events:{click:"_onClick"},initialize:function(a){var b=this;if("undefined"==typeof a.user)throw new Error("user must be defined");return a.dashboard?(this.dashboard=a.dashboard,delete a.dashboard,this._dashboardType=this.dashboard.get("layout")):this._dashboardType="unset",this.connections=a.connections,delete a.connections,this.zoomdataSettings=a.settings||{},d.prototype.initialize.apply(this,arguments),this.listenTo(j,"sync",function(a){var c=a.get("visualizations");b.dashboardVis=c}),this},_onClick:function(){var a=this.options.user.getPreference("dashboardLayout")||"unset",b=this.dashboard.get("layout"),c=this.options.dashboardOptions.oldLayout;return"1"!==this.zoomdataSettings.ZOOMABLE_DASHBOARD&&(a="4-column"),"unset"==a&&"unset"==b?(c||0==this.dashboard.get("visualizations").length?this.showSourcesList():this.showLayoutSelectionBox(),void(this._dashboardType=this.dashboard.get("layout"))):"unset"!==b?void this.showSourcesList():(this._dashboardType=a,void this.showSourcesList())},showSourcesList:function(){var a=this,b=this.$el[0].firstElementChild;this.popup&&this.popup.hide(),this.$state="source",this.popup=new f({customClass:"addVisualization"}),this.popup.$el.addClass("docked"),this.popup.stopListening(j,"visualization:stop"),this.searchBox=new g;var c=[];i.each(this.dashboardVis,function(a){c.indexOf(a.source.sourceName)<0&&c.push(a.source.sourceName)}),this.sourceList=new e({collection:this.sources,openedSources:c}),this.popup.render(k(),"Loading...").position({of:this.$el.children(),at:"center top",my:"left bottom-20px",collision:"flipfit flipfit"}),this.popup.$pointer.css({"-moz-transform":"scale(-1)","-webkit-transform":"scale(-1)","-ms-transform":"scale(-1)",transform:"scale(-1)"}),this.sources.bootstrap({lightweight:!0}).done(function(){var b=1===a.$el.closest(".timeLineControlsHidden").length,c=45,d={top:12,bottom:205};b&&(d.bottom-=c),a.popup.render(a.sourceList.render(null,a.connections).$el,"Add Visualization",d),a.popup.$head.append(a.searchBox.render().$el),a.popup.position({of:a.$el.children(),at:"center top",my:"right+40px bottom-20px",collision:"flipfit flipfit"}),a.activate()}),this.popup.onHide=function(){a.sourceList.remove(),h(b).removeClass("active")},this.listenTo(this.sourceList.model,"change:visId",function(b){if(b.get("visId")){var c=a.options.dashboardOptions.oldLayout;0!=a.dashboard.get("visualizations").length?a.dashboard.set("layout",a._dashboardType):null,c&&1===a.dashboard.visualizations.length&&(a.dashboard.set("layout",c),delete a.options.dashboardOptions.oldLayout),a.trigger("visualizationSelected",b),a.popup.hide()}}),a.listenTo(a.searchBox,"search",function(b){a.performSearch(b)}),this.listenTo(this.sourceList,"showVisualizationList",function(b){a.searchBox.clear(),a.visualizations=b,a.$state="vis"}),this.listenTo(this.sourceList,"showSourcesList",function(){a.searchBox.clear(),a.$state="source"}),this.activate()},performSearch:function(a){"vis"==this.$state?this.searchOnVisualizationList(a):this.searchOnSourceList(a)},searchOnVisualizationList:function(a){var b=this,c=a.get("needle").toLowerCase(),d=i.filter(b.visualizations.models,function(a){return a.get("name").toLowerCase().match(c)?!0:!1});this.popup.$body.find("a").parent().hide(),i.each(d,function(a){b.popup.$body.find('a[title="'+a.get("name")+'"]').parent().show()})},searchOnSourceList:function(){var a=this,b=this.sourceList.collection.search("name",this.searchBox.model.toJSON());this.sourceList.$el.find("ul > li").hide(),i.each(b,function(b){var c="ul > li > a[data-id="+b.get("id")+"]",d=a.sourceList.$el.find(c).closest("li");d.show()})},_renderItem:function(a){var b=this.sourceList.childViews[0].options,c=new b.ItemView({model:a,template:b.template,selectable:b.selectable});this.sourceList.$el.find("ul").append(c.render().$el)},remove:function(){this.popup?this.popup.remove():null,d.prototype.remove.apply(this,arguments)}});b.exports=m}()},{"../../Core/MVC":6,"../../controls":66,"./../../views/DashboardTypeSelector":209,"./../../views/SearchBox":326,"./../../views/SourceBrowser":351,"./../ControlButton":407,"./spinnerTemplate.html":395,"./template.html":396,jquery:103,underscore:458}],395:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div style="text-align: center;">\n    <img style="width: 30px; height: 30px;" src="images/loading-indicator.gif">\n</div>';return __p}},{lodash:456}],396:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-rounded" id="controlAddVis">\n    <div class="zd icon add-visualization"/>\n</div>';return __p}},{lodash:456}],397:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC"),d=c.View,e=d.extend({initialize:function(a){return a=a||{},a.sources&&(this.sources=a.sources,delete a.sources),this},enable:function(){this.$el.children().has(":hidden").fadeIn(0)},disable:function(){this.$el.children().has(":visible").fadeOut(0)},tuneTo:function(a){this.model=a.getVisualizationState(),this.config=a.getSourceConfiguration(),this.applyEvents(),this.update()},detune:function(){return this.model&&this.stopListening(this.model),this.model=null,this.config=null,this.update(),this}});b.exports=e}()},{"../../Core/MVC":6}],398:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC"),d=a("../../controls"),e=a("../../models/Dashboard"),f=a("./../../views/DashboardEditor"),g=d.PalettePopup,h=a("./../ControlButton"),i=a("jquery"),j=(a("underscore"),c.Events),k=a("./template.html"),l=h.extend({className:"visualization-control control-button right",template:k,defaults:{},initialize:function(a){if(h.prototype.initialize.apply(this,arguments),"undefined"==typeof a.main)throw new Error("main must be defined");a.currentDashboard&&(this.currentDashboard=a.currentDashboard,delete a.currentDashboard),this.options=i.extend({},this.defaults,a);var b=this;this.listenTo(j,"dashboard:save",function(a){b.togglePalette(a)}),this.listenTo(j,"undo:updatedStore",function(a){b.setUnsaved(a.models.length>1)}),this.currentDashboard&&(this.listenTo(j,"undo:updatedStore",function(a){b.setUnsaved(a.models.length>1)}),this.listenTo(this.currentDashboard,"bookmark:create_and_share",function(){this.popup=!1,this.togglePalette(),this.listenToOnce(j,"bookmark:add",function(a){this.currentDashboard.trigger("share:show_dialog",a)}.bind(this))}.bind(this))),this.listenTo(j,"bookmark:add, bookmark:update",function(){this.popup&&this.popup.hide(),this.setUnsaved(!1),this.currentDashboard.trigger("share:show_dialog")}.bind(this))},events:{click:"togglePalette"},togglePalette:function(a){var b=this,c=this.$el[0].firstElementChild,d=a&&a.at?a.at:null;if(this.popup&&this.popup.$el.is(":visible"))return void this.popup.hide();this.popup=new g({customClass:"bookmarkDashboard"}),this.popup.$el.addClass("docked");var h=this.model.get("description").replace(/<br\s?\/?>/g,"\n");this.model.set({description:h});var k=new f({model:new e(this.model.attributes),currentDashboard:this.currentDashboard,bookmarks:this.options.bookmarks,originalModel:this.model,main:this.options.main}),l={of:this.$el.children(),at:"center top",my:"right+40px bottom-20px",collision:"flipfit flipfit"};this.popup.$pointer.css({"-moz-transform":"scale(-1)","-webkit-transform":"scale(-1)","-ms-transform":"scale(-1)",transform:"scale(-1)"}),d&&(l={of:d,at:"right bottom",my:"left-80px top+21px",collision:"fit fit"}),this.popup.render(k.render().$el,"Save to Favorites"),this.popup.position(l),this.popup.onHide=function(){k.remove(),i(c).removeClass("active")},this.listenTo(k,"resize",function(){b.popup.position(l)}),this.listenToOnce(j,"bookmark:add bookmark:update",function(){b.popup.hide(),this.setUnsaved(!1,"b")}),this.dashboardsManager=k,!d&&this.activate()},setUnsaved:function(a,b){b&&(this.isDashboardUnsaved=a),("undefined"==typeof this.isDashboardUnsaved||b)&&(j.trigger("bookmark:changed",a),a?this.$el.addClass("unsaved"):this.$el.removeClass("unsaved")),this.isDashboardUnsaved===!1&&delete this.isDashboardUnsaved}});b.exports=l}()},{"../../Core/MVC":6,"../../controls":66,"../../models/Dashboard":114,"./../../views/DashboardEditor":204,"./../ControlButton":407,"./template.html":400,jquery:103,underscore:458}],399:[function(a,b){b.exports=a("./Bookmark")},{"./Bookmark":398}],400:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-rounded" id="controlBookmark">\n	<div class="zd icon bookmark"/>\n</div>';return __p}},{lodash:456}],401:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("./../ControlButton/index.js")),e=a("../../controls").Palette,f=a("./../../views/ColorPalette"),g=a("./template.html"),h=d.extend({template:g,defaults:{publicName:"Color"},events:{click:"showColorPalette"},initialize:function(a){if(d.prototype.initialize.apply(this,arguments),!a.main)throw new Error("main (old Zoomdata.main) must be defined")},update:function(){},showColorPalette:function(){if(c("[data-name="+this.options.publicName+"]").length>0&&this.palette&&this.palette.$el.is(":visible"))return void this.palette.hide();c(".control-button").removeClass("active");var a=this;a.palette&&a.palette.$el.remove(),a.palette=new e({docked:!0,draggable:!0,customClass:"rail-control color-palette"});var b=new f({config:this.config,model:this.model,controller:this.controller,main:this.options.main});a.palette.childViews.push(b),a.palette.dock(a.palette.palettePosition),a.palette.render(b.render().$el,this.options.publicName),a.$el.addClass("active"),a.palette.onHide=function(){a.$el.removeClass("active"),b.remove(),a.palette.popChildView(b)},a.palette.onBack=function(){b.back()}},tuneTo:function(a){this.controller=a,this.model=a.getVisualizationState(),this.config=a.getSourceConfiguration(),this.applyEvents()},remove:function(){this.palette&&this.palette.hide(),d.prototype.remove.apply(this,arguments)}});b.exports=h}()},{"../../controls":66,"./../../views/ColorPalette":176,"./../ControlButton/index.js":407,"./template.html":402,jquery:103,underscore:458}],402:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-dark" id="controlColor">\n    <div class="zd icon color"/>\n    <div class="text">Color</div>\n</div>';return __p}},{lodash:456}],403:[function(a,b){!function(){"use strict";var c=a("./../ControlButton"),d=a("./../../views/ComparisonPalette"),e=a("../../controls").Palette,f=a("jquery"),g=(a("underscore"),a("./template.html")),h=c.extend({template:g,defaults:{publicName:"Compare"},events:{click:"showComparisonPalette"},tuneTo:function(a){this.model=a.getVisualizationState(),this.config=a.getSourceConfiguration(),this.applyEvents(),this.update()},applyEvents:function(){this.model&&this.listenTo(this.model,"change:comparison",this.validate)},update:function(){this.validate()},validate:function(){return this.model?void(this.model.get("comparison")?this.$el.addClass("palette-highlighted"):this.$el.removeClass("palette-highlighted")):!1},showComparisonPalette:function(){if(f("[data-name="+this.options.publicName+"]").length>0&&this.palette&&this.palette.$el.is(":visible"))return void this.palette.hide();f(".control-button").removeClass("active"),this.$el.addClass("active");var a=this;a.palette=new e({docked:!0,draggable:!0,customClass:"rail-control comparison-palette"});var b=new d({config:this.config,model:this.model,getDefaultTemplate:this.getDefaultTemplate});a.palette.dock(a.palette.palettePosition),a.palette.render(b.render().$el,this.options.publicName),b.$el.append('<div class="palette-bottom-panel"></div>'),a.$el.addClass("active"),a.palette.onHide=function(){a.$el.removeClass("active"),b.remove()}}});b.exports=h}()},{"../../controls":66,"./../../views/ComparisonPalette":189,"./../ControlButton":407,"./template.html":404,jquery:103,underscore:458}],404:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-dark" id="controlCompare">\n    <div class="zd icon compare"/>\n    <div class="text">Compare</div>\n</div>';return __p}},{lodash:456}],405:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC"),d=a("./../../views/ConfigureView/"),e=a("./../ControlButton/"),f=(a("jquery"),a("underscore"),c.Events),g=a("./template.html"),h=e.extend({template:g,defaults:{publicName:"Configure Grid",className:"configure-grid"},events:{click:"showConfigure"},initialize:function(){e.prototype.initialize.apply(this,arguments)},showConfigure:function(){var a=this;if(!a.palette||!a.palette.isPrevented()){if(this.$el.data("open"))return this.close(),!1;this.$el.data("open",!0),this.$el.removeClass("active"),this.$el.addClass("open"),a.palette=new d.View({__controller__:this.visualizationController,main:this.options.main,state:this.options.state}),a.palette.open()}},close:function(){this.$el.removeClass("open"),this.$el.data("open",!1),this.palette&&(this.palette.close(),this.palette=null)},tuneTo:function(a){var b=this;e.prototype.tuneTo.apply(this,arguments),this.visualizationController=a,this.listenTo(f,"close:configurePalette",this.showConfigure),this.listenTo(f,"widget:startClosing",function(){b.close()})},detune:function(){this.palette&&this.close(),e.prototype.detune.apply(this,arguments),this.visualizationController=null,this.stopListening(f,"close:configurePalette"),this.stopListening(f,"widget:startClosing")}});b.exports=h}()},{"../../Core/MVC":6,"./../../views/ConfigureView/":190,"./../ControlButton/":407,"./template.html":406,jquery:103,underscore:458}],406:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-dark" id="controlConfigure">\n    <div class="zd icon configure"/>\n    <div class="text">Configure</div>\n</div>';return __p}},{lodash:456}],407:[function(a,b){!function(){"use strict";var c=a("./../BaseControl"),d=a("jquery"),e=(a("underscore"),a("./template.html")),f=c.extend({template:e,className:"visualization-control control-button",defaults:{},events:{},update:d.noop,applyEvents:d.noop,initialize:function(a){return a=a||{},c.prototype.initialize.apply(this,arguments),a.template&&(this.template=a.template,delete a.template),this.options=d.extend({},this.defaults,a),this.$el.appendTo(this.options.root),this.render(),this.$el.children().hide(0),this.palette=null,this},render:function(){return this.$el.html(this.template({label:this.options.label})),this.$el.parent().parent().hasClass("leftPane")&&this.$el.on("click",function(){d(".modal").fadeOut(300),d(".control-button").removeClass("active")}),this},detune:function(){return this.model&&this.stopListening(this.model),this.model=null,this.config=null,this.update(),this.palette&&"function"==typeof this.palette.hide&&this.palette.hide(),this},activate:function(){d(".control-rounded").removeClass("active"),d(".footer-control.control-button").removeClass("active");var a=this.$el[0].firstElementChild;d(a).addClass("active")}});b.exports=f}()},{"./../BaseControl":397,"./template.html":408,jquery:103,underscore:458}],408:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-light">\n    <div class="image"></div>\n    <div class="text">'+(null==(__t=label)?"":__t)+"</div>\n</div>";return __p}},{lodash:456}],409:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC"),d=(c.Collection,a("./../../views/ObjectFieldsList")),e=a("../../collections/ObjectFields"),f=a("../../collections/Formulas"),g=a("./../../views/AttributeItem"),h=a("./../../views/GroupedListView"),i=a("./../ControlButton"),j=a("../../controls").Palette,k=a("../../utilities"),l=a("../../models/Metric"),m=a("jquery"),n=(a("underscore"),c.Events),o="type",p=a("./template.html"),q=i.extend({template:p,defaults:{publicName:"Attributes"},events:{click:"showObjectFieldsList"},initialize:function(){i.prototype.initialize.apply(this,arguments),this.attributeList=new e,this.formulaList=new f,this.groupBy=o,this.listenTo(n,"setMultiBarsGroupBy2",this.showObjectFieldsListForGroupBy2),this.listenTo(n,"setAdditionalMetric",this.showObjectFieldsListForAdditionalMetric);var a=this;this.listenTo(n,"setMBarsFirstGroupBy",function(){a.groupBy="First Group By",a.showObjectFieldsList()}),this.listenTo(n,"setMBarsSecondGroupBy",function(){a.groupBy="Second Group By",a.showObjectFieldsList()})},updateAttributesList:function(){var a=this,b=m.Deferred();return this.config?a.attributeList.bootstrap().done(b.resolve).fail(b.reject):b.reject(),b.promise()},showObjectFieldsListForGroupBy2:function(){this.groupBy="Group By 2",this.showObjectFieldsList()},showObjectFieldsListForAdditionalMetric:function(a){this.isMultimetric=!0,this.metricIndex=a,this.showObjectFieldsList(),this.palette.$el.zIndex(1028)},showObjectFieldsList:function(){if(m("[data-name="+this.options.publicName+"]").length>0&&this.palette&&this.palette.$el.is(":visible"))return void this.palette.hide();m(".control-button").removeClass("active");var a=this,b=new h({className:"nav nav-tabs nav-stacked",ItemView:g,ListView:d,collection:this.attributeList,selectable:"radio",filter:function(b){return a._filterObjectField(b)},groupBy:"type",comparator:function(a){var b=a.get("label");return b?b.toLocaleLowerCase():b}});a.palette=new j({docked:!0,draggable:!0,customClass:"rail-control data-palette"}),a.palette.hide=function(){j.prototype.hide.apply(this,arguments),a.isMultimetric?a.isMultimetric=!1:null},a.palette.dock(a.palette.palettePosition).render(m('<div class="progress progress-striped active"></div>').append('<div class="bar" style="width: 100%"></div> '),"Loading..."),this.listenTo(b,"select",this.applySelectedItem),this.listenTo(b.collection,"dragstart",function(){a.palette.$el.fadeOut()}),this.listenTo(b.collection,"dragstop",function(){a.palette.$el.fadeIn()}),this.listenTo(this.visualizationController.state.groupBy,"change",function(){b.render()}),this.updateAttributesList().done(function(){b.collection.reset(a.attributeList.models),a.palette.render(b.render().$el,"Attributes"),b.$el.append('<div class="palette-bottom-panel"></div>')}),a.$el.addClass("active"),a.palette.onHide=function(){a.$el.removeClass("active"),a.stopListening(b.collection),a.stopListening(a.visualizationController.state),b.remove()}},_filterObjectField:function(a){var b=this,c=this.visualizationController.source.get("type"),d=this.config&&this.config.objectFieldTypes||[],e=a.get("name"),f=a.get("type"),g=(a.get("func")?a.get("func").toLowerCase():void 0,this.model.metrics.at(0));if("undefined"==typeof f)return!1;var h=-1!==["IMPALA","SQL"].indexOf(c)&&"distinct_count"!==g.get("func")&&this.model.metrics.where({func:"distinct_count"}).length>0,i=this.model.isTimeTrends(),j=!!a.get("visible"),l=this.model.groupBy.getAttribute()==e,m=g.get("name")===e,n=i&&l,o="ATTRIBUTE"==f,p=-1!==d.indexOf(f)||"formula"===f.toLowerCase(),q=!h&&"COUNT OF"==f,r="TEXT"==f,s=!!a.get("multiValued"),t=this.model.isLastValueFunc(),u=b.isMultimetric,v=k.isNumericAttributeType(f);return!(!j||(l?s?o:1:0)||n||(p?0:!q)||(u?!v:0)||(v?t:0)||m||(i?r:0))},applySelectedItem:function(a){var b=this,c=a.get("name"),d=a.get("type"),e=a.get("multiValued");if(b.visualizationController._controller.variables[b.groupBy])b.visualizationController._controller.variables[b.groupBy]=c,b.model.trigger("change");else if(b.visualizationController._controller.isMultiGroupBy){var f=b.model.groupBy.getAttributes(),g="Group By 2"===this.groupBy?1:0;f.map?f[g]=c:f=[f,c],b.model.groupBy.setAttributes(f.slice(0)),b.model.trigger("change")}else if(k.isNumericAttributeType(d))if(b.isMultimetric||b.model.get("metrics")){var h=b.model.get("metrics").slice(0),i=a.get("func");i=i&&i.toLowerCase()||"avg",void 0===b.metricIndex||b.metricIndex===!1?h.push({name:c,func:i}):h[metricIndex]={name:c,func:i},b.model.set("metrics",h,{silent:!0}),b.isMultimetric=!1,b.metricIndex=!1,b.model.trigger("change")}else b.model.metrics.at(0).set("count"===c?{name:"count",func:null}:{name:c,func:a.get("func")?a.get("func").toLowerCase():"avg"});else if("TIME"===d){var j="MINUTE",m=60;3600==b.config.source.minSpeed?(j="HOUR",m=24):86400==b.config.source.minSpeed&&(j="DAY",m=30),b.model.set({timeTrendStep:j,limit:m},{silent:!0}),b.model.groupBy.setAttributes(c)}else{b.model.unset("timeTrendStep",{silent:!0});{b.config.source.variables}e?b.model.set({volume:new l({label:"Volume"}),groupBy:c}):b.model.groupBy.setAttributes(c)}b.palette.hideDocked(),b.groupBy=o},tuneTo:function(a){i.prototype.tuneTo.apply(this,arguments),this.visualizationController=a,this.attributeList=a.fields,this.formulaList=a.formulas},detune:function(){i.prototype.detune.apply(this,arguments),this.visualizationController=null}});b.exports=q}()},{"../../Core/MVC":6,"../../collections/Formulas":19,"../../collections/ObjectFields":27,"../../controls":66,"../../models/Metric":122,"../../utilities":144,"./../../views/AttributeItem":159,"./../../views/GroupedListView":258,"./../../views/ObjectFieldsList":311,"./../ControlButton":407,"./template.html":411,jquery:103,underscore:458}],410:[function(a,b){b.exports=a("./DataPalette")},{"./DataPalette":409}],411:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-dark" id="controlAttr">\n    <div class="zd icon attributes"/>\n    <div class="text">Attributes</div>\n</div>';return __p}},{lodash:456}],412:[function(a,b){!function(){"use strict";var c=(a("underscore"),a("./../../views/VisualizationItem"),a("./../ControlButton")),d=a("./template.html");b.exports=c.extend({template:d,defaults:{publicName:"Defaults"},events:{click:"redirectToVisualizations"},initialize:function(a){this.options=$.extend({},a,this.options),c.prototype.initialize.apply(this,arguments)},tuneTo:function(a){c.prototype.tuneTo.apply(this,arguments),this.visualizationController=a,this.sources.add({id:this.config.source.sourceId},{merge:!0})},detune:function(){c.prototype.detune.apply(this,arguments),this.visualizationController=null},redirectToVisualizations:function(){var a,b=this.visualizationController.source.get("id"),c=this.visualizationController.config.get("visId"),d=this.visualizationController.config.get("streamType");a="TWEET"===d?"admin.html#source/"+d+"/"+b+"/visualizations?visId="+c:"admin.html#source/"+b+"/visualizations?visId="+c,window.location.href=a}})}()},{"./../../views/VisualizationItem":382,"./../ControlButton":407,"./template.html":413,underscore:458}],413:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-dark" id="defaultsBtn">\n    <div class="text">Defaults</div>\n</div>';return __p}},{lodash:456}],414:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("./../../views/DashboardDownload")),e=a("./../ControlButton"),f=a("../../controls").Palette,g=a("./../../components/settings"),h=a("./template.html"),i=e.extend({template:h,defaults:{publicName:"Export"},events:{click:"showDownPalette"},tuneTo:function(a){this.getDefaultTemplate=a.getDefaultTemplate,e.prototype.tuneTo.apply(this,arguments)},detune:function(){e.prototype.detune.apply(this,arguments)},showDownPalette:function(){if(c("[data-name="+this.options.publicName+"]").length>0)return void(this.palette&&this.palette.hide());c(".control-button").removeClass("active");var a=this,b=this.widgetGrid.getFullScreenEl(),e=this.widgetGrid.serialize().selectedVisualizationController.config.toJSON(),h=g.screenshotsEnabled;a.palette=new f({docked:!0,draggable:!0,customClass:"rail-control"}),this.downloadView=new d({$target:b,isScrollable:!0,palette:a.palette,controller:a.widgetGrid.selectedVisualizationController._controller,visualizationController:a.widgetGrid.selectedVisualizationController}),a.palette.dock(a.palette.palettePosition),a.palette.render(this.downloadView.render().$el,this.options.publicName),this.downloadView.$el.append('<div class="palette-bottom-panel"></div>'),"PIVOT_TABLE"===e.type&&(e.layout={col:1,colSpan:1,row:1,rowSpan:1},h||a.downloadView.$el.hide()),a.$el.addClass("active"),a.palette.onHide=function(){a.$el.removeClass("active"),a.downloadView.remove()}}});b.exports=i}()},{"../../controls":66,"./../../components/settings":55,"./../../views/DashboardDownload":201,"./../ControlButton":407,"./template.html":415,jquery:103,underscore:458}],415:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-dark" id="controlDownload">\n    <div class="zd icon download"/>\n    <span class="text">Export</span>\n</div>';
return __p}},{lodash:456}],416:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC")),e=a("./../ControlButton"),f=a("../../collections/Filters"),g=a("../../controls").Palette,h=a("./../../views/FiltersManager"),i=d.Events,j=a("./template.html"),k=e.extend({template:j,defaults:{publicName:"Filters"},activeFilters:new f,events:{click:"showFiltersPalette"},initialize:function(){e.prototype.initialize.apply(this,arguments),this.listenTo(i,"filtersPalette:show",this.showFiltersPalette)},update:function(){this.model&&this.activeFilters.reset(this.model.filters.toJSON())},showFiltersPalette:function(){var a,b=this;return c("[data-name="+this.options.publicName+"]").length>0&&this.palette&&this.palette.$el.is(":visible")?void this.palette.hide():(c(".control-button").removeClass("active"),b.filtersPalette&&(a=b.filtersPalette.appliedFilterSet),b.filtersPalette=new h({config:this.config,collection:this.model.filters,state:this.model,objectFields:this.objectFields,appliedFilterSet:a}),b.palette=new g({docked:!0,draggable:!0,customClass:"rail-control filter-palette"}),b.palette.dock(b.palette.palettePosition),b.palette.render(c("<div/>").css("text-align","center").append(c("<img/>").attr("src","images/loading-indicator.gif?v=01081831").css({width:30,height:30})),"Loading..."),b.$el.addClass("active"),b.palette.onHide=function(){b.$el.removeClass("active"),b.filtersPalette.remove()},b.palette.onBack=function(){b.filtersPalette.back()},b.filtersPalette.onShowBackButton=b.palette.showBackButton,b.filtersPalette.onHideBackButton=b.palette.hideBackButton,void this.objectFields.bootstrap().done(function(){b.palette.render(b.filtersPalette.el,b.options.publicName),b.filtersPalette.render()}))},tuneTo:function(a){e.prototype.tuneTo.apply(this,arguments),this.sources.add({id:this.config.source.sourceId},{merge:!0}),this.objectFields=a.fields,this.model&&this.model.filters&&(this.listenTo(this.model.filters,"add remove change",this.validate),this.listenTo(this.model.groupBy,"change reset",this.validate)),this.validate()},detune:function(){this.model&&this.model.filters&&(this.stopListening(this.model.filters,"add remove change",this.validate),this.stopListening(this.model.groupBy,"change reset",this.validate)),e.prototype.detune.apply(this,arguments),this.$el.removeClass("palette-highlighted")},validate:function(){this.model&&this.model.filters&&this.model.filters.length>0?this.$el.addClass("palette-highlighted"):this.$el.removeClass("palette-highlighted")}});b.exports=k}()},{"../../Core/MVC":6,"../../collections/Filters":17,"../../controls":66,"./../../views/FiltersManager":252,"./../ControlButton":407,"./template.html":417,jquery:103,underscore:458}],417:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-dark" id="controlFilter">\n    <div class="zd icon filter"/>\n    <div class="text">Filters</div>\n</div>';return __p}},{lodash:456}],418:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../controls")),e=d.PalettePopup,f=a("./../../views/TimeControl").TimeControl,g=a("./../ControlButton"),h=a("./template.html"),i=g.extend({className:"visualization-control control-button left",template:h,defaults:{},events:{click:"togglePalette"},togglePalette:function(){var a=this.$el[0].firstElementChild,b=this.model.get("streamSourceId"),d=this.sources.findWhere({id:b});if(this.popup&&this.popup.$el.is(":visible"))return void this.popup.hide();this.popup=new e({customClass:"flexibleTimeControl"}),this.popup.$el.addClass("docked");var g=new f({state:this.model,source:d});g.didShow(),this.popup.render(g.el,"Time Control"),this.popup.onHide=function(){g.remove(),c(a).removeClass("active")},this.popup.position({of:this.$el.children(),at:"center top",my:"left-40px bottom-20px",collision:"flipfit flipfit"}),this.timeControl=g,this.activate()}});b.exports=i}()},{"../../controls":66,"./../../views/TimeControl":359,"./../ControlButton":407,"./template.html":419,jquery:103,underscore:458}],419:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="footer-control control-button footer-control-button-small control-light" id="controlTime">\n    <div class="zd icon time"/>\n</div>';return __p}},{lodash:456}],420:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("./../ControlButton")),e=a("../../controls").Palette,f=a("./../../views/Info"),g=a("./template.html"),h=d.extend({template:g,defaults:{publicName:"Info"},events:{click:"showInfoPalette"},tuneTo:function(a){this.controller=a,this.getDefaultTemplate=a.getDefaultTemplate,d.prototype.tuneTo.apply(this,arguments)},detune:function(){d.prototype.detune.apply(this,arguments)},update:function(){},showInfoPalette:function(){if(c("[data-name="+this.options.publicName+"]").length>0&&this.palette&&this.palette.$el.is(":visible"))return void this.palette.hide();c(".control-button").removeClass("active");var a=this;a.palette=new e({docked:!0,draggable:!0,customClass:"rail-control info-palette"});var b=new f({config:this.config,model:this.model,getDefaultTemplate:this.getDefaultTemplate});a.palette.dock(a.palette.palettePosition),a.palette.render(b.render().$el,this.options.publicName),b.$name.first().focus(),b.$el.append('<div class="palette-bottom-panel"></div>'),a.$el.addClass("active"),a.palette.onHide=function(){a.$el.removeClass("active"),b.remove()},b.onCancel=function(){a.palette.hide()},b.onSave=function(){a.palette.hide(),a.controller.trigger("visualization:name")}},checkOnBookmark:function(){var a=this.model.config.collection;return a.length>1}});b.exports=h}()},{"../../controls":66,"./../../views/Info":268,"./../ControlButton":407,"./template.html":421,jquery:103,underscore:458}],421:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-dark" id="controlInfo">\n    <div class="zd icon info"/>\n    <span class="text">Info</span>\n</div>';return __p}},{lodash:456}],422:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="linked_bookmark_item zd-dashboard-item item-description '+(null==(__t=layout)?"":__t)+'">\n    <a href="visualization#'+(null==(__t=id)?"":__t)+"?linkedTo="+(null==(__t=originalId)?"":__t)+'">\n    	<div class="zd icon icon-favorite"></div>&nbsp;'+(null==(__t=name)?"":__t)+"\n    </a>\n</div>";return __p}},{lodash:456}],423:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC"),d=a("../../controls").PalettePopup,e=a("jquery"),f=a("underscore"),g=c.View,h=a("./template.html"),i=a("./bookmarkTemplate.html"),j=g.extend({className:"visualization-control control-button right",template:h,defaults:{},initialize:function(a){a.$el&&(this.$el=a.$el),f.bindAll(this,"onBookmarkSelect"),a.currentDashboard&&(this.currentDashboard=a.currentDashboard,delete a.currentDashboard),this.options=e.extend({},this.defaults,a)},events:{click:"showPalette"},onBookmarkSelect:function(){this.trigger("linked_bookmark_selected")},showPalette:function(a){var b=this,c=a&&a.at?a.at:this.$el,g=this.model.get("linkedDashboards"),h=null;if(!Array.isArray(g)||0===g.length)return!1;if(1===g.length)this.trigger("linked_bookmark_selected"),window.location.href="visualization#"+g[0]+"?linkedTo="+b.model.get("id");else{var j=e("<div></div>");h=new d({customClass:"linked-bookmark-selector"}),h.render(j,"Linked dashboards"),h.position({of:c,my:"left+20 top-30",at:"center center",collision:"flipfit flipfit"}),e.get("service/bookmarks?fields=name,layout").done(function(a){var d="",k=a.filter(function(a){return g.indexOf(a.id)>=0});k.forEach(function(a){var c=f.extend({originalId:b.model.get("id")},a);d+=i(c)}),j.html(d),h.position({of:c,my:"left+20 top-30",at:"center center",collision:"flipfit flipfit"});var l=e(".linked_bookmark_item > a");l.on("click",b.onBookmarkSelect)})}}});b.exports=j}()},{"../../Core/MVC":6,"../../controls":66,"./bookmarkTemplate.html":422,"./template.html":424,jquery:103,underscore:458}],424:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-rounded" id="controlLinkedBookmarks">\n    <div class="zd icon link"/>\n</div>';return __p}},{lodash:456}],425:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC")),e=a("./../BaseControl"),f=d.Events,g=a("./template.html"),h=a("./playingTemplate.html"),i=a("./pausedTemplate.html"),j=e.extend({pausedTemplate:i,playingTemplate:h,template:g,className:"visualization-control control-button left pause-play",defaults:{},events:{click:"togglePause"},togglePause:function(){if(this.model){var a=this.model&&"TRENDS"===this.model.config.get("type"),b="LIVE"===this.config.source.startFrom;if(a&&!b)return;this.model.time.set("paused",!this.model.time.get("paused"))}},applyEvents:function(){this.listenTo(this.model.time,"change:paused change:timeWindow",this.render)},tuneTo:function(){e.prototype.tuneTo.apply(this,arguments),this.$el.children().show(0),this.update()},detune:function(){e.prototype.detune.apply(this,arguments),this.$el.children().hide(0)},initialize:function(a){e.prototype.initialize.apply(this,arguments);var b=this;this.childViews=[],a=a||{},a.playingTemplate&&(this.playingTemplate=a.playingTemplate,delete a.playingTemplate),a.pausedTemplate&&(this.pausedTemplate=a.pausedTemplate,delete a.pausedTemplate),this.options=c.extend({},this.defaults,a),this.$el.appendTo(this.options.root),this.update(),this.$el.children().hide(0),this.listenTo(f,"live:mode",function(a){a.on?b.$el.removeClass("controlled"):b.$el.addClass("controlled")})},update:function(){this.render()},render:function(){var a;return a=this.model&&this.model.time.get("paused")?this.pausedTemplate:this.playingTemplate,this.$el.html(this.template({indicator:a()})),this}});b.exports=j}()},{"../../Core/MVC":6,"./../BaseControl":397,"./pausedTemplate.html":426,"./playingTemplate.html":427,"./template.html":428,jquery:103,underscore:458}],426:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd icon zd-play"></div>';return __p}},{lodash:456}],427:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd icon zd-pause"></div>';return __p}},{lodash:456}],428:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="footer-control paused-control control-button footer-control-button-small control-light" id="controlPaused">\n    '+(null==(__t=indicator)?"":__t)+"\n</div>";return __p}},{lodash:456}],429:[function(a,b){!function(){"use strict";var c=a("jquery"),d=a("underscore"),e=a("../../Core/MVC"),f=a("./../../controls/Zoomdata.Controls.SearchSidePane.js"),g=a("./../../views/FacetsPanel"),h=a("./../../views/SearchResultsView"),i=a("../../models/Filter"),j=(a("../../models/Dashboard"),e.View),k=e.Events,l="TEXT_SEARCH",m=13,n=a("./searchControlTemplate.html"),o=j.extend({template:n,className:"search-view",events:{"keypress #search-text":"keyPressed","keyup #search-text":"updateRemoveIcon","click .icon-remove":"removeFilter"},initialize:function(a){a.dashboards?(this.dashboards=a.dashboards,delete a.dashboards):this.dashboards=null,j.prototype.initialize.apply(this,arguments),this.activeDashboard=null,this.sidePane=new f({user:this.model,hasCloseButton:!0}),this.childViews.push(this.sidePane),this.facetsPanel=null,this.listenTo(k,"visualization:add visualization:select visualization:start visualization:stop",this._checkForSearchFeature),this.listenTo(k,"switch:section",this._clearSearch),this.dashboards&&this.listenTo(this.dashboards,"dashboard:view",this._setActiveDashboard)},render:function(){return this.$el.append(this.template()),this.$textElement=this.$("#search-text"),this.removeIcon=this.$(".icon-remove"),this.removeIcon.hide(),this.$el.hide(),this},_setActiveDashboard:function(a){if(!a)throw Error("Dashboard is expected");this.activeDashboard=a},_getVisualisations:function(){return this.activeDashboard?this.activeDashboard.getControllers():null},_clearSearch:function(){var a=this.$textElement?this.$textElement.val():null;a&&0!==a.length&&this.removeFilter()},_checkForSearchFeature:function(){var a=this._getVisualisations(),b=null;a&&(b=!!d.find(a,function(a){var b=a.config.get("source");return-1!==b.sourceFeatures.indexOf(l)})),b?this.$el.show():this.$el.hide()},keyPressed:function(a){var b=a.view.navigator.appName.match("Explorer");a.keyCode===m&&(b?(a.preventDefault(),this.search()):this.search())},search:function(){var a=this.$textElement.val();0===a.length?this.removeFilter():this.addFilter(a)},removeFilter:function(){this.facetsPanel&&this.facetsPanel.removeAllFiltersFromVisualizations(),this.$textElement.val(""),this.sidePane.hide(),this.sidePane.$header.hide(),this.sidePane.$body.hide(),this.removeIcon.hide(),this.removeFilterFromVisualizations()},addFilter:function(a){var b=this.getControllers();b.length>0?(this.addFilterToVisualizations(a),null!==this.facetsPanel&&(this.facetsPanel.remove(),this.facetsPanel=null),this.updateSearchResults({query:a}),this.sidePane.show(),this.sidePane.$header.show(),this.sidePane.$body.show()):this.appendTooltip()},updateSearchResults:function(a){var b=this,d=a?a.query:this.$textElement.val(),e=this.getControllers();(!this.facetsPanel||e.length>0&&this.facetsPanel.model.get("sourceId")!==e[0].state.get("streamSourceId"))&&(this.facetsPanel=this.facetsPanel||new g({container:this.sidePane,dashboard:this.activeDashboard}),this.stopListening(this.facetsPanel,"facets:select"),this.stopListening(this.facetsPanel,"facetUpdated"),this.listenTo(this.facetsPanel,"facetUpdated",this.updateSearchResults),this.listenTo(this.facetsPanel,"facets:select",function(a){b.facetsPanel.$container.animate({scrollTop:a.scrollTop()})})),(!this.searchResultsPanel||this.facetsPanel.model.get("sourceId")!==this.searchResultsPanel.model.get("sourceId")||a&&a.query)&&(this.searchResultsPanel=new h({query:d,controllers:e,facetsPanel:this.facetsPanel})),this.sidePane.render([this.searchResultsPanel.$el,this.facetsPanel.$el]),c(this.sidePane.el.firstElementChild).addClass("facet-sidebar"),this.facetsPanel.delegateEvents(),this.searchResultsPanel.delegateEvents(),this.sidePane.show(),this.searchResultsPanel.render(this.sidePane.getHeader())},hasTextSearchFeature:function(a){var b=a.config.get("source"),c=b.sourceFeatures;return c&&c.indexOf("TEXT_SEARCH")>=0?!0:!1},addFilterToVisualizations:function(a){for(var b=this.getControllers(),c=this.facetsPanel?this.facetsPanel.getSelectedFacets():null,d=0;d<b.length;d++){var e=b[d],f=e.state.filters,g=new i({operation:l,value:a,editable:!1,label:"text search: "+a});c&&c.forEach(function(a){f.findWhere({path:a.path,facetFilter:!0})||f.add(a,{silent:!0})}),f.add(g),this.stopListening(f).listenTo(f,"remove",this._onFilterRemove)}},removeFilterFromVisualizations:function(){for(var a=this.getControllers(),b=0;b<a.length;b++){var c=a[b],d=c.state.filters,e=d.filter(function(a){return a.get("operation")===l});d.remove(e)}},_onFilterRemove:function(a){var b=this.getControllers(),c=(a.get("value"),a.get("operation")),d=a.get("facetFilter");1===b.length&&c===l?this.removeFilter():1===b.length&&d&&this.facetsPanel&&this.facetsPanel.removeFacetFilter(a)},appendTooltip:function(){var a="The selected sources do not support the search. Please, select a searchable source to perform the search";this.$el.tooltip({title:a,placement:"bottom",trigger:"hover"}),this.$el.tooltip("show")},removeTooltip:function(){var a=this.getControllers(),b=this._getVisualisations();b&&(a.length>0?this.$el.tooltip("destroy"):this.appendTooltip())},updateRemoveIcon:function(){var a=this.$textElement.val();a?this.removeIcon.show():(this.removeIcon.hide(),this.removeFilter())},getControllers:function(){for(var a=[],b=this._getVisualisations(),c=0;c<b.length;c++){var d=b[c];this.hasTextSearchFeature(d)&&a.push(d)}return a}});b.exports=o}()},{"../../Core/MVC":6,"../../models/Dashboard":114,"../../models/Filter":117,"./../../controls/Zoomdata.Controls.SearchSidePane.js":58,"./../../views/FacetsPanel":234,"./../../views/SearchResultsView":330,"./searchControlTemplate.html":431,jquery:103,underscore:458}],430:[function(a,b){b.exports=a("./SearchControl.js")},{"./SearchControl.js":429}],431:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="zd icon magnifying-glass"/>\n<input id="search-text" type="text" class="input-small search-query" placeholder="Search">\n<i id="remove-button" class="icon-remove"/>';return __p}},{lodash:456}],432:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../Core/MVC")),e=a("./../ControlButton"),f=a("../../controls").PalettePopup,g=a("./../../views/ShareEditor"),h=d.Events,i=a("./shareTemplate.html");b.exports=e.extend({className:"visualization-control control-button right",template:i,defaults:{},initialize:function(a){var b=this;e.prototype.initialize.apply(this,arguments),this.bookmarkChanged=!1,a.currentDashboard&&(this.currentDashboard=a.currentDashboard,delete a.currentDashboard),a.bookmarks&&(this.bookmarks=a.bookmarks,delete a.bookmarks),this.listenTo(this.currentDashboard,"share:show_dialog",function(a){b.options.bookmark=a,b.bookmarks.bootstrap().done(function(){b.bookmarks.add(a,{merge:!0})}),b.popup=!1,b.shareEditor.options.bookmarkChanged=!1,b.options.bookmarkChanged=!1,b.togglePalette()}),this.listenTo(this.currentDashboard,"dashboard:loaded",function(){b.applyEvents(),b.listenTo(b.currentDashboard,"visualization:select",b.applyEvents)}),this.listenTo(h,"bookmark:changed",function(a){b.bookmarkChanged=a,b.shareEditor&&(b.shareEditor.options.bookmarkChanged=a)})},events:{click:"togglePalette"},changeBookmark:function(){this.bookmarkChanged=!0,this.shareEditor&&(this.shareEditor.options.bookmarkChanged=!0)},saveBookmarkInfo:function(){var a=this,b=this.options.bookmark,c=b&&this.bookmarks.findWhere({id:b.get("id")}),d=this.currentDashboard.model.get("layout");c?(c.set("visualizations",this.currentDashboard.serialize().collection.toJSON()),c.set("layout",d),h.trigger("bookmark:update"),c.save().done(function(){a.shareEditor.options.bookmarkChanged=!1,a.bookmarks.bootstrap().done(function(){a.bookmarks.add(c,{merge:!0})})}).error(function(){})):this.currentDashboard.trigger("bookmark:create_and_share")},togglePalette:function(a){{var b=this,d=this.$el[0].firstElementChild;a&&a.view.navigator.appName.match("Explorer")}if(this.popup&&this.popup.$el.is(":visible"))return void this.popup.hide();this.popup=new f({customClass:"shareDashboard"}),this.popup.$el.addClass("docked");var e=this.shareEditor||new g({bookmarkChanged:!!this.bookmarkChanged,currentDashboard:this.currentDashboard,screenshotsEnabled:this.screenshotsEnabled});this.currentDashboard.serialize(),e.options.selectedVis=this.options.selectedVis,this.popup.render(e.render().$el,"Share").position({of:this.$el.children(),at:"center top",my:"right+80px bottom-20px",collision:"flipfit flipfit"}),this.popup.$pointer.css({"-moz-transform":"scale(-1)","-webkit-transform":"scale(-1)","-ms-transform":"scale(-1)",transform:"scale(-1)"}),this.popup.$head.text(this.currentDashboard.model.get("id")?"Share Bookmark":"Share"),this.popup.onHide=function(){e.remove(),c(d).removeClass("active"),b.stopListening(b.shareEditor,"saveBookmark")},this.shareEditor=e,this.listenToOnce(this.shareEditor,"saveBookmark",this.saveBookmarkInfo),this.activate()},applyEvents:function(){var a=this.currentDashboard.selectedVisualizationController;this.stopListening(h,"visualization:stop",this.changeBookmark),this.listenTo(h,"visualization:stop",this.changeBookmark),a&&(this.stopListening(a.state,"change:timeWindowScale change:clientSort"),this.stopListening(a.state.groupBy,"change reset"),this.stopListening(a.config,"change:layout"),this.stopListening(this.currentDashboard.collection,"reset add remove",this.changeBookmark),this.listenTo(a.state,"change:timeWindowScale change:clientSort",this.changeBookmark),this.listenTo(a.state.groupBy,"change reset",this.changeBookmark),this.listenTo(a.config,"change:layout",this.changeBookmark),this.listenTo(this.currentDashboard.collection,"reset add remove",this.changeBookmark),this.options.selectedVis=a.state.config)}})}()},{"../../Core/MVC":6,"../../controls":66,"./../../views/ShareEditor":338,"./../ControlButton":407,"./shareTemplate.html":434,jquery:103,underscore:458}],433:[function(a,b){b.exports=a("./Share")},{"./Share":432}],434:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-rounded" id="controlShare">\n    <div class="zd icon share"/>  \n</div>';return __p}},{lodash:456}],435:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("./../ControlButton")),e=a("../../controls"),f=a("./../../views/OrderingPalette"),g=a("./sortTemplate.html"),h=d.extend({template:g,defaults:{publicName:"Sort & Rank"},events:{click:"showSortPalette"},update:function(){},showSortPalette:function(){if(c('[data-name="'+this.options.publicName+'"]').length>0&&this.palette&&this.palette.$el.is(":visible"))return void this.palette.hide();c(".control-button").removeClass("active");var a=this,b=this.options.widgetGrid.selectedVisualizationController.source;a.palette=new e.Palette({docked:!0,draggable:!0,customClass:"rail-control sort-palette"});var d=new f({config:this.config,model:this.model,source:b});d.onApply=d.onCancel=function(){a.palette.hide()},a.palette.dock(a.palette.palettePosition),a.palette.render(d.render().$el,this.options.publicName),a.$el.addClass("active"),a.palette.onHide=function(){a.$el.removeClass("active"),d.remove()}},tuneTo:function(a){this.model=a.getVisualizationState(),this.config=a.getSourceConfiguration(),this.applyEvents()}});b.exports=h}()},{"../../controls":66,"./../../views/OrderingPalette":314,"./../ControlButton":407,"./sortTemplate.html":436,jquery:103,underscore:458}],436:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-dark" id="controlSort">\n    <div class="zd icon sort"/>  \n    <div class="text">Sort & Rank</div>\n</div>';return __p}},{lodash:456}],437:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=(_.escape,Array.prototype.join);with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<button value="speedDown" class="control-speed-down ',minSpeedReached&&print("disabled"),__p+='" style="visibility: visible;">  \n        <div class="zd icon fast-forward"></div>    \n</button>   \n<button value="speedUp" class="control-speed-up ',maxSpeedReached&&print("disabled"),__p+='">    \n        <div class="zd icon faster-forward"></div>    \n</button>   \n<span value="speedLabel" class="control-speed-label">'+(null==(__t=currentLabel)?"":__t)+"</span> ";return __p}},{lodash:456}],438:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC"),d=a("./../BaseControl"),e=a("../../Core/Settings"),f=a("jquery"),g=a("underscore"),h=c.Events,i=a("./speedIndicatorTemplate.html"),j=a("./controlsTemplate.html"),k=a("./liveTemplate.html"),l=d.extend({template:i,liveTemplate:k,controlsTemplate:j,className:"visualization-control control-button left",defaults:{},events:{'click button[value="speedUp"]':"increase",'click button[value="speedDown"]':"decrease"},applyEvents:function(a){return this.eventsApplied=!0,this.listenTo(this.model.time,"change",this.update),a||this.update(),this},removeEvents:function(){return this.eventsApplied=!1,this.model&&this.stopListening(this.model.time,"change"),this},tuneTo:function(){d.prototype.tuneTo.apply(this,arguments),this.$el.children().show(0),this.update()},detune:function(){this.removeEvents(),this.model&&this.stopListening(this.model.time,"change",this.update),d.prototype.detune.apply(this,arguments),this.$el.children().hide(0)},initialize:function(a){d.prototype.initialize.apply(this,arguments),this.childViews=[],this.waitForUpdateSpeedDone=!1,a=a||{},a.template&&(this.template=a.template,delete a.template),a.liveTemplate&&(this.liveTemplate=a.liveTemplate,delete a.liveTemplate),a.controlsTemplate&&(this.controlsTemplate=a.controlsTemplate,delete a.controlsTemplate),this.options=f.extend({},this.defaults,a),this.$el.appendTo(this.options.root),this.update(),this.$el.children().hide(0)},update:function(){return this.render(),this},increase:function(){var a=this.model&&"TRENDS"===this.model.config.get("type"),b="LIVE"===this.config.source.startFrom;if(a&&!b)return this;var c,d=this.model.time.get("speedValues"),e=this.notSavedSpeed||this.model.time.get("speed"),f=this.getMaxSpeed();return d.indexOf(e)!==d.length-1&&(c=d[d.indexOf(e)+1],f>=c&&(this.updateTimeModel({speed:c}),this.render(c))),this},decrease:function(){var a=this.model&&"TRENDS"===this.model.config.get("type"),b="LIVE"===this.config.source.startFrom;if(a&&!b)return this;var c,d=this.model.time.get("speedValues"),e=this.notSavedSpeed||this.model.time.get("speed"),f=this.model.time.get("minSpeed");return 0!==d.indexOf(e)&&(c=d[d.indexOf(e)-1],c>=f&&(this.updateTimeModel({speed:c}),this.render(c))),this},updateTimeModel:function(a){var b,c=this,d=!1;if(this.waitForUpdateSpeedDone)return this.notSavedSpeed=a.speed,void h.off("thread:updateSpeedDone").once("thread:updateSpeedDone",function(){c.waitForUpdateSpeedDone=!1,c.applyEvents(!0),c.updateTimeModel(a)});delete this.notSavedSpeed;for(b in a)if(a.hasOwnProperty(b)&&this.model.time.get(b)!==a[b]){d=!0;break}d&&(this.waitForUpdateSpeedDone=!0,h.off("thread:updateSpeedDone").once("thread:updateSpeedDone",function(){c.waitForUpdateSpeedDone=!1,c.applyEvents(!0)}),this.removeEvents(),this.model.time.set(a))},getMaxSpeed:function(){var a=this.model.get("timeWindowScale");return a==e.TIME_WINDOW_SCALE.ROLLING_HOUR||a==e.TIME_WINDOW_SCALE.HOUR?60:a==e.TIME_WINDOW_SCALE.DAY?3600:a==e.TIME_WINDOW_SCALE.WEEK?86400:a==e.TIME_WINDOW_SCALE.MONTH?864e3:5184e3},getCurrentSpeed:function(a){var b=this.model.time.get("speedNames"),c=this.model.time.get("speedValues"),d=a||this.model.time.get("speed"),e=b[c.indexOf(d)];return{value:d,label:e}},render:function(a){if(this.model)if(this.model.time.get("live"))this.$el.is(":visible")&&this.$el.hide("slide",{direction:"left"},300,function(){h.trigger("live:mode",{on:!0,label:"LIVE"})});else{var b={currentSpeed:a||this.model.time.get("speed"),minSpeed:this.model.time.get("minSpeed"),maxSpeed:this.getMaxSpeed(),currentLabel:this.getCurrentSpeed(a).label};this.oldOptions&&g.isEqual(this.oldOptions,b)||(this.$el.html(this.template({indicator:this.controlsTemplate({minSpeedReached:b.currentSpeed===b.minSpeed,maxSpeedReached:b.currentSpeed===b.maxSpeed,currentLabel:b.currentLabel})})),this.oldOptions=b),(this.$el.is(":hidden")||void 0===this.model.time.get("paused"))&&(this.$el.show("slide",{direction:"left"},300),h.trigger("live:mode",{on:!1}))}return this}});b.exports=l}()},{"../../Core/MVC":6,"../../Core/Settings":7,"./../BaseControl":397,"./controlsTemplate.html":437,"./liveTemplate.html":439,"./speedIndicatorTemplate.html":440,jquery:103,underscore:458}],439:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-live-indicator">'+(null==(__t=label)?"":__t)+"</div>";return __p}},{lodash:456}],440:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="footer-control timeLine-control control-speed-indicator control-button footer-control-button-small control-light" id="controlSpeed"> \n    '+(null==(__t=indicator)?"":__t)+"\n</div>";return __p}},{lodash:456}],441:[function(a,b){!function(){"use strict";var c=a("./../../views/ListView/index.js"),d=a("../../controls").Palette,e=a("./../../views/VisualizationItem"),f=a("./../ControlButton"),g=a("../../utilities"),h=a("jquery"),i=(a("underscore"),a("./stylePaletteTemplate.html")),j=a("../../models/SourceVisualization"),k=f.extend({template:i,defaults:{publicName:"Style"},events:{click:"showVisualizationsList"},initialize:function(a){a=a||{},f.prototype.initialize.apply(this,arguments)},tuneTo:function(a){f.prototype.tuneTo.apply(this,arguments),this.visualizationController=a,this.sources.add({id:this.config.source.sourceId},{merge:!0})},detune:function(){f.prototype.detune.apply(this,arguments),this.visualizationController=null},showVisualizationsList:function(){if(h("[data-name="+this.options.publicName+"]").length>0&&this.palette&&this.palette.$el.is(":visible"))return void this.palette.hide();h(".control-button").removeClass("active");var a=this,b={ascending:!0,sortby:function(a){var b=a.get("name")||"",c=a.get("type");return"PIVOT_TABLE"===c?"":b.toLowerCase()}},f=this.sources.get(a.config.source.sourceId),i=new c({className:"zd nav",collection:f.visualizations,ItemView:e,selectable:"radio",itemOption:{hide_disabled:!0},disabled:function(a){return!a.get("enabled")}});a.palette=new d({docked:!0,draggable:!0,customClass:"rail-control style-palette"}),a.palette.dock(a.palette.palettePosition),a.palette.render(i.render(b).$el,this.options.publicName),i.$el.parent().append('<div class="palette-bottom-panel"></div>'),a.$el.addClass("active"),a.palette.onHide=function(){a.$el.removeClass("active"),a.stopListening(f.visualizations),i.remove()},a.listenToOnce(i,"select",function(b){if(a.model.config.get("visId")===b.id)return void a.palette.hide();var c=g.getURLParameter("single");this.model.stateBackup&&(this.model.toRequest=this.model.stateBackup.toRequest),c?window.location="visualization?sourceId="+b.collection.sourceId+"&visId="+visId+"&single=true":b.fetch().done(function(){var c=new j(b.toJSON());if(-1===["TRENDS","MULTI_METRIC_TREND"].indexOf(b.get("type"))){var d=a.model.config.get("source"),e=a.visualizationController;c.attributes.source?(c.attributes.source.date=d.date,c.attributes.source.startFrom=d.startFrom,c.attributes.source.timeWindowScale=d.timeWindowScale,c.attributes.source.showTimeLine=d.hasOwnProperty("showTimeLine")?d.showTimeLine:e.source.get("showTimeLine")):c.attributes.source=d}a.visualizationController.setVisualization(c),a.palette.hide()})}),f.visualizations.bootstrap().done(function(){i.collection.reset(f.visualizations.models),i.render(b)})}});b.exports=k
}()},{"../../controls":66,"../../models/SourceVisualization":130,"../../utilities":144,"./../../views/ListView/index.js":275,"./../../views/VisualizationItem":382,"./../ControlButton":407,"./stylePaletteTemplate.html":442,jquery:103,underscore:458}],442:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-dark" id="controlStyle">\n    <div class="zd icon style"/>  \n    <div class="text">Style</div> \n</div>';return __p}},{lodash:456}],443:[function(a,b){"use strict";var c=a("../../Core/MVC"),d=a("../../utilities"),e=a("./../BaseControl"),f=a("jquery"),g=a("underscore"),h=c.Events,i=d.time.millisecondsIn,j=a("./timelineTemplate.html"),k=a("./tooltipTemplate.html"),l=e.extend({defaults:{},className:"visualization-control timeLine",events:{slide:"_onSlide",slidestop:"_onSlideStop",slidestart:"_onSlideStart",'click button[value="pause"]':"togglePause"},template:j,tuneTo:function(a){var b;e.prototype.tuneTo.apply(this,arguments),this._updateLimits(),b=a.config.get("source").dataResolution||a.fields.findWhere({name:a.config.get("source").date}).get("timestampGranularity"),this._utc="DAY"===b,this.dataResolution="NONE"===b||"SECOND"===b?!1:b;var c=this;f(window).on("resize",function(){c._setMinWidth()}),this.listenTo(h,"live:mode",this._setMinWidth)},detune:function(){this.muteEvents(),e.prototype.detune.apply(this,arguments);var a=this;f(window).off("resize",function(){a._setMinWidth()})},enable:function(){e.prototype.enable.apply(this,arguments),f(".visualization-control.timeRange").hide(),this.$el.show()},applyEvents:function(){this.listenTo(this.model.time,"change:time",this.update),this.listenTo(this.model.time,"change:min change:max change:fromTime",this._updateLimits)},muteEvents:function(){this.model&&(this.stopListening(this.model.time,"change:time",this.update),this.stopListening(this.model.time,"change:min change:max change:fromTime",this._updateLimits))},initialize:function(a){this.update=g.throttle(g.bind(this.update,this),250),e.prototype.initialize.apply(this,arguments),this.childViews=[],a=a||{},a.template&&(this.template=a.template,delete a.template),this.options=f.extend({},this.defaults,a),this._onHold=!1,this.$el.appendTo(this.options.root),this.render(),this.$el.children().hide(0),this.listenTo(h,"live:mode",this.updateSlider)},updateSlider:function(a){a.on?(this.$el.hasClass("live")||this.$el.addClass("live"),this.$liveModeIndicator().html("<text>"+a.label+"</text>")):(this.$el.hasClass("live")&&this.$el.removeClass("live"),this.$liveModeIndicator().empty())},_holdTime:function(){var a=this.model.time.get("paused");a||(this._onHold=!0)},_releaseTime:function(){this._onHold&&(this._onHold=!1)},_onSlideStop:function(){var a=this.getTimeRange()[1],b=new Date(this.getTimeRange()[0]),c=this.$slider().slider("option","max"),e=(new Date).getTime();this._releaseTime(),(a>c||a>=e&&Math.abs(e-this._maxTime)<3e4||this._maxTime-a<0)&&(a=null),"ALL"===this.model.time.get("timeWindow")&&this.model.set("timeWindowScale",b.getUTCFullYear()+"-"+parseInt(b.getUTCMonth()+1,10)+"-"+b.getUTCDate()+" "+b.getUTCHours()+":"+b.getUTCMinutes()+":"+b.getUTCSeconds()),this.model.time.set("time",a),this.model.config.get("source").startFrom=a?d.convertTimeToStringUTC(a):"LIVE",this.applyEvents(),this.$sliderTooltip().hide()},_onSlideStart:function(){this._holdTime(),this.muteEvents()},_onSlide:function(a,b){var c,d=this.model.time.get("timeWindow"),e=this.model.get("timeWindowScale"),f=new Date(e);return!isNaN(f)&&this.model.time.get("fromTime")>b.value?!1:(c="ROLLING_HOUR"===d,c?this.setTimeRange(b.value-i.hour,b.value):this.setTimeRange(this.getTimeRange()[0],b.value),void this.$sliderTooltip().show().html(k({dateString:this.getPrettyTime()})).position({my:"bottom-5",at:"top-8",of:this.$slider().find(".ui-slider-handle"),collision:"fit"}))},getPrettyTime:function(){function a(){var a,b;return l?(b=d.time.getMaxStep("HOUR",l,m),a="HOUR"!==b):a=!1,a}function b(a){var b=a.getUTCHours(),d=a.getUTCMinutes(),e=a.getUTCSeconds(),f="",g="";return 0===b?(g=" AM",b=12):12===b?g=" PM":b>12?(b-=12,g=" PM"):g=" AM",f=b+":"+c(d)+":"+c(e)+g}function c(a){var b=a+"";return b.length<2?"0"+b:b}function e(a){var b=["JAN","FEB","MAR","APR","MAY","JUNE","JULY","AUG","SEP","OCT","NOV","DEC"];return b[a]}var f,g,h,i,j,k,l=this.dataResolution,m=this._utc,n=a(),o="",p=this.getTimeRange(),q=p[0],r=p[1],s="",t="",u="",v="",w=new Date(q),x=new Date(r);return m?(f=w.getUTCDate(),g=w.getUTCMonth(),h=w.getUTCFullYear(),u=b(w),i=x.getUTCDate(),j=x.getUTCMonth(),k=x.getUTCFullYear(),v=b(x)):(f=w.getDate(),g=w.getMonth(),h=w.getFullYear(),u=w.toLocaleTimeString(),i=x.getDate(),j=x.getMonth(),k=x.getFullYear(),v=x.toLocaleTimeString()),s=f+" "+e(g)+" "+h,t=i+" "+e(j)+" "+k,n?o=s===t?s:s+" - "+t:(o=s===t?s+", "+u+" - "+v:s+", "+u+" - "+t+", "+v,m&&(o+=" (UTC)")),o},$sliderTooltip:function(){return this.$(".slider-tooltip")},$slider:function(){return this.$(".timeLine-slider")},$timeControls:function(){return this.$(".timeLine-controls")},$availableRange:function(){return this.$(".zd-available-range")},$currentRange:function(){return this.$(".zd-current-range")},$liveModeIndicator:function(){return this.$el.find(".control-live-indicator")},_updateLimits:function(){if(this.model){var a=i.min,b=this.model.time.get("timeWindow")||this.model.get("timeWindowScale"),c=this.model.time.get("fromTime"),d=this.model.time.get("time"),e=this.model.time.get("min"),f=this.model.time.get("max");switch(b){case"HOUR":e=c,f=e+i.hour;break;case"ROLLING_HOUR":var g=new Date(d);g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0),e=g.getTime(),f=e+i.day;var h=new Date(d);h.setMinutes(0),h.setSeconds(0),h.setMilliseconds(0),a=i.min;break;case"DAY":e=c,f=e+i.day,a=i.min;break;case"WEEK":e=c,f=e+i.week,a=i.hour;break;case"MONTH":e=c,f=e+30*i.day,a=i.hour;break;case"QUARTER":e=c,f=e+90*i.day,a=i.day;break;case"YEAR":e=c,f=e+365*i.day,a=i.day}this.$slider().slider("option",{min:Math.min(e,c),max:Math.max(f,d),step:a}),this.update()}},update:function(){var a,b,c,d,e,f;return this.model&&(e=this.$slider().slider("option","min"),f=this.$slider().slider("option","max"),c=this.model.time.get("min"),a=this.model.time.get("fromTime"),b=this.model.time.get("time"),d=this.model.time.get("max"),(b>f||e>a)&&this._updateLimits(),this.setAvailableRange(c,d),this.setTimeRange(a,b),this.$slider().slider({value:b})),this},setTimeRange:function(a,b){var c=0,d=0,e=this.$slider().slider("option","min"),f=this.$slider().slider("option","max");this._fromTime=a,this._toTime=b,c=Math.max(c,(a-e)/(f-e)),d=Math.max(d,(f-b)/(f-e)),this.$currentRange().css({left:100*c+"%",right:100*d+"%"})},getTimeRange:function(){return[this._fromTime,this._toTime]},setAvailableRange:function(a,b){var c=0,d=0,e=this.$slider().slider("option","min"),f=this.$slider().slider("option","max");this._minTime=a,this._maxTime=b,c=Math.max(c,(a-e)/(f-e)),d=Math.max(d,(f-b)/(f-e)),this.$availableRange().css({left:100*c+"%",right:100*d+"%"})},getAvailableRange:function(){return[this._minTime,this._maxTime]},_setMinWidth:function(){this.$el.find(".timeLine-control").css("min-width",this.$el.width()-255)},render:function(){var a=f('<div class="slider-tooltip"></div>');return this.$el.html(this.template()),this.$slider().slider(),a.appendTo(this.$slider().find(".ui-slider-handle")).hide(),this.$slider().prepend(f('<div class="zd-current-range"></div>')),this.$slider().prepend(f('<div class="zd-available-range"></div>')),this._setMinWidth(),this}});b.exports=l},{"../../Core/MVC":6,"../../utilities":144,"./../BaseControl":397,"./timelineTemplate.html":445,"./tooltipTemplate.html":446,jquery:103,underscore:458}],444:[function(a,b){b.exports=a("./TimeLine")},{"./TimeLine":443}],445:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="timeLine-control control-light">    \n    <div class="timeLine-slider-container footer-control">\n        <div class="timeLine-slider">   \n        </div>  \n        <div class="control-live-indicator"></div>\n    </div>\n</div> ';return __p}},{lodash:456}],446:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n"+(null==(__t=dateString)?"":__t)+'\n<div class="tooltip-pointer"></div>';return __p}},{lodash:456}],447:[function(a,b){!function(){"use strict";var c=a("jquery"),d=(a("underscore"),a("../../controls").Palette),e=a("./../ControlButton"),f=a("./../../views/TimePlayer"),g=a("./timePlayerTemplate.html");b.exports=e.extend({template:g,defaults:{publicName:"Time Player"},events:{click:"showTimePalette"},tuneTo:function(a){this.source=a.source,e.prototype.tuneTo.apply(this,arguments)},detune:function(){e.prototype.detune.apply(this,arguments)},update:function(){},showTimePalette:function(){if(c('[data-name="'+this.options.publicName+'"]').length>0&&this.palette&&this.palette.$el.is(":visible"))return void this.palette.hide();c(".control-button").removeClass("active");var a=this;a.palette=new d({docked:!0,draggable:!0,customClass:"rail-control time-config-palette"});var b=new f({config:this.config,model:this.model,source:this.source,palette:this.palette});a.palette.dock(a.palette.palettePosition),a.palette.render(b.render().$el,this.options.publicName),b.$el.addClass("active"),b.onApply=function(){a.options.widgetGrid.trigger("widget:updateControls"),a.palette.hide()},b.onCancel=function(){a.palette.hide()},a.palette.onHide=function(){a.$el.removeClass("active"),b.remove()}}})}()},{"../../controls":66,"./../../views/TimePlayer":366,"./../ControlButton":407,"./timePlayerTemplate.html":448,jquery:103,underscore:458}],448:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-dark" id="controlTimePlayer">\n    <div class="zd icon time"/>  \n    <span class="text">Time Player</span> \n</div>';return __p}},{lodash:456}],449:[function(a,b){!function(){"use strict";var c=a("../../Core/MVC"),d=a("./../BaseControl"),e=a("../../utilities"),f=a("jquery"),g=a("underscore"),h=c.Events,i=a("./timelineTemplate.html"),j=function(a,b,c){var d=e.time.getMinStep("DAY",c),f="";return f="DAY"===d?e.convertTimeToShortStringUTC(a,b):e.convertTimeToStringUTC(a,b)},k=function(a){return a.getTime&&(a=a.getTime()),12622968e5===a},l=function(a){return{MINUTE:function(b){function c(a){var b=a+"";return b.length<2?"0"+b:b}var d=new Date(b),f=a?d.getUTCFullYear():d.getFullYear(),g=c((a?d.getUTCMonth():d.getMonth())+1),h=c(a?d.getUTCDate():d.getDate()),i=e.time.formatAMPM(d,a).toUpperCase(),j=i+" "+g+"-"+h+"-"+f;return j},HOUR:function(b){function c(a){var b=a+"";return b.length<2?"0"+b:b}var d=new Date(b),f=a?d.getUTCFullYear():d.getFullYear(),g=c((a?d.getUTCMonth():d.getMonth())+1),h=c(a?d.getUTCDate():d.getDate()),i=e.time.formatAMPMForHours(d,a).toUpperCase(),j=i+" "+g+"-"+h+"-"+f;return j},DAY:function(b){function c(a){var b=a+"";return b.length<2?"0"+b:b}var d=new Date(b),e=a?d.getUTCFullYear():d.getFullYear(),f=c((a?d.getUTCMonth():d.getMonth())+1),g=c(a?d.getUTCDate():d.getDate()),h=f+"-"+g+"-"+e;return h},WEEK:function(b){function c(a){var b=a+"";return b.length<2?"0"+b:b}var d=new Date(b),e=a?d.getUTCFullYear():d.getFullYear(),f=c((a?d.getUTCMonth():d.getMonth())+1),g=c(a?d.getUTCDate():d.getDate()),h=f+"-"+g+"-"+e;return h},MONTH:function(b){function c(a){var b=a+"";return b.length<2?"0"+b:b}var d=new Date(b),e=a?d.getUTCFullYear():d.getFullYear(),f=c((a?d.getUTCMonth():d.getMonth())+1),g=f+"-"+e;return g},YEAR:function(b){var c=new Date(b),d=a?c.getUTCFullYear():c.getFullYear(),e=d;return e}}},m=d.extend({defaults:{},className:"visualization-control timeRange",events:{userValuesChanged:"_onSlideStop",valuesChanging:"_onSlide",'click button[value="pause"]':"togglePause"},template:i,tuneTo:function(a){d.prototype.tuneTo.apply(this,arguments),this.stoped=!1,this._validateControls();var b=a.fields.findWhere({name:a.config.attributes.source.date}).get("timestampGranularity");this._dataResolution=b,this.model&&this.update()},detune:function(){d.prototype.detune.apply(this,arguments),this.stoped=!0},enable:function(){d.prototype.enable.apply(this,arguments),f(".visualization-control.timeLine").hide(),this.$el.show()},applyEvents:function(){this.listenTo(this.model.time,"change:time",this.update),this.listenTo(this.model.time,"change:fromTime",this.update),this.listenTo(this.model,"change:timeTrendStep",this.onStepChanged),this.listenTo(this.model.config,"change",this._validateControls)},removeEvents:function(){this.stopListening(this.model.time,"change:time",this.update),this.stopListening(this.model.time,"change:fromTime",this.update),this.stopListening(this.model,"change:timeTrendStep",this.onStepChanged),this.model&&this.stopListening(this.model.config,"change",this._validateControls)},initialize:function(a){g.bindAll(this,"render"),this.update=g.throttle(g.bind(this.update,this),1e3),this.stoped=!0,d.prototype.initialize.apply(this,arguments),this.childViews=[],a=a||{},a.template&&(this.template=a.template,delete a.template),this.bounds={min:new Date,max:new Date},this.range={from:new Date,to:new Date},this.options=f.extend({},this.defaults,a),this.$el.appendTo(this.options.root),this.render(),this.$el.children().hide(0),h.on("initTimeTrends",this.update),this.listenTo(h,"TimeTrendsZoomIn",this.zoomIn),this.listenTo(h,"TimeTrendsZoom",this.zoom)},zoom:function(a){var b=this.model.get("timeTrendStep"),c=new Date(a),d=new Date(e.time.getEndTimeWithinStep(c,b,null,!0)),f=e.time.getRoundedDateRange(c,d),g=this.model.config.get("source").dataResolution,h=g&&b===g;h||"MINUTE"===b||(this.model.time.set({time:d.getTime()},{silent:!0}),this._setNewLimit(f.step,f.amount,!0))},zoomIn:function(a){var b=this.model.get("timeTrendStep"),c=new Date(a),d=new Date(e.time.getEndTimeWithinStep(c,b,this._utc,!0)),f=e.time.getRoundedDateRange(c,d,void 0,0,this._utc);"MINUTE"!==b&&(this.model.time.set({time:d.getTime()},{silent:!0}),this._setNewLimit(f.step,f.amount))},onStepChanged:function(){this.step=this.model.get("timeTrendStep"),this.updateFormating(),this._setNewLimit(this.step,this.model.get("limit"))},_setNewLimit:function(a,b,c){var d=e.time.getMaxStepLimit();if("undefined"!=typeof b){var f=Math.min(b,d);this.model.groupBy.setLimit(f,{silent:!0}),this.model.set("limit",f,{silent:!0})}"undefined"!=typeof a&&this.model.set("timeTrendStep",a,{silent:!0}),this.model.config.get("source").variables._TempLimitPeriod=this.model.get("limit"),c&&this.model.trigger("change")},_onSlideStop:function(){var a=this.$slider().dateRangeSlider("values"),b=a.min,c=a.max,d=e.time.getMaxStepLimit(),f=d,g={time:this.model.time.get("time"),timeTrendStep:this.model.get("timeTrendStep"),limit:this.model.get("limit")},h=a.max,i=g.timeTrendStep,j=e.time.getRoundedDateRange(b,c,i,!0,this._utc);e.time.floorDateForStep(h,i)>=e.time.floorDateForStep(this.bounds.max,i)&&"LIVE"===this.config.source.startFrom?(this.model.time.set({live:!0,paused:!1},{silent:!1}),this.model.time.set({time:null},{silent:!0})):(this.model.time.set({live:!1,paused:!0},{silent:!1}),this._utc&&(h=new Date(e.time.forceTimeToUTC(h))),this.model.time.set({time:h.getTime()},{silent:!0})),f=this.getMaxPossibleLimit(j.step).amount;var k=Math.min(j.amount,d,f);this._setNewLimit(j.step,k,!0),this.stoped=!1},_onSlideStart:function(){this.stoped=!0},_onSlide:function(){this.stoped=!0},_validateControls:function(){if(this.config){var a=this.model&&"TRENDS"===this.model.config.get("type"),b="LIVE"===this.config.source.startFrom;a&&!b?this.$timeControls().addClass("disabled"):this.$timeControls().removeClass("disabled")}},updateFormating:function(){var a=this.step||this.model.get("timeTrendStep"),b=this.$slider().find(".ui-rangeSlider-leftHandle").first(),c=this.$slider().find(".ui-rangeSlider-rightHandle").first(),d=this.$slider().find(".ui-rangeSlider-bar").first(),e=d.width(),f=b.width(),g=c.width();0>=e-f-g?(d.css("zIndex",1004),b.css("zIndex",1003),c.css("zIndex",1003)):(d.css("zIndex",""),b.css("zIndex",""),c.css("zIndex","")),this.$slider().dateRangeSlider({formatter:this.getFormatter(a)})},updateStep:function(){var a={},b=this.model.get("timeTrendStep");b&&(a[b.toLowerCase()+"s"]=1),"MINUTE"===b&&(a=!1),this.$slider().dateRangeSlider({step:a})},$sliderTooltip:function(){return this.$(".slider-tooltip")},$slider:function(){return this.$(".timeLine-slider")},$timeControls:function(){return this.$(".timeLine-controls")},update:function(){if(this.rendered||null===this.model||this.render(),!this.stoped&&this.model){var a=new Date(this.model.time.get("min")),b=new Date(this.model.time.get("max")),c=new Date(this.model.time.get("time")),d=new Date(this.model.time.get("fromTime")),f=this.$slider().dateRangeSlider("values"),g=this.model.get("timeTrendStep");if(this.updateFormating(),this.detectUTC(),"Invalid Date"===d.toString())return!1;this.setMaxPossibleLimit(a,b),a.getTime()>d.getTime()&&(d=a),(k(f.min)||k(f.max))&&(d=a,c=b),this.bounds.min=a,this.bounds.max=b,this.bounds.from=d,this.bounds.to=c,this.range.from=d,this.range.to=c;var h=e.time.getRangeForStep(a,b,g,this._utc),i=e.time.getRangeForStep(d,c,g,this._utc);this.updateStep(),this.$slider().dateRangeSlider({bounds:{min:e.time.floorDateForStep(h.min,g),max:e.time.floorDateForStep(h.max,g)},valueLabels:"Invalid Date"==i.min||"Invalid Date"==i.max?"hide":"show"}),this.$slider().dateRangeSlider("values",e.time.forceTimeToLocal(i.min,!this._utc),e.time.floorDateForStep(e.time.forceTimeToLocal(i.max,!this._utc),g)),this.$slider().dateRangeSlider("resize")}return this},detectUTC:function(){var a=g.findWhere(this.model.options.fields,{name:this.model.get("timestampField")});this._utc=-1!==e.time.TIME_STEPS_UTC.indexOf(a.timestampGranularity)},setRangeValues:function(a,b){this.$slider().dateRangeSlider("values",a,b)},setMaxPossibleLimit:function(a,b){this.maxPossibleLimit={MINUTE:e.time.getRoundedDateRange(a,b,"MINUTE",!0,this._utc),HOUR:e.time.getRoundedDateRange(a,b,"HOUR",!0,this._utc),DAY:e.time.getRoundedDateRange(a,b,"DAY",!0,this._utc),WEEK:e.time.getRoundedDateRange(a,b,"WEEK",!0,this._utc),MONTH:e.time.getRoundedDateRange(a,b,"MONTH",!0,this._utc),YEAR:e.time.getRoundedDateRange(a,b,"YEAR",!0,this._utc)}},getMaxPossibleLimit:function(a){return this.maxPossibleLimit[a]},validateStep:function(a,b){var c=0,d=new Date(a);switch(b){case"MINUTE":c=0===(this._utc?d.getUTCSeconds():d.getSeconds());break;case"HOUR":c=this._utc?d.getUTCHours():d.getHours();break;case"DAY":c=this._utc?d.getUTCDate():d.getDate();break;case"WEEK":c=this._utc?d.getUTCDate():d.getDate();break;case"MONTH":c=this._utc?d.getUTCMonth()+1:d.getMonth()+1;break;case"YEAR":c=this._utc?d.getUTCFullYear():d.getFullYear()}return c},getFormatter:function(a){return l(!1)[a]},render:function(){var a=this;return this.$el.html(this.template()),this.model?(this.$slider().dateRangeSlider({defaultValues:{min:new Date(1),max:new Date(1)},formatter:function(b){return a.model?j(b.getTime(),a._utc,a.model.get("timeTrendStep")):void 0},valueLabels:"hide",arrows:!1}),this.resizeInteval&&clearInterval(this.resizeInteval),this.resizeInteval=null,this.rendered=!0,this):(this.rendered=!1,this)}});b.exports=m}()},{"../../Core/MVC":6,"../../utilities":144,"./../BaseControl":397,"./timelineTemplate.html":451,jquery:103,underscore:458}],450:[function(a,b){b.exports=a("./TimeRange")},{"./TimeRange":449}],451:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="timeLine-control control-light table" >    \n    <div class="timeLine-slider-container">\n        <div class="timeLine-slider">   \n        </div>  \n    </div>\n</div> ';return __p}},{lodash:456}],452:[function(a,b){!function(){"use strict";var c=a("./../ControlButton"),d=(a("underscore"),a("./undoTemplate.html")),e=c.extend({template:d,events:{click:"setUndoState"},render:function(){return c.prototype.render.apply(this,arguments),this.$el.hide(),this},tuneTo:function(){var a=this;return c.prototype.tuneTo.apply(this,arguments),this.undo=this.getUndoController(),this.undo.controller.state.checkUndoState=function(){return a.undo.model.get("enabled")},this.checkUndoState(),this.listenTo(this.undo.model,"change",this.checkUndoState),this},detune:function(){return c.prototype.detune.apply(this,arguments),this.undo&&this.stopListening(this.undo.model,"change"),this},getUndoController:function(){return this.widgetGrid.selectedUndoController},checkUndoState:function(){this.undo.model.get("enabled")?this.activate():this.deactivate()},activate:function(){var a=-1!==navigator.userAgent.indexOf("MSIE");this.$el.is(":visible")||(a?this.$el.show():this.$el.slideDown())},deactivate:function(){this.$el.is(":visible")&&this.$el.slideUp()},setUndoState:function(){this.undo.collection.length>1?this.undo.backupState():null}});b.exports=e}()},{"./../ControlButton":407,"./undoTemplate.html":453,underscore:458}],453:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--\n    Copyright (C) Zoomdata, Inc. 2012-2014. All rights reserved.\n-->\n<div class="control-dark active" id="controlUndo">\n    <div class="zd icon undo"/>  \n    <div class="text">Undo</div> \n</div>';return __p}},{lodash:456}],454:[function(a,b,c){!function(b,d){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(a,c,e){b.Backbone=d(b,e,a,c)});else if("undefined"!=typeof c){var e=a("underscore");d(b,c,e)}else b.Backbone=d(b,{},b._,b.jQuery||b.Zepto||b.ender||b.$)}(this,function(a,b,c,d){{var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice}b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;
b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b})},{underscore:458}],455:[function(a,b){function c(a,b){return"undefined"==typeof b&&(b=e),"string"==typeof m[b][a]?m[b][a]:b!=f?c(a,f):a}var d={},e="en",f="en",g=!0,h="static",i="javascript:;",j="",k={},l={};d.setLocale=function(a){for(var b in m)if(b==a)return void(e=a);throw new Error("Invalid locale: "+a)},d.addLocale=function(a,b){"undefined"==typeof m[a]&&(m[a]={});for(var c in b)m[a][c]=b[c]},d.setIcons=function(a){l=a,("object"!=typeof l||null===l)&&(l={})},d.setBtnClasses=function(a){k=a,("object"!=typeof k||null===k)&&(k={})},d.alert=function(){var a="",b=c("OK"),e=null;switch(arguments.length){case 1:a=arguments[0];break;case 2:a=arguments[0],"function"==typeof arguments[1]?e=arguments[1]:b=arguments[1];break;case 3:a=arguments[0],b=arguments[1],e=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return d.dialog(a,{label:b,icon:l.OK,"class":k.OK,callback:e},{onEscape:e||!0})},d.confirm=function(){var a="",b=c("CANCEL"),e=c("CONFIRM"),f=null;switch(arguments.length){case 1:a=arguments[0];break;case 2:a=arguments[0],"function"==typeof arguments[1]?f=arguments[1]:b=arguments[1];break;case 3:a=arguments[0],b=arguments[1],"function"==typeof arguments[2]?f=arguments[2]:e=arguments[2];break;case 4:a=arguments[0],b=arguments[1],e=arguments[2],f=arguments[3];break;default:throw new Error("Incorrect number of arguments: expected 1-4")}var g=function(){return"function"==typeof f?f(!1):void 0},h=function(){return"function"==typeof f?f(!0):void 0};return d.dialog(a,[{label:b,icon:l.CANCEL,"class":k.CANCEL,callback:g},{label:e,icon:l.CONFIRM,"class":k.CONFIRM,callback:h}],{onEscape:g})},d.prompt=function(){var a="",b=c("CANCEL"),e=c("CONFIRM"),f=null,g="";switch(arguments.length){case 1:a=arguments[0];break;case 2:a=arguments[0],"function"==typeof arguments[1]?f=arguments[1]:b=arguments[1];break;case 3:a=arguments[0],b=arguments[1],"function"==typeof arguments[2]?f=arguments[2]:e=arguments[2];break;case 4:a=arguments[0],b=arguments[1],e=arguments[2],f=arguments[3];break;case 5:a=arguments[0],b=arguments[1],e=arguments[2],f=arguments[3],g=arguments[4];break;default:throw new Error("Incorrect number of arguments: expected 1-5")}var h=a,i=$("<form></form>");i.append("<input autocomplete=off type=text value='"+g+"' />");var j=function(){return"function"==typeof f?f(null):void 0},m=function(){return"function"==typeof f?f(i.find("input[type=text]").val()):void 0},n=d.dialog(i,[{label:b,icon:l.CANCEL,"class":k.CANCEL,callback:j},{label:e,icon:l.CONFIRM,"class":k.CONFIRM,callback:m}],{header:h,show:!1,onEscape:j});return n.on("shown",function(){i.find("input[type=text]").focus(),i.on("submit",function(a){a.preventDefault(),n.find(".btn-primary").click()})}),n.modal("show"),n},d.dialog=function(a,b,c){function d(){var a=null;"function"==typeof c.onEscape&&(a=c.onEscape()),a!==!1&&v.modal("hide")}var e="",f=[];c||(c={}),"undefined"==typeof b?b=[]:"undefined"==typeof b.length&&(b=[b]);for(var k=b.length;k--;){var l=null,m=null,n=null,o="",p=null;if("undefined"==typeof b[k].label&&"undefined"==typeof b[k]["class"]&&"undefined"==typeof b[k].callback){var q=0,r=null;for(var s in b[k])if(r=s,++q>1)break;1==q&&"function"==typeof b[k][s]&&(b[k].label=r,b[k].callback=b[k][s])}"function"==typeof b[k].callback&&(p=b[k].callback),b[k]["class"]?n=b[k]["class"]:k==b.length-1&&b.length<=2&&(n="btn-primary"),l=b[k].label?b[k].label:"Option "+(k+1),b[k].icon&&(o="<i class='"+b[k].icon+"'></i> "),m=b[k].href?b[k].href:i,e="<a data-handler='"+k+"' class='btn "+n+"' href='"+m+"'>"+o+l+"</a>"+e,f[k]=p}var t=["<div class='bootbox modal' tabindex='-1' style='overflow:hidden;'>"];if(c.header){var u="";("undefined"==typeof c.headerCloseButton||c.headerCloseButton)&&(u="<a href='"+i+"' class='close'>&times;</a>"),t.push("<div class='modal-header'>"+u+"<h3>"+c.header+"</h3></div>")}t.push("<div class='modal-body'></div>"),e&&t.push("<div class='modal-footer'>"+e+"</div>"),t.push("</div>");var v=$(t.join("\n")),w="undefined"==typeof c.animate?g:c.animate;w&&v.addClass("fade");var x="undefined"==typeof c.classes?j:c.classes;return x&&v.addClass(x),v.find(".modal-body").html(a),v.on("keyup.dismiss.modal",function(a){27===a.which&&c.onEscape&&d("escape")}),v.on("click","a.close",function(a){a.preventDefault(),d("close")}),v.on("shown",function(){v.find("a.btn-primary:first").focus()}),v.on("hidden",function(){v.remove()}),v.on("click",".modal-footer a",function(a){var c=$(this).data("handler"),d=f[c],e=null;("undefined"==typeof c||"undefined"==typeof b[c].href)&&(a.preventDefault(),"function"==typeof d&&(e=d()),e!==!1&&v.modal("hide"))}),$("body").append(v),v.modal({backdrop:"undefined"==typeof c.backdrop?h:c.backdrop,keyboard:!1,show:!1}),v.on("show",function(){$(document).off("focusin.modal")}),("undefined"==typeof c.show||c.show===!0)&&v.modal("show"),v},d.modal=function(){var a,b,c,e={onEscape:null,keyboard:!0,backdrop:h};switch(arguments.length){case 1:a=arguments[0];break;case 2:a=arguments[0],"object"==typeof arguments[1]?c=arguments[1]:b=arguments[1];break;case 3:a=arguments[0],b=arguments[1],c=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return e.header=b,c="object"==typeof c?$.extend(e,c):e,d.dialog(a,[],c)},d.hideAll=function(){$(".bootbox").modal("hide")},d.animate=function(a){g=a},d.backdrop=function(a){h=a},d.classes=function(a){j=a};var m={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"}};b.exports=d},{}],456:[function(a,b,c){(function(a){(function(){function d(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function e(a,b){var c=typeof b;if(a=a.cache,"boolean"==c||null==b)return a[b]?0:-1;"number"!=c&&"string"!=c&&(c="object");var e="number"==c?b:u+b;return a=(a=a[c])&&a[e],"object"==c?a&&d(a,b)>-1?0:-1:a?0:-1}function f(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:u+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function g(a){return a.charCodeAt(0)}function h(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function i(a){var b=-1,c=a.length,d=a[0],e=a[c/2|0],g=a[c-1];if(d&&"object"==typeof d&&e&&"object"==typeof e&&g&&"object"==typeof g)return!1;var h=l();h["false"]=h["null"]=h["true"]=h.undefined=!1;var i=l();for(i.array=a,i.cache=h,i.push=f;++b<c;)i.push(a[b]);return i}function j(a){return"\\"+Y[a]}function k(){return r.pop()||[]}function l(){return s.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function m(a){a.length=0,r.length<w&&r.push(a)}function n(a){var b=a.cache;b&&n(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,s.length<w&&s.push(a)}function o(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function p(a){function b(a){return a&&"object"==typeof a&&!Zd(a)&&Hd.call(a,"__wrapped__")?a:new c(a)}function c(a,b){this.__chain__=!!b,this.__wrapped__=a}function f(a){function b(){if(d){var a=o(d);Id.apply(a,arguments)}if(this instanceof b){var f=s(c.prototype),g=c.apply(f,a||arguments);return Eb(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return Yd(b,a),b}function r(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=Eb(a);if(!g)return a;var h=Ad.call(a);if(!U[h])return a;var i=Wd[h];switch(h){case N:case O:return new i(+a);case Q:case T:return new i(a);case S:return f=i(a.source,C.exec(a)),f.lastIndex=a.lastIndex,f}var j=Zd(a);if(b){var l=!d;d||(d=k()),e||(e=k());for(var n=d.length;n--;)if(d[n]==a)return e[n];f=j?i(a.length):{}}else f=j?o(a):ee({},a);return j&&(Hd.call(a,"index")&&(f.index=a.index),Hd.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(j?Yb:he)(a,function(a,g){f[g]=r(a,b,c,d,e)}),l&&(m(d),m(e)),f):f}function s(a){return Eb(a)?Nd(a):{}}function w(a,b,c){if("function"!=typeof a)return Zc;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Xd.funcNames&&(d=!a.name),d=d||!Xd.funcDecomp,!d)){var e=Fd.call(a);Xd.funcNames||(d=!D.test(e)),d||(d=H.test(e),Yd(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Ic(a,b)}function Y(a){function b(){var a=i?g:this;if(e){var n=o(e);Id.apply(n,arguments)}if((f||k)&&(n||(n=o(arguments)),f&&Id.apply(n,f),k&&n.length<h))return d|=16,Y([c,l?d:-4&d,n,null,g,h]);if(n||(n=arguments),j&&(c=a[m]),this instanceof b){a=s(c.prototype);var p=c.apply(a,n);return Eb(p)?p:a}return c.apply(a,n)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,l=8&d,m=c;return Yd(b,a),b}function $(a,b){var c=-1,f=ib(),g=a?a.length:0,h=g>=v&&f===d,j=[];if(h){var k=i(b);k?(f=e,b=k):h=!1}for(;++c<g;){var l=a[c];f(b,l)<0&&j.push(l)}return h&&n(b),j}function _(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(Zd(h)||mb(h))){b||(h=_(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function ab(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,i=typeof b;if(!(a!==a||a&&X[h]||b&&X[i]))return!1;if(null==a||null==b)return a===b;var j=Ad.call(a),l=Ad.call(b);if(j==L&&(j=R),l==L&&(l=R),j!=l)return!1;switch(j){case N:case O:return+a==+b;case Q:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case S:case T:return a==vd(b)}var n=j==M;if(!n){var o=Hd.call(a,"__wrapped__"),p=Hd.call(b,"__wrapped__");if(o||p)return ab(o?a.__wrapped__:a,p?b.__wrapped__:b,c,d,e,f);if(j!=R)return!1;var q=a.constructor,r=b.constructor;if(q!=r&&!(Db(q)&&q instanceof q&&Db(r)&&r instanceof r)&&"constructor"in a&&"constructor"in b)return!1}var s=!e;e||(e=k()),f||(f=k());for(var t=e.length;t--;)if(e[t]==a)return f[t]==b;var u=0;if(g=!0,e.push(a),f.push(b),n){if(t=a.length,u=b.length,g=u==t,g||d)for(;u--;){var v=t,w=b[u];if(d)for(;v--&&!(g=ab(a[v],w,c,d,e,f)););else if(!(g=ab(a[u],w,c,d,e,f)))break}}else ge(b,function(b,h,i){return Hd.call(i,h)?(u++,g=Hd.call(a,h)&&ab(a[h],b,c,d,e,f)):void 0}),g&&!d&&ge(a,function(a,b,c){return Hd.call(c,b)?g=--u>-1:void 0});return e.pop(),f.pop(),s&&(m(e),m(f)),g}function bb(a,b,c,d,e){(Zd(b)?Yb:he)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Zd(b))||ie(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?Zd(j)?j:[]:ie(j)?j:{}),d.push(b),e.push(j),l||bb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function db(a,b){return a+Ed(Vd()*(b-a+1))}function eb(a,b,c){var f=-1,g=ib(),h=a?a.length:0,j=[],l=!b&&h>=v&&g===d,o=c||l?k():j;if(l){var p=i(o);g=e,o=p}for(;++f<h;){var q=a[f],r=c?c(q,f,a):q;(b?!f||o[o.length-1]!==r:g(o,r)<0)&&((c||l)&&o.push(r),j.push(q))}return l?(m(o.array),n(o)):c&&m(o),j}function fb(a){return function(c,d,e){var f={};d=b.createCallback(d,e,3);var g=-1,h=c?c.length:0;if("number"==typeof h)for(;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else he(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function gb(a,b,c,d,e,g){var h=1&b,i=2&b,j=4&b,k=16&b,l=32&b;if(!i&&!Db(a))throw new wd;k&&!c.length&&(b&=-17,k=c=!1),l&&!d.length&&(b&=-33,l=d=!1);var m=a&&a.__bindData__;if(m&&m!==!0)return m=o(m),m[2]&&(m[2]=o(m[2])),m[3]&&(m[3]=o(m[3])),!h||1&m[1]||(m[4]=e),!h&&1&m[1]&&(b|=8),!j||4&m[1]||(m[5]=g),k&&Id.apply(m[2]||(m[2]=[]),c),l&&Ld.apply(m[3]||(m[3]=[]),d),m[1]|=b,gb.apply(null,m);var n=1==b||17===b?f:Y;return n([a,b,c,d,e,g])}function hb(a){return ae[a]}function ib(){var a=(a=b.indexOf)===rc?d:a;return a}function jb(a){return"function"==typeof a&&Bd.test(a)}function kb(a){var b,c;return a&&Ad.call(a)==R&&(b=a.constructor,!Db(b)||b instanceof b)?(ge(a,function(a,b){c=b}),"undefined"==typeof c||Hd.call(a,c)):!1}function lb(a){return be[a]}function mb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ad.call(a)==L||!1}function nb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),r(a,b,"function"==typeof c&&w(c,d,1))}function ob(a,b,c){return r(a,!0,"function"==typeof b&&w(b,c,1))}function pb(a,b){var c=s(a);return b?ee(c,b):c}function qb(a,c,d){var e;return c=b.createCallback(c,d,3),he(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function rb(a,c,d){var e;return c=b.createCallback(c,d,3),tb(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function sb(a,b,c){var d=[];ge(a,function(a,b){d.push(b,a)});var e=d.length;for(b=w(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function tb(a,b,c){var d=_d(a),e=d.length;for(b=w(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function ub(a){var b=[];return ge(a,function(a,c){Db(a)&&b.push(c)}),b.sort()}function vb(a,b){return a?Hd.call(a,b):!1}function wb(a){for(var b=-1,c=_d(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function xb(a){return a===!0||a===!1||a&&"object"==typeof a&&Ad.call(a)==N||!1}function yb(a){return a&&"object"==typeof a&&Ad.call(a)==O||!1}function zb(a){return a&&1===a.nodeType||!1}function Ab(a){var b=!0;if(!a)return b;var c=Ad.call(a),d=a.length;return c==M||c==T||c==L||c==R&&"number"==typeof d&&Db(a.splice)?!d:(he(a,function(){return b=!1}),b)}function Bb(a,b,c,d){return ab(a,b,"function"==typeof c&&w(c,d,2))}function Cb(a){return Pd(a)&&!Qd(parseFloat(a))}function Db(a){return"function"==typeof a}function Eb(a){return!(!a||!X[typeof a])}function Fb(a){return Hb(a)&&a!=+a}function Gb(a){return null===a}function Hb(a){return"number"==typeof a||a&&"object"==typeof a&&Ad.call(a)==Q||!1}function Ib(a){return a&&"object"==typeof a&&Ad.call(a)==S||!1}function Jb(a){return"string"==typeof a||a&&"object"==typeof a&&Ad.call(a)==T||!1}function Kb(a){return"undefined"==typeof a}function Lb(a,c,d){var e={};return c=b.createCallback(c,d,3),he(a,function(a,b,d){e[b]=c(a,b,d)}),e}function Mb(a){var b=arguments,c=2;if(!Eb(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=w(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=o(arguments,1,c),f=-1,g=k(),h=k();++f<c;)bb(a,e[f],d,g,h);return m(g),m(h),a}function Nb(a,c,d){var e={};if("function"!=typeof c){var f=[];ge(a,function(a,b){f.push(b)}),f=$(f,_(arguments,!0,!1,1));for(var g=-1,h=f.length;++g<h;){var i=f[g];e[i]=a[i]}}else c=b.createCallback(c,d,3),ge(a,function(a,b,d){c(a,b,d)||(e[b]=a)});return e}function Ob(a){for(var b=-1,c=_d(a),d=c.length,e=nd(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Pb(a,c,d){var e={};if("function"!=typeof c)for(var f=-1,g=_(arguments,!0,!1,1),h=Eb(a)?g.length:0;++f<h;){var i=g[f];i in a&&(e[i]=a[i])}else c=b.createCallback(c,d,3),ge(a,function(a,b,d){c(a,b,d)&&(e[b]=a)});return e}function Qb(a,c,d,e){var f=Zd(a);if(null==d)if(f)d=[];else{var g=a&&a.constructor,h=g&&g.prototype;d=s(h)}return c&&(c=b.createCallback(c,e,4),(f?Yb:he)(a,function(a,b,e){return c(d,a,b,e)})),d}function Rb(a){for(var b=-1,c=_d(a),d=c.length,e=nd(d);++b<d;)e[b]=a[c[b]];return e}function Sb(a){for(var b=arguments,c=-1,d=_(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=nd(e);++c<e;)f[c]=a[d[c]];return f}function Tb(a,b,c){var d=-1,e=ib(),f=a?a.length:0,g=!1;return c=(0>c?Sd(0,f+c):c)||0,Zd(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Jb(a)?a.indexOf(b,c):e(a,b,c))>-1:he(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function Ub(a,c,d){var e=!0;c=b.createCallback(c,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g&&(e=!!c(a[f],f,a)););else he(a,function(a,b,d){return e=!!c(a,b,d)});return e}function Vb(a,c,d){var e=[];c=b.createCallback(c,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g;){var h=a[f];c(h,f,a)&&e.push(h)}else he(a,function(a,b,d){c(a,b,d)&&e.push(a)});return e}function Wb(a,c,d){c=b.createCallback(c,d,3);var e=-1,f=a?a.length:0;if("number"!=typeof f){var g;return he(a,function(a,b,d){return c(a,b,d)?(g=a,!1):void 0}),g}for(;++e<f;){var h=a[e];if(c(h,e,a))return h}}function Xb(a,c,d){var e;return c=b.createCallback(c,d,3),Zb(a,function(a,b,d){return c(a,b,d)?(e=a,!1):void 0}),e}function Yb(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:w(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else he(a,b);return a}function Zb(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:w(b,c,3),"number"==typeof d)for(;d--&&b(a[d],d,a)!==!1;);else{var e=_d(a);d=e.length,he(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function $b(a,b){var c=o(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=nd("number"==typeof f?f:0);return Yb(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function _b(a,c,d){var e=-1,f=a?a.length:0;if(c=b.createCallback(c,d,3),"number"==typeof f)for(var g=nd(f);++e<f;)g[e]=c(a[e],e,a);else g=[],he(a,function(a,b,d){g[++e]=c(a,b,d)});return g}function ac(a,c,d){var e=-1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&Zd(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];j>f&&(f=j)}else c=null==c&&Jb(a)?g:b.createCallback(c,d,3),Yb(a,function(a,b,d){var g=c(a,b,d);g>e&&(e=g,f=a)});return f}function bc(a,c,d){var e=1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&Zd(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];f>j&&(f=j)}else c=null==c&&Jb(a)?g:b.createCallback(c,d,3),Yb(a,function(a,b,d){var g=c(a,b,d);e>g&&(e=g,f=a)});return f}function cc(a,c,d,e){if(!a)return d;var f=arguments.length<3;c=b.createCallback(c,e,4);var g=-1,h=a.length;if("number"==typeof h)for(f&&(d=a[++g]);++g<h;)d=c(d,a[g],g,a);else he(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)});return d}function dc(a,c,d,e){var f=arguments.length<3;return c=b.createCallback(c,e,4),Zb(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)}),d}function ec(a,c,d){return c=b.createCallback(c,d,3),Vb(a,function(a,b,d){return!c(a,b,d)})}function fc(a,b,c){if(a&&"number"!=typeof a.length&&(a=Rb(a)),null==b||c)return a?a[db(0,a.length-1)]:q;var d=gc(a);return d.length=Td(Sd(0,b),d.length),d}function gc(a){var b=-1,c=a?a.length:0,d=nd("number"==typeof c?c:0);return Yb(a,function(a){var c=db(0,++b);d[b]=d[c],d[c]=a}),d}function hc(a){var b=a?a.length:0;return"number"==typeof b?b:_d(a).length}function ic(a,c,d){var e;c=b.createCallback(c,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g&&!(e=c(a[f],f,a)););else he(a,function(a,b,d){return!(e=c(a,b,d))});return!!e}function jc(a,c,d){var e=-1,f=Zd(c),g=a?a.length:0,i=nd("number"==typeof g?g:0);for(f||(c=b.createCallback(c,d,3)),Yb(a,function(a,b,d){var g=i[++e]=l();f?g.criteria=_b(c,function(b){return a[b]}):(g.criteria=k())[0]=c(a,b,d),g.index=e,g.value=a}),g=i.length,i.sort(h);g--;){var j=i[g];i[g]=j.value,f||m(j.criteria),n(j)}return i}function kc(a){return a&&"number"==typeof a.length?o(a):Rb(a)}function lc(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function mc(a){return $(a,_(arguments,!0,!0,1))}function nc(a,c,d){var e=-1,f=a?a.length:0;for(c=b.createCallback(c,d,3);++e<f;)if(c(a[e],e,a))return e;return-1}function oc(a,c,d){var e=a?a.length:0;for(c=b.createCallback(c,d,3);e--;)if(c(a[e],e,a))return e;return-1}function pc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=-1;for(c=b.createCallback(c,d,3);++g<f&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[0]:q;return o(a,0,Td(Sd(0,e),f))}function qc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=_b(a,c,d)),_(a,b)}function rc(a,b,c){if("number"==typeof c){var e=a?a.length:0;c=0>c?Sd(0,e+c):c||0}else if(c){var f=Ac(a,b);return a[f]===b?f:-1}return d(a,b,c)}function sc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else e=null==c||d?1:c||e;return o(a,0,Td(Sd(0,f-e),f))}function tc(){for(var a=[],b=-1,c=arguments.length,f=k(),g=ib(),h=g===d,j=k();++b<c;){var l=arguments[b];(Zd(l)||mb(l))&&(a.push(l),f.push(h&&l.length>=v&&i(b?a[b]:j)))}var o=a[0],p=-1,q=o?o.length:0,r=[];a:for(;++p<q;){var s=f[0];if(l=o[p],(s?e(s,l):g(j,l))<0){for(b=c,(s||j).push(l);--b;)if(s=f[b],(s?e(s,l):g(a[b],l))<0)continue a;r.push(l)}}for(;c--;)s=f[c],s&&n(s);return m(f),m(j),r}function uc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[f-1]:q;return o(a,Sd(0,f-e))}function vc(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Sd(0,d+c):Td(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function wc(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Kd.call(a,f--,1),e--);return a}function xc(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Sd(0,Cd((b-a)/(c||1))),f=nd(e);++d<e;)f[d]=a,a+=c;return f}function yc(a,c,d){var e=-1,f=a?a.length:0,g=[];for(c=b.createCallback(c,d,3);++e<f;){var h=a[e];c(h,e,a)&&(g.push(h),Kd.call(a,e--,1),f--)}return g}function zc(a,c,d){if("number"!=typeof c&&null!=c){var e=0,f=-1,g=a?a.length:0;for(c=b.createCallback(c,d,3);++f<g&&c(a[f],f,a);)e++}else e=null==c||d?1:Sd(0,c);return o(a,e)}function Ac(a,c,d,e){var f=0,g=a?a.length:f;for(d=d?b.createCallback(d,e,1):Zc,c=d(c);g>f;){var h=f+g>>>1;d(a[h])<c?f=h+1:g=h}return f}function Bc(){return eb(_(arguments,!0,!0))}function Cc(a,c,d,e){return"boolean"!=typeof c&&null!=c&&(e=d,d="function"!=typeof c&&e&&e[c]===a?null:c,c=!1),null!=d&&(d=b.createCallback(d,e,3)),eb(a,c,d)}function Dc(a){return $(a,o(arguments,1))}function Ec(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Zd(c)||mb(c))var d=d?eb($(d,c).concat($(c,d))):c}return d||[]}function Fc(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?ac(me(a,"length")):0,d=nd(0>c?0:c);++b<c;)d[b]=me(a,b);return d}function Gc(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Zd(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Hc(a,b){if(!Db(b))throw new wd;return function(){return--a<1?b.apply(this,arguments):void 0}}function Ic(a,b){return arguments.length>2?gb(a,17,o(arguments,2),null,b):gb(a,1,null,null,b)}function Jc(a){for(var b=arguments.length>1?_(arguments,!0,!1,1):ub(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=gb(a[e],1,null,null,a)
}return a}function Kc(a,b){return arguments.length>2?gb(b,19,o(arguments,2),null,a):gb(b,3,null,null,a)}function Lc(){for(var a=arguments,b=a.length;b--;)if(!Db(a[b]))throw new wd;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Mc(a,b){return b="number"==typeof b?b:+b||a.length,gb(a,4,null,null,null,b)}function Nc(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Db(a))throw new wd;if(b=Sd(0,b)||0,c===!0){var n=!0;m=!1}else Eb(c)&&(n=c.leading,l="maxWait"in c&&(Sd(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(oe()-g);if(0>=c){e&&Dd(e);var l=j;e=i=j=q,l&&(k=oe(),f=a.apply(h,d),i||e||(d=h=null))}else i=Jd(o,c)},p=function(){i&&Dd(i),e=i=j=q,(m||l!==b)&&(k=oe(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=oe(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k),r=0>=q;r?(e&&(e=Dd(e)),k=g,f=a.apply(h,d)):e||(e=Jd(p,q))}return r&&i?i=Dd(i):i||b===l||(i=Jd(o,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Oc(a){if(!Db(a))throw new wd;var b=o(arguments,1);return Jd(function(){a.apply(q,b)},1)}function Pc(a,b){if(!Db(a))throw new wd;var c=o(arguments,2);return Jd(function(){a.apply(q,c)},b)}function Qc(a,b){if(!Db(a))throw new wd;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):u+arguments[0];return Hd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Rc(a){var b,c;if(!Db(a))throw new wd;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Sc(a){return gb(a,16,o(arguments,1))}function Tc(a){return gb(a,32,null,o(arguments,1))}function Uc(a,b,c){var d=!0,e=!0;if(!Db(a))throw new wd;return c===!1?d=!1:Eb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),V.leading=d,V.maxWait=b,V.trailing=e,Nc(a,b,V)}function Vc(a,b){return gb(b,16,[a])}function Wc(a){return function(){return a}}function Xc(a,b,c){var d=typeof a;if(null==a||"function"==d)return w(a,b,c);if("object"!=d)return bd(a);var e=_d(a),f=e[0],g=a[f];return 1!=e.length||g!==g||Eb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=ab(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function Yc(a){return null==a?"":vd(a).replace(de,hb)}function Zc(a){return a}function $c(a,d,e){var f=!0,g=d&&ub(d);d&&(e||g.length)||(null==e&&(e=d),h=c,d=a,a=b,g=ub(d)),e===!1?f=!1:Eb(e)&&"chain"in e&&(f=e.chain);var h=a,i=Db(h);Yb(g,function(b){var c=a[b]=d[b];i&&(h.prototype[b]=function(){var b=this.__chain__,d=this.__wrapped__,e=[d];Id.apply(e,arguments);var g=c.apply(a,e);if(f||b){if(d===g&&Eb(g))return this;g=new h(g),g.__chain__=b}return g})})}function _c(){return a._=zd,this}function ad(){}function bd(a){return function(b){return b[a]}}function cd(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=Vd();return Td(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return db(a,b)}function dd(a,b){if(a){var c=a[b];return Db(c)?a[b]():c}}function ed(a,c,d){var e=b.templateSettings;a=vd(a||""),d=fe({},d,e);var f,g=fe({},d.imports,e.imports),h=_d(g),i=Rb(g),k=0,l=d.interpolate||G,m="__p += '",n=ud((d.escape||G).source+"|"+l.source+"|"+(l===E?B:G).source+"|"+(d.evaluate||G).source+"|$","g");a.replace(n,function(b,c,d,e,g,h){return d||(d=e),m+=a.slice(k,h).replace(I,j),c&&(m+="' +\n__e("+c+") +\n'"),g&&(f=!0,m+="';\n"+g+";\n__p += '"),d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=h+b.length,b}),m+="';\n";var o=d.variable,p=o;p||(o="obj",m="with ("+o+") {\n"+m+"\n}\n"),m=(f?m.replace(y,""):m).replace(z,"$1").replace(A,"$1;"),m="function("+o+") {\n"+(p?"":o+" || ("+o+" = {});\n")+"var __t, __p = '', __e = _.escape"+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var r="\n/*\n//# sourceURL="+(d.sourceURL||"/lodash/template/source["+K++ +"]")+"\n*/";try{var s=qd(h,"return "+m+r).apply(q,i)}catch(t){throw t.source=m,t}return c?s(c):(s.source=m,s)}function fd(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=nd(a);for(b=w(b,c,1);++d<a;)e[d]=b(d);return e}function gd(a){return null==a?"":vd(a).replace(ce,lb)}function hd(a){var b=++t;return vd(null==a?"":a)+b}function id(a){return a=new c(a),a.__chain__=!0,a}function jd(a,b){return b(a),a}function kd(){return this.__chain__=!0,this}function ld(){return vd(this.__wrapped__)}function md(){return this.__wrapped__}a=a?cb.defaults(Z.Object(),a,cb.pick(Z,J)):Z;var nd=a.Array,od=a.Boolean,pd=a.Date,qd=a.Function,rd=a.Math,sd=a.Number,td=a.Object,ud=a.RegExp,vd=a.String,wd=a.TypeError,xd=[],yd=td.prototype,zd=a._,Ad=yd.toString,Bd=ud("^"+vd(Ad).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Cd=rd.ceil,Dd=a.clearTimeout,Ed=rd.floor,Fd=qd.prototype.toString,Gd=jb(Gd=td.getPrototypeOf)&&Gd,Hd=yd.hasOwnProperty,Id=xd.push,Jd=a.setTimeout,Kd=xd.splice,Ld=xd.unshift,Md=function(){try{var a={},b=jb(b=td.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Nd=jb(Nd=td.create)&&Nd,Od=jb(Od=nd.isArray)&&Od,Pd=a.isFinite,Qd=a.isNaN,Rd=jb(Rd=td.keys)&&Rd,Sd=rd.max,Td=rd.min,Ud=a.parseInt,Vd=rd.random,Wd={};Wd[M]=nd,Wd[N]=od,Wd[O]=pd,Wd[P]=qd,Wd[R]=td,Wd[Q]=sd,Wd[S]=ud,Wd[T]=vd,c.prototype=b.prototype;var Xd=b.support={};Xd.funcDecomp=!jb(a.WinRTError)&&H.test(p),Xd.funcNames="string"==typeof qd.name,b.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:E,variable:"",imports:{_:b}},Nd||(s=function(){function b(){}return function(c){if(Eb(c)){b.prototype=c;var d=new b;b.prototype=null}return d||a.Object()}}());var Yd=Md?function(a,b){W.value=b,Md(a,"__bindData__",W)}:ad,Zd=Od||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ad.call(a)==M||!1},$d=function(a){var b,c=a,d=[];if(!c)return d;if(!X[typeof a])return d;for(b in c)Hd.call(c,b)&&d.push(b);return d},_d=Rd?function(a){return Eb(a)?Rd(a):[]}:$d,ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},be=wb(ae),ce=ud("("+_d(be).join("|")+")","g"),de=ud("["+_d(ae).join("")+"]","g"),ee=function(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=w(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&X[typeof e])for(var k=-1,l=X[typeof e]&&_d(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},fe=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&X[typeof e])for(var j=-1,k=X[typeof e]&&_d(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f},ge=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!X[typeof e])return f;b=b&&"undefined"==typeof c?b:w(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return f;return f},he=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!X[typeof e])return f;b=b&&"undefined"==typeof c?b:w(b,c,3);for(var g=-1,h=X[typeof e]&&_d(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},ie=Gd?function(a){if(!a||Ad.call(a)!=R)return!1;var b=a.valueOf,c=jb(b)&&(c=Gd(b))&&Gd(c);return c?a==c||Gd(a)==c:kb(a)}:kb,je=fb(function(a,b,c){Hd.call(a,c)?a[c]++:a[c]=1}),ke=fb(function(a,b,c){(Hd.call(a,c)?a[c]:a[c]=[]).push(b)}),le=fb(function(a,b,c){a[c]=b}),me=_b,ne=Vb,oe=jb(oe=pd.now)&&oe||function(){return(new pd).getTime()},pe=8==Ud(x+"08")?Ud:function(a,b){return Ud(Jb(a)?a.replace(F,""):a,b||0)};return b.after=Hc,b.assign=ee,b.at=Sb,b.bind=Ic,b.bindAll=Jc,b.bindKey=Kc,b.chain=id,b.compact=lc,b.compose=Lc,b.constant=Wc,b.countBy=je,b.create=pb,b.createCallback=Xc,b.curry=Mc,b.debounce=Nc,b.defaults=fe,b.defer=Oc,b.delay=Pc,b.difference=mc,b.filter=Vb,b.flatten=qc,b.forEach=Yb,b.forEachRight=Zb,b.forIn=ge,b.forInRight=sb,b.forOwn=he,b.forOwnRight=tb,b.functions=ub,b.groupBy=ke,b.indexBy=le,b.initial=sc,b.intersection=tc,b.invert=wb,b.invoke=$b,b.keys=_d,b.map=_b,b.mapValues=Lb,b.max=ac,b.memoize=Qc,b.merge=Mb,b.min=bc,b.omit=Nb,b.once=Rc,b.pairs=Ob,b.partial=Sc,b.partialRight=Tc,b.pick=Pb,b.pluck=me,b.property=bd,b.pull=wc,b.range=xc,b.reject=ec,b.remove=yc,b.rest=zc,b.shuffle=gc,b.sortBy=jc,b.tap=jd,b.throttle=Uc,b.times=fd,b.toArray=kc,b.transform=Qb,b.union=Bc,b.uniq=Cc,b.values=Rb,b.where=ne,b.without=Dc,b.wrap=Vc,b.xor=Ec,b.zip=Fc,b.zipObject=Gc,b.collect=_b,b.drop=zc,b.each=Yb,b.eachRight=Zb,b.extend=ee,b.methods=ub,b.object=Gc,b.select=Vb,b.tail=zc,b.unique=Cc,b.unzip=Fc,$c(b),b.clone=nb,b.cloneDeep=ob,b.contains=Tb,b.escape=Yc,b.every=Ub,b.find=Wb,b.findIndex=nc,b.findKey=qb,b.findLast=Xb,b.findLastIndex=oc,b.findLastKey=rb,b.has=vb,b.identity=Zc,b.indexOf=rc,b.isArguments=mb,b.isArray=Zd,b.isBoolean=xb,b.isDate=yb,b.isElement=zb,b.isEmpty=Ab,b.isEqual=Bb,b.isFinite=Cb,b.isFunction=Db,b.isNaN=Fb,b.isNull=Gb,b.isNumber=Hb,b.isObject=Eb,b.isPlainObject=ie,b.isRegExp=Ib,b.isString=Jb,b.isUndefined=Kb,b.lastIndexOf=vc,b.mixin=$c,b.noConflict=_c,b.noop=ad,b.now=oe,b.parseInt=pe,b.random=cd,b.reduce=cc,b.reduceRight=dc,b.result=dd,b.runInContext=p,b.size=hc,b.some=ic,b.sortedIndex=Ac,b.template=ed,b.unescape=gd,b.uniqueId=hd,b.all=Ub,b.any=ic,b.detect=Wb,b.findWhere=Wb,b.foldl=cc,b.foldr=dc,b.include=Tb,b.inject=cc,$c(function(){var a={};return he(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.first=pc,b.last=uc,b.sample=fc,b.take=pc,b.head=pc,he(b,function(a,d){var e="sample"!==d;b.prototype[d]||(b.prototype[d]=function(b,d){var f=this.__chain__,g=a(this.__wrapped__,b,d);return f||null!=b&&(!d||e&&"function"==typeof b)?new c(g,f):g})}),b.VERSION="2.4.1",b.prototype.chain=kd,b.prototype.toString=ld,b.prototype.value=md,b.prototype.valueOf=md,Yb(["join","pop","shift"],function(a){var d=xd[a];b.prototype[a]=function(){var a=this.__chain__,b=d.apply(this.__wrapped__,arguments);return a?new c(b,a):b}}),Yb(["push","reverse","sort","unshift"],function(a){var c=xd[a];b.prototype[a]=function(){return c.apply(this.__wrapped__,arguments),this}}),Yb(["concat","slice","splice"],function(a){var d=xd[a];b.prototype[a]=function(){return new c(d.apply(this.__wrapped__,arguments),this.__chain__)}}),b}var q,r=[],s=[],t=0,u=+new Date+"",v=75,w=40,x=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",y=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,A=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,D=/^\s*function[ \n\r\t]+\w/,E=/<%=([\s\S]+?)%>/g,F=RegExp("^["+x+"]*0+(?=.$)"),G=/($^)/,H=/\bthis\b/,I=/['\n\r\t\u2028\u2029\\]/g,J=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],K=0,L="[object Arguments]",M="[object Array]",N="[object Boolean]",O="[object Date]",P="[object Function]",Q="[object Number]",R="[object Object]",S="[object RegExp]",T="[object String]",U={};U[P]=!1,U[L]=U[M]=U[N]=U[O]=U[Q]=U[R]=U[S]=U[T]=!0;var V={leading:!1,maxWait:0,trailing:!1},W={configurable:!1,enumerable:!1,value:null,writable:!1},X={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Z=X[typeof window]&&window||this,$=X[typeof c]&&c&&!c.nodeType&&c,_=X[typeof b]&&b&&!b.nodeType&&b,ab=_&&_.exports===$&&$,bb=X[typeof a]&&a;!bb||bb.global!==bb&&bb.window!==bb||(Z=bb);var cb=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=cb,define(function(){return cb})):$&&_?ab?(_.exports=cb)._=cb:$._=cb:Z._=cb}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],457:[function(a,b){(function(c){(function(d){function e(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function f(a,b){return Cb.call(a,b)}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function h(a){wb.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function i(a,b){var c=!0;return p(function(){return c&&(h(a),c=!1),b.apply(this,arguments)},b)}function j(a,b){tc[a]||(h(b),tc[a]=!0)}function k(a,b){return function(c){return s(a.call(this,c),b)}}function l(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function m(){}function n(a,b){b!==!1&&I(a),q(this,a),this._d=new Date(+a._d)}function o(a){var b=B(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=wb.localeData(),this._bubble()}function p(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function q(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Lb.length>0)for(c in Lb)d=Lb[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function r(a){return 0>a?Math.ceil(a):Math.floor(a)}function s(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function t(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function u(a,b){var c;return b=N(b,a),a.isBefore(b)?c=t(a,b):(c=t(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function v(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(j(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=wb.duration(c,d),w(this,e,a),this}}function w(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&qb(a,"Date",pb(a,"Date")+f*c),g&&ob(a,pb(a,"Month")+g*c),d&&wb.updateOffset(a,f||g)}function x(a){return"[object Array]"===Object.prototype.toString.call(a)}function y(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function z(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&D(a[d])!==D(b[d]))&&g++;return g+f}function A(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=mc[a]||nc[b]||b}return a}function B(a){var b,c,d={};for(c in a)f(a,c)&&(b=A(c),b&&(d[b]=a[c]));return d}function C(a){var b,c;if(0===a.indexOf("week"))b=7,c="day";else{if(0!==a.indexOf("month"))return;b=12,c="month"}wb[a]=function(e,f){var g,h,i=wb._locale[a],j=[];if("number"==typeof e&&(f=e,e=d),h=function(a){var b=wb().utc().set(c,a);return i.call(wb._locale,b,e||"")},null!=f)return h(f);for(g=0;b>g;g++)j.push(h(g));return j}}function D(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function E(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function F(a,b,c){return kb(wb([a,11,31+b-c]),b,c).week}function G(a){return H(a)?366:365}function H(a){return a%4===0&&a%100!==0||a%400===0}function I(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[Eb]<0||a._a[Eb]>11?Eb:a._a[Fb]<1||a._a[Fb]>E(a._a[Db],a._a[Eb])?Fb:a._a[Gb]<0||a._a[Gb]>24||24===a._a[Gb]&&(0!==a._a[Hb]||0!==a._a[Ib]||0!==a._a[Jb])?Gb:a._a[Hb]<0||a._a[Hb]>59?Hb:a._a[Ib]<0||a._a[Ib]>59?Ib:a._a[Jb]<0||a._a[Jb]>999?Jb:-1,a._pf._overflowDayOfYear&&(Db>b||b>Fb)&&(b=Fb),a._pf.overflow=b)}function J(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length&&a._pf.bigHour===d)),a._isValid}function K(a){return a?a.toLowerCase().replace("_","-"):a}function L(a){for(var b,c,d,e,f=0;f<a.length;){for(e=K(a[f]).split("-"),b=e.length,c=K(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=M(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&z(e,c,!0)>=b-1)break;b--}f++}return null}function M(b){var c=null;if(!Kb[b]&&Mb)try{c=wb.locale(),a("./locale/"+b),wb.locale(c)}catch(d){}return Kb[b]}function N(a,b){var c,d;return b._isUTC?(c=b.clone(),d=(wb.isMoment(a)||y(a)?+a:+wb(a))-+c,c._d.setTime(+c._d+d),wb.updateOffset(c,!1),c):wb(a).local()}function O(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function P(a){var b,c,d=a.match(Qb);for(b=0,c=d.length;c>b;b++)d[b]=sc[d[b]]?sc[d[b]]:O(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function Q(a,b){return a.isValid()?(b=R(b,a.localeData()),oc[b]||(oc[b]=P(b)),oc[b](a)):a.localeData().invalidDate()}function R(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Rb.lastIndex=0;d>=0&&Rb.test(a);)a=a.replace(Rb,c),Rb.lastIndex=0,d-=1;return a}function S(a,b){var c,d=b._strict;switch(a){case"Q":return ac;case"DDDD":return cc;case"YYYY":case"GGGG":case"gggg":return d?dc:Ub;case"Y":case"G":case"g":return fc;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?ec:Vb;case"S":if(d)return ac;case"SS":if(d)return bc;case"SSS":if(d)return cc;case"DDD":return Tb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Xb;case"a":case"A":return b._locale._meridiemParse;case"x":return $b;case"X":return _b;case"Z":case"ZZ":return Yb;case"T":return Zb;case"SSSS":return Wb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?bc:Sb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Sb;case"Do":return d?b._locale._ordinalParse:b._locale._ordinalParseLenient;default:return c=new RegExp(_($(a.replace("\\","")),"i"))}}function T(a){a=a||"";var b=a.match(Yb)||[],c=b[b.length-1]||[],d=(c+"").match(kc)||["-",0,0],e=+(60*d[1])+D(d[2]);return"+"===d[0]?-e:e}function U(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[Eb]=3*(D(b)-1));break;case"M":case"MM":null!=b&&(e[Eb]=D(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b,a,c._strict),null!=d?e[Eb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Fb]=D(b));break;case"Do":null!=b&&(e[Fb]=D(parseInt(b.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=D(b));break;case"YY":e[Db]=wb.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[Db]=D(b);break;case"a":case"A":c._isPm=c._locale.isPM(b);break;case"h":case"hh":c._pf.bigHour=!0;case"H":case"HH":e[Gb]=D(b);break;case"m":case"mm":e[Hb]=D(b);break;case"s":case"ss":e[Ib]=D(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Jb]=D(1e3*("0."+b));break;case"x":c._d=new Date(D(b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=T(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=D(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=wb.parseTwoDigitYear(b)}}function V(a){var b,c,d,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(g=1,h=4,c=e(b.GG,a._a[Db],kb(wb(),1,4).year),d=e(b.W,1),f=e(b.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,c=e(b.gg,a._a[Db],kb(wb(),g,h).year),d=e(b.w,1),null!=b.d?(f=b.d,g>f&&++d):f=null!=b.e?b.e+g:g),i=lb(c,d,f,h,g),a._a[Db]=i.year,a._dayOfYear=i.dayOfYear}function W(a){var b,c,d,f,g=[];if(!a._d){for(d=Y(a),a._w&&null==a._a[Fb]&&null==a._a[Eb]&&V(a),a._dayOfYear&&(f=e(a._a[Db],d[Db]),a._dayOfYear>G(f)&&(a._pf._overflowDayOfYear=!0),c=gb(f,0,a._dayOfYear),a._a[Eb]=c.getUTCMonth(),a._a[Fb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=g[b]=d[b];for(;7>b;b++)a._a[b]=g[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[Gb]&&0===a._a[Hb]&&0===a._a[Ib]&&0===a._a[Jb]&&(a._nextDay=!0,a._a[Gb]=0),a._d=(a._useUTC?gb:fb).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm),a._nextDay&&(a._a[Gb]=24)}}function X(a){var b;a._d||(b=B(a._i),a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],W(a))}function Y(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function Z(a){if(a._f===wb.ISO_8601)return void bb(a);a._a=[],a._pf.empty=!0;var b,c,e,f,g,h=""+a._i,i=h.length,j=0;for(e=R(a._f,a._locale).match(Qb)||[],b=0;b<e.length;b++)f=e[b],c=(h.match(S(f,a))||[])[0],c&&(g=h.substr(0,h.indexOf(c)),g.length>0&&a._pf.unusedInput.push(g),h=h.slice(h.indexOf(c)+c.length),j+=c.length),sc[f]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(f),U(f,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(f);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._pf.bigHour===!0&&a._a[Gb]<=12&&(a._pf.bigHour=d),a._isPm&&a._a[Gb]<12&&(a._a[Gb]+=12),a._isPm===!1&&12===a._a[Gb]&&(a._a[Gb]=0),W(a),I(a)}function $(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function _(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ab(a){var b,c,d,e,f;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(e=0;e<a._f.length;e++)f=0,b=q({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=g(),b._f=a._f[e],Z(b),J(b)&&(f+=b._pf.charsLeftOver,f+=10*b._pf.unusedTokens.length,b._pf.score=f,(null==d||d>f)&&(d=f,c=b));p(a,c||b)}function bb(a){var b,c,d=a._i,e=gc.exec(d);if(e){for(a._pf.iso=!0,b=0,c=ic.length;c>b;b++)if(ic[b][1].exec(d)){a._f=ic[b][0]+(e[6]||" ");break}for(b=0,c=jc.length;c>b;b++)if(jc[b][1].exec(d)){a._f+=jc[b][0];break}d.match(Yb)&&(a._f+="Z"),Z(a)}else a._isValid=!1}function cb(a){bb(a),a._isValid===!1&&(delete a._isValid,wb.createFromInputFallback(a))}function db(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function eb(a){var b,c=a._i;c===d?a._d=new Date:y(c)?a._d=new Date(+c):null!==(b=Nb.exec(c))?a._d=new Date(+b[1]):"string"==typeof c?cb(a):x(c)?(a._a=db(c.slice(0),function(a){return parseInt(a,10)}),W(a)):"object"==typeof c?X(a):"number"==typeof c?a._d=new Date(c):wb.createFromInputFallback(a)}function fb(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function gb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function hb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function ib(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function jb(a,b,c){var d=wb.duration(a).abs(),e=Bb(d.as("s")),f=Bb(d.as("m")),g=Bb(d.as("h")),h=Bb(d.as("d")),i=Bb(d.as("M")),j=Bb(d.as("y")),k=e<pc.s&&["s",e]||1===f&&["m"]||f<pc.m&&["mm",f]||1===g&&["h"]||g<pc.h&&["hh",g]||1===h&&["d"]||h<pc.d&&["dd",h]||1===i&&["M"]||i<pc.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,ib.apply({},k)}function kb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=wb(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function lb(a,b,c,d,e){var f,g,h=gb(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:G(a-1)+g}}function mb(a){var b,c=a._i,e=a._f;return a._locale=a._locale||wb.localeData(a._l),null===c||e===d&&""===c?wb.invalid({nullInput:!0}):("string"==typeof c&&(a._i=c=a._locale.preparse(c)),wb.isMoment(c)?new n(c,!0):(e?x(e)?ab(a):Z(a):eb(a),b=new n(a),b._nextDay&&(b.add(1,"d"),b._nextDay=d),b))}function nb(a,b){var c,d;if(1===b.length&&x(b[0])&&(b=b[0]),!b.length)return wb();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function ob(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),E(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function pb(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function qb(a,b,c){return"Month"===b?ob(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function rb(a,b){return function(c){return null!=c?(qb(this,a,c),wb.updateOffset(this,b),this):pb(this,a)}}function sb(a){return 400*a/146097}function tb(a){return 146097*a/400}function ub(a){wb.duration.fn[a]=function(){return this._data[a]}}function vb(a){"undefined"==typeof ender&&(xb=Ab.moment,Ab.moment=a?i("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",wb):wb)}for(var wb,xb,yb,zb="2.8.4",Ab="undefined"!=typeof c?c:this,Bb=Math.round,Cb=Object.prototype.hasOwnProperty,Db=0,Eb=1,Fb=2,Gb=3,Hb=4,Ib=5,Jb=6,Kb={},Lb=[],Mb="undefined"!=typeof b&&b&&b.exports,Nb=/^\/?Date\((\-?\d+)/i,Ob=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Pb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Qb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Rb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Sb=/\d\d?/,Tb=/\d{1,3}/,Ub=/\d{1,4}/,Vb=/[+\-]?\d{1,6}/,Wb=/\d+/,Xb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Yb=/Z|[\+\-]\d\d:?\d\d/gi,Zb=/T/i,$b=/[\+\-]?\d+/,_b=/[\+\-]?\d+(\.\d{1,3})?/,ac=/\d/,bc=/\d\d/,cc=/\d{3}/,dc=/\d{4}/,ec=/[+-]?\d{6}/,fc=/[+-]?\d+/,gc=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,hc="YYYY-MM-DDTHH:mm:ssZ",ic=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],jc=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],kc=/([\+\-]|\d\d)/gi,lc=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),mc={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},nc={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},oc={},pc={s:45,m:45,h:22,d:26,M:11},qc="DDD w W M D d".split(" "),rc="M D H h m s w W".split(" "),sc={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return s(this.year()%100,2)},YYYY:function(){return s(this.year(),4)},YYYYY:function(){return s(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+s(Math.abs(a),6)},gg:function(){return s(this.weekYear()%100,2)},gggg:function(){return s(this.weekYear(),4)},ggggg:function(){return s(this.weekYear(),5)},GG:function(){return s(this.isoWeekYear()%100,2)},GGGG:function(){return s(this.isoWeekYear(),4)},GGGGG:function(){return s(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return D(this.milliseconds()/100)},SS:function(){return s(D(this.milliseconds()/10),2)},SSS:function(){return s(this.milliseconds(),3)},SSSS:function(){return s(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+s(D(a/60),2)+":"+s(D(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+s(D(a/60),2)+s(D(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},tc={},uc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];qc.length;)yb=qc.pop(),sc[yb+"o"]=l(sc[yb],yb);for(;rc.length;)yb=rc.pop(),sc[yb+yb]=k(sc[yb],2);sc.DDDD=k(sc.DDD,3),p(m.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=wb.utc([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=wb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.apply(b,[c]):d},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)
},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(a){return a},postformat:function(a){return a},week:function(a){return kb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),wb=function(a,b,c,e){var f;return"boolean"==typeof c&&(e=c,c=d),f={},f._isAMomentObject=!0,f._i=a,f._f=b,f._l=c,f._strict=e,f._isUTC=!1,f._pf=g(),mb(f)},wb.suppressDeprecationWarnings=!1,wb.createFromInputFallback=i("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),wb.min=function(){var a=[].slice.call(arguments,0);return nb("isBefore",a)},wb.max=function(){var a=[].slice.call(arguments,0);return nb("isAfter",a)},wb.utc=function(a,b,c,e){var f;return"boolean"==typeof c&&(e=c,c=d),f={},f._isAMomentObject=!0,f._useUTC=!0,f._isUTC=!0,f._l=c,f._i=a,f._f=b,f._strict=e,f._pf=g(),mb(f).utc()},wb.unix=function(a){return wb(1e3*a)},wb.duration=function(a,b){var c,d,e,g,h=a,i=null;return wb.isDuration(a)?h={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(h={},b?h[b]=a:h.milliseconds=a):(i=Ob.exec(a))?(c="-"===i[1]?-1:1,h={y:0,d:D(i[Fb])*c,h:D(i[Gb])*c,m:D(i[Hb])*c,s:D(i[Ib])*c,ms:D(i[Jb])*c}):(i=Pb.exec(a))?(c="-"===i[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},h={y:e(i[2]),M:e(i[3]),d:e(i[4]),h:e(i[5]),m:e(i[6]),s:e(i[7]),w:e(i[8])}):"object"==typeof h&&("from"in h||"to"in h)&&(g=u(wb(h.from),wb(h.to)),h={},h.ms=g.milliseconds,h.M=g.months),d=new o(h),wb.isDuration(a)&&f(a,"_locale")&&(d._locale=a._locale),d},wb.version=zb,wb.defaultFormat=hc,wb.ISO_8601=function(){},wb.momentProperties=Lb,wb.updateOffset=function(){},wb.relativeTimeThreshold=function(a,b){return pc[a]===d?!1:b===d?pc[a]:(pc[a]=b,!0)},wb.lang=i("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return wb.locale(a,b)}),wb.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?wb.defineLocale(a,b):wb.localeData(a),c&&(wb.duration._locale=wb._locale=c)),wb._locale._abbr},wb.defineLocale=function(a,b){return null!==b?(b.abbr=a,Kb[a]||(Kb[a]=new m),Kb[a].set(b),wb.locale(a),Kb[a]):(delete Kb[a],null)},wb.langData=i("moment.langData is deprecated. Use moment.localeData instead.",function(a){return wb.localeData(a)}),wb.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return wb._locale;if(!x(a)){if(b=M(a))return b;a=[a]}return L(a)},wb.isMoment=function(a){return a instanceof n||null!=a&&f(a,"_isAMomentObject")},wb.isDuration=function(a){return a instanceof o};for(yb=uc.length-1;yb>=0;--yb)C(uc[yb]);wb.normalizeUnits=function(a){return A(a)},wb.invalid=function(a){var b=wb.utc(0/0);return null!=a?p(b._pf,a):b._pf.userInvalidated=!0,b},wb.parseZone=function(){return wb.apply(null,arguments).parseZone()},wb.parseTwoDigitYear=function(a){return D(a)+(D(a)>68?1900:2e3)},p(wb.fn=n.prototype,{clone:function(){return wb(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=wb(this).utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():Q(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Q(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return J(this)},isDSTShifted:function(){return this._a?this.isValid()&&z(this._a,(this._isUTC?wb.utc(this._a):wb(this._a)).toArray())>0:!1},parsingFlags:function(){return p({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._dateTzOffset(),"m")),this},format:function(a){var b=Q(this,a||wb.defaultFormat);return this.localeData().postformat(b)},add:v(1,"add"),subtract:v(-1,"subtract"),diff:function(a,b,c){var d,e,f,g=N(a,this),h=6e4*(this.zone()-g.zone());return b=A(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+g.daysInMonth()),e=12*(this.year()-g.year())+(this.month()-g.month()),f=this-wb(this).startOf("month")-(g-wb(g).startOf("month")),f-=6e4*(this.zone()-wb(this).startOf("month").zone()-(g.zone()-wb(g).startOf("month").zone())),e+=f/d,"year"===b&&(e/=12)):(d=this-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-h)/864e5:"week"===b?(d-h)/6048e5:d),c?e:r(e)},from:function(a,b){return wb.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(wb(),a)},calendar:function(a){var b=a||wb(),c=N(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,wb(b)))},isLeapYear:function(){return H(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=hb(a,this.localeData()),this.add(a-b,"d")):b},month:rb("Month",!0),startOf:function(a){switch(a=A(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=A(a),a===d||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},isAfter:function(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=wb.isMoment(a)?a:wb(a),+this>+a):(c=wb.isMoment(a)?+a:+wb(a),c<+this.clone().startOf(b))},isBefore:function(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=wb.isMoment(a)?a:wb(a),+a>+this):(c=wb.isMoment(a)?+a:+wb(a),+this.clone().endOf(b)<c)},isSame:function(a,b){var c;return b=A(b||"millisecond"),"millisecond"===b?(a=wb.isMoment(a)?a:wb(a),+this===+a):(c=+wb(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))},min:i("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=wb.apply(null,arguments),this>a?this:a}),max:i("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=wb.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,d=this._offset||0;return null==a?this._isUTC?d:this._dateTzOffset():("string"==typeof a&&(a=T(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._dateTzOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,"m"),d!==a&&(!b||this._changeInProgress?w(this,wb.duration(d-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,wb.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?wb(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return E(this.year(),this.month())},dayOfYear:function(a){var b=Bb((wb(this).startOf("day")-wb(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=kb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=kb(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=kb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return F(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return F(this.year(),a.dow,a.doy)},get:function(a){return a=A(a),this[a]()},set:function(a,b){return a=A(a),"function"==typeof this[a]&&this[a](b),this},locale:function(a){var b;return a===d?this._locale._abbr:(b=wb.localeData(a),null!=b&&(this._locale=b),this)},lang:i("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return a===d?this.localeData():this.locale(a)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),wb.fn.millisecond=wb.fn.milliseconds=rb("Milliseconds",!1),wb.fn.second=wb.fn.seconds=rb("Seconds",!1),wb.fn.minute=wb.fn.minutes=rb("Minutes",!1),wb.fn.hour=wb.fn.hours=rb("Hours",!0),wb.fn.date=rb("Date",!0),wb.fn.dates=i("dates accessor is deprecated. Use date instead.",rb("Date",!0)),wb.fn.year=rb("FullYear",!0),wb.fn.years=i("years accessor is deprecated. Use year instead.",rb("FullYear",!0)),wb.fn.days=wb.fn.day,wb.fn.months=wb.fn.month,wb.fn.weeks=wb.fn.week,wb.fn.isoWeeks=wb.fn.isoWeek,wb.fn.quarters=wb.fn.quarter,wb.fn.toJSON=wb.fn.toISOString,p(wb.duration.fn=o.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=r(d/1e3),g.seconds=a%60,b=r(a/60),g.minutes=b%60,c=r(b/60),g.hours=c%24,e+=r(c/24),h=r(sb(e)),e-=r(tb(h)),f+=r(e/30),e%=30,h+=r(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return r(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*D(this._months/12)},humanize:function(a){var b=jb(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=wb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=wb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=A(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=A(a),"month"===a||"year"===a)return b=this._days+this._milliseconds/864e5,c=this._months+12*sb(b),"month"===a?c:c/12;switch(b=this._days+Math.round(tb(this._months/12)),a){case"week":return b/7+this._milliseconds/6048e5;case"day":return b+this._milliseconds/864e5;case"hour":return 24*b+this._milliseconds/36e5;case"minute":return 24*b*60+this._milliseconds/6e4;case"second":return 24*b*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*b*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+a)}},lang:wb.fn.lang,locale:wb.fn.locale,toIsoString:i("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale}}),wb.duration.fn.toString=wb.duration.fn.toISOString;for(yb in lc)f(lc,yb)&&ub(yb.toLowerCase());wb.duration.fn.asMilliseconds=function(){return this.as("ms")},wb.duration.fn.asSeconds=function(){return this.as("s")},wb.duration.fn.asMinutes=function(){return this.as("m")},wb.duration.fn.asHours=function(){return this.as("h")},wb.duration.fn.asDays=function(){return this.as("d")},wb.duration.fn.asWeeks=function(){return this.as("weeks")},wb.duration.fn.asMonths=function(){return this.as("M")},wb.duration.fn.asYears=function(){return this.as("y")},wb.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===D(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Mb?b.exports=wb:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(Ab.moment=xb),wb}),vb(!0)):vb()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],458:[function(a,b,c){(function(){var a=this,d=a._,e=Array.prototype,f=Object.prototype,g=Function.prototype,h=e.push,i=e.slice,j=e.concat,k=f.toString,l=f.hasOwnProperty,m=Array.isArray,n=Object.keys,o=g.bind,p=function(a){return a instanceof p?a:this instanceof p?void(this._wrapped=a):new p(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=p),c._=p):a._=p,p.VERSION="1.7.0";var q=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}};p.iteratee=function(a,b,c){return null==a?p.identity:p.isFunction(a)?q(a,b,c):p.isObject(a)?p.matches(a):p.property(a)},p.each=p.forEach=function(a,b,c){if(null==a)return a;b=q(b,c);var d,e=a.length;if(e===+e)for(d=0;e>d;d++)b(a[d],d,a);else{var f=p.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},p.map=p.collect=function(a,b,c){if(null==a)return[];b=p.iteratee(b,c);for(var d,e=a.length!==+a.length&&p.keys(a),f=(e||a).length,g=Array(f),h=0;f>h;h++)d=e?e[h]:h,g[h]=b(a[d],d,a);return g};var r="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(a,b,c,d){null==a&&(a=[]),b=q(b,d,4);var e,f=a.length!==+a.length&&p.keys(a),g=(f||a).length,h=0;if(arguments.length<3){if(!g)throw new TypeError(r);c=a[f?f[h++]:h++]}for(;g>h;h++)e=f?f[h]:h,c=b(c,a[e],e,a);return c},p.reduceRight=p.foldr=function(a,b,c,d){null==a&&(a=[]),b=q(b,d,4);var e,f=a.length!==+a.length&&p.keys(a),g=(f||a).length;if(arguments.length<3){if(!g)throw new TypeError(r);c=a[f?f[--g]:--g]}for(;g--;)e=f?f[g]:g,c=b(c,a[e],e,a);return c},p.find=p.detect=function(a,b,c){var d;return b=p.iteratee(b,c),p.some(a,function(a,c,e){return b(a,c,e)?(d=a,!0):void 0}),d},p.filter=p.select=function(a,b,c){var d=[];return null==a?d:(b=p.iteratee(b,c),p.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d)},p.reject=function(a,b,c){return p.filter(a,p.negate(p.iteratee(b)),c)},p.every=p.all=function(a,b,c){if(null==a)return!0;b=p.iteratee(b,c);var d,e,f=a.length!==+a.length&&p.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,!b(a[e],e,a))return!1;return!0},p.some=p.any=function(a,b,c){if(null==a)return!1;b=p.iteratee(b,c);var d,e,f=a.length!==+a.length&&p.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,b(a[e],e,a))return!0;return!1},p.contains=p.include=function(a,b){return null==a?!1:(a.length!==+a.length&&(a=p.values(a)),p.indexOf(a,b)>=0)},p.invoke=function(a,b){var c=i.call(arguments,2),d=p.isFunction(b);return p.map(a,function(a){return(d?b:a[b]).apply(a,c)})},p.pluck=function(a,b){return p.map(a,p.property(b))},p.where=function(a,b){return p.filter(a,p.matches(b))},p.findWhere=function(a,b){return p.find(a,p.matches(b))},p.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=a.length===+a.length?a:p.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=p.iteratee(b,c),p.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},p.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=a.length===+a.length?a:p.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=p.iteratee(b,c),p.each(a,function(a,c,d){e=b(a,c,d),(g>e||1/0===e&&1/0===f)&&(f=a,g=e)});return f},p.shuffle=function(a){for(var b,c=a&&a.length===+a.length?a:p.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=p.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},p.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=p.values(a)),a[p.random(a.length-1)]):p.shuffle(a).slice(0,Math.max(0,b))},p.sortBy=function(a,b,c){return b=p.iteratee(b,c),p.pluck(p.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var s=function(a){return function(b,c,d){var e={};return c=p.iteratee(c,d),p.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};p.groupBy=s(function(a,b,c){p.has(a,c)?a[c].push(b):a[c]=[b]}),p.indexBy=s(function(a,b,c){a[c]=b}),p.countBy=s(function(a,b,c){p.has(a,c)?a[c]++:a[c]=1}),p.sortedIndex=function(a,b,c,d){c=p.iteratee(c,d,1);for(var e=c(b),f=0,g=a.length;g>f;){var h=f+g>>>1;c(a[h])<e?f=h+1:g=h}return f},p.toArray=function(a){return a?p.isArray(a)?i.call(a):a.length===+a.length?p.map(a,p.identity):p.values(a):[]},p.size=function(a){return null==a?0:a.length===+a.length?a.length:p.keys(a).length},p.partition=function(a,b,c){b=p.iteratee(b,c);var d=[],e=[];return p.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},p.first=p.head=p.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:i.call(a,0,b)},p.initial=function(a,b,c){return i.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},p.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:i.call(a,Math.max(a.length-b,0))},p.rest=p.tail=p.drop=function(a,b,c){return i.call(a,null==b||c?1:b)},p.compact=function(a){return p.filter(a,p.identity)};var t=function(a,b,c,d){if(b&&p.every(a,p.isArray))return j.apply(d,a);for(var e=0,f=a.length;f>e;e++){var g=a[e];p.isArray(g)||p.isArguments(g)?b?h.apply(d,g):t(g,b,c,d):c||d.push(g)}return d};p.flatten=function(a,b){return t(a,b,!1,[])},p.without=function(a){return p.difference(a,i.call(arguments,1))},p.uniq=p.unique=function(a,b,c,d){if(null==a)return[];p.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=p.iteratee(c,d));for(var e=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g];if(b)g&&f===i||e.push(i),f=i;else if(c){var j=c(i,g,a);p.indexOf(f,j)<0&&(f.push(j),e.push(i))}else p.indexOf(e,i)<0&&e.push(i)}return e},p.union=function(){return p.uniq(t(arguments,!0,!0,[]))},p.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;e>d;d++){var f=a[d];if(!p.contains(b,f)){for(var g=1;c>g&&p.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},p.difference=function(a){var b=t(i.call(arguments,1),!0,!0,[]);return p.filter(a,function(a){return!p.contains(b,a)})},p.zip=function(a){if(null==a)return[];for(var b=p.max(arguments,"length").length,c=Array(b),d=0;b>d;d++)c[d]=p.pluck(arguments,d);return c},p.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},p.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=p.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}for(;e>d;d++)if(a[d]===b)return d;return-1},p.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=a.length;for("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1));--d>=0;)if(a[d]===b)return d;return-1},p.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var u=function(){};p.bind=function(a,b){var c,d;if(o&&a.bind===o)return o.apply(a,i.call(arguments,1));if(!p.isFunction(a))throw new TypeError("Bind must be called on a function");return c=i.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(i.call(arguments)));u.prototype=a.prototype;var e=new u;u.prototype=null;var f=a.apply(e,c.concat(i.call(arguments)));return p.isObject(f)?f:e}},p.partial=function(a){var b=i.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===p&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},p.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=p.bind(a[c],a);return a},p.memoize=function(a,b){var c=function(d){var e=c.cache,f=b?b.apply(this,arguments):d;return p.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},p.delay=function(a,b){var c=i.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},p.defer=function(a){return p.delay.apply(p,[a,1].concat(i.call(arguments,1)))},p.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:p.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=p.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},p.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=p.now()-g;b>j&&j>0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=p.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},p.wrap=function(a,b){return p.partial(b,a)},p.negate=function(a){return function(){return!a.apply(this,arguments)}},p.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},p.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},p.before=function(a,b){var c;return function(){return--a>0?c=b.apply(this,arguments):b=null,c}},p.once=p.partial(p.before,2),p.keys=function(a){if(!p.isObject(a))return[];if(n)return n(a);var b=[];for(var c in a)p.has(a,c)&&b.push(c);return b},p.values=function(a){for(var b=p.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},p.pairs=function(a){for(var b=p.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},p.invert=function(a){for(var b={},c=p.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},p.functions=p.methods=function(a){var b=[];for(var c in a)p.isFunction(a[c])&&b.push(c);return b.sort()},p.extend=function(a){if(!p.isObject(a))return a;for(var b,c,d=1,e=arguments.length;e>d;d++){b=arguments[d];for(c in b)l.call(b,c)&&(a[c]=b[c])}return a},p.pick=function(a,b,c){var d,e={};if(null==a)return e;if(p.isFunction(b)){b=q(b,c);for(d in a){var f=a[d];b(f,d,a)&&(e[d]=f)}}else{var g=j.apply([],i.call(arguments,1));a=new Object(a);for(var h=0,k=g.length;k>h;h++)d=g[h],d in a&&(e[d]=a[d])}return e},p.omit=function(a,b,c){if(p.isFunction(b))b=p.negate(b);else{var d=p.map(j.apply([],i.call(arguments,1)),String);b=function(a,b){return!p.contains(d,b)}}return p.pick(a,b,c)},p.defaults=function(a){if(!p.isObject(a))return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];for(var e in d)void 0===a[e]&&(a[e]=d[e])}return a},p.clone=function(a){return p.isObject(a)?p.isArray(a)?a.slice():p.extend({},a):a},p.tap=function(a,b){return b(a),a};var v=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof p&&(a=a._wrapped),b instanceof p&&(b=b._wrapped);var e=k.call(a);if(e!==k.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]===a)return d[f]===b;var g=a.constructor,h=b.constructor;if(g!==h&&"constructor"in a&&"constructor"in b&&!(p.isFunction(g)&&g instanceof g&&p.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i,j;if("[object Array]"===e){if(i=a.length,j=i===b.length)for(;i--&&(j=v(a[i],b[i],c,d)););}else{var l,m=p.keys(a);if(i=m.length,j=p.keys(b).length===i)for(;i--&&(l=m[i],j=p.has(b,l)&&v(a[l],b[l],c,d)););}return c.pop(),d.pop(),j};p.isEqual=function(a,b){return v(a,b,[],[])},p.isEmpty=function(a){if(null==a)return!0;if(p.isArray(a)||p.isString(a)||p.isArguments(a))return 0===a.length;for(var b in a)if(p.has(a,b))return!1;return!0},p.isElement=function(a){return!(!a||1!==a.nodeType)},p.isArray=m||function(a){return"[object Array]"===k.call(a)},p.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(a){p["is"+a]=function(b){return k.call(b)==="[object "+a+"]"}}),p.isArguments(arguments)||(p.isArguments=function(a){return p.has(a,"callee")}),"function"!=typeof/./&&(p.isFunction=function(a){return"function"==typeof a||!1}),p.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},p.isNaN=function(a){return p.isNumber(a)&&a!==+a},p.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===k.call(a)},p.isNull=function(a){return null===a},p.isUndefined=function(a){return void 0===a},p.has=function(a,b){return null!=a&&l.call(a,b)},p.noConflict=function(){return a._=d,this},p.identity=function(a){return a},p.constant=function(a){return function(){return a}},p.noop=function(){},p.property=function(a){return function(b){return b[a]}},p.matches=function(a){var b=p.pairs(a),c=b.length;return function(a){if(null==a)return!c;a=new Object(a);for(var d=0;c>d;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}},p.times=function(a,b,c){var d=Array(Math.max(0,a));b=q(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},p.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},p.now=Date.now||function(){return(new Date).getTime()};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},x=p.invert(w),y=function(a){var b=function(b){return a[b]},c="(?:"+p.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};p.escape=y(w),p.unescape=y(x),p.result=function(a,b){if(null==a)return void 0;var c=a[b];return p.isFunction(c)?a[b]():c};var z=0;p.uniqueId=function(a){var b=++z+"";return a?a+b:b},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},C=/\\|'|\r|\n|\u2028|\u2029/g,D=function(a){return"\\"+B[a]};p.template=function(a,b,c){!b&&c&&(b=c),b=p.defaults({},b,p.templateSettings);var d=RegExp([(b.escape||A).source,(b.interpolate||A).source,(b.evaluate||A).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(C,D),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,p)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},p.chain=function(a){var b=p(a);return b._chain=!0,b};var E=function(a){return this._chain?p(a).chain():a};p.mixin=function(a){p.each(p.functions(a),function(b){var c=p[b]=a[b];p.prototype[b]=function(){var a=[this._wrapped];return h.apply(a,arguments),E.call(this,c.apply(p,a))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=e[a];p.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],E.call(this,c)}}),p.each(["concat","join","slice"],function(a){var b=e[a];p.prototype[a]=function(){return E.call(this,b.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}).call(this)},{}],459:[function(a,b){!function(a){function b(a){var b=a.length,d=c.type(a);return"function"===d||c.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===d||0===b||"number"==typeof b&&b>0&&b-1 in a}if(!a.jQuery){var c=function(a,b){return new c.fn.init(a,b)};c.isWindow=function(a){return null!=a&&a==a.window},c.type=function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?e[g.call(a)]||"object":typeof a},c.isArray=Array.isArray||function(a){return"array"===c.type(a)},c.isPlainObject=function(a){var b;if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!f.call(a,"constructor")&&!f.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(b in a);return void 0===b||f.call(a,b)},c.each=function(a,c,d){var e,f=0,g=a.length,h=b(a);if(d){if(h)for(;g>f&&(e=c.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=c.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=c.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=c.call(a[f],f,a[f]),e===!1)break;return a},c.data=function(a,b,e){if(void 0===e){var f=a[c.expando],g=f&&d[f];if(void 0===b)return g;if(g&&b in g)return g[b]}else if(void 0!==b){var f=a[c.expando]||(a[c.expando]=++c.uuid);return d[f]=d[f]||{},d[f][b]=e,e}},c.removeData=function(a,b){var e=a[c.expando],f=e&&d[e];f&&c.each(b,function(a,b){delete f[b]})},c.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"!=typeof h&&"function"!==c.type(h)&&(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(c.isPlainObject(d)||(b=c.isArray(d)))?(b?(b=!1,g=a&&c.isArray(a)?a:[]):g=a&&c.isPlainObject(a)?a:{},h[e]=c.extend(k,g,d)):void 0!==d&&(h[e]=d));return h},c.queue=function(a,d,e){function f(a,c){var d=c||[];return null!=a&&(b(Object(a))?!function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a}(d,"string"==typeof a?[a]:a):[].push.call(d,a)),d}if(a){d=(d||"fx")+"queue";var g=c.data(a,d);return e?(!g||c.isArray(e)?g=c.data(a,d,f(e)):g.push(e),g):g||[]}},c.dequeue=function(a,b){c.each(a.nodeType?[a]:a,function(a,d){b=b||"fx";var e=c.queue(d,b),f=e.shift();"inprogress"===f&&(f=e.shift()),f&&("fx"===b&&e.unshift("inprogress"),f.call(d,function(){c.dequeue(d,b)}))})},c.fn=c.prototype={init:function(a){if(a.nodeType)return this[0]=a,this;throw new Error("Not a DOM node.")},offset:function(){var b=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:b.top+(a.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:b.left+(a.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function a(){for(var a=this.offsetParent||document;a&&"html"===!a.nodeType.toLowerCase&&"static"===a.style.position;)a=a.offsetParent;return a||document}var b=this[0],a=a.apply(b),d=this.offset(),e=/^(?:body|html)$/i.test(a.nodeName)?{top:0,left:0}:c(a).offset();return d.top-=parseFloat(b.style.marginTop)||0,d.left-=parseFloat(b.style.marginLeft)||0,a.style&&(e.top+=parseFloat(a.style.borderTopWidth)||0,e.left+=parseFloat(a.style.borderLeftWidth)||0),{top:d.top-e.top,left:d.left-e.left}}};var d={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;
for(var e={},f=e.hasOwnProperty,g=e.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),i=0;i<h.length;i++)e["[object "+h[i]+"]"]=h[i].toLowerCase();c.fn.init.prototype=c.fn,a.Velocity={Utilities:c}}}(window),function(a){"object"==typeof b&&"object"==typeof b.exports?b.exports=a():"function"==typeof define&&define.amd?define(a):a()}(function(){return function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){return p.isWrapped(a)?a=[].slice.call(a):p.isNode(a)&&(a=[a]),a}function g(a){var b=m.data(a,"velocity");return null===b?d:b}function h(a){return function(b){return Math.round(b*a)*(1/a)}}function i(a,c,d,e){function f(a,b){return 1-3*b+3*a}function g(a,b){return 3*b-6*a}function h(a){return 3*a}function i(a,b,c){return((f(b,c)*a+g(b,c))*a+h(b))*a}function j(a,b,c){return 3*f(b,c)*a*a+2*g(b,c)*a+h(b)}function k(b,c){for(var e=0;p>e;++e){var f=j(c,a,d);if(0===f)return c;var g=i(c,a,d)-b;c-=g/f}return c}function l(){for(var b=0;t>b;++b)x[b]=i(b*u,a,d)}function m(b,c,e){var f,g,h=0;do g=c+(e-c)/2,f=i(g,a,d)-b,f>0?e=g:c=g;while(Math.abs(f)>r&&++h<s);return g}function n(b){for(var c=0,e=1,f=t-1;e!=f&&x[e]<=b;++e)c+=u;--e;var g=(b-x[e])/(x[e+1]-x[e]),h=c+g*u,i=j(h,a,d);return i>=q?k(b,h):0==i?h:m(b,c,c+u)}function o(){y=!0,(a!=c||d!=e)&&l()}var p=4,q=.001,r=1e-7,s=10,t=11,u=1/(t-1),v="Float32Array"in b;if(4!==arguments.length)return!1;for(var w=0;4>w;++w)if("number"!=typeof arguments[w]||isNaN(arguments[w])||!isFinite(arguments[w]))return!1;a=Math.min(a,1),d=Math.min(d,1),a=Math.max(a,0),d=Math.max(d,0);var x=v?new Float32Array(t):new Array(t),y=!1,z=function(b){return y||o(),a===c&&d===e?b:0===b?0:1===b?1:i(n(b),c,e)};z.getControlPoints=function(){return[{x:a,y:c},{x:d,y:e}]};var A="generateBezier("+[a,c,d,e]+")";return z.toString=function(){return A},z}function j(a,b){var c=a;return p.isString(a)?t.Easings[a]||(c=!1):c=p.isArray(a)&&1===a.length?h.apply(null,a):p.isArray(a)&&2===a.length?u.apply(null,a.concat([b])):p.isArray(a)&&4===a.length?i.apply(null,a):!1,c===!1&&(c=t.Easings[t.defaults.easing]?t.defaults.easing:s),c}function k(a){if(a)for(var b=(new Date).getTime(),c=0,e=t.State.calls.length;e>c;c++)if(t.State.calls[c]){var f=t.State.calls[c],h=f[0],i=f[2],j=f[3],n=!!j;j||(j=t.State.calls[c][3]=b-16);for(var o=Math.min((b-j)/i.duration,1),q=0,r=h.length;r>q;q++){var s=h[q],u=s.element;if(g(u)){var w=!1;if(i.display!==d&&null!==i.display&&"none"!==i.display){if("flex"===i.display){var y=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];m.each(y,function(a,b){v.setPropertyValue(u,"display",b)})}v.setPropertyValue(u,"display",i.display)}i.visibility!==d&&"hidden"!==i.visibility&&v.setPropertyValue(u,"visibility",i.visibility);for(var z in s)if("element"!==z){var A,B=s[z],C=p.isString(B.easing)?t.Easings[B.easing]:B.easing;if(1===o)A=B.endValue;else if(A=B.startValue+(B.endValue-B.startValue)*C(o),!n&&A===B.currentValue)continue;if(B.currentValue=A,v.Hooks.registered[z]){var D=v.Hooks.getRoot(z),E=g(u).rootPropertyValueCache[D];E&&(B.rootPropertyValue=E)}var F=v.setPropertyValue(u,z,B.currentValue+(0===parseFloat(A)?"":B.unitType),B.rootPropertyValue,B.scrollData);v.Hooks.registered[z]&&(g(u).rootPropertyValueCache[D]=v.Normalizations.registered[D]?v.Normalizations.registered[D]("extract",null,F[1]):F[1]),"transform"===F[0]&&(w=!0)}i.mobileHA&&g(u).transformCache.translate3d===d&&(g(u).transformCache.translate3d="(0px, 0px, 0px)",w=!0),w&&v.flushTransformCache(u)}}i.display!==d&&"none"!==i.display&&(t.State.calls[c][2].display=!1),i.visibility!==d&&"hidden"!==i.visibility&&(t.State.calls[c][2].visibility=!1),i.progress&&i.progress.call(f[1],f[1],o,Math.max(0,j+i.duration-b),j),1===o&&l(c)}t.State.isTicking&&x(k)}function l(a,b){if(!t.State.calls[a])return!1;for(var c=t.State.calls[a][0],e=t.State.calls[a][1],f=t.State.calls[a][2],h=t.State.calls[a][4],i=!1,j=0,k=c.length;k>j;j++){var l=c[j].element;if(b||f.loop||("none"===f.display&&v.setPropertyValue(l,"display",f.display),"hidden"===f.visibility&&v.setPropertyValue(l,"visibility",f.visibility)),f.loop!==!0&&(m.queue(l)[1]===d||!/\.velocityQueueEntryFlag/i.test(m.queue(l)[1]))&&g(l)){g(l).isAnimating=!1,g(l).rootPropertyValueCache={};var n=!1;m.each(v.Lists.transforms3D,function(a,b){var c=/^scale/.test(b)?1:0,e=g(l).transformCache[b];g(l).transformCache[b]!==d&&new RegExp("^\\("+c+"[^.]").test(e)&&(n=!0,delete g(l).transformCache[b])}),f.mobileHA&&(n=!0,delete g(l).transformCache.translate3d),n&&v.flushTransformCache(l),v.Values.removeClass(l,"velocity-animating")}if(!b&&f.complete&&!f.loop&&j===k-1)try{f.complete.call(e,e)}catch(o){setTimeout(function(){throw o},1)}h&&f.loop!==!0&&h(e),f.loop!==!0||b||(m.each(g(l).tweensContainer,function(a,b){/^rotate/.test(a)&&360===parseFloat(b.endValue)&&(b.endValue=0,b.startValue=360)}),t(l,"reverse",{loop:!0,delay:f.delay})),f.queue!==!1&&m.dequeue(l,f.queue)}t.State.calls[a]=!1;for(var p=0,q=t.State.calls.length;q>p;p++)if(t.State.calls[p]!==!1){i=!0;break}i===!1&&(t.State.isTicking=!1,delete t.State.calls,t.State.calls=[])}var m,n=function(){if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p={isString:function(a){return"string"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isNode:function(a){return a&&a.nodeType},isNodeList:function(a){return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},isWrapped:function(a){return a&&(a.jquery||b.Zepto&&b.Zepto.zepto.isZ(a))},isSVG:function(a){return b.SVGElement&&a instanceof b.SVGElement},isEmptyObject:function(a){for(var b in a)return!1;return!0}},q=!1;if(a.fn&&a.fn.jquery?(m=a,q=!0):m=b.Velocity.Utilities,8>=n&&!q)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=n)return void(jQuery.fn.velocity=jQuery.fn.animate);var r=400,s="swing",t={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:m,Redirects:{},Easings:{},Promise:b.Promise,defaults:{queue:"",duration:r,easing:s,begin:d,complete:d,progress:d,display:d,visibility:d,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(a){m.data(a,"velocity",{isSVG:p.isSVG(a),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:1,patch:0},debug:!1};b.pageYOffset!==d?(t.State.scrollAnchor=b,t.State.scrollPropertyLeft="pageXOffset",t.State.scrollPropertyTop="pageYOffset"):(t.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,t.State.scrollPropertyLeft="scrollLeft",t.State.scrollPropertyTop="scrollTop");var u=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(a=parseFloat(a)||500,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*m):g=m;;)if(h=c(h||i,g),j.push(1+h.x),k+=16,!(Math.abs(h.x)>l&&Math.abs(h.v)>l))break;return f?function(a){return j[a*(j.length-1)|0]}:k}}();t.Easings={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}},m.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(a,b){t.Easings[b[0]]=i.apply(null,b[1])});var v=t.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var a=0;a<v.Lists.colors.length;a++){var b="color"===v.Lists.colors[a]?"0 0 0 1":"255 255 255 1";v.Hooks.templates[v.Lists.colors[a]]=["Red Green Blue Alpha",b]}var c,d,e;if(n)for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");var f=d[1].match(v.RegEx.valueSplit);"Color"===e[0]&&(e.push(e.shift()),f.push(f.shift()),v.Hooks.templates[c]=[e.join(" "),f.join(" ")])}for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");for(var a in e){var g=c+e[a],h=a;v.Hooks.registered[g]=[c,h]}}},getRoot:function(a){var b=v.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return v.RegEx.valueUnwrap.test(b)&&(b=b.match(v.RegEx.valueUnwrap)[1]),v.Values.isCSSNullValue(b)&&(b=v.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=v.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=v.Hooks.cleanRootPropertyValue(d,b),b.toString().match(v.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=v.Hooks.registered[a];if(d){var e,f,g=d[0],h=d[1];return c=v.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(v.RegEx.valueSplit),e[h]=b,f=e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return v.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(v.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},blur:function(a,b,c){switch(a){case"name":return"-webkit-filter";case"extract":var d=parseFloat(c);if(!d&&0!==d){var e=c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);d=e?e[1]:0}return d;case"inject":return parseFloat(c)?"blur("+c+")":"none"}},opacity:function(a,b,c){if(8>=n)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":return c;case"inject":return c}}},register:function(){9>=n||t.State.isGingerbread||(v.Lists.transformsBase=v.Lists.transformsBase.concat(v.Lists.transforms3D));for(var a=0;a<v.Lists.transformsBase.length;a++)!function(){var b=v.Lists.transformsBase[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return"transform";case"extract":return g(c)===d||g(c).transformCache[b]===d?/^scale/i.test(b)?1:0:g(c).transformCache[b].replace(/[()]/g,"");case"inject":var f=!1;switch(b.substr(0,b.length-1)){case"translate":f=!/(%|px|em|rem|vw|vh|\d)$/i.test(e);break;case"scal":case"scale":t.State.isAndroid&&g(c).transformCache[b]===d&&1>e&&(e=1),f=!/(\d)$/i.test(e);break;case"skew":f=!/(deg|\d)$/i.test(e);break;case"rotate":f=!/(deg|\d)$/i.test(e)}return f||(g(c).transformCache[b]="("+e+")"),g(c).transformCache[b]}}}();for(var a=0;a<v.Lists.colors.length;a++)!function(){var b=v.Lists.colors[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return b;case"extract":var f;if(v.RegEx.wrappedValueAlreadyExtracted.test(e))f=e;else{var g,h={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(e)?g=h[e]!==d?h[e]:h.black:v.RegEx.isHex.test(e)?g="rgb("+v.Values.hexToRgb(e).join(" ")+")":/^rgba?\(/i.test(e)||(g=h.black),f=(g||e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=n||3!==f.split(" ").length||(f+=" 1"),f;case"inject":return 8>=n?4===e.split(" ").length&&(e=e.split(/\s+/).slice(0,3).join(" ")):3===e.split(" ").length&&(e+=" 1"),(8>=n?"rgb":"rgba")+"("+e.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},SVGAttribute:function(a){var b="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(n||t.State.isAndroid&&!t.State.isChrome)&&(b+="|transform"),new RegExp("^("+b+")$","i").test(a)},prefixCheck:function(a){if(t.State.prefixMatches[a])return[t.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;d>c;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),p.isString(t.State.prefixElement.style[e]))return t.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{hexToRgb:function(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:[0,0,0]},isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a)?"":"px"},getDisplayType:function(a){var b=a&&a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":"block"},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=(a.className.length?" ":"")+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.toString().replace(new RegExp("(^|\\s)"+b.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(a,c,e,f){function h(a,c){function e(){j&&v.setPropertyValue(a,"display","none")}var i=0;if(8>=n)i=m.css(a,c);else{var j=!1;if(/^(width|height)$/.test(c)&&0===v.getPropertyValue(a,"display")&&(j=!0,v.setPropertyValue(a,"display",v.Values.getDisplayType(a))),!f){if("height"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var k=a.offsetHeight-(parseFloat(v.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(v.getPropertyValue(a,"paddingBottom"))||0);return e(),k}if("width"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var l=a.offsetWidth-(parseFloat(v.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(v.getPropertyValue(a,"paddingRight"))||0);return e(),l}}var o;o=g(a)===d?b.getComputedStyle(a,null):g(a).computedStyle?g(a).computedStyle:g(a).computedStyle=b.getComputedStyle(a,null),(n||t.State.isFirefox)&&"borderColor"===c&&(c="borderTopColor"),i=9===n&&"filter"===c?o.getPropertyValue(c):o[c],(""===i||null===i)&&(i=a.style[c]),e()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(c)){var p=h(a,"position");("fixed"===p||"absolute"===p&&/top|left/i.test(c))&&(i=m(a).position()[c]+"px")}return i}var i;if(v.Hooks.registered[c]){var j=c,k=v.Hooks.getRoot(j);e===d&&(e=v.getPropertyValue(a,v.Names.prefixCheck(k)[0])),v.Normalizations.registered[k]&&(e=v.Normalizations.registered[k]("extract",a,e)),i=v.Hooks.extractValue(j,e)}else if(v.Normalizations.registered[c]){var l,o;l=v.Normalizations.registered[c]("name",a),"transform"!==l&&(o=h(a,v.Names.prefixCheck(l)[0]),v.Values.isCSSNullValue(o)&&v.Hooks.templates[c]&&(o=v.Hooks.templates[c][1])),i=v.Normalizations.registered[c]("extract",a,o)}return/^[\d-]/.test(i)||(i=g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c)?/^(height|width)$/i.test(c)?a.getBBox()[c]:a.getAttribute(c):h(a,v.Names.prefixCheck(c)[0])),v.Values.isCSSNullValue(i)&&(i=0),t.debug>=2&&console.log("Get "+c+": "+i),i},setPropertyValue:function(a,c,d,e,f){var h=c;if("scroll"===c)f.container?f.container["scroll"+f.direction]=d:"Left"===f.direction?b.scrollTo(d,f.alternateValue):b.scrollTo(f.alternateValue,d);else if(v.Normalizations.registered[c]&&"transform"===v.Normalizations.registered[c]("name",a))v.Normalizations.registered[c]("inject",a,d),h="transform",d=g(a).transformCache[c];else{if(v.Hooks.registered[c]){var i=c,j=v.Hooks.getRoot(c);e=e||v.getPropertyValue(a,j),d=v.Hooks.injectValue(i,d,e),c=j}if(v.Normalizations.registered[c]&&(d=v.Normalizations.registered[c]("inject",a,d),c=v.Normalizations.registered[c]("name",a)),h=v.Names.prefixCheck(c)[0],8>=n)try{a.style[h]=d}catch(k){t.debug&&console.log("Browser does not support ["+d+"] for ["+h+"]")}else g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c)?a.setAttribute(c,d):a.style[h]=d;t.debug>=2&&console.log("Set "+c+" ("+h+"): "+d)}return[h,d]},flushTransformCache:function(a){function b(b){return parseFloat(v.getPropertyValue(a,b))}var c="";if((n||t.State.isAndroid&&!t.State.isChrome)&&g(a).isSVG){var d={translate:[b("translateX"),b("translateY")],skewX:[b("skewX")],skewY:[b("skewY")],scale:1!==b("scale")?[b("scale"),b("scale")]:[b("scaleX"),b("scaleY")],rotate:[b("rotateZ"),0,0]};m.each(g(a).transformCache,function(a){/^translate/i.test(a)?a="translate":/^scale/i.test(a)?a="scale":/^rotate/i.test(a)&&(a="rotate"),d[a]&&(c+=a+"("+d[a].join(" ")+") ",delete d[a])})}else{var e,f;m.each(g(a).transformCache,function(b){return e=g(a).transformCache[b],"transformPerspective"===b?(f=e,!0):(9===n&&"rotateZ"===b&&(b="rotate"),void(c+=b+e+" "))}),f&&(c="perspective"+f+" "+c)}v.setPropertyValue(a,"transform",c)}};v.Hooks.register(),v.Normalizations.register(),t.hook=function(a,b,c){var e=d;return a=f(a),m.each(a,function(a,f){if(g(f)===d&&t.init(f),c===d)e===d&&(e=t.CSS.getPropertyValue(f,b));else{var h=t.CSS.setPropertyValue(f,b,c);"transform"===h[0]&&t.CSS.flushTransformCache(f),e=h}}),e};var w=function(){function a(){return i?C.promise||null:n}function h(){function a(){function a(a,b){var c=d,e=d,f=d;return p.isArray(a)?(c=a[0],!p.isArray(a[1])&&/^[\d-]/.test(a[1])||p.isFunction(a[1])||v.RegEx.isHex.test(a[1])?f=a[1]:(p.isString(a[1])&&!v.RegEx.isHex.test(a[1])||p.isArray(a[1]))&&(e=b?a[1]:j(a[1],i.duration),a[2]!==d&&(f=a[2]))):c=a,b||(e=e||i.easing),p.isFunction(c)&&(c=c.call(h,z,y)),p.isFunction(f)&&(f=f.call(h,z,y)),[c||0,e,f]}function n(a,b){var c,d;return d=(b||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=v.Values.getUnitType(a)),[d,c]}function o(){var a={myParent:h.parentNode||c.body,position:v.getPropertyValue(h,"position"),fontSize:v.getPropertyValue(h,"fontSize")},d=a.position===J.lastPosition&&a.myParent===J.lastParent,e=a.fontSize===J.lastFontSize;J.lastParent=a.myParent,J.lastPosition=a.position,J.lastFontSize=a.fontSize;var f=100,i={};if(e&&d)i.emToPx=J.lastEmToPx,i.percentToPxWidth=J.lastPercentToPxWidth,i.percentToPxHeight=J.lastPercentToPxHeight;else{var j=g(h).isSVG?c.createElementNS("http://www.w3.org/2000/svg","rect"):c.createElement("div");t.init(j),a.myParent.appendChild(j),m.each(["overflow","overflowX","overflowY"],function(a,b){t.CSS.setPropertyValue(j,b,"hidden")}),t.CSS.setPropertyValue(j,"position",a.position),t.CSS.setPropertyValue(j,"fontSize",a.fontSize),t.CSS.setPropertyValue(j,"boxSizing","content-box"),m.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(a,b){t.CSS.setPropertyValue(j,b,f+"%")}),t.CSS.setPropertyValue(j,"paddingLeft",f+"em"),i.percentToPxWidth=J.lastPercentToPxWidth=(parseFloat(v.getPropertyValue(j,"width",null,!0))||1)/f,i.percentToPxHeight=J.lastPercentToPxHeight=(parseFloat(v.getPropertyValue(j,"height",null,!0))||1)/f,i.emToPx=J.lastEmToPx=(parseFloat(v.getPropertyValue(j,"paddingLeft"))||1)/f,a.myParent.removeChild(j)}return null===J.remToPx&&(J.remToPx=parseFloat(v.getPropertyValue(c.body,"fontSize"))||16),null===J.vwToPx&&(J.vwToPx=parseFloat(b.innerWidth)/100,J.vhToPx=parseFloat(b.innerHeight)/100),i.remToPx=J.remToPx,i.vwToPx=J.vwToPx,i.vhToPx=J.vhToPx,t.debug>=1&&console.log("Unit ratios: "+JSON.stringify(i),h),i}if(i.begin&&0===z)try{i.begin.call(q,q)}catch(r){setTimeout(function(){throw r},1)}if("scroll"===D){var w,x,A,B=/^x$/i.test(i.axis)?"Left":"Top",E=parseFloat(i.offset)||0;i.container?p.isWrapped(i.container)||p.isNode(i.container)?(i.container=i.container[0]||i.container,w=i.container["scroll"+B],A=w+m(h).position()[B.toLowerCase()]+E):i.container=null:(w=t.State.scrollAnchor[t.State["scrollProperty"+B]],x=t.State.scrollAnchor[t.State["scrollProperty"+("Left"===B?"Top":"Left")]],A=m(h).offset()[B.toLowerCase()]+E),l={scroll:{rootPropertyValue:!1,startValue:w,currentValue:w,endValue:A,unitType:"",easing:i.easing,scrollData:{container:i.container,direction:B,alternateValue:x}},element:h},t.debug&&console.log("tweensContainer (scroll): ",l.scroll,h)}else if("reverse"===D){if(!g(h).tweensContainer)return void m.dequeue(h,i.queue);"none"===g(h).opts.display&&(g(h).opts.display="auto"),"hidden"===g(h).opts.visibility&&(g(h).opts.visibility="visible"),g(h).opts.loop=!1,g(h).opts.begin=null,g(h).opts.complete=null,u.easing||delete i.easing,u.duration||delete i.duration,i=m.extend({},g(h).opts,i);var F=m.extend(!0,{},g(h).tweensContainer);for(var G in F)if("element"!==G){var H=F[G].startValue;F[G].startValue=F[G].currentValue=F[G].endValue,F[G].endValue=H,p.isEmptyObject(u)||(F[G].easing=i.easing),t.debug&&console.log("reverse tweensContainer ("+G+"): "+JSON.stringify(F[G]),h)}l=F}else if("start"===D){var F;g(h).tweensContainer&&g(h).isAnimating===!0&&(F=g(h).tweensContainer),m.each(s,function(b,c){if(RegExp("^"+v.Lists.colors.join("$|^")+"$").test(b)){var e=a(c,!0),f=e[0],g=e[1],h=e[2];if(v.RegEx.isHex.test(f)){for(var i=["Red","Green","Blue"],j=v.Values.hexToRgb(f),k=h?v.Values.hexToRgb(h):d,l=0;l<i.length;l++){var m=[j[l]];g&&m.push(g),k!==d&&m.push(k[l]),s[b+i[l]]=m}delete s[b]}}});for(var I in s){var L=a(s[I]),M=L[0],N=L[1],O=L[2];I=v.Names.camelCase(I);var P=v.Hooks.getRoot(I),Q=!1;if(g(h).isSVG||v.Names.prefixCheck(P)[1]!==!1||v.Normalizations.registered[P]!==d){(i.display!==d&&null!==i.display&&"none"!==i.display||i.visibility!==d&&"hidden"!==i.visibility)&&/opacity|filter/.test(I)&&!O&&0!==M&&(O=0),i._cacheValues&&F&&F[I]?(O===d&&(O=F[I].endValue+F[I].unitType),Q=g(h).rootPropertyValueCache[P]):v.Hooks.registered[I]?O===d?(Q=v.getPropertyValue(h,P),O=v.getPropertyValue(h,I,Q)):Q=v.Hooks.templates[P][1]:O===d&&(O=v.getPropertyValue(h,I));var R,S,T,U=!1;if(R=n(I,O),O=R[0],T=R[1],R=n(I,M),M=R[0].replace(/^([+-\/*])=/,function(a,b){return U=b,""}),S=R[1],O=parseFloat(O)||0,M=parseFloat(M)||0,"%"===S&&(/^(fontSize|lineHeight)$/.test(I)?(M/=100,S="em"):/^scale/.test(I)?(M/=100,S=""):/(Red|Green|Blue)$/i.test(I)&&(M=M/100*255,S="")),/[\/*]/.test(U))S=T;else if(T!==S&&0!==O)if(0===M)S=T;else{f=f||o();var V=/margin|padding|left|right|width|text|word|letter/i.test(I)||/X$/.test(I)||"x"===I?"x":"y";switch(T){case"%":O*="x"===V?f.percentToPxWidth:f.percentToPxHeight;break;case"px":break;default:O*=f[T+"ToPx"]}switch(S){case"%":O*=1/("x"===V?f.percentToPxWidth:f.percentToPxHeight);break;case"px":break;default:O*=1/f[S+"ToPx"]}}switch(U){case"+":M=O+M;break;case"-":M=O-M;break;case"*":M=O*M;break;case"/":M=O/M}l[I]={rootPropertyValue:Q,startValue:O,currentValue:O,endValue:M,unitType:S,easing:N},t.debug&&console.log("tweensContainer ("+I+"): "+JSON.stringify(l[I]),h)}else t.debug&&console.log("Skipping ["+P+"] due to a lack of browser support.")}l.element=h}l.element&&(v.Values.addClass(h,"velocity-animating"),K.push(l),""===i.queue&&(g(h).tweensContainer=l,g(h).opts=i),g(h).isAnimating=!0,z===y-1?(t.State.calls.length>1e4&&(t.State.calls=e(t.State.calls)),t.State.calls.push([K,q,i,null,C.resolver]),t.State.isTicking===!1&&(t.State.isTicking=!0,k())):z++)}var f,h=this,i=m.extend({},t.defaults,u),l={};switch(g(h)===d&&t.init(h),parseFloat(i.delay)&&i.queue!==!1&&m.queue(h,i.queue,function(a){t.velocityQueueEntryFlag=!0,g(h).delayTimer={setTimeout:setTimeout(a,parseFloat(i.delay)),next:a}}),i.duration.toString().toLowerCase()){case"fast":i.duration=200;break;case"normal":i.duration=r;break;case"slow":i.duration=600;break;default:i.duration=parseFloat(i.duration)||1}t.mock!==!1&&(t.mock===!0?i.duration=i.delay=1:(i.duration*=parseFloat(t.mock)||1,i.delay*=parseFloat(t.mock)||1)),i.easing=j(i.easing,i.duration),i.begin&&!p.isFunction(i.begin)&&(i.begin=null),i.progress&&!p.isFunction(i.progress)&&(i.progress=null),i.complete&&!p.isFunction(i.complete)&&(i.complete=null),i.display!==d&&null!==i.display&&(i.display=i.display.toString().toLowerCase(),"auto"===i.display&&(i.display=t.CSS.Values.getDisplayType(h))),i.visibility!==d&&null!==i.visibility&&(i.visibility=i.visibility.toString().toLowerCase()),i.mobileHA=i.mobileHA&&t.State.isMobile&&!t.State.isGingerbread,i.queue===!1?i.delay?setTimeout(a,i.delay):a():m.queue(h,i.queue,function(b,c){return c===!0?(C.promise&&C.resolver(q),!0):(t.velocityQueueEntryFlag=!0,void a(b))}),""!==i.queue&&"fx"!==i.queue||"inprogress"===m.queue(h)[0]||m.dequeue(h)}var i,n,o,q,s,u,x=arguments[0]&&(m.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||p.isString(arguments[0].properties));if(p.isWrapped(this)?(i=!1,o=0,q=this,n=this):(i=!0,o=1,q=x?arguments[0].elements:arguments[0]),q=f(q)){x?(s=arguments[0].properties,u=arguments[0].options):(s=arguments[o],u=arguments[o+1]);var y=q.length,z=0;if("stop"!==s&&!m.isPlainObject(u)){var A=o+1;u={};for(var B=A;B<arguments.length;B++)p.isArray(arguments[B])||!/^(fast|normal|slow)$/i.test(arguments[B])&&!/^\d/.test(arguments[B])?p.isString(arguments[B])||p.isArray(arguments[B])?u.easing=arguments[B]:p.isFunction(arguments[B])&&(u.complete=arguments[B]):u.duration=arguments[B]}var C={promise:null,resolver:null,rejecter:null};i&&t.Promise&&(C.promise=new t.Promise(function(a,b){C.resolver=a,C.rejecter=b}));var D;switch(s){case"scroll":D="scroll";break;case"reverse":D="reverse";break;case"stop":m.each(q,function(a,b){g(b)&&g(b).delayTimer&&(clearTimeout(g(b).delayTimer.setTimeout),g(b).delayTimer.next&&g(b).delayTimer.next(),delete g(b).delayTimer)});var E=[];return m.each(t.State.calls,function(a,b){b&&m.each(b[1],function(c,e){var f=p.isString(u)?u:"";return u!==d&&b[2].queue!==f?!0:void m.each(q,function(b,c){c===e&&(u!==d&&(m.each(m.queue(c,f),function(a,b){p.isFunction(b)&&b(null,!0)}),m.queue(c,f,[])),g(c)&&""===f&&m.each(g(c).tweensContainer,function(a,b){b.endValue=b.currentValue}),E.push(a))})})}),m.each(E,function(a,b){l(b,!0)}),C.promise&&C.resolver(q),a();default:if(!m.isPlainObject(s)||p.isEmptyObject(s)){if(p.isString(s)&&t.Redirects[s]){var F=m.extend({},u),G=F.duration,H=F.delay||0;return F.backwards===!0&&(q=m.extend(!0,[],q).reverse()),m.each(q,function(a,b){parseFloat(F.stagger)?F.delay=H+parseFloat(F.stagger)*a:p.isFunction(F.stagger)&&(F.delay=H+F.stagger.call(b,a,y)),F.drag&&(F.duration=parseFloat(G)||(/^(callout|transition)/.test(s)?1e3:r),F.duration=Math.max(F.duration*(F.backwards?1-a/y:(a+1)/y),.75*F.duration,200)),t.Redirects[s].call(b,b,F||{},a,y,q,C.promise?C:d)}),a()}var I="Velocity: First argument ("+s+") was not a property map, a known action, or a registered redirect. Aborting.";return C.promise?C.rejecter(new Error(I)):console.log(I),a()}D="start"}var J={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},K=[];m.each(q,function(a,b){p.isNode(b)&&h.call(b)});var L,F=m.extend({},t.defaults,u);if(F.loop=parseInt(F.loop),L=2*F.loop-1,F.loop)for(var M=0;L>M;M++){var N={delay:F.delay,progress:F.progress};M===L-1&&(N.display=F.display,N.visibility=F.visibility,N.complete=F.complete),w(q,"reverse",N)}return a()}};t=m.extend(w,t),t.animate=w;var x=b.requestAnimationFrame||o;return t.State.isMobile||c.hidden===d||c.addEventListener("visibilitychange",function(){c.hidden?(x=function(a){return setTimeout(function(){a(!0)},16)},k()):x=b.requestAnimationFrame||o}),a.Velocity=t,a!==b&&(a.fn.velocity=w,a.fn.velocity.defaults=t.defaults),m.each(["Down","Up"],function(a,b){t.Redirects["slide"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j=i.begin,k=i.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},n={};i.display===d&&(i.display="Down"===b?"inline"===t.CSS.Values.getDisplayType(a)?"inline-block":"block":"none"),i.begin=function(){j&&j.call(g,g);for(var c in l){n[c]=a.style[c];var d=t.CSS.getPropertyValue(a,c);l[c]="Down"===b?[d,0]:[0,d]}n.overflow=a.style.overflow,a.style.overflow="hidden"},i.complete=function(){for(var b in n)a.style[b]=n[b];k&&k.call(g,g),h&&h.resolver(g)},t(a,l,i)}}),m.each(["In","Out"],function(a,b){t.Redirects["fade"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j={opacity:"In"===b?1:0},k=i.complete;i.complete=e!==f-1?i.begin=null:function(){k&&k.call(g,g),h&&h.resolver(g)},i.display===d&&(i.display="In"===b?"auto":"none"),t(this,j,i)}}),t}(window.jQuery||window.Zepto||window,window,document)})},{}]},{},[9]);